function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
var MA=Object.defineProperty;var LA=(t,e,n)=>e in t?MA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var C=(t,e,n)=>(LA(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function mm(t,e){const n=new Set(t.split(","));return e?s=>n.has(s.toLowerCase()):s=>n.has(s)}const nt={},Fo=[],Hn=()=>{},NA=()=>!1,rd=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),_m=t=>t.startsWith("onUpdate:"),Ot=Object.assign,ym=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},VA=Object.prototype.hasOwnProperty,Ue=(t,e)=>VA.call(t,e),re=Array.isArray,Bo=t=>cl(t)==="[object Map]",od=t=>cl(t)==="[object Set]",lb=t=>cl(t)==="[object Date]",Se=t=>typeof t=="function",Ct=t=>typeof t=="string",Ji=t=>typeof t=="symbol",Xe=t=>t!==null&&typeof t=="object",GE=t=>(Xe(t)||Se(t))&&Se(t.then)&&Se(t.catch),KE=Object.prototype.toString,cl=t=>KE.call(t),FA=t=>cl(t).slice(8,-1),YE=t=>cl(t)==="[object Object]",bm=t=>Ct(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ic=mm(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ad=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},BA=/-(\w)/g,Fs=ad(t=>t.replace(BA,(e,n)=>n?n.toUpperCase():"")),UA=/\B([A-Z])/g,ao=ad(t=>t.replace(UA,"-$1").toLowerCase()),cd=ad(t=>t.charAt(0).toUpperCase()+t.slice(1)),Mu=ad(t=>t?`on${cd(t)}`:""),Zi=(t,e)=>!Object.is(t,e),Lu=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},fh=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},$p=t=>{const e=parseFloat(t);return isNaN(e)?t:e},$A=t=>{const e=Ct(t)?Number(t):NaN;return isNaN(e)?t:e};let ub;const QE=()=>ub||(ub=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ll(t){if(re(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],i=Ct(s)?WA(s):ll(s);if(i)for(const r in i)e[r]=i[r]}return e}else if(Ct(t)||Xe(t))return t}const HA=/;(?![^(]*\))/g,zA=/:([^]+)/,jA=/\/\*[^]*?\*\//g;function WA(t){const e={};return t.replace(jA,"").split(HA).forEach(n=>{if(n){const s=n.split(zA);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function St(t){let e="";if(Ct(t))e=t;else if(re(t))for(let n=0;n<t.length;n++){const s=St(t[n]);s&&(e+=s+" ")}else if(Xe(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const qA="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",GA=mm(qA);function XE(t){return!!t||t===""}function KA(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=ld(t[s],e[s]);return n}function ld(t,e){if(t===e)return!0;let n=lb(t),s=lb(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=Ji(t),s=Ji(e),n||s)return t===e;if(n=re(t),s=re(e),n||s)return n&&s?KA(t,e):!1;if(n=Xe(t),s=Xe(e),n||s){if(!n||!s)return!1;const i=Object.keys(t).length,r=Object.keys(e).length;if(i!==r)return!1;for(const o in t){const a=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(a&&!c||!a&&c||!ld(t[o],e[o]))return!1}}return String(t)===String(e)}function JE(t,e){return t.findIndex(n=>ld(n,e))}const xe=t=>Ct(t)?t:t==null?"":re(t)||Xe(t)&&(t.toString===KE||!Se(t.toString))?JSON.stringify(t,ZE,2):String(t),ZE=(t,e)=>e&&e.__v_isRef?ZE(t,e.value):Bo(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,i],r)=>(n[Vf(s,r)+" =>"]=i,n),{})}:od(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Vf(n))}:Ji(e)?Vf(e):Xe(e)&&!re(e)&&!YE(e)?String(e):e,Vf=(t,e="")=>{var n;return Ji(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Jn;class YA{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Jn,!e&&Jn&&(this.index=(Jn.scopes||(Jn.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=Jn;try{return Jn=this,e()}finally{Jn=n}}}on(){Jn=this}off(){Jn=this.parent}stop(e){if(this._active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function QA(t,e=Jn){e&&e.active&&e.effects.push(t)}function XA(){return Jn}let Ur;class vm{constructor(e,n,s,i){this.fn=e,this.trigger=n,this.scheduler=s,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,QA(this,i)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,co();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(JA(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),lo()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=Wi,n=Ur;try{return Wi=!0,Ur=this,this._runnings++,hb(this),this.fn()}finally{db(this),this._runnings--,Ur=n,Wi=e}}stop(){var e;this.active&&(hb(this),db(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function JA(t){return t.value}function hb(t){t._trackId++,t._depsLength=0}function db(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)eT(t.deps[e],t);t.deps.length=t._depsLength}}function eT(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let Wi=!0,Hp=0;const tT=[];function co(){tT.push(Wi),Wi=!1}function lo(){const t=tT.pop();Wi=t===void 0?!0:t}function wm(){Hp++}function Em(){for(Hp--;!Hp&&zp.length;)zp.shift()()}function nT(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const s=t.deps[t._depsLength];s!==e?(s&&eT(s,t),t.deps[t._depsLength++]=e):t._depsLength++}}const zp=[];function sT(t,e,n){wm();for(const s of t.keys()){let i;s._dirtyLevel<e&&(i??(i=t.get(s)===s._trackId))&&(s._shouldSchedule||(s._shouldSchedule=s._dirtyLevel===0),s._dirtyLevel=e),s._shouldSchedule&&(i??(i=t.get(s)===s._trackId))&&(s.trigger(),(!s._runnings||s.allowRecurse)&&s._dirtyLevel!==2&&(s._shouldSchedule=!1,s.scheduler&&zp.push(s.scheduler)))}Em()}const iT=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},jp=new WeakMap,$r=Symbol(""),Wp=Symbol("");function Rn(t,e,n){if(Wi&&Ur){let s=jp.get(t);s||jp.set(t,s=new Map);let i=s.get(n);i||s.set(n,i=iT(()=>s.delete(n))),nT(Ur,i)}}function ii(t,e,n,s,i,r){const o=jp.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&re(t)){const c=Number(s);o.forEach((l,u)=>{(u==="length"||!Ji(u)&&u>=c)&&a.push(l)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":re(t)?bm(n)&&a.push(o.get("length")):(a.push(o.get($r)),Bo(t)&&a.push(o.get(Wp)));break;case"delete":re(t)||(a.push(o.get($r)),Bo(t)&&a.push(o.get(Wp)));break;case"set":Bo(t)&&a.push(o.get($r));break}wm();for(const c of a)c&&sT(c,4);Em()}const ZA=mm("__proto__,__v_isRef,__isVue"),rT=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Ji)),fb=ek();function ek(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const s=Fe(this);for(let r=0,o=this.length;r<o;r++)Rn(s,"get",r+"");const i=s[e](...n);return i===-1||i===!1?s[e](...n.map(Fe)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){co(),wm();const s=Fe(this)[e].apply(this,n);return Em(),lo(),s}}),t}function tk(t){const e=Fe(this);return Rn(e,"has",t),e.hasOwnProperty(t)}class oT{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){const i=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return r;if(n==="__v_raw")return s===(i?r?pk:uT:r?lT:cT).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=re(e);if(!i){if(o&&Ue(fb,n))return Reflect.get(fb,n,s);if(n==="hasOwnProperty")return tk}const a=Reflect.get(e,n,s);return(Ji(n)?rT.has(n):ZA(n))||(i||Rn(e,"get",n),r)?a:xn(a)?o&&bm(n)?a:a.value:Xe(a)?i?dT(a):hd(a):a}}class aT extends oT{constructor(e=!1){super(!1,e)}set(e,n,s,i){let r=e[n];if(!this._isShallow){const c=Yo(r);if(!ph(s)&&!Yo(s)&&(r=Fe(r),s=Fe(s)),!re(e)&&xn(r)&&!xn(s))return c?!1:(r.value=s,!0)}const o=re(e)&&bm(n)?Number(n)<e.length:Ue(e,n),a=Reflect.set(e,n,s,i);return e===Fe(i)&&(o?Zi(s,r)&&ii(e,"set",n,s):ii(e,"add",n,s)),a}deleteProperty(e,n){const s=Ue(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&s&&ii(e,"delete",n,void 0),i}has(e,n){const s=Reflect.has(e,n);return(!Ji(n)||!rT.has(n))&&Rn(e,"has",n),s}ownKeys(e){return Rn(e,"iterate",re(e)?"length":$r),Reflect.ownKeys(e)}}class nk extends oT{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const sk=new aT,ik=new nk,rk=new aT(!0),Tm=t=>t,ud=t=>Reflect.getPrototypeOf(t);function Jl(t,e,n=!1,s=!1){t=t.__v_raw;const i=Fe(t),r=Fe(e);n||(Zi(e,r)&&Rn(i,"get",e),Rn(i,"get",r));const{has:o}=ud(i),a=s?Tm:n?Rm:Rc;if(o.call(i,e))return a(t.get(e));if(o.call(i,r))return a(t.get(r));t!==i&&t.get(e)}function Zl(t,e=!1){const n=this.__v_raw,s=Fe(n),i=Fe(t);return e||(Zi(t,i)&&Rn(s,"has",t),Rn(s,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function eu(t,e=!1){return t=t.__v_raw,!e&&Rn(Fe(t),"iterate",$r),Reflect.get(t,"size",t)}function pb(t){t=Fe(t);const e=Fe(this);return ud(e).has.call(e,t)||(e.add(t),ii(e,"add",t,t)),this}function gb(t,e){e=Fe(e);const n=Fe(this),{has:s,get:i}=ud(n);let r=s.call(n,t);r||(t=Fe(t),r=s.call(n,t));const o=i.call(n,t);return n.set(t,e),r?Zi(e,o)&&ii(n,"set",t,e):ii(n,"add",t,e),this}function mb(t){const e=Fe(this),{has:n,get:s}=ud(e);let i=n.call(e,t);i||(t=Fe(t),i=n.call(e,t)),s&&s.call(e,t);const r=e.delete(t);return i&&ii(e,"delete",t,void 0),r}function _b(){const t=Fe(this),e=t.size!==0,n=t.clear();return e&&ii(t,"clear",void 0,void 0),n}function tu(t,e){return function(s,i){const r=this,o=r.__v_raw,a=Fe(o),c=e?Tm:t?Rm:Rc;return!t&&Rn(a,"iterate",$r),o.forEach((l,u)=>s.call(i,c(l),c(u),r))}}function nu(t,e,n){return function(...s){const i=this.__v_raw,r=Fe(i),o=Bo(r),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,l=i[t](...s),u=n?Tm:e?Rm:Rc;return!e&&Rn(r,"iterate",c?Wp:$r),{next(){const{value:h,done:d}=l.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function vi(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function ok(){const t={get(r){return Jl(this,r)},get size(){return eu(this)},has:Zl,add:pb,set:gb,delete:mb,clear:_b,forEach:tu(!1,!1)},e={get(r){return Jl(this,r,!1,!0)},get size(){return eu(this)},has:Zl,add:pb,set:gb,delete:mb,clear:_b,forEach:tu(!1,!0)},n={get(r){return Jl(this,r,!0)},get size(){return eu(this,!0)},has(r){return Zl.call(this,r,!0)},add:vi("add"),set:vi("set"),delete:vi("delete"),clear:vi("clear"),forEach:tu(!0,!1)},s={get(r){return Jl(this,r,!0,!0)},get size(){return eu(this,!0)},has(r){return Zl.call(this,r,!0)},add:vi("add"),set:vi("set"),delete:vi("delete"),clear:vi("clear"),forEach:tu(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{t[r]=nu(r,!1,!1),n[r]=nu(r,!0,!1),e[r]=nu(r,!1,!0),s[r]=nu(r,!0,!0)}),[t,n,e,s]}const[ak,ck,lk,uk]=ok();function Sm(t,e){const n=e?t?uk:lk:t?ck:ak;return(s,i,r)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?s:Reflect.get(Ue(n,i)&&i in s?n:s,i,r)}const hk={get:Sm(!1,!1)},dk={get:Sm(!1,!0)},fk={get:Sm(!0,!1)},cT=new WeakMap,lT=new WeakMap,uT=new WeakMap,pk=new WeakMap;function gk(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function mk(t){return t.__v_skip||!Object.isExtensible(t)?0:gk(FA(t))}function hd(t){return Yo(t)?t:Im(t,!1,sk,hk,cT)}function hT(t){return Im(t,!1,rk,dk,lT)}function dT(t){return Im(t,!0,ik,fk,uT)}function Im(t,e,n,s,i){if(!Xe(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=i.get(t);if(r)return r;const o=mk(t);if(o===0)return t;const a=new Proxy(t,o===2?s:n);return i.set(t,a),a}function Uo(t){return Yo(t)?Uo(t.__v_raw):!!(t&&t.__v_isReactive)}function Yo(t){return!!(t&&t.__v_isReadonly)}function ph(t){return!!(t&&t.__v_isShallow)}function fT(t){return Uo(t)||Yo(t)}function Fe(t){const e=t&&t.__v_raw;return e?Fe(e):t}function pT(t){return Object.isExtensible(t)&&fh(t,"__v_skip",!0),t}const Rc=t=>Xe(t)?hd(t):t,Rm=t=>Xe(t)?dT(t):t;class gT{constructor(e,n,s,i){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new vm(()=>e(this._value),()=>Nu(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=s}get value(){const e=Fe(this);return(!e._cacheable||e.effect.dirty)&&Zi(e._value,e._value=e.effect.run())&&Nu(e,4),mT(e),e.effect._dirtyLevel>=2&&Nu(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function _k(t,e,n=!1){let s,i;const r=Se(t);return r?(s=t,i=Hn):(s=t.get,i=t.set),new gT(s,i,r||!i,n)}function mT(t){var e;Wi&&Ur&&(t=Fe(t),nT(Ur,(e=t.dep)!=null?e:t.dep=iT(()=>t.dep=void 0,t instanceof gT?t:void 0)))}function Nu(t,e=4,n){t=Fe(t);const s=t.dep;s&&sT(s,e)}function xn(t){return!!(t&&t.__v_isRef===!0)}function yk(t){return _T(t,!1)}function bk(t){return _T(t,!0)}function _T(t,e){return xn(t)?t:new vk(t,e)}class vk{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Fe(e),this._value=n?e:Rc(e)}get value(){return mT(this),this._value}set value(e){const n=this.__v_isShallow||ph(e)||Yo(e);e=n?e:Fe(e),Zi(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:Rc(e),Nu(this,4))}}function Hr(t){return xn(t)?t.value:t}const wk={get:(t,e,n)=>Hr(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const i=t[e];return xn(i)&&!xn(n)?(i.value=n,!0):Reflect.set(t,e,n,s)}};function yT(t){return Uo(t)?t:new Proxy(t,wk)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function qi(t,e,n,s){try{return s?t(...s):t()}catch(i){dd(i,e,n)}}function zn(t,e,n,s){if(Se(t)){const r=qi(t,e,n,s);return r&&GE(r)&&r.catch(o=>{dd(o,e,n)}),r}const i=[];for(let r=0;r<t.length;r++)i.push(zn(t[r],e,n,s));return i}function dd(t,e,n,s=!0){const i=e?e.vnode:null;if(e){let r=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;r;){const l=r.ec;if(l){for(let u=0;u<l.length;u++)if(l[u](t,o,a)===!1)return}r=r.parent}const c=e.appContext.config.errorHandler;if(c){qi(c,null,10,[t,o,a]);return}}Ek(t,n,i,s)}function Ek(t,e,n,s=!0){console.error(t)}let xc=!1,qp=!1;const rn=[];let ys=0;const $o=[];let ki=null,xr=0;const bT=Promise.resolve();let xm=null;function Cm(t){const e=xm||bT;return t?e.then(this?t.bind(this):t):e}function Tk(t){let e=ys+1,n=rn.length;for(;e<n;){const s=e+n>>>1,i=rn[s],r=Cc(i);r<t||r===t&&i.pre?e=s+1:n=s}return e}function Am(t){(!rn.length||!rn.includes(t,xc&&t.allowRecurse?ys+1:ys))&&(t.id==null?rn.push(t):rn.splice(Tk(t.id),0,t),vT())}function vT(){!xc&&!qp&&(qp=!0,xm=bT.then(ET))}function Sk(t){const e=rn.indexOf(t);e>ys&&rn.splice(e,1)}function Ik(t){re(t)?$o.push(...t):(!ki||!ki.includes(t,t.allowRecurse?xr+1:xr))&&$o.push(t),vT()}function yb(t,e,n=xc?ys+1:0){for(;n<rn.length;n++){const s=rn[n];if(s&&s.pre){if(t&&s.id!==t.uid)continue;rn.splice(n,1),n--,s()}}}function wT(t){if($o.length){const e=[...new Set($o)].sort((n,s)=>Cc(n)-Cc(s));if($o.length=0,ki){ki.push(...e);return}for(ki=e,xr=0;xr<ki.length;xr++)ki[xr]();ki=null,xr=0}}const Cc=t=>t.id==null?1/0:t.id,Rk=(t,e)=>{const n=Cc(t)-Cc(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function ET(t){qp=!1,xc=!0,rn.sort(Rk);try{for(ys=0;ys<rn.length;ys++){const e=rn[ys];e&&e.active!==!1&&qi(e,null,14)}}finally{ys=0,rn.length=0,wT(),xc=!1,xm=null,(rn.length||$o.length)&&ET()}}function xk(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||nt;let i=n;const r=e.startsWith("update:"),o=r&&e.slice(7);if(o&&o in s){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=s[u]||nt;d&&(i=n.map(f=>Ct(f)?f.trim():f)),h&&(i=n.map($p))}let a,c=s[a=Mu(e)]||s[a=Mu(Fs(e))];!c&&r&&(c=s[a=Mu(ao(e))]),c&&zn(c,t,6,i);const l=s[a+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,zn(l,t,6,i)}}function TT(t,e,n=!1){const s=e.emitsCache,i=s.get(t);if(i!==void 0)return i;const r=t.emits;let o={},a=!1;if(!Se(t)){const c=l=>{const u=TT(l,e,!0);u&&(a=!0,Ot(o,u))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!r&&!a?(Xe(t)&&s.set(t,null),null):(re(r)?r.forEach(c=>o[c]=null):Ot(o,r),Xe(t)&&s.set(t,o),o)}function fd(t,e){return!t||!rd(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ue(t,e[0].toLowerCase()+e.slice(1))||Ue(t,ao(e))||Ue(t,e))}let Ft=null,pd=null;function gh(t){const e=Ft;return Ft=t,pd=t&&t.type.__scopeId||null,e}function Lt(t){pd=t}function Nt(){pd=null}function Qr(t,e=Ft,n){if(!e||t._n)return t;const s=(...i)=>{s._d&&kb(-1);const r=gh(e);let o;try{o=t(...i)}finally{gh(r),s._d&&kb(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Ff(t){const{type:e,vnode:n,proxy:s,withProxy:i,props:r,propsOptions:[o],slots:a,attrs:c,emit:l,render:u,renderCache:h,data:d,setupState:f,ctx:p,inheritAttrs:m}=t;let _,y;const b=gh(t);try{if(n.shapeFlag&4){const T=i||s,S=T;_=ms(u.call(S,T,h,r,f,d,p)),y=c}else{const T=e;_=ms(T.length>1?T(r,{attrs:c,slots:a,emit:l}):T(r,null)),y=e.props?c:Ck(c)}}catch(T){cc.length=0,dd(T,t,1),_=W(jn)}let w=_;if(y&&m!==!1){const T=Object.keys(y),{shapeFlag:S}=w;T.length&&S&7&&(o&&T.some(_m)&&(y=Ak(y,o)),w=er(w,y))}return n.dirs&&(w=er(w),w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&(w.transition=n.transition),_=w,gh(b),_}const Ck=t=>{let e;for(const n in t)(n==="class"||n==="style"||rd(n))&&((e||(e={}))[n]=t[n]);return e},Ak=(t,e)=>{const n={};for(const s in t)(!_m(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function kk(t,e,n){const{props:s,children:i,component:r}=t,{props:o,children:a,patchFlag:c}=e,l=r.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?bb(s,o,l):!!o;if(c&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==s[d]&&!fd(l,d))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?bb(s,o,l):!0:!!o;return!1}function bb(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(e[r]!==t[r]&&!fd(n,r))return!0}return!1}function Pk({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const km="components";function te(t,e){return IT(km,t,!0,e)||t}const ST=Symbol.for("v-ndc");function Pm(t){return Ct(t)?IT(km,t,!1)||t:t||ST}function IT(t,e,n=!0,s=!1){const i=Ft||Yt;if(i){const r=i.type;if(t===km){const a=SP(r,!1);if(a&&(a===e||a===Fs(e)||a===cd(Fs(e))))return r}const o=vb(i[t]||r[t],e)||vb(i.appContext[t],e);return!o&&s?r:o}}function vb(t,e){return t&&(t[e]||t[Fs(e)]||t[cd(Fs(e))])}const Dk=t=>t.__isSuspense;function Ok(t,e){e&&e.pendingBranch?re(t)?e.effects.push(...t):e.effects.push(t):Ik(t)}const Mk=Symbol.for("v-scx"),Lk=()=>xs(Mk),su={};function Vu(t,e,n){return RT(t,e,n)}function RT(t,e,{immediate:n,deep:s,flush:i,once:r,onTrack:o,onTrigger:a}=nt){if(e&&r){const x=e;e=(...R)=>{x(...R),S()}}const c=Yt,l=x=>s===!0?x:Dr(x,s===!1?1:void 0);let u,h=!1,d=!1;if(xn(t)?(u=()=>t.value,h=ph(t)):Uo(t)?(u=()=>l(t),h=!0):re(t)?(d=!0,h=t.some(x=>Uo(x)||ph(x)),u=()=>t.map(x=>{if(xn(x))return x.value;if(Uo(x))return l(x);if(Se(x))return qi(x,c,2)})):Se(t)?e?u=()=>qi(t,c,2):u=()=>(f&&f(),zn(t,c,3,[p])):u=Hn,e&&s){const x=u;u=()=>Dr(x())}let f,p=x=>{f=w.onStop=()=>{qi(x,c,4),f=w.onStop=void 0}},m;if(vd)if(p=Hn,e?n&&zn(e,c,3,[u(),d?[]:void 0,p]):u(),i==="sync"){const x=Lk();m=x.__watcherHandles||(x.__watcherHandles=[])}else return Hn;let _=d?new Array(t.length).fill(su):su;const y=()=>{if(!(!w.active||!w.dirty))if(e){const x=w.run();(s||h||(d?x.some((R,I)=>Zi(R,_[I])):Zi(x,_)))&&(f&&f(),zn(e,c,3,[x,_===su?void 0:d&&_[0]===su?[]:_,p]),_=x)}else w.run()};y.allowRecurse=!!e;let b;i==="sync"?b=y:i==="post"?b=()=>vn(y,c&&c.suspense):(y.pre=!0,c&&(y.id=c.uid),b=()=>Am(y));const w=new vm(u,Hn,b),T=XA(),S=()=>{w.stop(),T&&ym(T.effects,w)};return e?n?y():_=w.run():i==="post"?vn(w.run.bind(w),c&&c.suspense):w.run(),m&&m.push(S),S}function Nk(t,e,n){const s=this.proxy,i=Ct(t)?t.includes(".")?xT(s,t):()=>s[t]:t.bind(s,s);let r;Se(e)?r=e:(r=e.handler,n=e);const o=ul(this),a=RT(i,r.bind(s),n);return o(),a}function xT(t,e){const n=e.split(".");return()=>{let s=t;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}function Dr(t,e,n=0,s){if(!Xe(t)||t.__v_skip)return t;if(e&&e>0){if(n>=e)return t;n++}if(s=s||new Set,s.has(t))return t;if(s.add(t),xn(t))Dr(t.value,e,n,s);else if(re(t))for(let i=0;i<t.length;i++)Dr(t[i],e,n,s);else if(od(t)||Bo(t))t.forEach(i=>{Dr(i,e,n,s)});else if(YE(t))for(const i in t)Dr(t[i],e,n,s);return t}function ie(t,e){if(Ft===null)return t;const n=wd(Ft)||Ft.proxy,s=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[r,o,a,c=nt]=e[i];r&&(Se(r)&&(r={mounted:r,updated:r}),r.deep&&Dr(o),s.push({dir:r,instance:n,value:o,oldValue:void 0,arg:a,modifiers:c}))}return t}function mr(t,e,n,s){const i=t.dirs,r=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let c=a.dir[s];c&&(co(),zn(c,n,8,[t.el,a,t,e]),lo())}}const Pi=Symbol("_leaveCb"),iu=Symbol("_enterCb");function CT(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return DT(()=>{t.isMounted=!0}),MT(()=>{t.isUnmounting=!0}),t}const Bn=[Function,Array],AT={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Bn,onEnter:Bn,onAfterEnter:Bn,onEnterCancelled:Bn,onBeforeLeave:Bn,onLeave:Bn,onAfterLeave:Bn,onLeaveCancelled:Bn,onBeforeAppear:Bn,onAppear:Bn,onAfterAppear:Bn,onAppearCancelled:Bn},Vk={name:"BaseTransition",props:AT,setup(t,{slots:e}){const n=Nm(),s=CT();return()=>{const i=e.default&&Dm(e.default(),!0);if(!i||!i.length)return;let r=i[0];if(i.length>1){for(const d of i)if(d.type!==jn){r=d;break}}const o=Fe(t),{mode:a}=o;if(s.isLeaving)return Bf(r);const c=wb(r);if(!c)return Bf(r);const l=Ac(c,o,s,n);kc(c,l);const u=n.subTree,h=u&&wb(u);if(h&&h.type!==jn&&!Cr(c,h)){const d=Ac(h,o,s,n);if(kc(h,d),a==="out-in")return s.isLeaving=!0,d.afterLeave=()=>{s.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},Bf(r);a==="in-out"&&c.type!==jn&&(d.delayLeave=(f,p,m)=>{const _=kT(s,h);_[String(h.key)]=h,f[Pi]=()=>{p(),f[Pi]=void 0,delete l.delayedLeave},l.delayedLeave=m})}return r}}},Fk=Vk;function kT(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function Ac(t,e,n,s){const{appear:i,mode:r,persisted:o=!1,onBeforeEnter:a,onEnter:c,onAfterEnter:l,onEnterCancelled:u,onBeforeLeave:h,onLeave:d,onAfterLeave:f,onLeaveCancelled:p,onBeforeAppear:m,onAppear:_,onAfterAppear:y,onAppearCancelled:b}=e,w=String(t.key),T=kT(n,t),S=(I,P)=>{I&&zn(I,s,9,P)},x=(I,P)=>{const $=P[1];S(I,P),re(I)?I.every(Q=>Q.length<=1)&&$():I.length<=1&&$()},R={mode:r,persisted:o,beforeEnter(I){let P=a;if(!n.isMounted)if(i)P=m||a;else return;I[Pi]&&I[Pi](!0);const $=T[w];$&&Cr(t,$)&&$.el[Pi]&&$.el[Pi](),S(P,[I])},enter(I){let P=c,$=l,Q=u;if(!n.isMounted)if(i)P=_||c,$=y||l,Q=b||u;else return;let F=!1;const oe=I[iu]=Re=>{F||(F=!0,Re?S(Q,[I]):S($,[I]),R.delayedLeave&&R.delayedLeave(),I[iu]=void 0)};P?x(P,[I,oe]):oe()},leave(I,P){const $=String(t.key);if(I[iu]&&I[iu](!0),n.isUnmounting)return P();S(h,[I]);let Q=!1;const F=I[Pi]=oe=>{Q||(Q=!0,P(),oe?S(p,[I]):S(f,[I]),I[Pi]=void 0,T[$]===t&&delete T[$])};T[$]=t,d?x(d,[I,F]):F()},clone(I){return Ac(I,e,n,s)}};return R}function Bf(t){if(gd(t))return t=er(t),t.children=null,t}function wb(t){return gd(t)?t.children?t.children[0]:void 0:t}function kc(t,e){t.shapeFlag&6&&t.component?kc(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Dm(t,e=!1,n){let s=[],i=0;for(let r=0;r<t.length;r++){let o=t[r];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:r);o.type===_e?(o.patchFlag&128&&i++,s=s.concat(Dm(o.children,e,a))):(e||o.type!==jn)&&s.push(a!=null?er(o,{key:a}):o)}if(i>1)for(let r=0;r<s.length;r++)s[r].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function pi(t,e){return Se(t)?Ot({name:t.name},e,{setup:t}):t}const rc=t=>!!t.type.__asyncLoader,gd=t=>t.type.__isKeepAlive;function Bk(t,e){PT(t,"a",e)}function Uk(t,e){PT(t,"da",e)}function PT(t,e,n=Yt){const s=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(md(e,s,n),n){let i=n.parent;for(;i&&i.parent;)gd(i.parent.vnode)&&$k(s,e,n,i),i=i.parent}}function $k(t,e,n,s){const i=md(e,t,s,!0);LT(()=>{ym(s[e],i)},n)}function md(t,e,n=Yt,s=!1){if(n){const i=n[t]||(n[t]=[]),r=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;co();const a=ul(n),c=zn(e,n,t,o);return a(),lo(),c});return s?i.unshift(r):i.push(r),r}}const gi=t=>(e,n=Yt)=>(!vd||t==="sp")&&md(t,(...s)=>e(...s),n),Hk=gi("bm"),DT=gi("m"),zk=gi("bu"),OT=gi("u"),MT=gi("bum"),LT=gi("um"),jk=gi("sp"),Wk=gi("rtg"),qk=gi("rtc");function Gk(t,e=Yt){md("ec",t,e)}function pt(t,e,n,s){let i;const r=n&&n[s];if(re(t)||Ct(t)){i=new Array(t.length);for(let o=0,a=t.length;o<a;o++)i[o]=e(t[o],o,void 0,r&&r[o])}else if(typeof t=="number"){i=new Array(t);for(let o=0;o<t;o++)i[o]=e(o+1,o,void 0,r&&r[o])}else if(Xe(t))if(t[Symbol.iterator])i=Array.from(t,(o,a)=>e(o,a,void 0,r&&r[a]));else{const o=Object.keys(t);i=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const l=o[a];i[a]=e(t[l],l,a,r&&r[a])}}else i=[];return n&&(n[s]=i),i}function en(t,e,n={},s,i){if(Ft.isCE||Ft.parent&&rc(Ft.parent)&&Ft.parent.isCE)return e!=="default"&&(n.name=e),W("slot",n,s&&s());let r=t[e];r&&r._c&&(r._d=!1),A();const o=r&&NT(r(n)),a=Oe(_e,{key:n.key||o&&o.key||`_${e}`},o||(s?s():[]),o&&t._===1?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),r&&r._c&&(r._d=!0),a}function NT(t){return t.some(e=>_h(e)?!(e.type===jn||e.type===_e&&!NT(e.children)):!0)?t:null}function Kk(t,e){const n={};for(const s in t)n[e&&/[A-Z]/.test(s)?`on:${s}`:Mu(s)]=t[s];return n}const Gp=t=>t?KT(t)?wd(t)||t.proxy:Gp(t.parent):null,oc=Ot(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Gp(t.parent),$root:t=>Gp(t.root),$emit:t=>t.emit,$options:t=>Om(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,Am(t.update)}),$nextTick:t=>t.n||(t.n=Cm.bind(t.proxy)),$watch:t=>Nk.bind(t)}),Uf=(t,e)=>t!==nt&&!t.__isScriptSetup&&Ue(t,e),Yk={get({_:t},e){const{ctx:n,setupState:s,data:i,props:r,accessCache:o,type:a,appContext:c}=t;let l;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return s[e];case 2:return i[e];case 4:return n[e];case 3:return r[e]}else{if(Uf(s,e))return o[e]=1,s[e];if(i!==nt&&Ue(i,e))return o[e]=2,i[e];if((l=t.propsOptions[0])&&Ue(l,e))return o[e]=3,r[e];if(n!==nt&&Ue(n,e))return o[e]=4,n[e];Kp&&(o[e]=0)}}const u=oc[e];let h,d;if(u)return e==="$attrs"&&Rn(t,"get",e),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==nt&&Ue(n,e))return o[e]=4,n[e];if(d=c.config.globalProperties,Ue(d,e))return d[e]},set({_:t},e,n){const{data:s,setupState:i,ctx:r}=t;return Uf(i,e)?(i[e]=n,!0):s!==nt&&Ue(s,e)?(s[e]=n,!0):Ue(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:i,propsOptions:r}},o){let a;return!!n[o]||t!==nt&&Ue(t,o)||Uf(e,o)||(a=r[0])&&Ue(a,o)||Ue(s,o)||Ue(oc,o)||Ue(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ue(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Eb(t){return re(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Kp=!0;function Qk(t){const e=Om(t),n=t.proxy,s=t.ctx;Kp=!1,e.beforeCreate&&Tb(e.beforeCreate,t,"bc");const{data:i,computed:r,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:p,activated:m,deactivated:_,beforeDestroy:y,beforeUnmount:b,destroyed:w,unmounted:T,render:S,renderTracked:x,renderTriggered:R,errorCaptured:I,serverPrefetch:P,expose:$,inheritAttrs:Q,components:F,directives:oe,filters:Re}=e;if(l&&Xk(l,s,null),o)for(const le in o){const be=o[le];Se(be)&&(s[le]=be.bind(n))}if(i){const le=i.call(n,n);Xe(le)&&(t.data=hd(le))}if(Kp=!0,r)for(const le in r){const be=r[le],Je=Se(be)?be.bind(n,n):Se(be.get)?be.get.bind(n,n):Hn,fn=!Se(be)&&Se(be.set)?be.set.bind(n):Hn,pn=ts({get:Je,set:fn});Object.defineProperty(s,le,{enumerable:!0,configurable:!0,get:()=>pn.value,set:Tt=>pn.value=Tt})}if(a)for(const le in a)VT(a[le],s,n,le);if(c){const le=Se(c)?c.call(n):c;Reflect.ownKeys(le).forEach(be=>{Fu(be,le[be])})}u&&Tb(u,t,"c");function ue(le,be){re(be)?be.forEach(Je=>le(Je.bind(n))):be&&le(be.bind(n))}if(ue(Hk,h),ue(DT,d),ue(zk,f),ue(OT,p),ue(Bk,m),ue(Uk,_),ue(Gk,I),ue(qk,x),ue(Wk,R),ue(MT,b),ue(LT,T),ue(jk,P),re($))if($.length){const le=t.exposed||(t.exposed={});$.forEach(be=>{Object.defineProperty(le,be,{get:()=>n[be],set:Je=>n[be]=Je})})}else t.exposed||(t.exposed={});S&&t.render===Hn&&(t.render=S),Q!=null&&(t.inheritAttrs=Q),F&&(t.components=F),oe&&(t.directives=oe)}function Xk(t,e,n=Hn){re(t)&&(t=Yp(t));for(const s in t){const i=t[s];let r;Xe(i)?"default"in i?r=xs(i.from||s,i.default,!0):r=xs(i.from||s):r=xs(i),xn(r)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[s]=r}}function Tb(t,e,n){zn(re(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function VT(t,e,n,s){const i=s.includes(".")?xT(n,s):()=>n[s];if(Ct(t)){const r=e[t];Se(r)&&Vu(i,r)}else if(Se(t))Vu(i,t.bind(n));else if(Xe(t))if(re(t))t.forEach(r=>VT(r,e,n,s));else{const r=Se(t.handler)?t.handler.bind(n):e[t.handler];Se(r)&&Vu(i,r,t)}}function Om(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,a=r.get(e);let c;return a?c=a:!i.length&&!n&&!s?c=e:(c={},i.length&&i.forEach(l=>mh(c,l,o,!0)),mh(c,e,o)),Xe(e)&&r.set(e,c),c}function mh(t,e,n,s=!1){const{mixins:i,extends:r}=e;r&&mh(t,r,n,!0),i&&i.forEach(o=>mh(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=Jk[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const Jk={data:Sb,props:Ib,emits:Ib,methods:ja,computed:ja,beforeCreate:mn,created:mn,beforeMount:mn,mounted:mn,beforeUpdate:mn,updated:mn,beforeDestroy:mn,beforeUnmount:mn,destroyed:mn,unmounted:mn,activated:mn,deactivated:mn,errorCaptured:mn,serverPrefetch:mn,components:ja,directives:ja,watch:eP,provide:Sb,inject:Zk};function Sb(t,e){return e?t?function(){return Ot(Se(t)?t.call(this,this):t,Se(e)?e.call(this,this):e)}:e:t}function Zk(t,e){return ja(Yp(t),Yp(e))}function Yp(t){if(re(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function mn(t,e){return t?[...new Set([].concat(t,e))]:e}function ja(t,e){return t?Ot(Object.create(null),t,e):e}function Ib(t,e){return t?re(t)&&re(e)?[...new Set([...t,...e])]:Ot(Object.create(null),Eb(t),Eb(e??{})):e}function eP(t,e){if(!t)return e;if(!e)return t;const n=Ot(Object.create(null),t);for(const s in e)n[s]=mn(t[s],e[s]);return n}function FT(){return{app:null,config:{isNativeTag:NA,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let tP=0;function nP(t,e){return function(s,i=null){Se(s)||(s=Ot({},s)),i!=null&&!Xe(i)&&(i=null);const r=FT(),o=new WeakSet;let a=!1;const c=r.app={_uid:tP++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:RP,get config(){return r.config},set config(l){},use(l,...u){return o.has(l)||(l&&Se(l.install)?(o.add(l),l.install(c,...u)):Se(l)&&(o.add(l),l(c,...u))),c},mixin(l){return r.mixins.includes(l)||r.mixins.push(l),c},component(l,u){return u?(r.components[l]=u,c):r.components[l]},directive(l,u){return u?(r.directives[l]=u,c):r.directives[l]},mount(l,u,h){if(!a){const d=W(s,i);return d.appContext=r,h===!0?h="svg":h===!1&&(h=void 0),u&&e?e(d,l):t(d,l,h),a=!0,c._container=l,l.__vue_app__=c,wd(d.component)||d.component.proxy}},unmount(){a&&(t(null,c._container),delete c._container.__vue_app__)},provide(l,u){return r.provides[l]=u,c},runWithContext(l){const u=ac;ac=c;try{return l()}finally{ac=u}}};return c}}let ac=null;function Fu(t,e){if(Yt){let n=Yt.provides;const s=Yt.parent&&Yt.parent.provides;s===n&&(n=Yt.provides=Object.create(s)),n[t]=e}}function xs(t,e,n=!1){const s=Yt||Ft;if(s||ac){const i=s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:ac._context.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Se(e)?e.call(s&&s.proxy):e}}function sP(t,e,n,s=!1){const i={},r={};fh(r,yd,1),t.propsDefaults=Object.create(null),BT(t,e,i,r);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=s?i:hT(i):t.type.props?t.props=i:t.props=r,t.attrs=r}function iP(t,e,n,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=t,a=Fe(i),[c]=t.propsOptions;let l=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(fd(t.emitsOptions,d))continue;const f=e[d];if(c)if(Ue(r,d))f!==r[d]&&(r[d]=f,l=!0);else{const p=Fs(d);i[p]=Qp(c,a,p,f,t,!1)}else f!==r[d]&&(r[d]=f,l=!0)}}}else{BT(t,e,i,r)&&(l=!0);let u;for(const h in a)(!e||!Ue(e,h)&&((u=ao(h))===h||!Ue(e,u)))&&(c?n&&(n[h]!==void 0||n[u]!==void 0)&&(i[h]=Qp(c,a,h,void 0,t,!0)):delete i[h]);if(r!==a)for(const h in r)(!e||!Ue(e,h))&&(delete r[h],l=!0)}l&&ii(t,"set","$attrs")}function BT(t,e,n,s){const[i,r]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(ic(c))continue;const l=e[c];let u;i&&Ue(i,u=Fs(c))?!r||!r.includes(u)?n[u]=l:(a||(a={}))[u]=l:fd(t.emitsOptions,c)||(!(c in s)||l!==s[c])&&(s[c]=l,o=!0)}if(r){const c=Fe(n),l=a||nt;for(let u=0;u<r.length;u++){const h=r[u];n[h]=Qp(i,c,h,l[h],t,!Ue(l,h))}}return o}function Qp(t,e,n,s,i,r){const o=t[n];if(o!=null){const a=Ue(o,"default");if(a&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Se(c)){const{propsDefaults:l}=i;if(n in l)s=l[n];else{const u=ul(i);s=l[n]=c.call(null,e),u()}}else s=c}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===ao(n))&&(s=!0))}return s}function UT(t,e,n=!1){const s=e.propsCache,i=s.get(t);if(i)return i;const r=t.props,o={},a=[];let c=!1;if(!Se(t)){const u=h=>{c=!0;const[d,f]=UT(h,e,!0);Ot(o,d),f&&a.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!r&&!c)return Xe(t)&&s.set(t,Fo),Fo;if(re(r))for(let u=0;u<r.length;u++){const h=Fs(r[u]);Rb(h)&&(o[h]=nt)}else if(r)for(const u in r){const h=Fs(u);if(Rb(h)){const d=r[u],f=o[h]=re(d)||Se(d)?{type:d}:Ot({},d);if(f){const p=Ab(Boolean,f.type),m=Ab(String,f.type);f[0]=p>-1,f[1]=m<0||p<m,(p>-1||Ue(f,"default"))&&a.push(h)}}}const l=[o,a];return Xe(t)&&s.set(t,l),l}function Rb(t){return t[0]!=="$"&&!ic(t)}function xb(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function Cb(t,e){return xb(t)===xb(e)}function Ab(t,e){return re(e)?e.findIndex(n=>Cb(n,t)):Se(e)&&Cb(e,t)?0:-1}const $T=t=>t[0]==="_"||t==="$stable",Mm=t=>re(t)?t.map(ms):[ms(t)],rP=(t,e,n)=>{if(e._n)return e;const s=Qr((...i)=>Mm(e(...i)),n);return s._c=!1,s},HT=(t,e,n)=>{const s=t._ctx;for(const i in t){if($T(i))continue;const r=t[i];if(Se(r))e[i]=rP(i,r,s);else if(r!=null){const o=Mm(r);e[i]=()=>o}}},zT=(t,e)=>{const n=Mm(e);t.slots.default=()=>n},oP=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Fe(e),fh(e,"_",n)):HT(e,t.slots={})}else t.slots={},e&&zT(t,e);fh(t.slots,yd,1)},aP=(t,e,n)=>{const{vnode:s,slots:i}=t;let r=!0,o=nt;if(s.shapeFlag&32){const a=e._;a?n&&a===1?r=!1:(Ot(i,e),!n&&a===1&&delete i._):(r=!e.$stable,HT(e,i)),o=e}else e&&(zT(t,e),o={default:1});if(r)for(const a in i)!$T(a)&&o[a]==null&&delete i[a]};function Xp(t,e,n,s,i=!1){if(re(t)){t.forEach((d,f)=>Xp(d,e&&(re(e)?e[f]:e),n,s,i));return}if(rc(s)&&!i)return;const r=s.shapeFlag&4?wd(s.component)||s.component.proxy:s.el,o=i?null:r,{i:a,r:c}=t,l=e&&e.r,u=a.refs===nt?a.refs={}:a.refs,h=a.setupState;if(l!=null&&l!==c&&(Ct(l)?(u[l]=null,Ue(h,l)&&(h[l]=null)):xn(l)&&(l.value=null)),Se(c))qi(c,a,12,[o,u]);else{const d=Ct(c),f=xn(c);if(d||f){const p=()=>{if(t.f){const m=d?Ue(h,c)?h[c]:u[c]:c.value;i?re(m)&&ym(m,r):re(m)?m.includes(r)||m.push(r):d?(u[c]=[r],Ue(h,c)&&(h[c]=u[c])):(c.value=[r],t.k&&(u[t.k]=c.value))}else d?(u[c]=o,Ue(h,c)&&(h[c]=o)):f&&(c.value=o,t.k&&(u[t.k]=o))};o?(p.id=-1,vn(p,n)):p()}}}const vn=Ok;function cP(t){return lP(t)}function lP(t,e){const n=QE();n.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:h,nextSibling:d,setScopeId:f=Hn,insertStaticContent:p}=t,m=(v,E,k,V=null,D=null,z=null,Y=void 0,H=null,j=!!E.dynamicChildren)=>{if(v===E)return;v&&!Cr(v,E)&&(V=L(v),Tt(v,D,z,!0),v=null),E.patchFlag===-2&&(j=!1,E.dynamicChildren=null);const{type:U,ref:Z,shapeFlag:ae}=E;switch(U){case _d:_(v,E,k,V);break;case jn:y(v,E,k,V);break;case Bu:v==null&&b(E,k,V,Y);break;case _e:F(v,E,k,V,D,z,Y,H,j);break;default:ae&1?S(v,E,k,V,D,z,Y,H,j):ae&6?oe(v,E,k,V,D,z,Y,H,j):(ae&64||ae&128)&&U.process(v,E,k,V,D,z,Y,H,j,ee)}Z!=null&&D&&Xp(Z,v&&v.ref,z,E||v,!E)},_=(v,E,k,V)=>{if(v==null)s(E.el=a(E.children),k,V);else{const D=E.el=v.el;E.children!==v.children&&l(D,E.children)}},y=(v,E,k,V)=>{v==null?s(E.el=c(E.children||""),k,V):E.el=v.el},b=(v,E,k,V)=>{[v.el,v.anchor]=p(v.children,E,k,V,v.el,v.anchor)},w=({el:v,anchor:E},k,V)=>{let D;for(;v&&v!==E;)D=d(v),s(v,k,V),v=D;s(E,k,V)},T=({el:v,anchor:E})=>{let k;for(;v&&v!==E;)k=d(v),i(v),v=k;i(E)},S=(v,E,k,V,D,z,Y,H,j)=>{E.type==="svg"?Y="svg":E.type==="math"&&(Y="mathml"),v==null?x(E,k,V,D,z,Y,H,j):P(v,E,D,z,Y,H,j)},x=(v,E,k,V,D,z,Y,H)=>{let j,U;const{props:Z,shapeFlag:ae,transition:ne,dirs:ge}=v;if(j=v.el=o(v.type,z,Z&&Z.is,Z),ae&8?u(j,v.children):ae&16&&I(v.children,j,null,V,D,$f(v,z),Y,H),ge&&mr(v,null,V,"created"),R(j,v,v.scopeId,Y,V),Z){for(const Ye in Z)Ye!=="value"&&!ic(Ye)&&r(j,Ye,null,Z[Ye],z,v.children,V,D,ht);"value"in Z&&r(j,"value",null,Z.value,z),(U=Z.onVnodeBeforeMount)&&ds(U,V,v)}ge&&mr(v,null,V,"beforeMount");const ke=uP(D,ne);ke&&ne.beforeEnter(j),s(j,E,k),((U=Z&&Z.onVnodeMounted)||ke||ge)&&vn(()=>{U&&ds(U,V,v),ke&&ne.enter(j),ge&&mr(v,null,V,"mounted")},D)},R=(v,E,k,V,D)=>{if(k&&f(v,k),V)for(let z=0;z<V.length;z++)f(v,V[z]);if(D){let z=D.subTree;if(E===z){const Y=D.vnode;R(v,Y,Y.scopeId,Y.slotScopeIds,D.parent)}}},I=(v,E,k,V,D,z,Y,H,j=0)=>{for(let U=j;U<v.length;U++){const Z=v[U]=H?Di(v[U]):ms(v[U]);m(null,Z,E,k,V,D,z,Y,H)}},P=(v,E,k,V,D,z,Y)=>{const H=E.el=v.el;let{patchFlag:j,dynamicChildren:U,dirs:Z}=E;j|=v.patchFlag&16;const ae=v.props||nt,ne=E.props||nt;let ge;if(k&&_r(k,!1),(ge=ne.onVnodeBeforeUpdate)&&ds(ge,k,E,v),Z&&mr(E,v,k,"beforeUpdate"),k&&_r(k,!0),U?$(v.dynamicChildren,U,H,k,V,$f(E,D),z):Y||be(v,E,H,null,k,V,$f(E,D),z,!1),j>0){if(j&16)Q(H,E,ae,ne,k,V,D);else if(j&2&&ae.class!==ne.class&&r(H,"class",null,ne.class,D),j&4&&r(H,"style",ae.style,ne.style,D),j&8){const ke=E.dynamicProps;for(let Ye=0;Ye<ke.length;Ye++){const ft=ke[Ye],$t=ae[ft],Xn=ne[ft];(Xn!==$t||ft==="value")&&r(H,ft,$t,Xn,D,v.children,k,V,ht)}}j&1&&v.children!==E.children&&u(H,E.children)}else!Y&&U==null&&Q(H,E,ae,ne,k,V,D);((ge=ne.onVnodeUpdated)||Z)&&vn(()=>{ge&&ds(ge,k,E,v),Z&&mr(E,v,k,"updated")},V)},$=(v,E,k,V,D,z,Y)=>{for(let H=0;H<E.length;H++){const j=v[H],U=E[H],Z=j.el&&(j.type===_e||!Cr(j,U)||j.shapeFlag&70)?h(j.el):k;m(j,U,Z,null,V,D,z,Y,!0)}},Q=(v,E,k,V,D,z,Y)=>{if(k!==V){if(k!==nt)for(const H in k)!ic(H)&&!(H in V)&&r(v,H,k[H],null,Y,E.children,D,z,ht);for(const H in V){if(ic(H))continue;const j=V[H],U=k[H];j!==U&&H!=="value"&&r(v,H,U,j,Y,E.children,D,z,ht)}"value"in V&&r(v,"value",k.value,V.value,Y)}},F=(v,E,k,V,D,z,Y,H,j)=>{const U=E.el=v?v.el:a(""),Z=E.anchor=v?v.anchor:a("");let{patchFlag:ae,dynamicChildren:ne,slotScopeIds:ge}=E;ge&&(H=H?H.concat(ge):ge),v==null?(s(U,k,V),s(Z,k,V),I(E.children||[],k,Z,D,z,Y,H,j)):ae>0&&ae&64&&ne&&v.dynamicChildren?($(v.dynamicChildren,ne,k,D,z,Y,H),(E.key!=null||D&&E===D.subTree)&&jT(v,E,!0)):be(v,E,k,Z,D,z,Y,H,j)},oe=(v,E,k,V,D,z,Y,H,j)=>{E.slotScopeIds=H,v==null?E.shapeFlag&512?D.ctx.activate(E,k,V,Y,j):Re(E,k,V,D,z,Y,j):ye(v,E,j)},Re=(v,E,k,V,D,z,Y)=>{const H=v.component=bP(v,V,D);if(gd(v)&&(H.ctx.renderer=ee),vP(H),H.asyncDep){if(D&&D.registerDep(H,ue),!v.el){const j=H.subTree=W(jn);y(null,j,E,k)}}else ue(H,v,E,k,D,z,Y)},ye=(v,E,k)=>{const V=E.component=v.component;if(kk(v,E,k))if(V.asyncDep&&!V.asyncResolved){le(V,E,k);return}else V.next=E,Sk(V.update),V.effect.dirty=!0,V.update();else E.el=v.el,V.vnode=E},ue=(v,E,k,V,D,z,Y)=>{const H=()=>{if(v.isMounted){let{next:Z,bu:ae,u:ne,parent:ge,vnode:ke}=v;{const To=WT(v);if(To){Z&&(Z.el=ke.el,le(v,Z,Y)),To.asyncDep.then(()=>{v.isUnmounted||H()});return}}let Ye=Z,ft;_r(v,!1),Z?(Z.el=ke.el,le(v,Z,Y)):Z=ke,ae&&Lu(ae),(ft=Z.props&&Z.props.onVnodeBeforeUpdate)&&ds(ft,ge,Z,ke),_r(v,!0);const $t=Ff(v),Xn=v.subTree;v.subTree=$t,m(Xn,$t,h(Xn.el),L(Xn),v,D,z),Z.el=$t.el,Ye===null&&Pk(v,$t.el),ne&&vn(ne,D),(ft=Z.props&&Z.props.onVnodeUpdated)&&vn(()=>ds(ft,ge,Z,ke),D)}else{let Z;const{el:ae,props:ne}=E,{bm:ge,m:ke,parent:Ye}=v,ft=rc(E);if(_r(v,!1),ge&&Lu(ge),!ft&&(Z=ne&&ne.onVnodeBeforeMount)&&ds(Z,Ye,E),_r(v,!0),ae&&dt){const $t=()=>{v.subTree=Ff(v),dt(ae,v.subTree,v,D,null)};ft?E.type.__asyncLoader().then(()=>!v.isUnmounted&&$t()):$t()}else{const $t=v.subTree=Ff(v);m(null,$t,k,V,v,D,z),E.el=$t.el}if(ke&&vn(ke,D),!ft&&(Z=ne&&ne.onVnodeMounted)){const $t=E;vn(()=>ds(Z,Ye,$t),D)}(E.shapeFlag&256||Ye&&rc(Ye.vnode)&&Ye.vnode.shapeFlag&256)&&v.a&&vn(v.a,D),v.isMounted=!0,E=k=V=null}},j=v.effect=new vm(H,Hn,()=>Am(U),v.scope),U=v.update=()=>{j.dirty&&j.run()};U.id=v.uid,_r(v,!0),U()},le=(v,E,k)=>{E.component=v;const V=v.vnode.props;v.vnode=E,v.next=null,iP(v,E.props,V,k),aP(v,E.children,k),co(),yb(v),lo()},be=(v,E,k,V,D,z,Y,H,j=!1)=>{const U=v&&v.children,Z=v?v.shapeFlag:0,ae=E.children,{patchFlag:ne,shapeFlag:ge}=E;if(ne>0){if(ne&128){fn(U,ae,k,V,D,z,Y,H,j);return}else if(ne&256){Je(U,ae,k,V,D,z,Y,H,j);return}}ge&8?(Z&16&&ht(U,D,z),ae!==U&&u(k,ae)):Z&16?ge&16?fn(U,ae,k,V,D,z,Y,H,j):ht(U,D,z,!0):(Z&8&&u(k,""),ge&16&&I(ae,k,V,D,z,Y,H,j))},Je=(v,E,k,V,D,z,Y,H,j)=>{v=v||Fo,E=E||Fo;const U=v.length,Z=E.length,ae=Math.min(U,Z);let ne;for(ne=0;ne<ae;ne++){const ge=E[ne]=j?Di(E[ne]):ms(E[ne]);m(v[ne],ge,k,null,D,z,Y,H,j)}U>Z?ht(v,D,z,!0,!1,ae):I(E,k,V,D,z,Y,H,j,ae)},fn=(v,E,k,V,D,z,Y,H,j)=>{let U=0;const Z=E.length;let ae=v.length-1,ne=Z-1;for(;U<=ae&&U<=ne;){const ge=v[U],ke=E[U]=j?Di(E[U]):ms(E[U]);if(Cr(ge,ke))m(ge,ke,k,null,D,z,Y,H,j);else break;U++}for(;U<=ae&&U<=ne;){const ge=v[ae],ke=E[ne]=j?Di(E[ne]):ms(E[ne]);if(Cr(ge,ke))m(ge,ke,k,null,D,z,Y,H,j);else break;ae--,ne--}if(U>ae){if(U<=ne){const ge=ne+1,ke=ge<Z?E[ge].el:V;for(;U<=ne;)m(null,E[U]=j?Di(E[U]):ms(E[U]),k,ke,D,z,Y,H,j),U++}}else if(U>ne)for(;U<=ae;)Tt(v[U],D,z,!0),U++;else{const ge=U,ke=U,Ye=new Map;for(U=ke;U<=ne;U++){const An=E[U]=j?Di(E[U]):ms(E[U]);An.key!=null&&Ye.set(An.key,U)}let ft,$t=0;const Xn=ne-ke+1;let To=!1,ob=0;const xa=new Array(Xn);for(U=0;U<Xn;U++)xa[U]=0;for(U=ge;U<=ae;U++){const An=v[U];if($t>=Xn){Tt(An,D,z,!0);continue}let hs;if(An.key!=null)hs=Ye.get(An.key);else for(ft=ke;ft<=ne;ft++)if(xa[ft-ke]===0&&Cr(An,E[ft])){hs=ft;break}hs===void 0?Tt(An,D,z,!0):(xa[hs-ke]=U+1,hs>=ob?ob=hs:To=!0,m(An,E[hs],k,null,D,z,Y,H,j),$t++)}const ab=To?hP(xa):Fo;for(ft=ab.length-1,U=Xn-1;U>=0;U--){const An=ke+U,hs=E[An],cb=An+1<Z?E[An+1].el:V;xa[U]===0?m(null,hs,k,cb,D,z,Y,H,j):To&&(ft<0||U!==ab[ft]?pn(hs,k,cb,2):ft--)}}},pn=(v,E,k,V,D=null)=>{const{el:z,type:Y,transition:H,children:j,shapeFlag:U}=v;if(U&6){pn(v.component.subTree,E,k,V);return}if(U&128){v.suspense.move(E,k,V);return}if(U&64){Y.move(v,E,k,ee);return}if(Y===_e){s(z,E,k);for(let ae=0;ae<j.length;ae++)pn(j[ae],E,k,V);s(v.anchor,E,k);return}if(Y===Bu){w(v,E,k);return}if(V!==2&&U&1&&H)if(V===0)H.beforeEnter(z),s(z,E,k),vn(()=>H.enter(z),D);else{const{leave:ae,delayLeave:ne,afterLeave:ge}=H,ke=()=>s(z,E,k),Ye=()=>{ae(z,()=>{ke(),ge&&ge()})};ne?ne(z,ke,Ye):Ye()}else s(z,E,k)},Tt=(v,E,k,V=!1,D=!1)=>{const{type:z,props:Y,ref:H,children:j,dynamicChildren:U,shapeFlag:Z,patchFlag:ae,dirs:ne}=v;if(H!=null&&Xp(H,null,k,v,!0),Z&256){E.ctx.deactivate(v);return}const ge=Z&1&&ne,ke=!rc(v);let Ye;if(ke&&(Ye=Y&&Y.onVnodeBeforeUnmount)&&ds(Ye,E,v),Z&6)us(v.component,k,V);else{if(Z&128){v.suspense.unmount(k,V);return}ge&&mr(v,null,E,"beforeUnmount"),Z&64?v.type.remove(v,E,k,D,ee,V):U&&(z!==_e||ae>0&&ae&64)?ht(U,E,k,!1,!0):(z===_e&&ae&384||!D&&Z&16)&&ht(j,E,k),V&&Fn(v)}(ke&&(Ye=Y&&Y.onVnodeUnmounted)||ge)&&vn(()=>{Ye&&ds(Ye,E,v),ge&&mr(v,null,E,"unmounted")},k)},Fn=v=>{const{type:E,el:k,anchor:V,transition:D}=v;if(E===_e){yn(k,V);return}if(E===Bu){T(v);return}const z=()=>{i(k),D&&!D.persisted&&D.afterLeave&&D.afterLeave()};if(v.shapeFlag&1&&D&&!D.persisted){const{leave:Y,delayLeave:H}=D,j=()=>Y(k,z);H?H(v.el,z,j):j()}else z()},yn=(v,E)=>{let k;for(;v!==E;)k=d(v),i(v),v=k;i(E)},us=(v,E,k)=>{const{bum:V,scope:D,update:z,subTree:Y,um:H}=v;V&&Lu(V),D.stop(),z&&(z.active=!1,Tt(Y,v,E,k)),H&&vn(H,E),vn(()=>{v.isUnmounted=!0},E),E&&E.pendingBranch&&!E.isUnmounted&&v.asyncDep&&!v.asyncResolved&&v.suspenseId===E.pendingId&&(E.deps--,E.deps===0&&E.resolve())},ht=(v,E,k,V=!1,D=!1,z=0)=>{for(let Y=z;Y<v.length;Y++)Tt(v[Y],E,k,V,D)},L=v=>v.shapeFlag&6?L(v.component.subTree):v.shapeFlag&128?v.suspense.next():d(v.anchor||v.el);let J=!1;const K=(v,E,k)=>{v==null?E._vnode&&Tt(E._vnode,null,null,!0):m(E._vnode||null,v,E,null,null,null,k),J||(J=!0,yb(),wT(),J=!1),E._vnode=v},ee={p:m,um:Tt,m:pn,r:Fn,mt:Re,mc:I,pc:be,pbc:$,n:L,o:t};let je,dt;return e&&([je,dt]=e(ee)),{render:K,hydrate:je,createApp:nP(K,je)}}function $f({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function _r({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function uP(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function jT(t,e,n=!1){const s=t.children,i=e.children;if(re(s)&&re(i))for(let r=0;r<s.length;r++){const o=s[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=Di(i[r]),a.el=o.el),n||jT(o,a)),a.type===_d&&(a.el=o.el)}}function hP(t){const e=t.slice(),n=[0];let s,i,r,o,a;const c=t.length;for(s=0;s<c;s++){const l=t[s];if(l!==0){if(i=n[n.length-1],t[i]<l){e[s]=i,n.push(s);continue}for(r=0,o=n.length-1;r<o;)a=r+o>>1,t[n[a]]<l?r=a+1:o=a;l<t[n[r]]&&(r>0&&(e[s]=n[r-1]),n[r]=s)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=e[o];return n}function WT(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:WT(e)}const dP=t=>t.__isTeleport,_e=Symbol.for("v-fgt"),_d=Symbol.for("v-txt"),jn=Symbol.for("v-cmt"),Bu=Symbol.for("v-stc"),cc=[];let ns=null;function A(t=!1){cc.push(ns=t?null:[])}function fP(){cc.pop(),ns=cc[cc.length-1]||null}let Pc=1;function kb(t){Pc+=t}function qT(t){return t.dynamicChildren=Pc>0?ns||Fo:null,fP(),Pc>0&&ns&&ns.push(t),t}function M(t,e,n,s,i,r){return qT(g(t,e,n,s,i,r,!0))}function Oe(t,e,n,s,i){return qT(W(t,e,n,s,i,!0))}function _h(t){return t?t.__v_isVNode===!0:!1}function Cr(t,e){return t.type===e.type&&t.key===e.key}const yd="__vInternal",GT=({key:t})=>t??null,Uu=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Ct(t)||xn(t)||Se(t)?{i:Ft,r:t,k:e,f:!!n}:t:null);function g(t,e=null,n=null,s=0,i=null,r=t===_e?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&GT(e),ref:e&&Uu(e),scopeId:pd,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Ft};return a?(Lm(c,n),r&128&&t.normalize(c)):n&&(c.shapeFlag|=Ct(n)?8:16),Pc>0&&!o&&ns&&(c.patchFlag>0||r&6)&&c.patchFlag!==32&&ns.push(c),c}const W=pP;function pP(t,e=null,n=null,s=0,i=null,r=!1){if((!t||t===ST)&&(t=jn),_h(t)){const a=er(t,e,!0);return n&&Lm(a,n),Pc>0&&!r&&ns&&(a.shapeFlag&6?ns[ns.indexOf(t)]=a:ns.push(a)),a.patchFlag|=-2,a}if(IP(t)&&(t=t.__vccOpts),e){e=gP(e);let{class:a,style:c}=e;a&&!Ct(a)&&(e.class=St(a)),Xe(c)&&(fT(c)&&!re(c)&&(c=Ot({},c)),e.style=ll(c))}const o=Ct(t)?1:Dk(t)?128:dP(t)?64:Xe(t)?4:Se(t)?2:0;return g(t,e,n,s,i,o,r,!0)}function gP(t){return t?fT(t)||yd in t?Ot({},t):t:null}function er(t,e,n=!1){const{props:s,ref:i,patchFlag:r,children:o}=t,a=e?bd(s||{},e):s;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&GT(a),ref:e&&e.ref?n&&i?re(i)?i.concat(Uu(e)):[i,Uu(e)]:Uu(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==_e?r===-1?16:r|16:r,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&er(t.ssContent),ssFallback:t.ssFallback&&er(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function an(t=" ",e=0){return W(_d,null,t,e)}function mP(t,e){const n=W(Bu,null,t);return n.staticCount=e,n}function we(t="",e=!1){return e?(A(),Oe(jn,null,t)):W(jn,null,t)}function ms(t){return t==null||typeof t=="boolean"?W(jn):re(t)?W(_e,null,t.slice()):typeof t=="object"?Di(t):W(_d,null,String(t))}function Di(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:er(t)}function Lm(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(re(e))n=16;else if(typeof e=="object")if(s&65){const i=e.default;i&&(i._c&&(i._d=!1),Lm(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(yd in e)?e._ctx=Ft:i===3&&Ft&&(Ft.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Se(e)?(e={default:e,_ctx:Ft},n=32):(e=String(e),s&64?(n=16,e=[an(e)]):n=8);t.children=e,t.shapeFlag|=n}function bd(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const i in s)if(i==="class")e.class!==s.class&&(e.class=St([e.class,s.class]));else if(i==="style")e.style=ll([e.style,s.style]);else if(rd(i)){const r=e[i],o=s[i];o&&r!==o&&!(re(r)&&r.includes(o))&&(e[i]=r?[].concat(r,o):o)}else i!==""&&(e[i]=s[i])}return e}function ds(t,e,n,s=null){zn(t,e,7,[n,s])}const _P=FT();let yP=0;function bP(t,e,n){const s=t.type,i=(e?e.appContext:t.appContext)||_P,r={uid:yP++,vnode:t,type:s,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new YA(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:UT(s,i),emitsOptions:TT(s,i),emit:null,emitted:null,propsDefaults:nt,inheritAttrs:s.inheritAttrs,ctx:nt,data:nt,props:nt,attrs:nt,slots:nt,refs:nt,setupState:nt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=xk.bind(null,r),t.ce&&t.ce(r),r}let Yt=null;const Nm=()=>Yt||Ft;let yh,Jp;{const t=QE(),e=(n,s)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(s),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};yh=e("__VUE_INSTANCE_SETTERS__",n=>Yt=n),Jp=e("__VUE_SSR_SETTERS__",n=>vd=n)}const ul=t=>{const e=Yt;return yh(t),t.scope.on(),()=>{t.scope.off(),yh(e)}},Pb=()=>{Yt&&Yt.scope.off(),yh(null)};function KT(t){return t.vnode.shapeFlag&4}let vd=!1;function vP(t,e=!1){e&&Jp(e);const{props:n,children:s}=t.vnode,i=KT(t);sP(t,n,i,e),oP(t,s);const r=i?wP(t,e):void 0;return e&&Jp(!1),r}function wP(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=pT(new Proxy(t.ctx,Yk));const{setup:s}=n;if(s){const i=t.setupContext=s.length>1?TP(t):null,r=ul(t);co();const o=qi(s,t,0,[t.props,i]);if(lo(),r(),GE(o)){if(o.then(Pb,Pb),e)return o.then(a=>{Db(t,a,e)}).catch(a=>{dd(a,t,0)});t.asyncDep=o}else Db(t,o,e)}else YT(t,e)}function Db(t,e,n){Se(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Xe(e)&&(t.setupState=yT(e)),YT(t,n)}let Ob;function YT(t,e,n){const s=t.type;if(!t.render){if(!e&&Ob&&!s.render){const i=s.template||Om(t).template;if(i){const{isCustomElement:r,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:c}=s,l=Ot(Ot({isCustomElement:r,delimiters:a},o),c);s.render=Ob(i,l)}}t.render=s.render||Hn}{const i=ul(t);co();try{Qk(t)}finally{lo(),i()}}}function EP(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return Rn(t,"get","$attrs"),e[n]}}))}function TP(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return EP(t)},slots:t.slots,emit:t.emit,expose:e}}function wd(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(yT(pT(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in oc)return oc[n](t)},has(e,n){return n in e||n in oc}}))}function SP(t,e=!0){return Se(t)?t.displayName||t.name:t.name||e&&t.__name}function IP(t){return Se(t)&&"__vccOpts"in t}const ts=(t,e)=>_k(t,e,vd);function Ed(t,e,n){const s=arguments.length;return s===2?Xe(e)&&!re(e)?_h(e)?W(t,null,[e]):W(t,e):W(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&_h(n)&&(n=[n]),W(t,e,n))}const RP="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const xP="http://www.w3.org/2000/svg",CP="http://www.w3.org/1998/Math/MathML",Oi=typeof document<"u"?document:null,Mb=Oi&&Oi.createElement("template"),AP={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const i=e==="svg"?Oi.createElementNS(xP,t):e==="mathml"?Oi.createElementNS(CP,t):Oi.createElement(t,n?{is:n}:void 0);return t==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:t=>Oi.createTextNode(t),createComment:t=>Oi.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Oi.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,i,r){const o=n?n.previousSibling:e.lastChild;if(i&&(i===r||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===r||!(i=i.nextSibling)););else{Mb.innerHTML=s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t;const a=Mb.content;if(s==="svg"||s==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},wi="transition",Ca="animation",Qo=Symbol("_vtc"),bh=(t,{slots:e})=>Ed(Fk,XT(t),e);bh.displayName="Transition";const QT={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},kP=bh.props=Ot({},AT,QT),yr=(t,e=[])=>{re(t)?t.forEach(n=>n(...e)):t&&t(...e)},Lb=t=>t?re(t)?t.some(e=>e.length>1):t.length>1:!1;function XT(t){const e={};for(const F in t)F in QT||(e[F]=t[F]);if(t.css===!1)return e;const{name:n="v",type:s,duration:i,enterFromClass:r=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:c=r,appearActiveClass:l=o,appearToClass:u=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,p=PP(i),m=p&&p[0],_=p&&p[1],{onBeforeEnter:y,onEnter:b,onEnterCancelled:w,onLeave:T,onLeaveCancelled:S,onBeforeAppear:x=y,onAppear:R=b,onAppearCancelled:I=w}=e,P=(F,oe,Re)=>{Ai(F,oe?u:a),Ai(F,oe?l:o),Re&&Re()},$=(F,oe)=>{F._isLeaving=!1,Ai(F,h),Ai(F,f),Ai(F,d),oe&&oe()},Q=F=>(oe,Re)=>{const ye=F?R:b,ue=()=>P(oe,F,Re);yr(ye,[oe,ue]),Nb(()=>{Ai(oe,F?c:r),Ks(oe,F?u:a),Lb(ye)||Vb(oe,s,m,ue)})};return Ot(e,{onBeforeEnter(F){yr(y,[F]),Ks(F,r),Ks(F,o)},onBeforeAppear(F){yr(x,[F]),Ks(F,c),Ks(F,l)},onEnter:Q(!1),onAppear:Q(!0),onLeave(F,oe){F._isLeaving=!0;const Re=()=>$(F,oe);Ks(F,h),ZT(),Ks(F,d),Nb(()=>{F._isLeaving&&(Ai(F,h),Ks(F,f),Lb(T)||Vb(F,s,_,Re))}),yr(T,[F,Re])},onEnterCancelled(F){P(F,!1),yr(w,[F])},onAppearCancelled(F){P(F,!0),yr(I,[F])},onLeaveCancelled(F){$(F),yr(S,[F])}})}function PP(t){if(t==null)return null;if(Xe(t))return[Hf(t.enter),Hf(t.leave)];{const e=Hf(t);return[e,e]}}function Hf(t){return $A(t)}function Ks(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Qo]||(t[Qo]=new Set)).add(e)}function Ai(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[Qo];n&&(n.delete(e),n.size||(t[Qo]=void 0))}function Nb(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let DP=0;function Vb(t,e,n,s){const i=t._endId=++DP,r=()=>{i===t._endId&&s()};if(n)return setTimeout(r,n);const{type:o,timeout:a,propCount:c}=JT(t,e);if(!o)return s();const l=o+"end";let u=0;const h=()=>{t.removeEventListener(l,d),r()},d=f=>{f.target===t&&++u>=c&&h()};setTimeout(()=>{u<c&&h()},a+1),t.addEventListener(l,d)}function JT(t,e){const n=window.getComputedStyle(t),s=p=>(n[p]||"").split(", "),i=s(`${wi}Delay`),r=s(`${wi}Duration`),o=Fb(i,r),a=s(`${Ca}Delay`),c=s(`${Ca}Duration`),l=Fb(a,c);let u=null,h=0,d=0;e===wi?o>0&&(u=wi,h=o,d=r.length):e===Ca?l>0&&(u=Ca,h=l,d=c.length):(h=Math.max(o,l),u=h>0?o>l?wi:Ca:null,d=u?u===wi?r.length:c.length:0);const f=u===wi&&/\b(transform|all)(,|$)/.test(s(`${wi}Property`).toString());return{type:u,timeout:h,propCount:d,hasTransform:f}}function Fb(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>Bb(n)+Bb(t[s])))}function Bb(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function ZT(){return document.body.offsetHeight}function OP(t,e,n){const s=t[Qo];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const vh=Symbol("_vod"),e1=Symbol("_vsh"),ko={beforeMount(t,{value:e},{transition:n}){t[vh]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Aa(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:s}){!e!=!n&&(s?e?(s.beforeEnter(t),Aa(t,!0),s.enter(t)):s.leave(t,()=>{Aa(t,!1)}):Aa(t,e))},beforeUnmount(t,{value:e}){Aa(t,e)}};function Aa(t,e){t.style.display=e?t[vh]:"none",t[e1]=!e}const MP=Symbol(""),LP=/(^|;)\s*display\s*:/;function NP(t,e,n){const s=t.style,i=Ct(n);let r=!1;if(n&&!i){if(e)if(Ct(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&$u(s,a,"")}else for(const o in e)n[o]==null&&$u(s,o,"");for(const o in n)o==="display"&&(r=!0),$u(s,o,n[o])}else if(i){if(e!==n){const o=s[MP];o&&(n+=";"+o),s.cssText=n,r=LP.test(n)}}else e&&t.removeAttribute("style");vh in t&&(t[vh]=r?s.display:"",t[e1]&&(s.display="none"))}const Ub=/\s*!important$/;function $u(t,e,n){if(re(n))n.forEach(s=>$u(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=VP(t,e);Ub.test(n)?t.setProperty(ao(s),n.replace(Ub,""),"important"):t[s]=n}}const $b=["Webkit","Moz","ms"],zf={};function VP(t,e){const n=zf[e];if(n)return n;let s=Fs(e);if(s!=="filter"&&s in t)return zf[e]=s;s=cd(s);for(let i=0;i<$b.length;i++){const r=$b[i]+s;if(r in t)return zf[e]=r}return e}const Hb="http://www.w3.org/1999/xlink";function FP(t,e,n,s,i){if(s&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(Hb,e.slice(6,e.length)):t.setAttributeNS(Hb,e,n);else{const r=GA(e);n==null||r&&!XE(n)?t.removeAttribute(e):t.setAttribute(e,r?"":n)}}function BP(t,e,n,s,i,r,o){if(e==="innerHTML"||e==="textContent"){s&&o(s,i,r),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const l=a==="OPTION"?t.getAttribute("value")||"":t.value,u=n??"";(l!==u||!("_value"in t))&&(t.value=u),n==null&&t.removeAttribute(e),t._value=n;return}let c=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=XE(n):n==null&&l==="string"?(n="",c=!0):l==="number"&&(n=0,c=!0)}try{t[e]=n}catch{}c&&t.removeAttribute(e)}function Ar(t,e,n,s){t.addEventListener(e,n,s)}function UP(t,e,n,s){t.removeEventListener(e,n,s)}const zb=Symbol("_vei");function $P(t,e,n,s,i=null){const r=t[zb]||(t[zb]={}),o=r[e];if(s&&o)o.value=s;else{const[a,c]=HP(e);if(s){const l=r[e]=WP(s,i);Ar(t,a,l,c)}else o&&(UP(t,a,o,c),r[e]=void 0)}}const jb=/(?:Once|Passive|Capture)$/;function HP(t){let e;if(jb.test(t)){e={};let s;for(;s=t.match(jb);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ao(t.slice(2)),e]}let jf=0;const zP=Promise.resolve(),jP=()=>jf||(zP.then(()=>jf=0),jf=Date.now());function WP(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;zn(qP(s,n.value),e,5,[s])};return n.value=t,n.attached=jP(),n}function qP(t,e){if(re(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>i=>!i._stopped&&s&&s(i))}else return e}const Wb=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,GP=(t,e,n,s,i,r,o,a,c)=>{const l=i==="svg";e==="class"?OP(t,s,l):e==="style"?NP(t,n,s):rd(e)?_m(e)||$P(t,e,n,s,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):KP(t,e,s,l))?BP(t,e,s,r,o,a,c):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),FP(t,e,s,l))};function KP(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&Wb(e)&&Se(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Wb(e)&&Ct(n)?!1:e in t}const t1=new WeakMap,n1=new WeakMap,wh=Symbol("_moveCb"),qb=Symbol("_enterCb"),s1={name:"TransitionGroup",props:Ot({},kP,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Nm(),s=CT();let i,r;return OT(()=>{if(!i.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!eD(i[0].el,n.vnode.el,o))return;i.forEach(XP),i.forEach(JP);const a=i.filter(ZP);ZT(),a.forEach(c=>{const l=c.el,u=l.style;Ks(l,o),u.transform=u.webkitTransform=u.transitionDuration="";const h=l[wh]=d=>{d&&d.target!==l||(!d||/transform$/.test(d.propertyName))&&(l.removeEventListener("transitionend",h),l[wh]=null,Ai(l,o))};l.addEventListener("transitionend",h)})}),()=>{const o=Fe(t),a=XT(o);let c=o.tag||_e;i=r,r=e.default?Dm(e.default()):[];for(let l=0;l<r.length;l++){const u=r[l];u.key!=null&&kc(u,Ac(u,a,s,n))}if(i)for(let l=0;l<i.length;l++){const u=i[l];kc(u,Ac(u,a,s,n)),t1.set(u,u.el.getBoundingClientRect())}return W(c,null,r)}}},YP=t=>delete t.mode;s1.props;const QP=s1;function XP(t){const e=t.el;e[wh]&&e[wh](),e[qb]&&e[qb]()}function JP(t){n1.set(t,t.el.getBoundingClientRect())}function ZP(t){const e=t1.get(t),n=n1.get(t),s=e.left-n.left,i=e.top-n.top;if(s||i){const r=t.el.style;return r.transform=r.webkitTransform=`translate(${s}px,${i}px)`,r.transitionDuration="0s",t}}function eD(t,e,n){const s=t.cloneNode(),i=t[Qo];i&&i.forEach(a=>{a.split(/\s+/).forEach(c=>c&&s.classList.remove(c))}),n.split(/\s+/).forEach(a=>a&&s.classList.add(a)),s.style.display="none";const r=e.nodeType===1?e:e.parentNode;r.appendChild(s);const{hasTransform:o}=JT(s);return r.removeChild(s),o}const Eh=t=>{const e=t.props["onUpdate:modelValue"]||!1;return re(e)?n=>Lu(e,n):e};function tD(t){t.target.composing=!0}function Gb(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ho=Symbol("_assign"),Ee={created(t,{modifiers:{lazy:e,trim:n,number:s}},i){t[Ho]=Eh(i);const r=s||i.props&&i.props.type==="number";Ar(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),r&&(a=$p(a)),t[Ho](a)}),n&&Ar(t,"change",()=>{t.value=t.value.trim()}),e||(Ar(t,"compositionstart",tD),Ar(t,"compositionend",Gb),Ar(t,"change",Gb))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:s,number:i}},r){if(t[Ho]=Eh(r),t.composing)return;const o=i||t.type==="number"?$p(t.value):t.value,a=e??"";o!==a&&(document.activeElement===t&&t.type!=="range"&&(n||s&&t.value.trim()===a)||(t.value=a))}},Dc={deep:!0,created(t,e,n){t[Ho]=Eh(n),Ar(t,"change",()=>{const s=t._modelValue,i=nD(t),r=t.checked,o=t[Ho];if(re(s)){const a=JE(s,i),c=a!==-1;if(r&&!c)o(s.concat(i));else if(!r&&c){const l=[...s];l.splice(a,1),o(l)}}else if(od(s)){const a=new Set(s);r?a.add(i):a.delete(i),o(a)}else o(i1(t,r))})},mounted:Kb,beforeUpdate(t,e,n){t[Ho]=Eh(n),Kb(t,e,n)}};function Kb(t,{value:e,oldValue:n},s){t._modelValue=e,re(e)?t.checked=JE(e,s.props.value)>-1:od(e)?t.checked=e.has(s.props.value):e!==n&&(t.checked=ld(e,i1(t,!0)))}function nD(t){return"_value"in t?t._value:t.value}function i1(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const sD=["ctrl","shift","alt","meta"],iD={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>sD.some(n=>t[`${n}Key`]&&!e.includes(n))},Qe=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(i,...r)=>{for(let o=0;o<e.length;o++){const a=iD[e[o]];if(a&&a(i,e))return}return t(i,...r)})},rD={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},fs=(t,e)=>{const n=t._withKeys||(t._withKeys={}),s=e.join(".");return n[s]||(n[s]=i=>{if(!("key"in i))return;const r=ao(i.key);if(e.some(o=>o===r||rD[o]===r))return t(i)})},oD=Ot({patchProp:GP},AP);let Yb;function aD(){return Yb||(Yb=cP(oD))}const r1=(...t)=>{const e=aD().createApp(...t),{mount:n}=e;return e.mount=s=>{const i=lD(s);if(!i)return;const r=e._component;!Se(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,cD(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function cD(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function lD(t){return Ct(t)?document.querySelector(t):t}const Be=(t,e)=>{const n=t.__vccOpts||t;for(const[s,i]of e)n[s]=i;return n},uD={name:"App"};function hD(t,e,n,s,i,r){const o=te("router-view");return A(),Oe(o)}const dD=Be(uD,[["render",hD]]);/*!
  * vue-router v4.3.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Po=typeof document<"u";function fD(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const qe=Object.assign;function Wf(t,e){const n={};for(const s in e){const i=e[s];n[s]=os(i)?i.map(t):t(i)}return n}const lc=()=>{},os=Array.isArray,o1=/#/g,pD=/&/g,gD=/\//g,mD=/=/g,_D=/\?/g,a1=/\+/g,yD=/%5B/g,bD=/%5D/g,c1=/%5E/g,vD=/%60/g,l1=/%7B/g,wD=/%7C/g,u1=/%7D/g,ED=/%20/g;function Vm(t){return encodeURI(""+t).replace(wD,"|").replace(yD,"[").replace(bD,"]")}function TD(t){return Vm(t).replace(l1,"{").replace(u1,"}").replace(c1,"^")}function Zp(t){return Vm(t).replace(a1,"%2B").replace(ED,"+").replace(o1,"%23").replace(pD,"%26").replace(vD,"`").replace(l1,"{").replace(u1,"}").replace(c1,"^")}function SD(t){return Zp(t).replace(mD,"%3D")}function ID(t){return Vm(t).replace(o1,"%23").replace(_D,"%3F")}function RD(t){return t==null?"":ID(t).replace(gD,"%2F")}function Oc(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const xD=/\/$/,CD=t=>t.replace(xD,"");function qf(t,e,n="/"){let s,i={},r="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(s=e.slice(0,c),r=e.slice(c+1,a>-1?a:e.length),i=t(r)),a>-1&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=DD(s??e,n),{fullPath:s+(r&&"?")+r+o,path:s,query:i,hash:Oc(o)}}function AD(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Qb(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function kD(t,e,n){const s=e.matched.length-1,i=n.matched.length-1;return s>-1&&s===i&&Xo(e.matched[s],n.matched[i])&&h1(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Xo(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function h1(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!PD(t[n],e[n]))return!1;return!0}function PD(t,e){return os(t)?Xb(t,e):os(e)?Xb(e,t):t===e}function Xb(t,e){return os(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function DD(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let r=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+s.slice(o).join("/")}var Mc;(function(t){t.pop="pop",t.push="push"})(Mc||(Mc={}));var uc;(function(t){t.back="back",t.forward="forward",t.unknown=""})(uc||(uc={}));function OD(t){if(!t)if(Po){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),CD(t)}const MD=/^[^#]+#/;function LD(t,e){return t.replace(MD,"#")+e}function ND(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const Td=()=>({left:window.scrollX,top:window.scrollY});function VD(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=ND(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Jb(t,e){return(history.state?history.state.position-e:-1)+t}const eg=new Map;function FD(t,e){eg.set(t,e)}function BD(t){const e=eg.get(t);return eg.delete(t),e}let UD=()=>location.protocol+"//"+location.host;function d1(t,e){const{pathname:n,search:s,hash:i}=e,r=t.indexOf("#");if(r>-1){let a=i.includes(t.slice(r))?t.slice(r).length:1,c=i.slice(a);return c[0]!=="/"&&(c="/"+c),Qb(c,"")}return Qb(n,t)+s+i}function $D(t,e,n,s){let i=[],r=[],o=null;const a=({state:d})=>{const f=d1(t,location),p=n.value,m=e.value;let _=0;if(d){if(n.value=f,e.value=d,o&&o===p){o=null;return}_=m?d.position-m.position:0}else s(f);i.forEach(y=>{y(n.value,p,{delta:_,type:Mc.pop,direction:_?_>0?uc.forward:uc.back:uc.unknown})})};function c(){o=n.value}function l(d){i.push(d);const f=()=>{const p=i.indexOf(d);p>-1&&i.splice(p,1)};return r.push(f),f}function u(){const{history:d}=window;d.state&&d.replaceState(qe({},d.state,{scroll:Td()}),"")}function h(){for(const d of r)d();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:l,destroy:h}}function Zb(t,e,n,s=!1,i=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:i?Td():null}}function HD(t){const{history:e,location:n}=window,s={value:d1(t,n)},i={value:e.state};i.value||r(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(c,l,u){const h=t.indexOf("#"),d=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+c:UD()+t+c;try{e[u?"replaceState":"pushState"](l,"",d),i.value=l}catch(f){console.error(f),n[u?"replace":"assign"](d)}}function o(c,l){const u=qe({},e.state,Zb(i.value.back,c,i.value.forward,!0),l,{position:i.value.position});r(c,u,!0),s.value=c}function a(c,l){const u=qe({},i.value,e.state,{forward:c,scroll:Td()});r(u.current,u,!0);const h=qe({},Zb(s.value,c,null),{position:u.position+1},l);r(c,h,!1),s.value=c}return{location:s,state:i,push:a,replace:o}}function zD(t){t=OD(t);const e=HD(t),n=$D(t,e.state,e.location,e.replace);function s(r,o=!0){o||n.pauseListeners(),history.go(r)}const i=qe({location:"",base:t,go:s,createHref:LD.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function jD(t){return typeof t=="string"||t&&typeof t=="object"}function f1(t){return typeof t=="string"||typeof t=="symbol"}const Ei={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},p1=Symbol("");var ev;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(ev||(ev={}));function Jo(t,e){return qe(new Error,{type:t,[p1]:!0},e)}function qs(t,e){return t instanceof Error&&p1 in t&&(e==null||!!(t.type&e))}const tv="[^/]+?",WD={sensitive:!1,strict:!1,start:!0,end:!0},qD=/[.+*?^${}()[\]/\\]/g;function GD(t,e){const n=qe({},WD,e),s=[];let i=n.start?"^":"";const r=[];for(const l of t){const u=l.length?[]:[90];n.strict&&!l.length&&(i+="/");for(let h=0;h<l.length;h++){const d=l[h];let f=40+(n.sensitive?.25:0);if(d.type===0)h||(i+="/"),i+=d.value.replace(qD,"\\$&"),f+=40;else if(d.type===1){const{value:p,repeatable:m,optional:_,regexp:y}=d;r.push({name:p,repeatable:m,optional:_});const b=y||tv;if(b!==tv){f+=10;try{new RegExp(`(${b})`)}catch(T){throw new Error(`Invalid custom RegExp for param "${p}" (${b}): `+T.message)}}let w=m?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;h||(w=_&&l.length<2?`(?:/${w})`:"/"+w),_&&(w+="?"),i+=w,f+=20,_&&(f+=-8),m&&(f+=-20),b===".*"&&(f+=-50)}u.push(f)}s.push(u)}if(n.strict&&n.end){const l=s.length-1;s[l][s[l].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(l){const u=l.match(o),h={};if(!u)return null;for(let d=1;d<u.length;d++){const f=u[d]||"",p=r[d-1];h[p.name]=f&&p.repeatable?f.split("/"):f}return h}function c(l){let u="",h=!1;for(const d of t){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const f of d)if(f.type===0)u+=f.value;else if(f.type===1){const{value:p,repeatable:m,optional:_}=f,y=p in l?l[p]:"";if(os(y)&&!m)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const b=os(y)?y.join("/"):y;if(!b)if(_)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${p}"`);u+=b}}return u||"/"}return{re:o,score:s,keys:r,parse:a,stringify:c}}function KD(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function YD(t,e){let n=0;const s=t.score,i=e.score;for(;n<s.length&&n<i.length;){const r=KD(s[n],i[n]);if(r)return r;n++}if(Math.abs(i.length-s.length)===1){if(nv(s))return 1;if(nv(i))return-1}return i.length-s.length}function nv(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const QD={type:0,value:""},XD=/[a-zA-Z0-9_]/;function JD(t){if(!t)return[[]];if(t==="/")return[[QD]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${n})/"${l}": ${f}`)}let n=0,s=n;const i=[];let r;function o(){r&&i.push(r),r=[]}let a=0,c,l="",u="";function h(){l&&(n===0?r.push({type:0,value:l}):n===1||n===2||n===3?(r.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:l,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),l="")}function d(){l+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:c==="/"?(l&&h(),o()):c===":"?(h(),n=1):d();break;case 4:d(),n=s;break;case 1:c==="("?n=2:XD.test(c)?d():(h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:n=3:u+=c;break;case 3:h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${l}"`),h(),o(),i}function ZD(t,e,n){const s=GD(JD(t.path),n),i=qe(s,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function eO(t,e){const n=[],s=new Map;e=rv({strict:!1,end:!0,sensitive:!1},e);function i(u){return s.get(u)}function r(u,h,d){const f=!d,p=tO(u);p.aliasOf=d&&d.record;const m=rv(e,u),_=[p];if("alias"in u){const w=typeof u.alias=="string"?[u.alias]:u.alias;for(const T of w)_.push(qe({},p,{components:d?d.record.components:p.components,path:T,aliasOf:d?d.record:p}))}let y,b;for(const w of _){const{path:T}=w;if(h&&T[0]!=="/"){const S=h.record.path,x=S[S.length-1]==="/"?"":"/";w.path=h.record.path+(T&&x+T)}if(y=ZD(w,h,m),d?d.alias.push(y):(b=b||y,b!==y&&b.alias.push(y),f&&u.name&&!iv(y)&&o(u.name)),p.children){const S=p.children;for(let x=0;x<S.length;x++)r(S[x],y,d&&d.children[x])}d=d||y,(y.record.components&&Object.keys(y.record.components).length||y.record.name||y.record.redirect)&&c(y)}return b?()=>{o(b)}:lc}function o(u){if(f1(u)){const h=s.get(u);h&&(s.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&s.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function c(u){let h=0;for(;h<n.length&&YD(u,n[h])>=0&&(u.record.path!==n[h].record.path||!g1(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!iv(u)&&s.set(u.record.name,u)}function l(u,h){let d,f={},p,m;if("name"in u&&u.name){if(d=s.get(u.name),!d)throw Jo(1,{location:u});m=d.record.name,f=qe(sv(h.params,d.keys.filter(b=>!b.optional).concat(d.parent?d.parent.keys.filter(b=>b.optional):[]).map(b=>b.name)),u.params&&sv(u.params,d.keys.map(b=>b.name))),p=d.stringify(f)}else if(u.path!=null)p=u.path,d=n.find(b=>b.re.test(p)),d&&(f=d.parse(p),m=d.record.name);else{if(d=h.name?s.get(h.name):n.find(b=>b.re.test(h.path)),!d)throw Jo(1,{location:u,currentLocation:h});m=d.record.name,f=qe({},h.params,u.params),p=d.stringify(f)}const _=[];let y=d;for(;y;)_.unshift(y.record),y=y.parent;return{name:m,path:p,params:f,matched:_,meta:sO(_)}}return t.forEach(u=>r(u)),{addRoute:r,resolve:l,removeRoute:o,getRoutes:a,getRecordMatcher:i}}function sv(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function tO(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:nO(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function nO(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function iv(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function sO(t){return t.reduce((e,n)=>qe(e,n.meta),{})}function rv(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}function g1(t,e){return e.children.some(n=>n===t||g1(t,n))}function iO(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<s.length;++i){const r=s[i].replace(a1," "),o=r.indexOf("="),a=Oc(o<0?r:r.slice(0,o)),c=o<0?null:Oc(r.slice(o+1));if(a in e){let l=e[a];os(l)||(l=e[a]=[l]),l.push(c)}else e[a]=c}return e}function ov(t){let e="";for(let n in t){const s=t[n];if(n=SD(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(os(s)?s.map(r=>r&&Zp(r)):[s&&Zp(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function rO(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=os(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return e}const oO=Symbol(""),av=Symbol(""),Fm=Symbol(""),m1=Symbol(""),tg=Symbol("");function ka(){let t=[];function e(s){return t.push(s),()=>{const i=t.indexOf(s);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Mi(t,e,n,s,i,r=o=>o()){const o=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((a,c)=>{const l=d=>{d===!1?c(Jo(4,{from:n,to:e})):d instanceof Error?c(d):jD(d)?c(Jo(2,{from:e,to:d})):(o&&s.enterCallbacks[i]===o&&typeof d=="function"&&o.push(d),a())},u=r(()=>t.call(s&&s.instances[i],e,n,l));let h=Promise.resolve(u);t.length<3&&(h=h.then(l)),h.catch(d=>c(d))})}function Gf(t,e,n,s,i=r=>r()){const r=[];for(const o of t)for(const a in o.components){let c=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(aO(c)){const u=(c.__vccOpts||c)[e];u&&r.push(Mi(u,n,s,o,a,i))}else{let l=c();r.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const h=fD(u)?u.default:u;o.components[a]=h;const f=(h.__vccOpts||h)[e];return f&&Mi(f,n,s,o,a,i)()}))}}return r}function aO(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function cv(t){const e=xs(Fm),n=xs(m1),s=ts(()=>e.resolve(Hr(t.to))),i=ts(()=>{const{matched:c}=s.value,{length:l}=c,u=c[l-1],h=n.matched;if(!u||!h.length)return-1;const d=h.findIndex(Xo.bind(null,u));if(d>-1)return d;const f=lv(c[l-2]);return l>1&&lv(u)===f&&h[h.length-1].path!==f?h.findIndex(Xo.bind(null,c[l-2])):d}),r=ts(()=>i.value>-1&&hO(n.params,s.value.params)),o=ts(()=>i.value>-1&&i.value===n.matched.length-1&&h1(n.params,s.value.params));function a(c={}){return uO(c)?e[Hr(t.replace)?"replace":"push"](Hr(t.to)).catch(lc):Promise.resolve()}return{route:s,href:ts(()=>s.value.href),isActive:r,isExactActive:o,navigate:a}}const cO=pi({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:cv,setup(t,{slots:e}){const n=hd(cv(t)),{options:s}=xs(Fm),i=ts(()=>({[uv(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[uv(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=e.default&&e.default(n);return t.custom?r:Ed("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}}),lO=cO;function uO(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function hO(t,e){for(const n in e){const s=e[n],i=t[n];if(typeof s=="string"){if(s!==i)return!1}else if(!os(i)||i.length!==s.length||s.some((r,o)=>r!==i[o]))return!1}return!0}function lv(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const uv=(t,e,n)=>t??e??n,dO=pi({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=xs(tg),i=ts(()=>t.route||s.value),r=xs(av,0),o=ts(()=>{let l=Hr(r);const{matched:u}=i.value;let h;for(;(h=u[l])&&!h.components;)l++;return l}),a=ts(()=>i.value.matched[o.value]);Fu(av,ts(()=>o.value+1)),Fu(oO,a),Fu(tg,i);const c=yk();return Vu(()=>[c.value,a.value,t.name],([l,u,h],[d,f,p])=>{u&&(u.instances[h]=l,f&&f!==u&&l&&l===d&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),l&&u&&(!f||!Xo(u,f)||!d)&&(u.enterCallbacks[h]||[]).forEach(m=>m(l))},{flush:"post"}),()=>{const l=i.value,u=t.name,h=a.value,d=h&&h.components[u];if(!d)return hv(n.default,{Component:d,route:l});const f=h.props[u],p=f?f===!0?l.params:typeof f=="function"?f(l):f:null,_=Ed(d,qe({},p,e,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(h.instances[u]=null)},ref:c}));return hv(n.default,{Component:_,route:l})||_}}});function hv(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const fO=dO;function pO(t){const e=eO(t.routes,t),n=t.parseQuery||iO,s=t.stringifyQuery||ov,i=t.history,r=ka(),o=ka(),a=ka(),c=bk(Ei);let l=Ei;Po&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Wf.bind(null,L=>""+L),h=Wf.bind(null,RD),d=Wf.bind(null,Oc);function f(L,J){let K,ee;return f1(L)?(K=e.getRecordMatcher(L),ee=J):ee=L,e.addRoute(ee,K)}function p(L){const J=e.getRecordMatcher(L);J&&e.removeRoute(J)}function m(){return e.getRoutes().map(L=>L.record)}function _(L){return!!e.getRecordMatcher(L)}function y(L,J){if(J=qe({},J||c.value),typeof L=="string"){const E=qf(n,L,J.path),k=e.resolve({path:E.path},J),V=i.createHref(E.fullPath);return qe(E,k,{params:d(k.params),hash:Oc(E.hash),redirectedFrom:void 0,href:V})}let K;if(L.path!=null)K=qe({},L,{path:qf(n,L.path,J.path).path});else{const E=qe({},L.params);for(const k in E)E[k]==null&&delete E[k];K=qe({},L,{params:h(E)}),J.params=h(J.params)}const ee=e.resolve(K,J),je=L.hash||"";ee.params=u(d(ee.params));const dt=AD(s,qe({},L,{hash:TD(je),path:ee.path})),v=i.createHref(dt);return qe({fullPath:dt,hash:je,query:s===ov?rO(L.query):L.query||{}},ee,{redirectedFrom:void 0,href:v})}function b(L){return typeof L=="string"?qf(n,L,c.value.path):qe({},L)}function w(L,J){if(l!==L)return Jo(8,{from:J,to:L})}function T(L){return R(L)}function S(L){return T(qe(b(L),{replace:!0}))}function x(L){const J=L.matched[L.matched.length-1];if(J&&J.redirect){const{redirect:K}=J;let ee=typeof K=="function"?K(L):K;return typeof ee=="string"&&(ee=ee.includes("?")||ee.includes("#")?ee=b(ee):{path:ee},ee.params={}),qe({query:L.query,hash:L.hash,params:ee.path!=null?{}:L.params},ee)}}function R(L,J){const K=l=y(L),ee=c.value,je=L.state,dt=L.force,v=L.replace===!0,E=x(K);if(E)return R(qe(b(E),{state:typeof E=="object"?qe({},je,E.state):je,force:dt,replace:v}),J||K);const k=K;k.redirectedFrom=J;let V;return!dt&&kD(s,ee,K)&&(V=Jo(16,{to:k,from:ee}),pn(ee,ee,!0,!1)),(V?Promise.resolve(V):$(k,ee)).catch(D=>qs(D)?qs(D,2)?D:fn(D):be(D,k,ee)).then(D=>{if(D){if(qs(D,2))return R(qe({replace:v},b(D.to),{state:typeof D.to=="object"?qe({},je,D.to.state):je,force:dt}),J||k)}else D=F(k,ee,!0,v,je);return Q(k,ee,D),D})}function I(L,J){const K=w(L,J);return K?Promise.reject(K):Promise.resolve()}function P(L){const J=yn.values().next().value;return J&&typeof J.runWithContext=="function"?J.runWithContext(L):L()}function $(L,J){let K;const[ee,je,dt]=gO(L,J);K=Gf(ee.reverse(),"beforeRouteLeave",L,J);for(const E of ee)E.leaveGuards.forEach(k=>{K.push(Mi(k,L,J))});const v=I.bind(null,L,J);return K.push(v),ht(K).then(()=>{K=[];for(const E of r.list())K.push(Mi(E,L,J));return K.push(v),ht(K)}).then(()=>{K=Gf(je,"beforeRouteUpdate",L,J);for(const E of je)E.updateGuards.forEach(k=>{K.push(Mi(k,L,J))});return K.push(v),ht(K)}).then(()=>{K=[];for(const E of dt)if(E.beforeEnter)if(os(E.beforeEnter))for(const k of E.beforeEnter)K.push(Mi(k,L,J));else K.push(Mi(E.beforeEnter,L,J));return K.push(v),ht(K)}).then(()=>(L.matched.forEach(E=>E.enterCallbacks={}),K=Gf(dt,"beforeRouteEnter",L,J,P),K.push(v),ht(K))).then(()=>{K=[];for(const E of o.list())K.push(Mi(E,L,J));return K.push(v),ht(K)}).catch(E=>qs(E,8)?E:Promise.reject(E))}function Q(L,J,K){a.list().forEach(ee=>P(()=>ee(L,J,K)))}function F(L,J,K,ee,je){const dt=w(L,J);if(dt)return dt;const v=J===Ei,E=Po?history.state:{};K&&(ee||v?i.replace(L.fullPath,qe({scroll:v&&E&&E.scroll},je)):i.push(L.fullPath,je)),c.value=L,pn(L,J,K,v),fn()}let oe;function Re(){oe||(oe=i.listen((L,J,K)=>{if(!us.listening)return;const ee=y(L),je=x(ee);if(je){R(qe(je,{replace:!0}),ee).catch(lc);return}l=ee;const dt=c.value;Po&&FD(Jb(dt.fullPath,K.delta),Td()),$(ee,dt).catch(v=>qs(v,12)?v:qs(v,2)?(R(v.to,ee).then(E=>{qs(E,20)&&!K.delta&&K.type===Mc.pop&&i.go(-1,!1)}).catch(lc),Promise.reject()):(K.delta&&i.go(-K.delta,!1),be(v,ee,dt))).then(v=>{v=v||F(ee,dt,!1),v&&(K.delta&&!qs(v,8)?i.go(-K.delta,!1):K.type===Mc.pop&&qs(v,20)&&i.go(-1,!1)),Q(ee,dt,v)}).catch(lc)}))}let ye=ka(),ue=ka(),le;function be(L,J,K){fn(L);const ee=ue.list();return ee.length?ee.forEach(je=>je(L,J,K)):console.error(L),Promise.reject(L)}function Je(){return le&&c.value!==Ei?Promise.resolve():new Promise((L,J)=>{ye.add([L,J])})}function fn(L){return le||(le=!L,Re(),ye.list().forEach(([J,K])=>L?K(L):J()),ye.reset()),L}function pn(L,J,K,ee){const{scrollBehavior:je}=t;if(!Po||!je)return Promise.resolve();const dt=!K&&BD(Jb(L.fullPath,0))||(ee||!K)&&history.state&&history.state.scroll||null;return Cm().then(()=>je(L,J,dt)).then(v=>v&&VD(v)).catch(v=>be(v,L,J))}const Tt=L=>i.go(L);let Fn;const yn=new Set,us={currentRoute:c,listening:!0,addRoute:f,removeRoute:p,hasRoute:_,getRoutes:m,resolve:y,options:t,push:T,replace:S,go:Tt,back:()=>Tt(-1),forward:()=>Tt(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:ue.add,isReady:Je,install(L){const J=this;L.component("RouterLink",lO),L.component("RouterView",fO),L.config.globalProperties.$router=J,Object.defineProperty(L.config.globalProperties,"$route",{enumerable:!0,get:()=>Hr(c)}),Po&&!Fn&&c.value===Ei&&(Fn=!0,T(i.location).catch(je=>{}));const K={};for(const je in Ei)Object.defineProperty(K,je,{get:()=>c.value[je],enumerable:!0});L.provide(Fm,J),L.provide(m1,hT(K)),L.provide(tg,c);const ee=L.unmount;yn.add(L),L.unmount=function(){yn.delete(L),yn.size<1&&(l=Ei,oe&&oe(),oe=null,c.value=Ei,Fn=!1,le=!1),ee()}}};function ht(L){return L.reduce((J,K)=>J.then(()=>P(K)),Promise.resolve())}return us}function gO(t,e){const n=[],s=[],i=[],r=Math.max(e.matched.length,t.matched.length);for(let o=0;o<r;o++){const a=e.matched[o];a&&(t.matched.find(l=>Xo(l,a))?s.push(a):n.push(a));const c=t.matched[o];c&&(e.matched.find(l=>Xo(l,c))||i.push(c))}return[n,s,i]}var dv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},mO=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const i=t[n++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=t[n++];e[s++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const r=t[n++],o=t[n++];e[s++]=String.fromCharCode((i&15)<<12|(r&63)<<6|o&63)}}return e.join("")},y1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<t.length;i+=3){const r=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=r>>2,h=(r&3)<<4|a>>4;let d=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(d=64)),s.push(n[u],n[h],n[d],n[f])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(_1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):mO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<t.length;){const r=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const l=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,r==null||a==null||l==null||h==null)throw new _O;const d=r<<2|a>>4;if(s.push(d),l!==64){const f=a<<4&240|l>>2;if(s.push(f),h!==64){const p=l<<6&192|h;s.push(p)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class _O extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yO=function(t){const e=_1(t);return y1.encodeByteArray(e,!0)},Th=function(t){return yO(t).replace(/\./g,"")},b1=function(t){try{return y1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO=()=>bO().__FIREBASE_DEFAULTS__,wO=()=>{if(typeof process>"u"||typeof dv>"u")return;const t=dv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},EO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&b1(t[1]);return e&&JSON.parse(e)},Sd=()=>{try{return vO()||wO()||EO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},v1=t=>{var e,n;return(n=(e=Sd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},w1=t=>{const e=v1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},E1=()=>{var t;return(t=Sd())===null||t===void 0?void 0:t.config},T1=t=>{var e;return(e=Sd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Th(JSON.stringify(n)),Th(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function SO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mt())}function IO(){var t;const e=(t=Sd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RO(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function xO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CO(){const t=Mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function AO(){return!IO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function I1(){try{return typeof indexedDB=="object"}catch{return!1}}function kO(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var r;e(((r=i.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO="FirebaseError";class Hs extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=PO,Object.setPrototypeOf(this,Hs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hl.prototype.create)}}class hl{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},i=`${this.service}/${e}`,r=this.errors[e],o=r?DO(r,s):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Hs(i,a,s)}}function DO(t,e){return t.replace(OO,(n,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const OO=/\{\$([^}]+)}/g;function MO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Zo(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const i of n){if(!s.includes(i))return!1;const r=t[i],o=e[i];if(fv(r)&&fv(o)){if(!Zo(r,o))return!1}else if(r!==o)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function fv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dl(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Wa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,r]=s.split("=");e[decodeURIComponent(i)]=decodeURIComponent(r)}}),e}function qa(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function LO(t,e){const n=new NO(t,e);return n.subscribe.bind(n)}class NO{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let i;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");VO(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:s},i.next===void 0&&(i.next=Kf),i.error===void 0&&(i.error=Kf),i.complete===void 0&&(i.complete=Kf);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function VO(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Kf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(t){return t&&t._delegate?t._delegate:t}class tr{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new TO;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(UO(e))try{this.getOrInitializeService({instanceIdentifier:Tr})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:i});s.resolve(r)}catch{}}}}clearInstance(e=Tr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Tr){return this.instances.has(e)}getOptions(e=Tr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);s===a&&o.resolve(i)}return i}onInit(e,n){var s;const i=this.normalizeInstanceIdentifier(n),r=(s=this.onInitCallbacks.get(i))!==null&&s!==void 0?s:new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:BO(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Tr){return this.component?this.component.multipleInstances?e:Tr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function BO(t){return t===Tr?void 0:t}function UO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new FO(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Me||(Me={}));const HO={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},zO=Me.INFO,jO={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},WO=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),i=jO[e];if(i)console[i](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bm{constructor(e){this.name=e,this._logLevel=zO,this._logHandler=WO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?HO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const qO=(t,e)=>e.some(n=>t instanceof n);let pv,gv;function GO(){return pv||(pv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KO(){return gv||(gv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const R1=new WeakMap,ng=new WeakMap,x1=new WeakMap,Yf=new WeakMap,Um=new WeakMap;function YO(t){const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",o)},r=()=>{n(Gi(t.result)),i()},o=()=>{s(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&R1.set(n,t)}).catch(()=>{}),Um.set(e,t),e}function QO(t){if(ng.has(t))return;const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",o),t.removeEventListener("abort",o)},r=()=>{n(),i()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",o),t.addEventListener("abort",o)});ng.set(t,e)}let sg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ng.get(t);if(e==="objectStoreNames")return t.objectStoreNames||x1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function XO(t){sg=t(sg)}function JO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Qf(this),e,...n);return x1.set(s,e.sort?e.sort():[e]),Gi(s)}:KO().includes(t)?function(...e){return t.apply(Qf(this),e),Gi(R1.get(this))}:function(...e){return Gi(t.apply(Qf(this),e))}}function ZO(t){return typeof t=="function"?JO(t):(t instanceof IDBTransaction&&QO(t),qO(t,GO())?new Proxy(t,sg):t)}function Gi(t){if(t instanceof IDBRequest)return YO(t);if(Yf.has(t))return Yf.get(t);const e=ZO(t);return e!==t&&(Yf.set(t,e),Um.set(e,t)),e}const Qf=t=>Um.get(t);function eM(t,e,{blocked:n,upgrade:s,blocking:i,terminated:r}={}){const o=indexedDB.open(t,e),a=Gi(o);return s&&o.addEventListener("upgradeneeded",c=>{s(Gi(o.result),c.oldVersion,c.newVersion,Gi(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{r&&c.addEventListener("close",()=>r()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const tM=["get","getKey","getAll","getAllKeys","count"],nM=["put","add","delete","clear"],Xf=new Map;function mv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xf.get(e))return Xf.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,i=nM.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||tM.includes(n)))return;const r=async function(o,...a){const c=this.transaction(o,i?"readwrite":"readonly");let l=c.store;return s&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&c.done]))[0]};return Xf.set(e,r),r}XO(t=>({...t,get:(e,n,s)=>mv(e,n)||t.get(e,n,s),has:(e,n)=>!!mv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(iM(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function iM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ig="@firebase/app",_v="0.9.28";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr=new Bm("@firebase/app"),rM="@firebase/app-compat",oM="@firebase/analytics-compat",aM="@firebase/analytics",cM="@firebase/app-check-compat",lM="@firebase/app-check",uM="@firebase/auth",hM="@firebase/auth-compat",dM="@firebase/database",fM="@firebase/database-compat",pM="@firebase/functions",gM="@firebase/functions-compat",mM="@firebase/installations",_M="@firebase/installations-compat",yM="@firebase/messaging",bM="@firebase/messaging-compat",vM="@firebase/performance",wM="@firebase/performance-compat",EM="@firebase/remote-config",TM="@firebase/remote-config-compat",SM="@firebase/storage",IM="@firebase/storage-compat",RM="@firebase/firestore",xM="@firebase/firestore-compat",CM="firebase",AM="10.8.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg="[DEFAULT]",kM={[ig]:"fire-core",[rM]:"fire-core-compat",[aM]:"fire-analytics",[oM]:"fire-analytics-compat",[lM]:"fire-app-check",[cM]:"fire-app-check-compat",[uM]:"fire-auth",[hM]:"fire-auth-compat",[dM]:"fire-rtdb",[fM]:"fire-rtdb-compat",[pM]:"fire-fn",[gM]:"fire-fn-compat",[mM]:"fire-iid",[_M]:"fire-iid-compat",[yM]:"fire-fcm",[bM]:"fire-fcm-compat",[vM]:"fire-perf",[wM]:"fire-perf-compat",[EM]:"fire-rc",[TM]:"fire-rc-compat",[SM]:"fire-gcs",[IM]:"fire-gcs-compat",[RM]:"fire-fst",[xM]:"fire-fst-compat","fire-js":"fire-js",[CM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh=new Map,og=new Map;function PM(t,e){try{t.container.addComponent(e)}catch(n){Xr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Jr(t){const e=t.name;if(og.has(e))return Xr.debug(`There were multiple attempts to register component ${e}.`),!1;og.set(e,t);for(const n of Sh.values())PM(n,t);return!0}function Id(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ki=new hl("app","Firebase",DM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new tr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ki.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo=AM;function C1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:rg,automaticDataCollectionEnabled:!1},e),i=s.name;if(typeof i!="string"||!i)throw Ki.create("bad-app-name",{appName:String(i)});if(n||(n=E1()),!n)throw Ki.create("no-options");const r=Sh.get(i);if(r){if(Zo(n,r.options)&&Zo(s,r.config))return r;throw Ki.create("duplicate-app",{appName:i})}const o=new $O(i);for(const c of og.values())o.addComponent(c);const a=new OM(n,s,o);return Sh.set(i,a),a}function $m(t=rg){const e=Sh.get(t);if(!e&&t===rg&&E1())return C1();if(!e)throw Ki.create("no-app",{appName:t});return e}function Cs(t,e,n){var s;let i=(s=kM[t])!==null&&s!==void 0?s:t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xr.warn(a.join(" "));return}Jr(new tr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM="firebase-heartbeat-database",LM=1,Lc="firebase-heartbeat-store";let Jf=null;function A1(){return Jf||(Jf=eM(MM,LM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Lc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ki.create("idb-open",{originalErrorMessage:t.message})})),Jf}async function NM(t){try{const n=(await A1()).transaction(Lc),s=await n.objectStore(Lc).get(k1(t));return await n.done,s}catch(e){if(e instanceof Hs)Xr.warn(e.message);else{const n=Ki.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xr.warn(n.message)}}}async function yv(t,e){try{const s=(await A1()).transaction(Lc,"readwrite");await s.objectStore(Lc).put(e,k1(t)),await s.done}catch(n){if(n instanceof Hs)Xr.warn(n.message);else{const s=Ki.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xr.warn(s.message)}}}function k1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM=1024,FM=30*24*60*60*1e3;class BM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new $M(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=bv();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=FM}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=bv(),{heartbeatsToSend:s,unsentEntries:i}=UM(this._heartbeatsCache.heartbeats),r=Th(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function bv(){return new Date().toISOString().substring(0,10)}function UM(t,e=VM){const n=[];let s=t.slice();for(const i of t){const r=n.find(o=>o.agent===i.agent);if(r){if(r.dates.push(i.date),vv(n)>e){r.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),vv(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class $M{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return I1()?kO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await NM(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return yv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return yv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function vv(t){return Th(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HM(t){Jr(new tr("platform-logger",e=>new sM(e),"PRIVATE")),Jr(new tr("heartbeat",e=>new BM(e),"PRIVATE")),Cs(ig,_v,t),Cs(ig,_v,"esm2017"),Cs("fire-js","")}HM("");var zM="firebase",jM="10.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cs(zM,jM,"app");function Hm(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(n[s[i]]=t[s[i]]);return n}function P1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const WM=P1,D1=new hl("auth","Firebase",P1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih=new Bm("@firebase/auth");function qM(t,...e){Ih.logLevel<=Me.WARN&&Ih.warn(`Auth (${uo}): ${t}`,...e)}function Hu(t,...e){Ih.logLevel<=Me.ERROR&&Ih.error(`Auth (${uo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(t,...e){throw zm(t,...e)}function As(t,...e){return zm(t,...e)}function GM(t,e,n){const s=Object.assign(Object.assign({},WM()),{[e]:n});return new hl("auth","Firebase",s).create(e,{appName:t.name})}function zm(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return D1.create(t,...e)}function he(t,e,...n){if(!t)throw zm(e,...n)}function Js(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Hu(e),new Error(e)}function ci(t,e){t||Js(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function KM(){return wv()==="http:"||wv()==="https:"}function wv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(KM()||RO()||"connection"in navigator)?navigator.onLine:!0}function QM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,n){this.shortDelay=e,this.longDelay=n,ci(n>e,"Short delay should be less than long delay!"),this.isMobile=SO()||xO()}get(){return YM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(t,e){ci(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Js("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Js("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Js("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM=new fl(3e4,6e4);function cr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function mi(t,e,n,s,i={}){return M1(t,i,async()=>{let r={},o={};s&&(e==="GET"?o=s:r={body:JSON.stringify(s)});const a=dl(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),O1.fetch()(L1(t,t.config.apiHost,n,a),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},r))})}async function M1(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},XM),e);try{const i=new e2(t),r=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw ru(t,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ru(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw ru(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw ru(t,"user-disabled",o);const u=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw GM(t,u,l);as(t,u)}}catch(i){if(i instanceof Hs)throw i;as(t,"network-request-failed",{message:String(i)})}}async function pl(t,e,n,s,i={}){const r=await mi(t,e,n,s,i);return"mfaPendingCredential"in r&&as(t,"multi-factor-auth-required",{_serverResponse:r}),r}function L1(t,e,n,s){const i=`${e}${n}?${s}`;return t.config.emulator?jm(t.config,i):`${t.config.apiScheme}://${i}`}function ZM(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class e2{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(As(this.auth,"network-request-failed")),JM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ru(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const i=As(t,e,s);return i.customData._tokenResponse=n,i}function Ev(t){return t!==void 0&&t.enterprise!==void 0}class t2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return ZM(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function n2(t,e){return mi(t,"GET","/v2/recaptchaConfig",cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s2(t,e){return mi(t,"POST","/v1/accounts:delete",e)}async function i2(t,e){return mi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function r2(t,e=!1){const n=lt(t),s=await n.getIdToken(e),i=Wm(s);he(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const r=typeof i.firebase=="object"?i.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:i,token:s,authTime:hc(Zf(i.auth_time)),issuedAtTime:hc(Zf(i.iat)),expirationTime:hc(Zf(i.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function Zf(t){return Number(t)*1e3}function Wm(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Hu("JWT malformed, contained fewer than 3 sections"),null;try{const i=b1(n);return i?JSON.parse(i):(Hu("Failed to decode base64 JWT payload"),null)}catch(i){return Hu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function o2(t){const e=Wm(t);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ea(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Hs&&a2(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function a2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=hc(this.lastLoginAt),this.creationTime=hc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rh(t){var e;const n=t.auth,s=await t.getIdToken(),i=await ea(t,i2(n,{idToken:s}));he(i==null?void 0:i.users.length,n,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const o=!((e=r.providerUserInfo)===null||e===void 0)&&e.length?h2(r.providerUserInfo):[],a=u2(t.providerData,o),c=t.isAnonymous,l=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),u=c?l:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new N1(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function l2(t){const e=lt(t);await Rh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function u2(t,e){return[...t.filter(s=>!e.some(i=>i.providerId===s.providerId)),...e]}function h2(t){return t.map(e=>{var{providerId:n}=e,s=Hm(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d2(t,e){const n=await M1(t,{},async()=>{const s=dl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:r}=t.config,o=L1(t,i,"/v1/token",`key=${r}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",O1.fetch()(o,{method:"POST",headers:a,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function f2(t,e){return mi(t,"POST","/v2/accounts:revokeToken",cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):o2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return he(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:i,expiresIn:r}=await d2(e,n);this.updateTokensAndExpiration(s,i,Number(r))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:i,expirationTime:r}=n,o=new Nc;return s&&(he(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),i&&(he(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),r&&(he(typeof r=="number","internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Nc,this.toJSON())}_performRefresh(){return Js("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(t,e){he(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class zr{constructor(e){var{uid:n,auth:s,stsTokenManager:i}=e,r=Hm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new c2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new N1(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await ea(this,this.stsTokenManager.getToken(this.auth,e));return he(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return r2(this,e)}reload(){return l2(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new zr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Rh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await ea(this,s2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,i,r,o,a,c,l,u;const h=(s=n.displayName)!==null&&s!==void 0?s:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,f=(r=n.phoneNumber)!==null&&r!==void 0?r:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,b=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:w,emailVerified:T,isAnonymous:S,providerData:x,stsTokenManager:R}=n;he(w&&R,e,"internal-error");const I=Nc.fromJSON(this.name,R);he(typeof w=="string",e,"internal-error"),Ti(h,e.name),Ti(d,e.name),he(typeof T=="boolean",e,"internal-error"),he(typeof S=="boolean",e,"internal-error"),Ti(f,e.name),Ti(p,e.name),Ti(m,e.name),Ti(_,e.name),Ti(y,e.name),Ti(b,e.name);const P=new zr({uid:w,auth:e,email:d,emailVerified:T,displayName:h,isAnonymous:S,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:I,createdAt:y,lastLoginAt:b});return x&&Array.isArray(x)&&(P.providerData=x.map($=>Object.assign({},$))),_&&(P._redirectEventId=_),P}static async _fromIdTokenResponse(e,n,s=!1){const i=new Nc;i.updateFromServerResponse(n);const r=new zr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:s});return await Rh(r),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv=new Map;function Zs(t){ci(t instanceof Function,"Expected a class definition");let e=Tv.get(t);return e?(ci(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Tv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}V1.type="NONE";const Sv=V1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(t,e,n){return`firebase:${t}:${e}:${n}`}class zo{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:i,name:r}=this.auth;this.fullUserKey=zu(this.userKey,i.apiKey,r),this.fullPersistenceKey=zu("persistence",i.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?zr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new zo(Zs(Sv),e,s);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let r=i[0]||Zs(Sv);const o=zu(s,e.config.apiKey,e.name);let a=null;for(const l of n)try{const u=await l._get(o);if(u){const h=zr._fromJSON(e,u);l!==r&&(a=h),r=l;break}}catch{}const c=i.filter(l=>l._shouldAllowMigration);return!r._shouldAllowMigration||!c.length?new zo(r,e,s):(r=c[0],a&&await r._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==r)try{await l._remove(o)}catch{}})),new zo(r,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(U1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(F1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(H1(e))return"Blackberry";if(z1(e))return"Webos";if(qm(e))return"Safari";if((e.includes("chrome/")||B1(e))&&!e.includes("edge/"))return"Chrome";if($1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function F1(t=Mt()){return/firefox\//i.test(t)}function qm(t=Mt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function B1(t=Mt()){return/crios\//i.test(t)}function U1(t=Mt()){return/iemobile/i.test(t)}function $1(t=Mt()){return/android/i.test(t)}function H1(t=Mt()){return/blackberry/i.test(t)}function z1(t=Mt()){return/webos/i.test(t)}function Rd(t=Mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function p2(t=Mt()){var e;return Rd(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function g2(){return CO()&&document.documentMode===10}function j1(t=Mt()){return Rd(t)||$1(t)||z1(t)||H1(t)||/windows phone/i.test(t)||U1(t)}function m2(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(t,e=[]){let n;switch(t){case"Browser":n=Iv(Mt());break;case"Worker":n=`${Iv(Mt())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${uo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=r=>new Promise((o,a)=>{try{const c=e(r);o(c)}catch(c){a(c)}});s.onAbort=n,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y2(t,e={}){return mi(t,"GET","/v2/passwordPolicy",cr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2=6;class v2{constructor(e){var n,s,i,r;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:b2,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(r=e.forceUpgradeOnSignin)!==null&&r!==void 0?r:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,i,r,o,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(s=c.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(r=c.containsUppercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let i=0;i<e.length;i++)s=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,i,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,n,s,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Rv(this),this.idTokenSubscription=new Rv(this),this.beforeStateQueue=new _2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=D1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Zs(n)),this._initializationPromise=this.queue(async()=>{var s,i;if(!this._deleted&&(this.persistenceManager=await zo.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const s=await this.assertedPersistence.getCurrentUser();let i=s,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(i=c.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Rh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=QM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?lt(e):null;return n&&he(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Zs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await y2(this),n=new v2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new hl("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await f2(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Zs(e)||this._popupRedirectResolver;he(n,this,"argument-error"),this.redirectPersistenceManager=await zo.create(this,[Zs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,i){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,i);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=W1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&qM(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ho(t){return lt(t)}class Rv{constructor(e){this.auth=e,this.observer=null,this.addObserver=LO(n=>this.observer=n)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function E2(t){xd=t}function q1(t){return xd.loadJS(t)}function T2(){return xd.recaptchaEnterpriseScript}function S2(){return xd.gapiScript}function I2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const R2="recaptcha-enterprise",x2="NO_RECAPTCHA";class C2{constructor(e){this.type=R2,this.auth=ho(e)}async verify(e="verify",n=!1){async function s(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,a)=>{n2(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const l=new t2(c);return r.tenantId==null?r._agentRecaptchaConfig=l:r._tenantRecaptchaConfigs[r.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})})}function i(r,o,a){const c=window.grecaptcha;Ev(c)?c.enterprise.ready(()=>{c.enterprise.execute(r,{action:e}).then(l=>{o(l)}).catch(()=>{o(x2)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((r,o)=>{s(this.auth).then(a=>{if(!n&&Ev(window.grecaptcha))i(a,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=T2();c.length!==0&&(c+=a),q1(c).then(()=>{i(a,r,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}}async function xv(t,e,n,s=!1){const i=new C2(t);let r;try{r=await i.verify(n)}catch{r=await i.verify(n,!0)}const o=Object.assign({},e);return s?Object.assign(o,{captchaResp:r}):Object.assign(o,{captchaResponse:r}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function cg(t,e,n,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await xv(t,e,n,n==="getOobCode");return s(t,r)}else return s(t,e).catch(async r=>{if(r.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await xv(t,e,n,n==="getOobCode");return s(t,o)}else return Promise.reject(r)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A2(t,e){const n=Id(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),r=n.getOptions();if(Zo(r,e??{}))return i;as(i,"already-initialized")}return n.initialize({options:e})}function k2(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Zs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function P2(t,e,n){const s=ho(t);he(s._canInitEmulator,s,"emulator-config-failed"),he(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),r=G1(e),{host:o,port:a}=D2(e),c=a===null?"":`:${a}`;s.config.emulator={url:`${r}//${o}${c}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||O2()}function G1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function D2(t){const e=G1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const r=i[1];return{host:r,port:Cv(s.substr(r.length+1))}}else{const[r,o]=s.split(":");return{host:r,port:Cv(o)}}}function Cv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function O2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Js("not implemented")}_getIdTokenResponse(e){return Js("not implemented")}_linkToIdToken(e,n){return Js("not implemented")}_getReauthenticationResolver(e){return Js("not implemented")}}async function M2(t,e){return mi(t,"POST","/v1/accounts:update",e)}async function L2(t,e){return mi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N2(t,e){return pl(t,"POST","/v1/accounts:signInWithPassword",cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V2(t,e){return pl(t,"POST","/v1/accounts:signInWithEmailLink",cr(t,e))}async function F2(t,e){return pl(t,"POST","/v1/accounts:signInWithEmailLink",cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc extends Gm{constructor(e,n,s,i=null){super("password",s),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Vc(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Vc(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cg(e,n,"signInWithPassword",N2);case"emailLink":return V2(e,{email:this._email,oobCode:this._password});default:as(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cg(e,s,"signUpPassword",L2);case"emailLink":return F2(e,{idToken:n,email:this._email,oobCode:this._password});default:as(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jo(t,e){return pl(t,"POST","/v1/accounts:signInWithIdp",cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2="http://localhost";class Zr extends Gm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Zr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):as("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:i}=n,r=Hm(n,["providerId","signInMethod"]);if(!s||!i)return null;const o=new Zr(s,i);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return jo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,jo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,jo(e,n)}buildRequest(){const e={requestUri:B2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=dl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $2(t){const e=Wa(qa(t)).link,n=e?Wa(qa(e)).deep_link_id:null,s=Wa(qa(t)).deep_link_id;return(s?Wa(qa(s)).link:null)||s||n||e||t}class Km{constructor(e){var n,s,i,r,o,a;const c=Wa(qa(e)),l=(n=c.apiKey)!==null&&n!==void 0?n:null,u=(s=c.oobCode)!==null&&s!==void 0?s:null,h=U2((i=c.mode)!==null&&i!==void 0?i:null);he(l&&u&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=u,this.continueUrl=(r=c.continueUrl)!==null&&r!==void 0?r:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=$2(e);try{return new Km(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(){this.providerId=fo.PROVIDER_ID}static credential(e,n){return Vc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Km.parseLink(n);return he(s,"argument-error"),Vc._fromEmailAndCode(e,s.code,s.tenantId)}}fo.PROVIDER_ID="password";fo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";fo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl extends K1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends gl{constructor(){super("facebook.com")}static credential(e){return Zr._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Li.credential(e.oauthAccessToken)}catch{return null}}}Li.FACEBOOK_SIGN_IN_METHOD="facebook.com";Li.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni extends gl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Zr._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ni.credentialFromTaggedObject(e)}static credentialFromError(e){return Ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Ni.credential(n,s)}catch{return null}}}Ni.GOOGLE_SIGN_IN_METHOD="google.com";Ni.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends gl{constructor(){super("github.com")}static credential(e){return Zr._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vi.credentialFromTaggedObject(e)}static credentialFromError(e){return Vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vi.credential(e.oauthAccessToken)}catch{return null}}}Vi.GITHUB_SIGN_IN_METHOD="github.com";Vi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi extends gl{constructor(){super("twitter.com")}static credential(e,n){return Zr._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Fi.credential(n,s)}catch{return null}}}Fi.TWITTER_SIGN_IN_METHOD="twitter.com";Fi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H2(t,e){return pl(t,"POST","/v1/accounts:signUp",cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,i=!1){const r=await zr._fromIdTokenResponse(e,s,i),o=Av(s);return new eo({user:r,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const i=Av(s);return new eo({user:e,providerId:i,_tokenResponse:s,operationType:n})}}function Av(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh extends Hs{constructor(e,n,s,i){var r;super(n.code,n.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,xh.prototype),this.customData={appName:e.name,tenantId:(r=e.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,i){return new xh(e,n,s,i)}}function Y1(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?xh._fromErrorAndOperation(t,r,e,s):r})}async function z2(t,e,n=!1){const s=await ea(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return eo._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q1(t,e,n=!1){const{auth:s}=t,i="reauthenticate";try{const r=await ea(t,Y1(s,i,e,t),n);he(r.idToken,s,"internal-error");const o=Wm(r.idToken);he(o,s,"internal-error");const{sub:a}=o;return he(t.uid===a,s,"user-mismatch"),eo._forOperation(t,i,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&as(s,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X1(t,e,n=!1){const s="signIn",i=await Y1(t,s,e),r=await eo._fromIdTokenResponse(t,s,i);return n||await t._updateCurrentUser(r.user),r}async function j2(t,e){return X1(ho(t),e)}async function W2(t,e){return Q1(lt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J1(t){const e=ho(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function q2(t,e,n){const s=ho(t),o=await cg(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",H2).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&J1(t),c}),a=await eo._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(a.user),a}function G2(t,e,n){return j2(lt(t),fo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&J1(t),s})}function K2(t,e){return Y2(lt(t),null,e)}async function Y2(t,e,n){const{auth:s}=t,r={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(r.email=e),n&&(r.password=n);const o=await ea(t,M2(s,r));await t._updateTokensIfNecessary(o,!0)}function Q2(t,e,n,s){return lt(t).onIdTokenChanged(e,n,s)}function X2(t,e,n){return lt(t).beforeAuthStateChanged(e,n)}function J2(t,e,n,s){return lt(t).onAuthStateChanged(e,n,s)}function Z2(t){return lt(t).signOut()}const Ch="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ch,"1"),this.storage.removeItem(Ch),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eL(){const t=Mt();return qm(t)||Rd(t)}const tL=1e3,nL=10;class eS extends Z1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=eL()&&m2(),this.fallbackToPolling=j1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),i=this.localCache[n];s!==i&&e(n,i,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const s=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(s);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(s,e.newValue):this.storage.removeItem(s);else if(this.localCache[s]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},r=this.storage.getItem(s);g2()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,nL):i()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},tL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}eS.type="LOCAL";const sL=eS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS extends Z1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}tS.type="SESSION";const nS=tS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const s=new Cd(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:i,data:r}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,r)),c=await iL(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Cd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,o;return new Promise((a,c)=>{const l=Ym("",20);i.port1.start();const u=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:i,onMessage(h){const d=h;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(u),r=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(d.data.response);break;default:clearTimeout(u),clearTimeout(r),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(){return window}function oL(t){ks().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(){return typeof ks().WorkerGlobalScope<"u"&&typeof ks().importScripts=="function"}async function aL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function lL(){return sS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS="firebaseLocalStorageDb",uL=1,Ah="firebaseLocalStorage",rS="fbase_key";class ml{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ad(t,e){return t.transaction([Ah],e?"readwrite":"readonly").objectStore(Ah)}function hL(){const t=indexedDB.deleteDatabase(iS);return new ml(t).toPromise()}function lg(){const t=indexedDB.open(iS,uL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Ah,{keyPath:rS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Ah)?e(s):(s.close(),await hL(),e(await lg()))})})}async function kv(t,e,n){const s=Ad(t,!0).put({[rS]:e,value:n});return new ml(s).toPromise()}async function dL(t,e){const n=Ad(t,!1).get(e),s=await new ml(n).toPromise();return s===void 0?null:s.value}function Pv(t,e){const n=Ad(t,!0).delete(e);return new ml(n).toPromise()}const fL=800,pL=3;class oS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await lg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>pL)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Cd._getInstance(lL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await aL(),!this.activeServiceWorker)return;this.sender=new rL(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await lg();return await kv(e,Ch,"1"),await Pv(e,Ch),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>kv(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>dL(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Pv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const r=Ad(i,!1).getAll();return new ml(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:i,value:r}of e)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),fL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}oS.type="LOCAL";const gL=oS;new fl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mL(t,e){return e?Zs(e):(he(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm extends Gm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return jo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return jo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _L(t){return X1(t.auth,new Qm(t),t.bypassAuthState)}function yL(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),Q1(n,new Qm(t),t.bypassAuthState)}async function bL(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),z2(n,new Qm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e,n,s,i,r=!1){this.auth=e,this.resolver=s,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:i,tenantId:r,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _L;case"linkViaPopup":case"linkViaRedirect":return bL;case"reauthViaPopup":case"reauthViaRedirect":return yL;default:as(this.auth,"internal-error")}}resolve(e){ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL=new fl(2e3,1e4);class No extends aS{constructor(e,n,s,i,r){super(e,n,i,r),this.provider=s,this.authWindow=null,this.pollId=null,No.currentPopupAction&&No.currentPopupAction.cancel(),No.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){ci(this.filter.length===1,"Popup operations only handle one event");const e=Ym();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(As(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(As(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,No.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(As(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,vL.get())};e()}}No.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL="pendingRedirect",ju=new Map;class EL extends aS{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=ju.get(this.auth._key());if(!e){try{const s=await TL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}ju.set(this.auth._key(),e)}return this.bypassAuthState||ju.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function TL(t,e){const n=RL(e),s=IL(t);if(!await s._isAvailable())return!1;const i=await s._get(n)==="true";return await s._remove(n),i}function SL(t,e){ju.set(t._key(),e)}function IL(t){return Zs(t._redirectPersistence)}function RL(t){return zu(wL,t.config.apiKey,t.name)}async function xL(t,e,n=!1){const s=ho(t),i=mL(s,e),o=await new EL(s,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL=10*60*1e3;class AL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!cS(e)){const i=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(As(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=CL&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dv(e))}saveEventToCache(e){this.cachedEventUids.add(Dv(e)),this.lastProcessedEventTime=Date.now()}}function Dv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function cS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function kL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PL(t,e={}){return mi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,OL=/^https?/;async function ML(t){if(t.config.emulator)return;const{authorizedDomains:e}=await PL(t);for(const n of e)try{if(LL(n))return}catch{}as(t,"unauthorized-domain")}function LL(t){const e=ag(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!OL.test(n))return!1;if(DL.test(t))return s===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL=new fl(3e4,6e4);function Ov(){const t=ks().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function VL(t){return new Promise((e,n)=>{var s,i,r;function o(){Ov(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ov(),n(As(t,"network-request-failed"))},timeout:NL.get()})}if(!((i=(s=ks().gapi)===null||s===void 0?void 0:s.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((r=ks().gapi)===null||r===void 0)&&r.load)o();else{const a=I2("iframefcb");return ks()[a]=()=>{gapi.load?o():n(As(t,"network-request-failed"))},q1(`${S2()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Wu=null,e})}let Wu=null;function FL(t){return Wu=Wu||VL(t),Wu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL=new fl(5e3,15e3),UL="__/auth/iframe",$L="emulator/auth/iframe",HL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jL(t){const e=t.config;he(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?jm(e,$L):`https://${t.config.authDomain}/${UL}`,s={apiKey:e.apiKey,appName:t.name,v:uo},i=zL.get(t.config.apiHost);i&&(s.eid=i);const r=t._getFrameworks();return r.length&&(s.fw=r.join(",")),`${n}?${dl(s).slice(1)}`}async function WL(t){const e=await FL(t),n=ks().gapi;return he(n,t,"internal-error"),e.open({where:document.body,url:jL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:HL,dontclear:!0},s=>new Promise(async(i,r)=>{await s.restyle({setHideOnLeave:!1});const o=As(t,"network-request-failed"),a=ks().setTimeout(()=>{r(o)},BL.get());function c(){ks().clearTimeout(a),i(s)}s.ping(c).then(c,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},GL=500,KL=600,YL="_blank",QL="http://localhost";class Mv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function XL(t,e,n,s=GL,i=KL){const r=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const c=Object.assign(Object.assign({},qL),{width:s.toString(),height:i.toString(),top:r,left:o}),l=Mt().toLowerCase();n&&(a=B1(l)?YL:n),F1(l)&&(e=e||QL,c.scrollbars="yes");const u=Object.entries(c).reduce((d,[f,p])=>`${d}${f}=${p},`,"");if(p2(l)&&a!=="_self")return JL(e||"",a),new Mv(null);const h=window.open(e||"",a,u);he(h,t,"popup-blocked");try{h.focus()}catch{}return new Mv(h)}function JL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL="__/auth/handler",eN="emulator/auth/handler",tN=encodeURIComponent("fac");async function Lv(t,e,n,s,i,r){he(t.config.authDomain,t,"auth-domain-config-required"),he(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:uo,eventId:i};if(e instanceof K1){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",MO(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries(r||{}))o[u]=h}if(e instanceof gl){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const c=await t._getAppCheckToken(),l=c?`#${tN}=${encodeURIComponent(c)}`:"";return`${nN(t)}?${dl(a).slice(1)}${l}`}function nN({config:t}){return t.emulator?jm(t,eN):`https://${t.authDomain}/${ZL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep="webStorageSupport";class sN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nS,this._completeRedirectFn=xL,this._overrideRedirectResult=SL}async _openPopup(e,n,s,i){var r;ci((r=this.eventManagers[e._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const o=await Lv(e,n,s,ag(),i);return XL(e,o,Ym())}async _openRedirect(e,n,s,i){await this._originValidation(e);const r=await Lv(e,n,s,ag(),i);return oL(r),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:r}=this.eventManagers[n];return i?Promise.resolve(i):(ci(r,"If manager is not set, promise should be"),r)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await WL(e),s=new AL(e);return n.register("authEvent",i=>(he(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ep,{type:ep},i=>{var r;const o=(r=i==null?void 0:i[0])===null||r===void 0?void 0:r[ep];o!==void 0&&n(!!o),as(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ML(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return j1()||qm()||Rd()}}const iN=sN;var Nv="@firebase/auth",Vv="1.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function aN(t){Jr(new tr("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;he(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:W1(t)},l=new w2(s,i,r,c);return k2(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Jr(new tr("auth-internal",e=>{const n=ho(e.getProvider("auth").getImmediate());return(s=>new rN(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cs(Nv,Vv,oN(t)),Cs(Nv,Vv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN=5*60,lN=T1("authIdTokenMaxAge")||cN;let Fv=null;const uN=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>lN)return;const i=n==null?void 0:n.token;Fv!==i&&(Fv=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function hN(t=$m()){const e=Id(t,"auth");if(e.isInitialized())return e.getImmediate();const n=A2(t,{popupRedirectResolver:iN,persistence:[gL,sL,nS]}),s=T1("authTokenSyncURL");if(s){const r=uN(s);X2(n,r,()=>r(n.currentUser)),Q2(n,o=>r(o))}const i=v1("auth");return i&&P2(n,`http://${i}`),n}function dN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}E2({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=i=>{const r=As("internal-error");r.customData=i,n(r)},s.type="text/javascript",s.charset="UTF-8",dN().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});aN("Browser");var fN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},G,Xm=Xm||{},pe=fN||self;function kd(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function _l(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function pN(t){return Object.prototype.hasOwnProperty.call(t,tp)&&t[tp]||(t[tp]=++gN)}var tp="closure_uid_"+(1e9*Math.random()>>>0),gN=0;function mN(t,e,n){return t.call.apply(t.bind,arguments)}function _N(t,e,n){if(!t)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,s),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function cn(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?cn=mN:cn=_N,cn.apply(null,arguments)}function ou(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var s=n.slice();return s.push.apply(s,arguments),t.apply(this,s)}}function Wt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(s,i,r){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(s,o)}}function lr(){this.s=this.s,this.o=this.o}var yN=0;lr.prototype.s=!1;lr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),yN!=0)&&pN(this)};lr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const lS=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Jm(t){const e=t.length;if(0<e){const n=Array(e);for(let s=0;s<e;s++)n[s]=t[s];return n}return[]}function Bv(t,e){for(let n=1;n<arguments.length;n++){const s=arguments[n];if(kd(s)){const i=t.length||0,r=s.length||0;t.length=i+r;for(let o=0;o<r;o++)t[i+o]=s[o]}else t.push(s)}}function ln(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}ln.prototype.h=function(){this.defaultPrevented=!0};var bN=function(){if(!pe.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};pe.addEventListener("test",n,e),pe.removeEventListener("test",n,e)}catch{}return t}();function Fc(t){return/^[\s\xa0]*$/.test(t)}function Pd(){var t=pe.navigator;return t&&(t=t.userAgent)?t:""}function bs(t){return Pd().indexOf(t)!=-1}function Zm(t){return Zm[" "](t),t}Zm[" "]=function(){};function vN(t,e){var n=dV;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var wN=bs("Opera"),ta=bs("Trident")||bs("MSIE"),uS=bs("Edge"),ug=uS||ta,hS=bs("Gecko")&&!(Pd().toLowerCase().indexOf("webkit")!=-1&&!bs("Edge"))&&!(bs("Trident")||bs("MSIE"))&&!bs("Edge"),EN=Pd().toLowerCase().indexOf("webkit")!=-1&&!bs("Edge");function dS(){var t=pe.document;return t?t.documentMode:void 0}var hg;e:{var np="",sp=function(){var t=Pd();if(hS)return/rv:([^\);]+)(\)|;)/.exec(t);if(uS)return/Edge\/([\d\.]+)/.exec(t);if(ta)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(EN)return/WebKit\/(\S+)/.exec(t);if(wN)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(sp&&(np=sp?sp[1]:""),ta){var ip=dS();if(ip!=null&&ip>parseFloat(np)){hg=String(ip);break e}}hg=np}var dg;if(pe.document&&ta){var Uv=dS();dg=Uv||parseInt(hg,10)||void 0}else dg=void 0;var TN=dg;function Bc(t,e){if(ln.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,s=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(hS){e:{try{Zm(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,s?(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:SN[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Bc.$.h.call(this)}}Wt(Bc,ln);var SN={2:"touch",3:"pen",4:"mouse"};Bc.prototype.h=function(){Bc.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var yl="closure_listenable_"+(1e6*Math.random()|0),IN=0;function RN(t,e,n,s,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!s,this.la=i,this.key=++IN,this.fa=this.ia=!1}function Dd(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function e_(t,e,n){for(const s in t)e.call(n,t[s],s,t)}function xN(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function fS(t){const e={};for(const n in t)e[n]=t[n];return e}const $v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pS(t,e){let n,s;for(let i=1;i<arguments.length;i++){s=arguments[i];for(n in s)t[n]=s[n];for(let r=0;r<$v.length;r++)n=$v[r],Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}}function Od(t){this.src=t,this.g={},this.h=0}Od.prototype.add=function(t,e,n,s,i){var r=t.toString();t=this.g[r],t||(t=this.g[r]=[],this.h++);var o=pg(t,e,s,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new RN(e,this.src,r,!!s,i),e.ia=n,t.push(e)),e};function fg(t,e){var n=e.type;if(n in t.g){var s=t.g[n],i=lS(s,e),r;(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(Dd(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function pg(t,e,n,s){for(var i=0;i<t.length;++i){var r=t[i];if(!r.fa&&r.listener==e&&r.capture==!!n&&r.la==s)return i}return-1}var t_="closure_lm_"+(1e6*Math.random()|0),rp={};function gS(t,e,n,s,i){if(s&&s.once)return _S(t,e,n,s,i);if(Array.isArray(e)){for(var r=0;r<e.length;r++)gS(t,e[r],n,s,i);return null}return n=i_(n),t&&t[yl]?t.O(e,n,_l(s)?!!s.capture:!!s,i):mS(t,e,n,!1,s,i)}function mS(t,e,n,s,i,r){if(!e)throw Error("Invalid event type");var o=_l(i)?!!i.capture:!!i,a=s_(t);if(a||(t[t_]=a=new Od(t)),n=a.add(e,n,s,o,r),n.proxy)return n;if(s=CN(),n.proxy=s,s.src=t,s.listener=n,t.addEventListener)bN||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),s,i);else if(t.attachEvent)t.attachEvent(bS(e.toString()),s);else if(t.addListener&&t.removeListener)t.addListener(s);else throw Error("addEventListener and attachEvent are unavailable.");return n}function CN(){function t(n){return e.call(t.src,t.listener,n)}const e=AN;return t}function _S(t,e,n,s,i){if(Array.isArray(e)){for(var r=0;r<e.length;r++)_S(t,e[r],n,s,i);return null}return n=i_(n),t&&t[yl]?t.P(e,n,_l(s)?!!s.capture:!!s,i):mS(t,e,n,!0,s,i)}function yS(t,e,n,s,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)yS(t,e[r],n,s,i);else s=_l(s)?!!s.capture:!!s,n=i_(n),t&&t[yl]?(t=t.i,e=String(e).toString(),e in t.g&&(r=t.g[e],n=pg(r,n,s,i),-1<n&&(Dd(r[n]),Array.prototype.splice.call(r,n,1),r.length==0&&(delete t.g[e],t.h--)))):t&&(t=s_(t))&&(e=t.g[e.toString()],t=-1,e&&(t=pg(e,n,s,i)),(n=-1<t?e[t]:null)&&n_(n))}function n_(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[yl])fg(e.i,t);else{var n=t.type,s=t.proxy;e.removeEventListener?e.removeEventListener(n,s,t.capture):e.detachEvent?e.detachEvent(bS(n),s):e.addListener&&e.removeListener&&e.removeListener(s),(n=s_(e))?(fg(n,t),n.h==0&&(n.src=null,e[t_]=null)):Dd(t)}}}function bS(t){return t in rp?rp[t]:rp[t]="on"+t}function AN(t,e){if(t.fa)t=!0;else{e=new Bc(e,this);var n=t.listener,s=t.la||t.src;t.ia&&n_(t),t=n.call(s,e)}return t}function s_(t){return t=t[t_],t instanceof Od?t:null}var op="__closure_events_fn_"+(1e9*Math.random()>>>0);function i_(t){return typeof t=="function"?t:(t[op]||(t[op]=function(e){return t.handleEvent(e)}),t[op])}function jt(){lr.call(this),this.i=new Od(this),this.S=this,this.J=null}Wt(jt,lr);jt.prototype[yl]=!0;jt.prototype.removeEventListener=function(t,e,n,s){yS(this,t,e,n,s)};function Xt(t,e){var n,s=t.J;if(s)for(n=[];s;s=s.J)n.push(s);if(t=t.S,s=e.type||e,typeof e=="string")e=new ln(e,t);else if(e instanceof ln)e.target=e.target||t;else{var i=e;e=new ln(s,t),pS(e,i)}if(i=!0,n)for(var r=n.length-1;0<=r;r--){var o=e.g=n[r];i=au(o,s,!0,e)&&i}if(o=e.g=t,i=au(o,s,!0,e)&&i,i=au(o,s,!1,e)&&i,n)for(r=0;r<n.length;r++)o=e.g=n[r],i=au(o,s,!1,e)&&i}jt.prototype.N=function(){if(jt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],s=0;s<n.length;s++)Dd(n[s]);delete t.g[e],t.h--}}this.J=null};jt.prototype.O=function(t,e,n,s){return this.i.add(String(t),e,!1,n,s)};jt.prototype.P=function(t,e,n,s){return this.i.add(String(t),e,!0,n,s)};function au(t,e,n,s){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,r=0;r<e.length;++r){var o=e[r];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&fg(t.i,o),i=a.call(c,s)!==!1&&i}}return i&&!s.defaultPrevented}var r_=pe.JSON.stringify;class kN{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function PN(){var t=o_;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class DN{constructor(){this.h=this.g=null}add(e,n){const s=vS.get();s.set(e,n),this.h?this.h.next=s:this.g=s,this.h=s}}var vS=new kN(()=>new ON,t=>t.reset());class ON{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function MN(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function LN(t){pe.setTimeout(()=>{throw t},0)}let Uc,$c=!1,o_=new DN,wS=()=>{const t=pe.Promise.resolve(void 0);Uc=()=>{t.then(NN)}};var NN=()=>{for(var t;t=PN();){try{t.h.call(t.g)}catch(n){LN(n)}var e=vS;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}$c=!1};function Md(t,e){jt.call(this),this.h=t||1,this.g=e||pe,this.j=cn(this.qb,this),this.l=Date.now()}Wt(Md,jt);G=Md.prototype;G.ga=!1;G.T=null;G.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Xt(this,"tick"),this.ga&&(a_(this),this.start()))}};G.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function a_(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}G.N=function(){Md.$.N.call(this),a_(this),delete this.g};function c_(t,e,n){if(typeof t=="function")n&&(t=cn(t,n));else if(t&&typeof t.handleEvent=="function")t=cn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:pe.setTimeout(t,e||0)}function ES(t){t.g=c_(()=>{t.g=null,t.i&&(t.i=!1,ES(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class VN extends lr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ES(this)}N(){super.N(),this.g&&(pe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hc(t){lr.call(this),this.h=t,this.g={}}Wt(Hc,lr);var Hv=[];function TS(t,e,n,s){Array.isArray(n)||(n&&(Hv[0]=n.toString()),n=Hv);for(var i=0;i<n.length;i++){var r=gS(e,n[i],s||t.handleEvent,!1,t.h||t);if(!r)break;t.g[r.key]=r}}function SS(t){e_(t.g,function(e,n){this.g.hasOwnProperty(n)&&n_(e)},t),t.g={}}Hc.prototype.N=function(){Hc.$.N.call(this),SS(this)};Hc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Ld(){this.g=!0}Ld.prototype.Ea=function(){this.g=!1};function FN(t,e,n,s,i,r){t.info(function(){if(t.g)if(r)for(var o="",a=r.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+l+"&"):o+(u+"=redacted&")}}else o=null;else o=r;return"XMLHTTP REQ ("+s+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function BN(t,e,n,s,i,r,o){t.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+i+"]: "+e+`
`+n+`
`+r+" "+o})}function Vo(t,e,n,s){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+$N(t,n)+(s?" "+s:"")})}function UN(t,e){t.info(function(){return"TIMEOUT: "+e})}Ld.prototype.info=function(){};function $N(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var s=n[t];if(!(2>s.length)){var i=s[1];if(Array.isArray(i)&&!(1>i.length)){var r=i[0];if(r!="noop"&&r!="stop"&&r!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return r_(n)}catch{return e}}var po={},zv=null;function Nd(){return zv=zv||new jt}po.Ta="serverreachability";function IS(t){ln.call(this,po.Ta,t)}Wt(IS,ln);function zc(t){const e=Nd();Xt(e,new IS(e))}po.STAT_EVENT="statevent";function RS(t,e){ln.call(this,po.STAT_EVENT,t),this.stat=e}Wt(RS,ln);function _n(t){const e=Nd();Xt(e,new RS(e,t))}po.Ua="timingevent";function xS(t,e){ln.call(this,po.Ua,t),this.size=e}Wt(xS,ln);function bl(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return pe.setTimeout(function(){t()},e)}var Vd={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},CS={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function l_(){}l_.prototype.h=null;function jv(t){return t.h||(t.h=t.i())}function AS(){}var vl={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function u_(){ln.call(this,"d")}Wt(u_,ln);function h_(){ln.call(this,"c")}Wt(h_,ln);var gg;function Fd(){}Wt(Fd,l_);Fd.prototype.g=function(){return new XMLHttpRequest};Fd.prototype.i=function(){return{}};gg=new Fd;function wl(t,e,n,s){this.l=t,this.j=e,this.m=n,this.W=s||1,this.U=new Hc(this),this.P=HN,t=ug?125:void 0,this.V=new Md(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new kS}function kS(){this.i=null,this.g="",this.h=!1}var HN=45e3,PS={},mg={};G=wl.prototype;G.setTimeout=function(t){this.P=t};function _g(t,e,n){t.L=1,t.A=Ud(li(e)),t.u=n,t.S=!0,DS(t,null)}function DS(t,e){t.G=Date.now(),El(t),t.B=li(t.A);var n=t.B,s=t.W;Array.isArray(s)||(s=[String(s)]),US(n.i,"t",s),t.o=0,n=t.l.J,t.h=new kS,t.g=aI(t.l,n?e:null,!t.u),0<t.O&&(t.M=new VN(cn(t.Pa,t,t.g),t.O)),TS(t.U,t.g,"readystatechange",t.nb),e=t.I?fS(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),zc(),FN(t.j,t.v,t.B,t.m,t.W,t.u)}G.nb=function(t){t=t.target;const e=this.M;e&&Es(t)==3?e.l():this.Pa(t)};G.Pa=function(t){try{if(t==this.g)e:{const u=Es(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||ug||this.g&&(this.h.h||this.g.ja()||Kv(this.g)))){this.J||u!=4||e==7||(e==8||0>=h?zc(3):zc(2)),Bd(this);var n=this.g.da();this.ca=n;t:if(OS(this)){var s=Kv(this.g);t="";var i=s.length,r=Es(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Or(this),dc(this);var o="";break t}this.h.i=new pe.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(s[e],{stream:r&&e==i-1});s.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,BN(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Fc(a)){var l=a;break t}}l=null}if(n=l)Vo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yg(this,n);else{this.i=!1,this.s=3,_n(12),Or(this),dc(this);break e}}this.S?(MS(this,u,o),ug&&this.i&&u==3&&(TS(this.U,this.V,"tick",this.mb),this.V.start())):(Vo(this.j,this.m,o,null),yg(this,o)),u==4&&Or(this),this.i&&!this.J&&(u==4?sI(this.l,this):(this.i=!1,El(this)))}else lV(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,_n(12)):(this.s=0,_n(13)),Or(this),dc(this)}}}catch{}finally{}};function OS(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function MS(t,e,n){let s=!0,i;for(;!t.J&&t.o<n.length;)if(i=zN(t,n),i==mg){e==4&&(t.s=4,_n(14),s=!1),Vo(t.j,t.m,null,"[Incomplete Response]");break}else if(i==PS){t.s=4,_n(15),Vo(t.j,t.m,n,"[Invalid Chunk]"),s=!1;break}else Vo(t.j,t.m,i,null),yg(t,i);OS(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,_n(16),s=!1),t.i=t.i&&s,s?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),__(e),e.M=!0,_n(11))):(Vo(t.j,t.m,n,"[Invalid Chunked Response]"),Or(t),dc(t))}G.mb=function(){if(this.g){var t=Es(this.g),e=this.g.ja();this.o<e.length&&(Bd(this),MS(this,t,e),this.i&&t!=4&&El(this))}};function zN(t,e){var n=t.o,s=e.indexOf(`
`,n);return s==-1?mg:(n=Number(e.substring(n,s)),isNaN(n)?PS:(s+=1,s+n>e.length?mg:(e=e.slice(s,s+n),t.o=s+n,e)))}G.cancel=function(){this.J=!0,Or(this)};function El(t){t.Y=Date.now()+t.P,LS(t,t.P)}function LS(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=bl(cn(t.lb,t),e)}function Bd(t){t.C&&(pe.clearTimeout(t.C),t.C=null)}G.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(UN(this.j,this.B),this.L!=2&&(zc(),_n(17)),Or(this),this.s=2,dc(this)):LS(this,this.Y-t)};function dc(t){t.l.H==0||t.J||sI(t.l,t)}function Or(t){Bd(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,a_(t.V),SS(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function yg(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||bg(n.i,t))){if(!t.K&&bg(n.i,t)&&n.H==3){try{var s=n.Ja.g.parse(e)}catch{s=null}if(Array.isArray(s)&&s.length==3){var i=s;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Dh(n),jd(n);else break e;m_(n),_n(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=bl(cn(n.ib,n),6e3));if(1>=zS(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Mr(n,11)}else if((t.K||n.g==t)&&Dh(n),!Fc(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];const u=l[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=l[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=l[5];d!=null&&typeof d=="number"&&0<d&&(s=1.5*d,n.L=s,n.l.info("backChannelRequestTimeoutMs_="+s)),s=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var r=s.i;r.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(r.j=r.l,r.g=new Set,r.h&&(d_(r,r.h),r.h=null))}if(s.F){const m=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;m&&(s.Da=m,it(s.I,s.F,m))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),s=n;var o=t;if(s.wa=oI(s,s.J?s.pa:null,s.Y),o.K){jS(s.i,o);var a=o,c=s.L;c&&a.setTimeout(c),a.C&&(Bd(a),El(a)),s.g=o}else tI(s);0<n.j.length&&Wd(n)}else l[0]!="stop"&&l[0]!="close"||Mr(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?Mr(n,7):g_(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}zc(4)}catch{}}function jN(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(kd(t)){for(var e=[],n=t.length,s=0;s<n;s++)e.push(t[s]);return e}e=[],n=0;for(s in t)e[n++]=t[s];return e}function WN(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(kd(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const s in t)e[n++]=s;return e}}}function NS(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(kd(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=WN(t),s=jN(t),i=s.length,r=0;r<i;r++)e.call(void 0,s[r],n&&n[r],t)}var VS=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qN(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var s=t[n].indexOf("="),i=null;if(0<=s){var r=t[n].substring(0,s);i=t[n].substring(s+1)}else r=t[n];e(r,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function jr(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof jr){this.h=t.h,kh(this,t.j),this.s=t.s,this.g=t.g,Ph(this,t.m),this.l=t.l;var e=t.i,n=new jc;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Wv(this,n),this.o=t.o}else t&&(e=String(t).match(VS))?(this.h=!1,kh(this,e[1]||"",!0),this.s=Ga(e[2]||""),this.g=Ga(e[3]||"",!0),Ph(this,e[4]),this.l=Ga(e[5]||"",!0),Wv(this,e[6]||"",!0),this.o=Ga(e[7]||"")):(this.h=!1,this.i=new jc(null,this.h))}jr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ka(e,qv,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Ka(e,qv,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Ka(n,n.charAt(0)=="/"?YN:KN,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ka(n,XN)),t.join("")};function li(t){return new jr(t)}function kh(t,e,n){t.j=n?Ga(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ph(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Wv(t,e,n){e instanceof jc?(t.i=e,JN(t.i,t.h)):(n||(e=Ka(e,QN)),t.i=new jc(e,t.h))}function it(t,e,n){t.i.set(e,n)}function Ud(t){return it(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ga(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ka(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,GN),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function GN(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var qv=/[#\/\?@]/g,KN=/[#\?:]/g,YN=/[#\?]/g,QN=/[#\?@]/g,XN=/#/g;function jc(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function ur(t){t.g||(t.g=new Map,t.h=0,t.i&&qN(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}G=jc.prototype;G.add=function(t,e){ur(this),this.i=null,t=_a(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function FS(t,e){ur(t),e=_a(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function BS(t,e){return ur(t),e=_a(t,e),t.g.has(e)}G.forEach=function(t,e){ur(this),this.g.forEach(function(n,s){n.forEach(function(i){t.call(e,i,s,this)},this)},this)};G.ta=function(){ur(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let s=0;s<e.length;s++){const i=t[s];for(let r=0;r<i.length;r++)n.push(e[s])}return n};G.Z=function(t){ur(this);let e=[];if(typeof t=="string")BS(this,t)&&(e=e.concat(this.g.get(_a(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};G.set=function(t,e){return ur(this),this.i=null,t=_a(this,t),BS(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};G.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function US(t,e,n){FS(t,e),0<n.length&&(t.i=null,t.g.set(_a(t,e),Jm(n)),t.h+=n.length)}G.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var s=e[n];const r=encodeURIComponent(String(s)),o=this.Z(s);for(s=0;s<o.length;s++){var i=r;o[s]!==""&&(i+="="+encodeURIComponent(String(o[s]))),t.push(i)}}return this.i=t.join("&")};function _a(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function JN(t,e){e&&!t.j&&(ur(t),t.i=null,t.g.forEach(function(n,s){var i=s.toLowerCase();s!=i&&(FS(this,s),US(this,i,n))},t)),t.j=e}var ZN=class{constructor(t,e){this.g=t,this.map=e}};function $S(t){this.l=t||eV,pe.PerformanceNavigationTiming?(t=pe.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(pe.g&&pe.g.Ka&&pe.g.Ka()&&pe.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var eV=10;function HS(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function zS(t){return t.h?1:t.g?t.g.size:0}function bg(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function d_(t,e){t.g?t.g.add(e):t.h=e}function jS(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}$S.prototype.cancel=function(){if(this.i=WS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function WS(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Jm(t.i)}var tV=class{stringify(t){return pe.JSON.stringify(t,void 0)}parse(t){return pe.JSON.parse(t,void 0)}};function nV(){this.g=new tV}function sV(t,e,n){const s=n||"";try{NS(t,function(i,r){let o=i;_l(i)&&(o=r_(i)),e.push(s+r+"="+encodeURIComponent(o))})}catch(i){throw e.push(s+"type="+encodeURIComponent("_badmap")),i}}function iV(t,e){const n=new Ld;if(pe.Image){const s=new Image;s.onload=ou(cu,n,s,"TestLoadImage: loaded",!0,e),s.onerror=ou(cu,n,s,"TestLoadImage: error",!1,e),s.onabort=ou(cu,n,s,"TestLoadImage: abort",!1,e),s.ontimeout=ou(cu,n,s,"TestLoadImage: timeout",!1,e),pe.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=t}else e(!1)}function cu(t,e,n,s,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(s)}catch{}}function $d(t){this.l=t.ec||null,this.j=t.ob||!1}Wt($d,l_);$d.prototype.g=function(){return new Hd(this.l,this.j)};$d.prototype.i=function(t){return function(){return t}}({});function Hd(t,e){jt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=f_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Wt(Hd,jt);var f_=0;G=Hd.prototype;G.open=function(t,e){if(this.readyState!=f_)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Wc(this)};G.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||pe).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};G.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Tl(this)),this.readyState=f_};G.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Wc(this)),this.g&&(this.readyState=3,Wc(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof pe.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;qS(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function qS(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}G.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Tl(this):Wc(this),this.readyState==3&&qS(this)}};G.Za=function(t){this.g&&(this.response=this.responseText=t,Tl(this))};G.Ya=function(t){this.g&&(this.response=t,Tl(this))};G.ka=function(){this.g&&Tl(this)};function Tl(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Wc(t)}G.setRequestHeader=function(t,e){this.v.append(t,e)};G.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};G.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Wc(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Hd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var rV=pe.JSON.parse;function wt(t){jt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=GS,this.L=this.M=!1}Wt(wt,jt);var GS="",oV=/^https?$/i,aV=["POST","PUT"];G=wt.prototype;G.Oa=function(t){this.M=t};G.ha=function(t,e,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():gg.g(),this.C=this.u?jv(this.u):jv(gg),this.g.onreadystatechange=cn(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(r){Gv(this,r);return}if(t=n||"",n=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var i in s)n.set(i,s[i]);else if(typeof s.keys=="function"&&typeof s.get=="function")for(const r of s.keys())n.set(r,s.get(r));else throw Error("Unknown input type for opt_headers: "+String(s));s=Array.from(n.keys()).find(r=>r.toLowerCase()=="content-type"),i=pe.FormData&&t instanceof pe.FormData,!(0<=lS(aV,e))||s||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[r,o]of n)this.g.setRequestHeader(r,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{QS(this),0<this.B&&((this.L=cV(this.g))?(this.g.timeout=this.B,this.g.ontimeout=cn(this.ua,this)):this.A=c_(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(r){Gv(this,r)}};function cV(t){return ta&&typeof t.timeout=="number"&&t.ontimeout!==void 0}G.ua=function(){typeof Xm<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Xt(this,"timeout"),this.abort(8))};function Gv(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,KS(t),zd(t)}function KS(t){t.F||(t.F=!0,Xt(t,"complete"),Xt(t,"error"))}G.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Xt(this,"complete"),Xt(this,"abort"),zd(this))};G.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),zd(this,!0)),wt.$.N.call(this)};G.La=function(){this.s||(this.G||this.v||this.l?YS(this):this.kb())};G.kb=function(){YS(this)};function YS(t){if(t.h&&typeof Xm<"u"&&(!t.C[1]||Es(t)!=4||t.da()!=2)){if(t.v&&Es(t)==4)c_(t.La,0,t);else if(Xt(t,"readystatechange"),Es(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var s;if(s=o===0){var i=String(t.I).match(VS)[1]||null;!i&&pe.self&&pe.self.location&&(i=pe.self.location.protocol.slice(0,-1)),s=!oV.test(i?i.toLowerCase():"")}n=s}if(n)Xt(t,"complete"),Xt(t,"success");else{t.m=6;try{var r=2<Es(t)?t.g.statusText:""}catch{r=""}t.j=r+" ["+t.da()+"]",KS(t)}}finally{zd(t)}}}}function zd(t,e){if(t.g){QS(t);const n=t.g,s=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Xt(t,"ready");try{n.onreadystatechange=s}catch{}}}function QS(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(pe.clearTimeout(t.A),t.A=null)}G.isActive=function(){return!!this.g};function Es(t){return t.g?t.g.readyState:0}G.da=function(){try{return 2<Es(this)?this.g.status:-1}catch{return-1}};G.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};G.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),rV(e)}};function Kv(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case GS:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function lV(t){const e={};t=(t.g&&2<=Es(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let s=0;s<t.length;s++){if(Fc(t[s]))continue;var n=MN(t[s]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const r=e[i]||[];e[i]=r,r.push(n)}xN(e,function(s){return s.join(", ")})}G.Ia=function(){return this.m};G.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function XS(t){let e="";return e_(t,function(n,s){e+=s,e+=":",e+=n,e+=`\r
`}),e}function p_(t,e,n){e:{for(s in n){var s=!1;break e}s=!0}s||(n=XS(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):it(t,e,n))}function Pa(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function JS(t){this.Ga=0,this.j=[],this.l=new Ld,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Pa("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Pa("baseRetryDelayMs",5e3,t),this.hb=Pa("retryDelaySeedMs",1e4,t),this.eb=Pa("forwardChannelMaxRetries",2,t),this.xa=Pa("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new $S(t&&t.concurrentRequestLimit),this.Ja=new nV,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}G=JS.prototype;G.ra=8;G.H=1;function g_(t){if(ZS(t),t.H==3){var e=t.W++,n=li(t.I);if(it(n,"SID",t.K),it(n,"RID",e),it(n,"TYPE","terminate"),Sl(t,n),e=new wl(t,t.l,e),e.L=2,e.A=Ud(li(n)),n=!1,pe.navigator&&pe.navigator.sendBeacon)try{n=pe.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&pe.Image&&(new Image().src=e.A,n=!0),n||(e.g=aI(e.l,null),e.g.ha(e.A)),e.G=Date.now(),El(e)}rI(t)}function jd(t){t.g&&(__(t),t.g.cancel(),t.g=null)}function ZS(t){jd(t),t.u&&(pe.clearTimeout(t.u),t.u=null),Dh(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&pe.clearTimeout(t.m),t.m=null)}function Wd(t){if(!HS(t.i)&&!t.m){t.m=!0;var e=t.Na;Uc||wS(),$c||(Uc(),$c=!0),o_.add(e,t),t.C=0}}function uV(t,e){return zS(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=bl(cn(t.Na,t,e),iI(t,t.C)),t.C++,!0)}G.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new wl(this,this.l,t);let r=this.s;if(this.U&&(r?(r=fS(r),pS(r,this.U)):r=this.U),this.o!==null||this.O||(i.I=r,r=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var s=this.j[n];if("__data__"in s.map&&(s=s.map.__data__,typeof s=="string")){s=s.length;break t}s=void 0}if(s===void 0)break;if(e+=s,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=eI(this,i,e),n=li(this.I),it(n,"RID",t),it(n,"CVER",22),this.F&&it(n,"X-HTTP-Session-Id",this.F),Sl(this,n),r&&(this.O?e="headers="+encodeURIComponent(String(XS(r)))+"&"+e:this.o&&p_(n,this.o,r)),d_(this.i,i),this.bb&&it(n,"TYPE","init"),this.P?(it(n,"$req",e),it(n,"SID","null"),i.aa=!0,_g(i,n,null)):_g(i,n,e),this.H=2}}else this.H==3&&(t?Yv(this,t):this.j.length==0||HS(this.i)||Yv(this))};function Yv(t,e){var n;e?n=e.m:n=t.W++;const s=li(t.I);it(s,"SID",t.K),it(s,"RID",n),it(s,"AID",t.V),Sl(t,s),t.o&&t.s&&p_(s,t.o,t.s),n=new wl(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=eI(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),d_(t.i,n),_g(n,s,e)}function Sl(t,e){t.na&&e_(t.na,function(n,s){it(e,s,n)}),t.h&&NS({},function(n,s){it(e,s,n)})}function eI(t,e,n){n=Math.min(t.j.length,n);var s=t.h?cn(t.h.Va,t.h,t):null;e:{var i=t.j;let r=-1;for(;;){const o=["count="+n];r==-1?0<n?(r=i[0].g,o.push("ofs="+r)):r=0:o.push("ofs="+r);let a=!0;for(let c=0;c<n;c++){let l=i[c].g;const u=i[c].map;if(l-=r,0>l)r=Math.max(0,i[c].g-100),a=!1;else try{sV(u,o,"req"+l+"_")}catch{s&&s(u)}}if(a){s=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,s}function tI(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Uc||wS(),$c||(Uc(),$c=!0),o_.add(e,t),t.A=0}}function m_(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=bl(cn(t.Ma,t),iI(t,t.A)),t.A++,!0)}G.Ma=function(){if(this.u=null,nI(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=bl(cn(this.jb,this),t)}};G.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,_n(10),jd(this),nI(this))};function __(t){t.B!=null&&(pe.clearTimeout(t.B),t.B=null)}function nI(t){t.g=new wl(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=li(t.wa);it(e,"RID","rpc"),it(e,"SID",t.K),it(e,"AID",t.V),it(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&it(e,"TO",t.qa),it(e,"TYPE","xmlhttp"),Sl(t,e),t.o&&t.s&&p_(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Ud(li(e)),n.u=null,n.S=!0,DS(n,t)}G.ib=function(){this.v!=null&&(this.v=null,jd(this),m_(this),_n(19))};function Dh(t){t.v!=null&&(pe.clearTimeout(t.v),t.v=null)}function sI(t,e){var n=null;if(t.g==e){Dh(t),__(t),t.g=null;var s=2}else if(bg(t.i,e))n=e.F,jS(t.i,e),s=1;else return;if(t.H!=0){if(e.i)if(s==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;s=Nd(),Xt(s,new xS(s,n)),Wd(t)}else tI(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(s==1&&uV(t,e)||s==2&&m_(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Mr(t,5);break;case 4:Mr(t,10);break;case 3:Mr(t,6);break;default:Mr(t,2)}}}function iI(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Mr(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var s=cn(t.pb,t);n||(n=new jr("//www.google.com/images/cleardot.gif"),pe.location&&pe.location.protocol=="http"||kh(n,"https"),Ud(n)),iV(n.toString(),s)}else _n(2);t.H=0,t.h&&t.h.za(e),rI(t),ZS(t)}G.pb=function(t){t?(this.l.info("Successfully pinged google.com"),_n(2)):(this.l.info("Failed to ping google.com"),_n(1))};function rI(t){if(t.H=0,t.ma=[],t.h){const e=WS(t.i);(e.length!=0||t.j.length!=0)&&(Bv(t.ma,e),Bv(t.ma,t.j),t.i.i.length=0,Jm(t.j),t.j.length=0),t.h.ya()}}function oI(t,e,n){var s=n instanceof jr?li(n):new jr(n);if(s.g!="")e&&(s.g=e+"."+s.g),Ph(s,s.m);else{var i=pe.location;s=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var r=new jr(null);s&&kh(r,s),e&&(r.g=e),i&&Ph(r,i),n&&(r.l=n),s=r}return n=t.F,e=t.Da,n&&e&&it(s,n,e),it(s,"VER",t.ra),Sl(t,s),s}function aI(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new wt(new $d({ob:n})):new wt(t.va),e.Oa(t.J),e}G.isActive=function(){return!!this.h&&this.h.isActive(this)};function cI(){}G=cI.prototype;G.Ba=function(){};G.Aa=function(){};G.za=function(){};G.ya=function(){};G.isActive=function(){return!0};G.Va=function(){};function Oh(){if(ta&&!(10<=Number(TN)))throw Error("Environmental error: no available transport.")}Oh.prototype.g=function(t,e){return new Vn(t,e)};function Vn(t,e){jt.call(this),this.g=new JS(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Fc(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Fc(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ya(this)}Wt(Vn,jt);Vn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;_n(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=oI(t,null,t.Y),Wd(t)};Vn.prototype.close=function(){g_(this.g)};Vn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=r_(t),t=n);e.j.push(new ZN(e.fb++,t)),e.H==3&&Wd(e)};Vn.prototype.N=function(){this.g.h=null,delete this.j,g_(this.g),delete this.g,Vn.$.N.call(this)};function lI(t){u_.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Wt(lI,u_);function uI(){h_.call(this),this.status=1}Wt(uI,h_);function ya(t){this.g=t}Wt(ya,cI);ya.prototype.Ba=function(){Xt(this.g,"a")};ya.prototype.Aa=function(t){Xt(this.g,new lI(t))};ya.prototype.za=function(t){Xt(this.g,new uI)};ya.prototype.ya=function(){Xt(this.g,"b")};function hV(){this.blockSize=-1}function cs(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Wt(cs,hV);cs.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function ap(t,e,n){n||(n=0);var s=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)s[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)s[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var r=t.g[3],o=e+(r^n&(i^r))+s[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=r+(i^e&(n^i))+s[1]+3905402710&4294967295,r=e+(o<<12&4294967295|o>>>20),o=i+(n^r&(e^n))+s[2]+606105819&4294967295,i=r+(o<<17&4294967295|o>>>15),o=n+(e^i&(r^e))+s[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(r^n&(i^r))+s[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=r+(i^e&(n^i))+s[5]+1200080426&4294967295,r=e+(o<<12&4294967295|o>>>20),o=i+(n^r&(e^n))+s[6]+2821735955&4294967295,i=r+(o<<17&4294967295|o>>>15),o=n+(e^i&(r^e))+s[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(r^n&(i^r))+s[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=r+(i^e&(n^i))+s[9]+2336552879&4294967295,r=e+(o<<12&4294967295|o>>>20),o=i+(n^r&(e^n))+s[10]+4294925233&4294967295,i=r+(o<<17&4294967295|o>>>15),o=n+(e^i&(r^e))+s[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(r^n&(i^r))+s[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=r+(i^e&(n^i))+s[13]+4254626195&4294967295,r=e+(o<<12&4294967295|o>>>20),o=i+(n^r&(e^n))+s[14]+2792965006&4294967295,i=r+(o<<17&4294967295|o>>>15),o=n+(e^i&(r^e))+s[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^r&(n^i))+s[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=r+(n^i&(e^n))+s[6]+3225465664&4294967295,r=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(r^e))+s[11]+643717713&4294967295,i=r+(o<<14&4294967295|o>>>18),o=n+(r^e&(i^r))+s[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^r&(n^i))+s[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=r+(n^i&(e^n))+s[10]+38016083&4294967295,r=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(r^e))+s[15]+3634488961&4294967295,i=r+(o<<14&4294967295|o>>>18),o=n+(r^e&(i^r))+s[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^r&(n^i))+s[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=r+(n^i&(e^n))+s[14]+3275163606&4294967295,r=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(r^e))+s[3]+4107603335&4294967295,i=r+(o<<14&4294967295|o>>>18),o=n+(r^e&(i^r))+s[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^r&(n^i))+s[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=r+(n^i&(e^n))+s[2]+4243563512&4294967295,r=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(r^e))+s[7]+1735328473&4294967295,i=r+(o<<14&4294967295|o>>>18),o=n+(r^e&(i^r))+s[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^r)+s[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=r+(e^n^i)+s[8]+2272392833&4294967295,r=e+(o<<11&4294967295|o>>>21),o=i+(r^e^n)+s[11]+1839030562&4294967295,i=r+(o<<16&4294967295|o>>>16),o=n+(i^r^e)+s[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^r)+s[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=r+(e^n^i)+s[4]+1272893353&4294967295,r=e+(o<<11&4294967295|o>>>21),o=i+(r^e^n)+s[7]+4139469664&4294967295,i=r+(o<<16&4294967295|o>>>16),o=n+(i^r^e)+s[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^r)+s[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=r+(e^n^i)+s[0]+3936430074&4294967295,r=e+(o<<11&4294967295|o>>>21),o=i+(r^e^n)+s[3]+3572445317&4294967295,i=r+(o<<16&4294967295|o>>>16),o=n+(i^r^e)+s[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^r)+s[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=r+(e^n^i)+s[12]+3873151461&4294967295,r=e+(o<<11&4294967295|o>>>21),o=i+(r^e^n)+s[15]+530742520&4294967295,i=r+(o<<16&4294967295|o>>>16),o=n+(i^r^e)+s[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~r))+s[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=r+(n^(e|~i))+s[7]+1126891415&4294967295,r=e+(o<<10&4294967295|o>>>22),o=i+(e^(r|~n))+s[14]+2878612391&4294967295,i=r+(o<<15&4294967295|o>>>17),o=n+(r^(i|~e))+s[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~r))+s[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=r+(n^(e|~i))+s[3]+2399980690&4294967295,r=e+(o<<10&4294967295|o>>>22),o=i+(e^(r|~n))+s[10]+4293915773&4294967295,i=r+(o<<15&4294967295|o>>>17),o=n+(r^(i|~e))+s[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~r))+s[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=r+(n^(e|~i))+s[15]+4264355552&4294967295,r=e+(o<<10&4294967295|o>>>22),o=i+(e^(r|~n))+s[6]+2734768916&4294967295,i=r+(o<<15&4294967295|o>>>17),o=n+(r^(i|~e))+s[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~r))+s[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=r+(n^(e|~i))+s[11]+3174756917&4294967295,r=e+(o<<10&4294967295|o>>>22),o=i+(e^(r|~n))+s[2]+718787259&4294967295,i=r+(o<<15&4294967295|o>>>17),o=n+(r^(i|~e))+s[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+r&4294967295}cs.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,s=this.m,i=this.h,r=0;r<e;){if(i==0)for(;r<=n;)ap(this,t,r),r+=this.blockSize;if(typeof t=="string"){for(;r<e;)if(s[i++]=t.charCodeAt(r++),i==this.blockSize){ap(this,s),i=0;break}}else for(;r<e;)if(s[i++]=t[r++],i==this.blockSize){ap(this,s),i=0;break}}this.h=i,this.i+=e};cs.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var s=0;32>s;s+=8)t[n++]=this.g[e]>>>s&255;return t};function Ke(t,e){this.h=e;for(var n=[],s=!0,i=t.length-1;0<=i;i--){var r=t[i]|0;s&&r==e||(n[i]=r,s=!1)}this.g=n}var dV={};function y_(t){return-128<=t&&128>t?vN(t,function(e){return new Ke([e|0],0>e?-1:0)}):new Ke([t|0],0>t?-1:0)}function Ts(t){if(isNaN(t)||!isFinite(t))return Wo;if(0>t)return Kt(Ts(-t));for(var e=[],n=1,s=0;t>=n;s++)e[s]=t/n|0,n*=vg;return new Ke(e,0)}function hI(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Kt(hI(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Ts(Math.pow(e,8)),s=Wo,i=0;i<t.length;i+=8){var r=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+r),e);8>r?(r=Ts(Math.pow(e,r)),s=s.R(r).add(Ts(o))):(s=s.R(n),s=s.add(Ts(o)))}return s}var vg=4294967296,Wo=y_(0),wg=y_(1),Qv=y_(16777216);G=Ke.prototype;G.ea=function(){if($n(this))return-Kt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var s=this.D(n);t+=(0<=s?s:vg+s)*e,e*=vg}return t};G.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(ei(this))return"0";if($n(this))return"-"+Kt(this).toString(t);for(var e=Ts(Math.pow(t,6)),n=this,s="";;){var i=Lh(n,e).g;n=Mh(n,i.R(e));var r=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,ei(n))return r+s;for(;6>r.length;)r="0"+r;s=r+s}};G.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function ei(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function $n(t){return t.h==-1}G.X=function(t){return t=Mh(this,t),$n(t)?-1:ei(t)?0:1};function Kt(t){for(var e=t.g.length,n=[],s=0;s<e;s++)n[s]=~t.g[s];return new Ke(n,~t.h).add(wg)}G.abs=function(){return $n(this)?Kt(this):this};G.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0,i=0;i<=e;i++){var r=s+(this.D(i)&65535)+(t.D(i)&65535),o=(r>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);s=o>>>16,r&=65535,o&=65535,n[i]=o<<16|r}return new Ke(n,n[n.length-1]&-2147483648?-1:0)};function Mh(t,e){return t.add(Kt(e))}G.R=function(t){if(ei(this)||ei(t))return Wo;if($n(this))return $n(t)?Kt(this).R(Kt(t)):Kt(Kt(this).R(t));if($n(t))return Kt(this.R(Kt(t)));if(0>this.X(Qv)&&0>t.X(Qv))return Ts(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],s=0;s<2*e;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var i=0;i<t.g.length;i++){var r=this.D(s)>>>16,o=this.D(s)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*s+2*i]+=o*c,lu(n,2*s+2*i),n[2*s+2*i+1]+=r*c,lu(n,2*s+2*i+1),n[2*s+2*i+1]+=o*a,lu(n,2*s+2*i+1),n[2*s+2*i+2]+=r*a,lu(n,2*s+2*i+2)}for(s=0;s<e;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=e;s<2*e;s++)n[s]=0;return new Ke(n,0)};function lu(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Da(t,e){this.g=t,this.h=e}function Lh(t,e){if(ei(e))throw Error("division by zero");if(ei(t))return new Da(Wo,Wo);if($n(t))return e=Lh(Kt(t),e),new Da(Kt(e.g),Kt(e.h));if($n(e))return e=Lh(t,Kt(e)),new Da(Kt(e.g),e.h);if(30<t.g.length){if($n(t)||$n(e))throw Error("slowDivide_ only works with positive integers.");for(var n=wg,s=e;0>=s.X(t);)n=Xv(n),s=Xv(s);var i=So(n,1),r=So(s,1);for(s=So(s,2),n=So(n,2);!ei(s);){var o=r.add(s);0>=o.X(t)&&(i=i.add(n),r=o),s=So(s,1),n=So(n,1)}return e=Mh(t,i.R(e)),new Da(i,e)}for(i=Wo;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),s=Math.ceil(Math.log(n)/Math.LN2),s=48>=s?1:Math.pow(2,s-48),r=Ts(n),o=r.R(e);$n(o)||0<o.X(t);)n-=s,r=Ts(n),o=r.R(e);ei(r)&&(r=wg),i=i.add(r),t=Mh(t,o)}return new Da(i,t)}G.gb=function(t){return Lh(this,t).h};G.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)&t.D(s);return new Ke(n,this.h&t.h)};G.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)|t.D(s);return new Ke(n,this.h|t.h)};G.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)^t.D(s);return new Ke(n,this.h^t.h)};function Xv(t){for(var e=t.g.length+1,n=[],s=0;s<e;s++)n[s]=t.D(s)<<1|t.D(s-1)>>>31;return new Ke(n,t.h)}function So(t,e){var n=e>>5;e%=32;for(var s=t.g.length-n,i=[],r=0;r<s;r++)i[r]=0<e?t.D(r+n)>>>e|t.D(r+n+1)<<32-e:t.D(r+n);return new Ke(i,t.h)}Oh.prototype.createWebChannel=Oh.prototype.g;Vn.prototype.send=Vn.prototype.u;Vn.prototype.open=Vn.prototype.m;Vn.prototype.close=Vn.prototype.close;Vd.NO_ERROR=0;Vd.TIMEOUT=8;Vd.HTTP_ERROR=6;CS.COMPLETE="complete";AS.EventType=vl;vl.OPEN="a";vl.CLOSE="b";vl.ERROR="c";vl.MESSAGE="d";jt.prototype.listen=jt.prototype.O;wt.prototype.listenOnce=wt.prototype.P;wt.prototype.getLastError=wt.prototype.Sa;wt.prototype.getLastErrorCode=wt.prototype.Ia;wt.prototype.getStatus=wt.prototype.da;wt.prototype.getResponseJson=wt.prototype.Wa;wt.prototype.getResponseText=wt.prototype.ja;wt.prototype.send=wt.prototype.ha;wt.prototype.setWithCredentials=wt.prototype.Oa;cs.prototype.digest=cs.prototype.l;cs.prototype.reset=cs.prototype.reset;cs.prototype.update=cs.prototype.j;Ke.prototype.add=Ke.prototype.add;Ke.prototype.multiply=Ke.prototype.R;Ke.prototype.modulo=Ke.prototype.gb;Ke.prototype.compare=Ke.prototype.X;Ke.prototype.toNumber=Ke.prototype.ea;Ke.prototype.toString=Ke.prototype.toString;Ke.prototype.getBits=Ke.prototype.D;Ke.fromNumber=Ts;Ke.fromString=hI;var fV=function(){return new Oh},pV=function(){return Nd()},cp=Vd,gV=CS,mV=po,Jv={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},uu=AS,_V=wt,yV=cs,qo=Ke;const Zv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ba="10.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=new Bm("@firebase/firestore");function Oa(){return to.logLevel}function q(t,...e){if(to.logLevel<=Me.DEBUG){const n=e.map(b_);to.debug(`Firestore (${ba}): ${t}`,...n)}}function Bs(t,...e){if(to.logLevel<=Me.ERROR){const n=e.map(b_);to.error(`Firestore (${ba}): ${t}`,...n)}}function na(t,...e){if(to.logLevel<=Me.WARN){const n=e.map(b_);to.warn(`Firestore (${ba}): ${t}`,...n)}}function b_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function de(t="Unexpected state"){const e=`FIRESTORE (${ba}) INTERNAL ASSERTION FAILED: `+t;throw Bs(e),new Error(e)}function et(t,e){t||de()}function Ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends Hs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(nn.UNAUTHENTICATED))}shutdown(){}}class vV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class wV{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let s=this.i;const i=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let r=new Ps;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Ps,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=r;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Ps)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(et(typeof s.accessToken=="string"),new dI(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return et(e===null||typeof e=="string"),new nn(e)}}class EV{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class TV{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new EV(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class SV{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class IV{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const s=r=>{r.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.R;return this.R=r.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>s(r))};const i=r=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.appCheck.addTokenListener(this.o)};this.A.onInit(r=>i(r)),setTimeout(()=>{if(!this.appCheck){const r=this.A.getImmediate({optional:!0});r?i(r):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(et(typeof n.token=="string"),this.R=n.token,new SV(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const i=RV(40);for(let r=0;r<i.length;++r)s.length<20&&i[r]<n&&(s+=e.charAt(i[r]%e.length))}return s}}function He(t,e){return t<e?-1:t>e?1:0}function sa(t,e,n){return t.length===e.length&&t.every((s,i)=>n(s,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new X(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ut.fromMillis(Date.now())}static fromDate(e){return Ut.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new Ut(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.timestamp=e}static fromTimestamp(e){return new me(e)}static min(){return new me(new Ut(0,0))}static max(){return new me(new Ut(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,n,s){n===void 0?n=0:n>e.length&&de(),s===void 0?s=e.length-n:s>e.length-n&&de(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return qc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof qc?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let i=0;i<s;i++){const r=e.get(i),o=n.get(i);if(r<o)return-1;if(r>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class rt extends qc{construct(e,n,s){return new rt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new X(N.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(i=>i.length>0))}return new rt(n)}static emptyPath(){return new rt([])}}const xV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends qc{construct(e,n,s){return new Qt(e,n,s)}static isValidIdentifier(e){return xV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Qt(["__name__"])}static fromServerFormat(e){const n=[];let s="",i=0;const r=()=>{if(s.length===0)throw new X(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new X(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new X(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(s+=a,i++):(r(),i++)}if(r(),o)throw new X(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(n)}static emptyPath(){return new Qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.path=e}static fromPath(e){return new se(rt.fromString(e))}static fromName(e){return new se(rt.fromString(e).popFirst(5))}static empty(){return new se(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return rt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new rt(e.slice()))}}function CV(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,i=me.fromTimestamp(s===1e9?new Ut(n+1,0):new Ut(n,s));return new nr(i,se.empty(),e)}function AV(t){return new nr(t.readTime,t.key,-1)}class nr{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new nr(me.min(),se.empty(),-1)}static max(){return new nr(me.max(),se.empty(),-1)}}function kV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=se.comparator(t.documentKey,e.documentKey),n!==0?n:He(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Il(t){if(t.code!==N.FAILED_PRECONDITION||t.message!==PV)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&de(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((s,i)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(s,i)},this.catchCallback=r=>{this.wrapFailure(n,r).next(s,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,s)=>{n(e)})}static reject(e){return new B((n,s)=>{s(e)})}static waitFor(e){return new B((n,s)=>{let i=0,r=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++r,o&&r===i&&n()},c=>s(c))}),o=!0,r===i&&n()})}static or(e){let n=B.resolve(!1);for(const s of e)n=n.next(i=>i?B.resolve(i):s());return n}static forEach(e,n){const s=[];return e.forEach((i,r)=>{s.push(n.call(this,i,r))}),this.waitFor(s)}static mapArray(e,n){return new B((s,i)=>{const r=e.length,o=new Array(r);let a=0;for(let c=0;c<r;c++){const l=c;n(e[l]).next(u=>{o[l]=u,++a,a===r&&s(o)},u=>i(u))}})}static doWhile(e,n){return new B((s,i)=>{const r=()=>{e()===!0?n().next(()=>{r()},i):s()};r()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Ps,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new fc(e,n.error)):this.V.resolve()},this.transaction.onerror=s=>{const i=w_(s.target.error);this.V.reject(new fc(e,i))}}static open(e,n,s,i){try{return new v_(n,e.transaction(i,s))}catch(r){throw new fc(n,r)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(q("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new MV(n)}}class Lr{constructor(e,n,s){this.name=e,this.version=n,this.p=s,Lr.S(Mt())===12.2&&Bs("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return q("SimpleDb","Removing database:",e),kr(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!I1())return!1;if(Lr.C())return!0;const e=Mt(),n=Lr.S(e),s=0<n&&n<10,i=Lr.v(e),r=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||r)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static v(e){const n=e.match(/Android ([\d.]+)/i),s=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(s)}async O(e){return this.db||(q("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,s)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=r=>{const o=r.target.result;n(o)},i.onblocked=()=>{s(new fc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=r=>{const o=r.target.error;o.name==="VersionError"?s(new X(N.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?s(new X(N.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):s(new fc(e,o))},i.onupgradeneeded=r=>{q("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',r.oldVersion);const o=r.target.result;this.p.N(o,i.transaction,r.oldVersion,this.version).next(()=>{q("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,s,i){const r=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(e);const a=v_.open(this.db,e,r?"readonly":"readwrite",s),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),B.reject(l))).toPromise();return c.catch(()=>{}),await a.m,c}catch(a){const c=a,l=c.name!=="FirebaseError"&&o<3;if(q("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}class OV{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return kr(this.k.delete())}}class fc extends X{constructor(e,n){super(N.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Rl(t){return t.name==="IndexedDbTransactionError"}class MV{constructor(e){this.store=e}put(e,n){let s;return n!==void 0?(q("SimpleDb","PUT",this.store.name,e,n),s=this.store.put(n,e)):(q("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),kr(s)}add(e){return q("SimpleDb","ADD",this.store.name,e,e),kr(this.store.add(e))}get(e){return kr(this.store.get(e)).next(n=>(n===void 0&&(n=null),q("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return q("SimpleDb","DELETE",this.store.name,e),kr(this.store.delete(e))}count(){return q("SimpleDb","COUNT",this.store.name),kr(this.store.count())}W(e,n){const s=this.options(e,n),i=s.index?this.store.index(s.index):this.store;if(typeof i.getAll=="function"){const r=i.getAll(s.range);return new B((o,a)=>{r.onerror=c=>{a(c.target.error)},r.onsuccess=c=>{o(c.target.result)}})}{const r=this.cursor(s),o=[];return this.G(r,(a,c)=>{o.push(c)}).next(()=>o)}}j(e,n){const s=this.store.getAll(e,n===null?void 0:n);return new B((i,r)=>{s.onerror=o=>{r(o.target.error)},s.onsuccess=o=>{i(o.target.result)}})}H(e,n){q("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,n);s.J=!1;const i=this.cursor(s);return this.G(i,(r,o,a)=>a.delete())}Y(e,n){let s;n?s=e:(s={},n=e);const i=this.cursor(s);return this.G(i,n)}Z(e){const n=this.cursor({});return new B((s,i)=>{n.onerror=r=>{const o=w_(r.target.error);i(o)},n.onsuccess=r=>{const o=r.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():s()}):s()}})}G(e,n){const s=[];return new B((i,r)=>{e.onerror=o=>{r(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const c=new OV(a),l=n(a.primaryKey,a.value,c);if(l instanceof B){const u=l.catch(h=>(c.done(),B.reject(h)));s.push(u)}c.isDone?i():c.$===null?a.continue():a.continue(c.$)}}).next(()=>B.waitFor(s))}options(e,n){let s;return e!==void 0&&(typeof e=="string"?s=e:n=e),{index:s,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const s=this.store.index(e.index);return e.J?s.openKeyCursor(e.range,n):s.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function kr(t){return new B((e,n)=>{t.onsuccess=s=>{const i=s.target.result;e(i)},t.onerror=s=>{const i=w_(s.target.error);n(i)}})}let e0=!1;function w_(t){const e=Lr.S(Mt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const s=new X("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return e0||(e0=!0,setTimeout(()=>{throw s},0)),s}}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.se(s),this.oe=s=>n.writeSequenceNumber(s))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}E_._e=-1;function qd(t){return t==null}function Nh(t){return t===0&&1/t==-1/0}function LV(t){return typeof t=="number"&&Number.isInteger(t)&&!Nh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function go(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function pI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n){this.comparator=e,this.root=n||Gt.EMPTY}insert(e,n){return new _t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Gt.BLACK,null,null))}remove(e){return new _t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return n+s.left.size;i<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hu(this.root,e,this.comparator,!1)}getReverseIterator(){return new hu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hu(this.root,e,this.comparator,!0)}}class hu{constructor(e,n,s,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=n?s(e.key,n):1,n&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gt{constructor(e,n,s,i,r){this.key=e,this.value=n,this.color=s??Gt.RED,this.left=i??Gt.EMPTY,this.right=r??Gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,i,r){return new Gt(e??this.key,n??this.value,s??this.color,i??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let i=this;const r=s(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,n,s),null):r===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Gt.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw de();const e=this.left.check();if(e!==this.right.check())throw de();return e+(this.isRed()?0:1)}}Gt.EMPTY=null,Gt.RED=!0,Gt.BLACK=!1;Gt.EMPTY=new class{constructor(){this.size=0}get key(){throw de()}get value(){throw de()}get color(){throw de()}get left(){throw de()}get right(){throw de()}copy(e,n,s,i,r){return this}insert(e,n,s){return new Gt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.comparator=e,this.data=new _t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new n0(this.data.getIterator())}getIteratorFrom(e){return new n0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Jt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(this.comparator(i,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Jt(this.comparator);return n.data=e,n}}class n0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new Ln([])}unionWith(e){let n=new Jt(Qt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return sa(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new gI("Invalid base64 string: "+r):r}}(e);return new hn(n)}static fromUint8Array(e){const n=function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r}(e);return new hn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hn.EMPTY_BYTE_STRING=new hn("");const NV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sr(t){if(et(!!t),typeof t=="string"){let e=0;const n=NV.exec(t);if(et(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Pt(t.seconds),nanos:Pt(t.nanos)}}function Pt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function no(t){return typeof t=="string"?hn.fromBase64String(t):hn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function S_(t){const e=t.mapValue.fields.__previous_value__;return T_(e)?S_(e):e}function Gc(t){const e=sr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(e,n,s,i,r,o,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=i,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}}class Kc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Kc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Kc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function so(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?T_(t)?4:FV(t)?9007199254740991:10:de()}function Us(t,e){if(t===e)return!0;const n=so(t);if(n!==so(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Gc(t).isEqual(Gc(e));case 3:return function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const o=sr(i.timestampValue),a=sr(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,r){return no(i.bytesValue).isEqual(no(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,r){return Pt(i.geoPointValue.latitude)===Pt(r.geoPointValue.latitude)&&Pt(i.geoPointValue.longitude)===Pt(r.geoPointValue.longitude)}(t,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Pt(i.integerValue)===Pt(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const o=Pt(i.doubleValue),a=Pt(r.doubleValue);return o===a?Nh(o)===Nh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return sa(t.arrayValue.values||[],e.arrayValue.values||[],Us);case 10:return function(i,r){const o=i.mapValue.fields||{},a=r.mapValue.fields||{};if(t0(o)!==t0(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Us(o[c],a[c])))return!1;return!0}(t,e);default:return de()}}function Yc(t,e){return(t.values||[]).find(n=>Us(n,e))!==void 0}function ia(t,e){if(t===e)return 0;const n=so(t),s=so(e);if(n!==s)return He(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return He(t.booleanValue,e.booleanValue);case 2:return function(r,o){const a=Pt(r.integerValue||r.doubleValue),c=Pt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return s0(t.timestampValue,e.timestampValue);case 4:return s0(Gc(t),Gc(e));case 5:return He(t.stringValue,e.stringValue);case 6:return function(r,o){const a=no(r),c=no(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(r,o){const a=r.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){const u=He(a[l],c[l]);if(u!==0)return u}return He(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,o){const a=He(Pt(r.latitude),Pt(o.latitude));return a!==0?a:He(Pt(r.longitude),Pt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(r,o){const a=r.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){const u=ia(a[l],c[l]);if(u)return u}return He(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(r,o){if(r===du.mapValue&&o===du.mapValue)return 0;if(r===du.mapValue)return 1;if(o===du.mapValue)return-1;const a=r.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let h=0;h<c.length&&h<u.length;++h){const d=He(c[h],u[h]);if(d!==0)return d;const f=ia(a[c[h]],l[u[h]]);if(f!==0)return f}return He(c.length,u.length)}(t.mapValue,e.mapValue);default:throw de()}}function s0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return He(t,e);const n=sr(t),s=sr(e),i=He(n.seconds,s.seconds);return i!==0?i:He(n.nanos,s.nanos)}function ra(t){return Eg(t)}function Eg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=sr(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return no(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",i=!0;for(const r of n.values||[])i?i=!1:s+=",",s+=Eg(r);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let i="{",r=!0;for(const o of s)r?r=!1:i+=",",i+=`${o}:${Eg(n.fields[o])}`;return i+"}"}(t.mapValue):de()}function i0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Tg(t){return!!t&&"integerValue"in t}function I_(t){return!!t&&"arrayValue"in t}function r0(t){return!!t&&"nullValue"in t}function o0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function qu(t){return!!t&&"mapValue"in t}function pc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return go(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=pc(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=pc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function FV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.value=e}static empty(){return new En({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!qu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=pc(n)}setAll(e){let n=Qt.emptyPath(),s={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,s,i),s={},i=[],n=a.popLast()}o?s[a.lastSegment()]=pc(o):i.push(a.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,s,i)}delete(e){const n=this.field(e.popLast());qu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Us(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let i=n.mapValue.fields[e.get(s)];qu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,s){go(n,(i,r)=>e[i]=r);for(const i of s)delete e[i]}clone(){return new En(pc(this.value))}}function mI(t){const e=[];return go(t.fields,(n,s)=>{const i=new Qt([n]);if(qu(s)){const r=mI(s.mapValue).fields;if(r.length===0)e.push(i);else for(const o of r)e.push(i.child(o))}else e.push(i)}),new Ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,n,s,i,r,o,a){this.key=e,this.documentType=n,this.version=s,this.readTime=i,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(e){return new sn(e,0,me.min(),me.min(),me.min(),En.empty(),0)}static newFoundDocument(e,n,s,i){return new sn(e,1,n,me.min(),s,i,0)}static newNoDocument(e,n){return new sn(e,2,n,me.min(),me.min(),En.empty(),0)}static newUnknownDocument(e,n){return new sn(e,3,n,me.min(),me.min(),En.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=En.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=En.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n){this.position=e,this.inclusive=n}}function a0(t,e,n){let s=0;for(let i=0;i<t.position.length;i++){const r=e[i],o=t.position[i];if(r.field.isKeyField()?s=se.comparator(se.fromName(o.referenceValue),n.key):s=ia(o,n.data.field(r.field)),r.dir==="desc"&&(s*=-1),s!==0)break}return s}function c0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Us(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,n="asc"){this.field=e,this.dir=n}}function BV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{}class Dt extends _I{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new $V(e,n,s):n==="array-contains"?new jV(e,s):n==="in"?new WV(e,s):n==="not-in"?new qV(e,s):n==="array-contains-any"?new GV(e,s):new Dt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new HV(e,s):new zV(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ia(n,this.value)):n!==null&&so(this.value)===so(n)&&this.matchesComparison(ia(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return de()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ls extends _I{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new ls(e,n)}matches(e){return yI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function yI(t){return t.op==="and"}function bI(t){return UV(t)&&yI(t)}function UV(t){for(const e of t.filters)if(e instanceof ls)return!1;return!0}function Sg(t){if(t instanceof Dt)return t.field.canonicalString()+t.op.toString()+ra(t.value);if(bI(t))return t.filters.map(e=>Sg(e)).join(",");{const e=t.filters.map(n=>Sg(n)).join(",");return`${t.op}(${e})`}}function vI(t,e){return t instanceof Dt?function(s,i){return i instanceof Dt&&s.op===i.op&&s.field.isEqual(i.field)&&Us(s.value,i.value)}(t,e):t instanceof ls?function(s,i){return i instanceof ls&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce((r,o,a)=>r&&vI(o,i.filters[a]),!0):!1}(t,e):void de()}function wI(t){return t instanceof Dt?function(n){return`${n.field.canonicalString()} ${n.op} ${ra(n.value)}`}(t):t instanceof ls?function(n){return n.op.toString()+" {"+n.getFilters().map(wI).join(" ,")+"}"}(t):"Filter"}class $V extends Dt{constructor(e,n,s){super(e,n,s),this.key=se.fromName(s.referenceValue)}matches(e){const n=se.comparator(e.key,this.key);return this.matchesComparison(n)}}class HV extends Dt{constructor(e,n){super(e,"in",n),this.keys=EI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class zV extends Dt{constructor(e,n){super(e,"not-in",n),this.keys=EI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function EI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>se.fromName(s.referenceValue))}class jV extends Dt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return I_(n)&&Yc(n.arrayValue,this.value)}}class WV extends Dt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Yc(this.value.arrayValue,n)}}class qV extends Dt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Yc(this.value.arrayValue,n)}}class GV extends Dt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!I_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Yc(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e,n=null,s=[],i=[],r=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=i,this.limit=r,this.startAt=o,this.endAt=a,this.ce=null}}function l0(t,e=null,n=[],s=[],i=null,r=null,o=null){return new KV(t,e,n,s,i,r,o)}function R_(t){const e=Ie(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Sg(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),qd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>ra(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>ra(s)).join(",")),e.ce=n}return e.ce}function x_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!BV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!vI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!c0(t.startAt,e.startAt)&&c0(t.endAt,e.endAt)}function Ig(t){return se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n=null,s=[],i=[],r=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=i,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function YV(t,e,n,s,i,r,o,a){return new xl(t,e,n,s,i,r,o,a)}function Gd(t){return new xl(t)}function u0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function TI(t){return t.collectionGroup!==null}function gc(t){const e=Ie(t);if(e.le===null){e.le=[];const n=new Set;for(const r of e.explicitOrderBy)e.le.push(r),n.add(r.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Jt(Qt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||e.le.push(new Fh(r,s))}),n.has(Qt.keyField().canonicalString())||e.le.push(new Fh(Qt.keyField(),s))}return e.le}function Ds(t){const e=Ie(t);return e.he||(e.he=QV(e,gc(t))),e.he}function QV(t,e){if(t.limitType==="F")return l0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const r=i.dir==="desc"?"asc":"desc";return new Fh(i.field,r)});const n=t.endAt?new Vh(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Vh(t.startAt.position,t.startAt.inclusive):null;return l0(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function Rg(t,e){const n=t.filters.concat([e]);return new xl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function xg(t,e,n){return new xl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Kd(t,e){return x_(Ds(t),Ds(e))&&t.limitType===e.limitType}function SI(t){return`${R_(Ds(t))}|lt:${t.limitType}`}function Do(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(i=>wI(i)).join(", ")}]`),qd(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(i=>ra(i)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(i=>ra(i)).join(",")),`Target(${s})`}(Ds(t))}; limitType=${t.limitType})`}function Yd(t,e){return e.isFoundDocument()&&function(s,i){const r=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(r):se.isDocumentKey(s.path)?s.path.isEqual(r):s.path.isImmediateParentOf(r)}(t,e)&&function(s,i){for(const r of gc(s))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0}(t,e)&&function(s,i){for(const r of s.filters)if(!r.matches(i))return!1;return!0}(t,e)&&function(s,i){return!(s.startAt&&!function(o,a,c){const l=a0(o,a,c);return o.inclusive?l<=0:l<0}(s.startAt,gc(s),i)||s.endAt&&!function(o,a,c){const l=a0(o,a,c);return o.inclusive?l>=0:l>0}(s.endAt,gc(s),i))}(t,e)}function XV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function II(t){return(e,n)=>{let s=!1;for(const i of gc(t)){const r=JV(i,e,n);if(r!==0)return r;s=s||i.field.isKeyField()}return 0}}function JV(t,e,n){const s=t.field.isKeyField()?se.comparator(e.key,n.key):function(r,o,a){const c=o.data.field(r),l=a.data.field(r);return c!==null&&l!==null?ia(c,l):de()}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return de()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[i,r]of s)if(this.equalsFn(i,e))return r}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return void(i[r]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return s.length===1?delete this.inner[n]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(e){go(this.inner,(n,s)=>{for(const[i,r]of s)e(i,r)})}isEmpty(){return pI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV=new _t(se.comparator);function ui(){return ZV}const RI=new _t(se.comparator);function Ya(...t){let e=RI;for(const n of t)e=e.insert(n.key,n);return e}function xI(t){let e=RI;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Nr(){return mc()}function CI(){return mc()}function mc(){return new va(t=>t.toString(),(t,e)=>t.isEqual(e))}const eF=new _t(se.comparator),tF=new Jt(se.comparator);function Pe(...t){let e=tF;for(const n of t)e=e.add(n);return e}const nF=new Jt(He);function sF(){return nF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nh(e)?"-0":e}}function kI(t){return{integerValue:""+t}}function iF(t,e){return LV(e)?kI(e):AI(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(){this._=void 0}}function rF(t,e,n){return t instanceof Bh?function(i,r){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&T_(r)&&(r=S_(r)),r&&(o.fields.__previous_value__=r),{mapValue:o}}(n,e):t instanceof oa?DI(t,e):t instanceof aa?OI(t,e):function(i,r){const o=PI(i,r),a=h0(o)+h0(i.Ie);return Tg(o)&&Tg(i.Ie)?kI(a):AI(i.serializer,a)}(t,e)}function oF(t,e,n){return t instanceof oa?DI(t,e):t instanceof aa?OI(t,e):n}function PI(t,e){return t instanceof Uh?function(s){return Tg(s)||function(r){return!!r&&"doubleValue"in r}(s)}(e)?e:{integerValue:0}:null}class Bh extends Qd{}class oa extends Qd{constructor(e){super(),this.elements=e}}function DI(t,e){const n=MI(e);for(const s of t.elements)n.some(i=>Us(i,s))||n.push(s);return{arrayValue:{values:n}}}class aa extends Qd{constructor(e){super(),this.elements=e}}function OI(t,e){let n=MI(e);for(const s of t.elements)n=n.filter(i=>!Us(i,s));return{arrayValue:{values:n}}}class Uh extends Qd{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function h0(t){return Pt(t.integerValue||t.doubleValue)}function MI(t){return I_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,n){this.field=e,this.transform=n}}function aF(t,e){return t.field.isEqual(e.field)&&function(s,i){return s instanceof oa&&i instanceof oa||s instanceof aa&&i instanceof aa?sa(s.elements,i.elements,Us):s instanceof Uh&&i instanceof Uh?Us(s.Ie,i.Ie):s instanceof Bh&&i instanceof Bh}(t.transform,e.transform)}class cF{constructor(e,n){this.version=e,this.transformResults=n}}class Wn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Wn}static exists(e){return new Wn(void 0,e)}static updateTime(e){return new Wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Xd{}function NI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new C_(t.key,Wn.none()):new Cl(t.key,t.data,Wn.none());{const n=t.data,s=En.empty();let i=new Jt(Qt.comparator);for(let r of e.fields)if(!i.has(r)){let o=n.field(r);o===null&&r.length>1&&(r=r.popLast(),o=n.field(r)),o===null?s.delete(r):s.set(r,o),i=i.add(r)}return new hr(t.key,s,new Ln(i.toArray()),Wn.none())}}function lF(t,e,n){t instanceof Cl?function(i,r,o){const a=i.value.clone(),c=f0(i.fieldTransforms,r,o.transformResults);a.setAll(c),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof hr?function(i,r,o){if(!Gu(i.precondition,r))return void r.convertToUnknownDocument(o.version);const a=f0(i.fieldTransforms,r,o.transformResults),c=r.data;c.setAll(VI(i)),c.setAll(a),r.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function _c(t,e,n,s){return t instanceof Cl?function(r,o,a,c){if(!Gu(r.precondition,o))return a;const l=r.value.clone(),u=p0(r.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,s):t instanceof hr?function(r,o,a,c){if(!Gu(r.precondition,o))return a;const l=p0(r.fieldTransforms,c,o),u=o.data;return u.setAll(VI(r)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(h=>h.field))}(t,e,n,s):function(r,o,a){return Gu(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function uF(t,e){let n=null;for(const s of t.fieldTransforms){const i=e.data.field(s.field),r=PI(s.transform,i||null);r!=null&&(n===null&&(n=En.empty()),n.set(s.field,r))}return n||null}function d0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&sa(s,i,(r,o)=>aF(r,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Cl extends Xd{constructor(e,n,s,i=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class hr extends Xd{constructor(e,n,s,i,r=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function VI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function f0(t,e,n){const s=new Map;et(t.length===n.length);for(let i=0;i<n.length;i++){const r=t[i],o=r.transform,a=e.data.field(r.field);s.set(r.field,oF(o,a,n[i]))}return s}function p0(t,e,n){const s=new Map;for(const i of t){const r=i.transform,o=n.data.field(i.field);s.set(i.field,rF(r,o,e))}return s}class C_ extends Xd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hF extends Xd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dF{constructor(e,n,s,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const r=this.mutations[i];r.key.isEqual(e.key)&&lF(r,e,s[i])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=_c(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=_c(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=CI();return this.mutations.forEach(i=>{const r=e.get(i.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=n.has(i.key)?null:a;const c=NI(o,a);c!==null&&s.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(me.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Pe())}isEqual(e){return this.batchId===e.batchId&&sa(this.mutations,e.mutations,(n,s)=>d0(n,s))&&sa(this.baseMutations,e.baseMutations,(n,s)=>d0(n,s))}}class A_{constructor(e,n,s,i){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=i}static from(e,n,s){et(e.mutations.length===s.length);let i=function(){return eF}();const r=e.mutations;for(let o=0;o<r.length;o++)i=i.insert(r[o].key,s[o].version);return new A_(e,n,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,Ne;function gF(t){switch(t){default:return de();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function FI(t){if(t===void 0)return Bs("GRPC error has no .code"),N.UNKNOWN;switch(t){case kt.OK:return N.OK;case kt.CANCELLED:return N.CANCELLED;case kt.UNKNOWN:return N.UNKNOWN;case kt.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case kt.INTERNAL:return N.INTERNAL;case kt.UNAVAILABLE:return N.UNAVAILABLE;case kt.UNAUTHENTICATED:return N.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case kt.NOT_FOUND:return N.NOT_FOUND;case kt.ALREADY_EXISTS:return N.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return N.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case kt.ABORTED:return N.ABORTED;case kt.OUT_OF_RANGE:return N.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return N.UNIMPLEMENTED;case kt.DATA_LOSS:return N.DATA_LOSS;default:return de()}}(Ne=kt||(kt={}))[Ne.OK=0]="OK",Ne[Ne.CANCELLED=1]="CANCELLED",Ne[Ne.UNKNOWN=2]="UNKNOWN",Ne[Ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ne[Ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ne[Ne.NOT_FOUND=5]="NOT_FOUND",Ne[Ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ne[Ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ne[Ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ne[Ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ne[Ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ne[Ne.ABORTED=10]="ABORTED",Ne[Ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ne[Ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ne[Ne.INTERNAL=13]="INTERNAL",Ne[Ne.UNAVAILABLE=14]="UNAVAILABLE",Ne[Ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mF(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _F=new qo([4294967295,4294967295],0);function g0(t){const e=mF().encode(t),n=new yV;return n.update(e),new Uint8Array(n.digest())}function m0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),i=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new qo([n,s],0),new qo([i,r],0)]}class k_{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Qa(`Invalid padding: ${n}`);if(s<0)throw new Qa(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Qa(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Qa(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=qo.fromNumber(this.Te)}de(e,n,s){let i=e.add(n.multiply(qo.fromNumber(s)));return i.compare(_F)===1&&(i=new qo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=g0(e),[s,i]=m0(n);for(let r=0;r<this.hashCount;r++){const o=this.de(s,i,r);if(!this.Ae(o))return!1}return!0}static create(e,n,s){const i=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),o=new k_(r,i,n);return s.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=g0(e),[s,i]=m0(n);for(let r=0;r<this.hashCount;r++){const o=this.de(s,i,r);this.Re(o)}}Re(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Qa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,n,s,i,r){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const i=new Map;return i.set(e,Al.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Jd(me.min(),i,new _t(He),ui(),Pe())}}class Al{constructor(e,n,s,i,r){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Al(s,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n,s,i){this.Ve=e,this.removedTargetIds=n,this.key=s,this.me=i}}class BI{constructor(e,n){this.targetId=e,this.fe=n}}class UI{constructor(e,n,s=hn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=i}}class _0{constructor(){this.ge=0,this.pe=b0(),this.ye=hn.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Pe(),n=Pe(),s=Pe();return this.pe.forEach((i,r)=>{switch(r){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:s=s.add(i);break;default:de()}}),new Al(this.ye,this.we,e,n,s)}Fe(){this.Se=!1,this.pe=b0()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,et(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class yF{constructor(e){this.Le=e,this.ke=new Map,this.qe=ui(),this.Qe=y0(),this.Ke=new _t(He)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const s=this.ze(n);switch(e.state){case 0:this.je(n)&&s.Ce(e.resumeToken);break;case 1:s.Ne(),s.be||s.Fe(),s.Ce(e.resumeToken);break;case 2:s.Ne(),s.be||this.removeTarget(n);break;case 3:this.je(n)&&(s.Be(),s.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),s.Ce(e.resumeToken));break;default:de()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((s,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,s=e.fe.count,i=this.Ye(n);if(i){const r=i.target;if(Ig(r))if(s===0){const o=new se(r.path);this.We(n,o,sn.newNoDocument(o,me.min()))}else et(s===1);else{const o=this.Ze(n);if(o!==s){const a=this.Xe(e),c=a?this.et(a,e,o):1;if(c!==0){this.He(n);const l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:r=0}=n;let o,a;try{o=no(s).toUint8Array()}catch(c){if(c instanceof gI)return na("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new k_(o,i,r)}catch(c){return na(c instanceof Qa?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,s){return n.fe.count===s-this.rt(e,n.targetId)?0:2}rt(e,n){const s=this.Le.getRemoteKeysForTarget(n);let i=0;return s.forEach(r=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;e.mightContain(a)||(this.We(n,r,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((r,o)=>{const a=this.Ye(o);if(a){if(r.current&&Ig(a.target)){const c=new se(a.target.path);this.qe.get(c)!==null||this.st(o,c)||this.We(o,c,sn.newNoDocument(c,e))}r.De&&(n.set(o,r.ve()),r.Fe())}});let s=Pe();this.Qe.forEach((r,o)=>{let a=!0;o.forEachWhile(c=>{const l=this.Ye(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(r))}),this.qe.forEach((r,o)=>o.setReadTime(e));const i=new Jd(e,n,this.Ke,this.qe,s);return this.qe=ui(),this.Qe=y0(),this.Ke=new _t(He),i}Ue(e,n){if(!this.je(e))return;const s=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,s),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,s){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),s&&(this.qe=this.qe.insert(n,s))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new _0,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Jt(He),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new _0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function y0(){return new _t(se.comparator)}function b0(){return new _t(se.comparator)}const bF={asc:"ASCENDING",desc:"DESCENDING"},vF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wF={and:"AND",or:"OR"};class EF{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Cg(t,e){return t.useProto3Json||qd(e)?e:{value:e}}function $h(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $I(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function TF(t,e){return $h(t,e.toTimestamp())}function Os(t){return et(!!t),me.fromTimestamp(function(n){const s=sr(n);return new Ut(s.seconds,s.nanos)}(t))}function P_(t,e){return Ag(t,e).canonicalString()}function Ag(t,e){const n=function(i){return new rt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function HI(t){const e=rt.fromString(t);return et(GI(e)),e}function kg(t,e){return P_(t.databaseId,e.path)}function lp(t,e){const n=HI(e);if(n.get(1)!==t.databaseId.projectId)throw new X(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new se(jI(n))}function zI(t,e){return P_(t.databaseId,e)}function SF(t){const e=HI(t);return e.length===4?rt.emptyPath():jI(e)}function Pg(t){return new rt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function jI(t){return et(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function v0(t,e,n){return{name:kg(t,e),fields:n.value.mapValue.fields}}function IF(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:de()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],r=function(l,u){return l.useProto3Json?(et(u===void 0||typeof u=="string"),hn.fromBase64String(u||"")):(et(u===void 0||u instanceof Uint8Array),hn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?N.UNKNOWN:FI(l.code);return new X(u,l.message||"")}(o);n=new UI(s,i,r,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const i=lp(t,s.document.name),r=Os(s.document.updateTime),o=s.document.createTime?Os(s.document.createTime):me.min(),a=new En({mapValue:{fields:s.document.fields}}),c=sn.newFoundDocument(i,r,o,a),l=s.targetIds||[],u=s.removedTargetIds||[];n=new Ku(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const i=lp(t,s.document),r=s.readTime?Os(s.readTime):me.min(),o=sn.newNoDocument(i,r),a=s.removedTargetIds||[];n=new Ku([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const i=lp(t,s.document),r=s.removedTargetIds||[];n=new Ku([],r,i,null)}else{if(!("filter"in e))return de();{e.filter;const s=e.filter;s.targetId;const{count:i=0,unchangedNames:r}=s,o=new pF(i,r),a=s.targetId;n=new BI(a,o)}}return n}function RF(t,e){let n;if(e instanceof Cl)n={update:v0(t,e.key,e.value)};else if(e instanceof C_)n={delete:kg(t,e.key)};else if(e instanceof hr)n={update:v0(t,e.key,e.data),updateMask:LF(e.fieldMask)};else{if(!(e instanceof hF))return de();n={verify:kg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(r,o){const a=o.transform;if(a instanceof Bh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof oa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof aa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Uh)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw de()}(0,s))),e.precondition.isNone||(n.currentDocument=function(i,r){return r.updateTime!==void 0?{updateTime:TF(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:de()}(t,e.precondition)),n}function xF(t,e){return t&&t.length>0?(et(e!==void 0),t.map(n=>function(i,r){let o=i.updateTime?Os(i.updateTime):Os(r);return o.isEqual(me.min())&&(o=Os(r)),new cF(o,i.transformResults||[])}(n,e))):[]}function CF(t,e){return{documents:[zI(t,e.path)]}}function AF(t,e){const n={structuredQuery:{}},s=e.path;let i;e.collectionGroup!==null?(i=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=zI(t,i);const r=function(l){if(l.length!==0)return qI(ls.create(l,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const o=function(l){if(l.length!==0)return l.map(u=>function(d){return{field:Oo(d.field),direction:DF(d.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Cg(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ut:n,parent:i}}function kF(t){let e=SF(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){et(s===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let r=[];n.where&&(r=function(h){const d=WI(h);return d instanceof ls&&bI(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(p){return new Fh(Mo(p.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,qd(d)?null:d}(n.limit));let c=null;n.startAt&&(c=function(h){const d=!!h.before,f=h.values||[];return new Vh(f,d)}(n.startAt));let l=null;return n.endAt&&(l=function(h){const d=!h.before,f=h.values||[];return new Vh(f,d)}(n.endAt)),YV(e,i,o,r,a,"F",c,l)}function PF(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return de()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function WI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Mo(n.unaryFilter.field);return Dt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=Mo(n.unaryFilter.field);return Dt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Mo(n.unaryFilter.field);return Dt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Mo(n.unaryFilter.field);return Dt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return de()}}(t):t.fieldFilter!==void 0?function(n){return Dt.create(Mo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return de()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ls.create(n.compositeFilter.filters.map(s=>WI(s)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return de()}}(n.compositeFilter.op))}(t):de()}function DF(t){return bF[t]}function OF(t){return vF[t]}function MF(t){return wF[t]}function Oo(t){return{fieldPath:t.canonicalString()}}function Mo(t){return Qt.fromServerFormat(t.fieldPath)}function qI(t){return t instanceof Dt?function(n){if(n.op==="=="){if(o0(n.value))return{unaryFilter:{field:Oo(n.field),op:"IS_NAN"}};if(r0(n.value))return{unaryFilter:{field:Oo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(o0(n.value))return{unaryFilter:{field:Oo(n.field),op:"IS_NOT_NAN"}};if(r0(n.value))return{unaryFilter:{field:Oo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oo(n.field),op:OF(n.op),value:n.value}}}(t):t instanceof ls?function(n){const s=n.getFilters().map(i=>qI(i));return s.length===1?s[0]:{compositeFilter:{op:MF(n.op),filters:s}}}(t):de()}function LF(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function GI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,n,s,i,r=me.min(),o=me.min(),a=hn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Ui(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NF{constructor(e){this.ct=e}}function VF(t){const e=kF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?xg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(){this._n=new BF}addToCollectionParentIndex(e,n){return this._n.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(nr.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(nr.min())}updateCollectionGroup(e,n,s){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class BF{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n]||new Jt(rt.comparator),r=!i.has(s);return this.index[n]=i.add(s),r}has(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n];return i&&i.has(s)}getEntries(e){return(this.index[e]||new Jt(rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new ca(0)}static Bn(){return new ca(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(){this.changes=new va(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?B.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF{constructor(e,n,s,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=i}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(s=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(s!==null&&_c(s.mutation,i,Ln.empty(),Ut.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Pe()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Pe()){const i=Nr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,s).next(r=>{let o=Ya();return r.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=Nr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Pe()))}populateOverlays(e,n,s){const i=[];return s.forEach(r=>{n.has(r)||i.push(r)}),this.documentOverlayCache.getOverlays(e,i).next(r=>{r.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,s,i){let r=ui();const o=mc(),a=function(){return mc()}();return n.forEach((c,l)=>{const u=s.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof hr)?r=r.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),_c(u.mutation,l,u.mutation.getFieldMask(),Ut.now())):o.set(l.key,Ln.empty())}),this.recalculateAndSaveOverlays(e,r).next(c=>(c.forEach((l,u)=>o.set(l,u)),n.forEach((l,u)=>{var h;return a.set(l,new $F(u,(h=o.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const s=mc();let i=new _t((o,a)=>o-a),r=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const l=n.get(c);if(l===null)return;let u=s.get(c)||Ln.empty();u=a.applyToLocalView(l,u),s.set(c,u);const h=(i.get(a.batchId)||Pe()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,u=c.value,h=CI();u.forEach(d=>{if(!r.has(d)){const f=NI(n.get(d),s.get(d));f!==null&&h.set(d,f),r=r.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,h))}return B.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,i){return function(o){return se.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):TI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,i):this.getDocumentsMatchingCollectionQuery(e,n,s,i)}getNextDocuments(e,n,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,i).next(r=>{const o=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,i-r.size):B.resolve(Nr());let a=-1,c=r;return o.next(l=>B.forEach(l,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),r.get(u)?B.resolve():this.remoteDocumentCache.getEntry(e,u).next(d=>{c=c.insert(u,d)}))).next(()=>this.populateOverlays(e,l,r)).next(()=>this.computeViews(e,c,l,Pe())).next(u=>({batchId:a,changes:xI(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new se(n)).next(s=>{let i=Ya();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,s,i){const r=n.collectionGroup;let o=Ya();return this.indexManager.getCollectionParents(e,r).next(a=>B.forEach(a,c=>{const l=function(h,d){return new xl(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,c.child(r));return this.getDocumentsMatchingCollectionQuery(e,l,s,i).next(u=>{u.forEach((h,d)=>{o=o.insert(h,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,r,i))).next(o=>{r.forEach((c,l)=>{const u=l.getKey();o.get(u)===null&&(o=o.insert(u,sn.newInvalidDocument(u)))});let a=Ya();return o.forEach((c,l)=>{const u=r.get(c);u!==void 0&&_c(u.mutation,l,Ln.empty(),Ut.now()),Yd(n,l)&&(a=a.insert(c,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return B.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Os(i.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:VF(i.bundledQuery),readTime:Os(i.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(){this.overlays=new _t(se.comparator),this.hr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Nr();return B.forEach(n,i=>this.getOverlay(e,i).next(r=>{r!==null&&s.set(i,r)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((i,r)=>{this.ht(e,n,r)}),B.resolve()}removeOverlaysForBatchId(e,n,s){const i=this.hr.get(s);return i!==void 0&&(i.forEach(r=>this.overlays=this.overlays.remove(r)),this.hr.delete(s)),B.resolve()}getOverlaysForCollection(e,n,s){const i=Nr(),r=n.length+1,o=new se(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===r&&c.largestBatchId>s&&i.set(c.getKey(),c)}return B.resolve(i)}getOverlaysForCollectionGroup(e,n,s,i){let r=new _t((l,u)=>l-u);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>s){let u=r.get(l.largestBatchId);u===null&&(u=Nr(),r=r.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}const a=Nr(),c=r.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return B.resolve(a)}ht(e,n,s){const i=this.overlays.get(s.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(s.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new fF(n,s));let r=this.hr.get(n);r===void 0&&(r=Pe(),this.hr.set(n,r)),this.hr.set(n,r.add(s.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(){this.Pr=new Jt(Ht.Ir),this.Tr=new Jt(Ht.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const s=new Ht(e,n);this.Pr=this.Pr.add(s),this.Tr=this.Tr.add(s)}dr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Ar(new Ht(e,n))}Rr(e,n){e.forEach(s=>this.removeReference(s,n))}Vr(e){const n=new se(new rt([])),s=new Ht(n,e),i=new Ht(n,e+1),r=[];return this.Tr.forEachInRange([s,i],o=>{this.Ar(o),r.push(o.key)}),r}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new se(new rt([])),s=new Ht(n,e),i=new Ht(n,e+1);let r=Pe();return this.Tr.forEachInRange([s,i],o=>{r=r.add(o.key)}),r}containsKey(e){const n=new Ht(e,0),s=this.Pr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Ht{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return se.comparator(e.key,n.key)||He(e.pr,n.pr)}static Er(e,n){return He(e.pr,n.pr)||se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Jt(Ht.Ir)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,i){const r=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new dF(r,n,s,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Ht(a.key,r)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,i=this.br(s),r=i<0?0:i;return B.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Ht(n,0),i=new Ht(n,Number.POSITIVE_INFINITY),r=[];return this.wr.forEachInRange([s,i],o=>{const a=this.Sr(o.pr);r.push(a)}),B.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Jt(He);return n.forEach(i=>{const r=new Ht(i,0),o=new Ht(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([r,o],a=>{s=s.add(a.pr)})}),B.resolve(this.Dr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,i=s.length+1;let r=s;se.isDocumentKey(r)||(r=r.child(""));const o=new Ht(new se(r),0);let a=new Jt(He);return this.wr.forEachWhile(c=>{const l=c.key.path;return!!s.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.pr)),!0)},o),B.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(s=>{const i=this.Sr(s);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){et(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.wr;return B.forEach(n.mutations,i=>{const r=new Ht(i.key,n.batchId);return s=s.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=s})}Mn(e){}containsKey(e,n){const s=new Ht(n,0),i=this.wr.firstAfterOrEqual(s);return B.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{constructor(e){this.vr=e,this.docs=function(){return new _t(se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,i=this.docs.get(s),r=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return B.resolve(s?s.document.mutableCopy():sn.newInvalidDocument(n))}getEntries(e,n){let s=ui();return n.forEach(i=>{const r=this.docs.get(i);s=s.insert(i,r?r.document.mutableCopy():sn.newInvalidDocument(i))}),B.resolve(s)}getDocumentsMatchingQuery(e,n,s,i){let r=ui();const o=n.path,a=new se(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||kV(AV(u),s)<=0||(i.has(u.key)||Yd(n,u))&&(r=r.insert(u.key,u.mutableCopy()))}return B.resolve(r)}getAllFromCollectionGroup(e,n,s,i){de()}Fr(e,n){return B.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new GF(this)}getSize(e){return B.resolve(this.size)}}class GF extends UF{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((s,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(s)}),B.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{constructor(e){this.persistence=e,this.Mr=new va(n=>R_(n),x_),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.Or=0,this.Nr=new D_,this.targetCount=0,this.Br=ca.Nn()}forEachTarget(e,n){return this.Mr.forEach((s,i)=>n(i)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.Or&&(this.Or=n),B.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new ca(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.qn(n),B.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,s){let i=0;const r=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.Mr.delete(o),r.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),B.waitFor(r).next(()=>i)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const s=this.Mr.get(n)||null;return B.resolve(s)}addMatchingKeys(e,n,s){return this.Nr.dr(n,s),B.resolve()}removeMatchingKeys(e,n,s){this.Nr.Rr(n,s);const i=this.persistence.referenceDelegate,r=[];return i&&n.forEach(o=>{r.push(i.markPotentiallyOrphaned(e,o))}),B.waitFor(r)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Nr.gr(n);return B.resolve(s)}containsKey(e,n){return B.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{constructor(e,n){this.Lr={},this.overlays={},this.kr=new E_(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new KF(this),this.indexManager=new FF,this.remoteDocumentCache=function(i){return new qF(i)}(s=>this.referenceDelegate.Kr(s)),this.serializer=new NF(n),this.$r=new zF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new jF,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Lr[e.toKey()];return s||(s=new WF(n,this.referenceDelegate),this.Lr[e.toKey()]=s),s}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,s){q("MemoryPersistence","Starting transaction:",e);const i=new QF(this.kr.next());return this.referenceDelegate.Ur(),s(i).next(r=>this.referenceDelegate.Wr(i).next(()=>r)).toPromise().then(r=>(i.raiseOnCommittedEvent(),r))}Gr(e,n){return B.or(Object.values(this.Lr).map(s=>()=>s.containsKey(e,n)))}}class QF extends DV{constructor(e){super(),this.currentSequenceNumber=e}}class O_{constructor(e){this.persistence=e,this.zr=new D_,this.jr=null}static Hr(e){return new O_(e)}get Jr(){if(this.jr)return this.jr;throw de()}addReference(e,n,s){return this.zr.addReference(s,n),this.Jr.delete(s.toString()),B.resolve()}removeReference(e,n,s){return this.zr.removeReference(s,n),this.Jr.add(s.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),B.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(r=>this.Jr.add(r.toString()))}).next(()=>s.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Jr,s=>{const i=se.fromPath(s);return this.Yr(e,i).next(r=>{r||n.removeEntry(i,me.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(s=>{s?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return B.or([()=>B.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e,n,s,i){this.targetId=e,this.fromCache=n,this.qi=s,this.Qi=i}static Ki(e,n){let s=Pe(),i=Pe();for(const r of n.docChanges)switch(r.type){case 0:s=s.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new M_(e,n.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JF{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return AO()?8:Lr.v(Mt())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,s,i){const r={result:null};return this.ji(e,n).next(o=>{r.result=o}).next(()=>{if(!r.result)return this.Hi(e,n,i,s).next(o=>{r.result=o})}).next(()=>{if(r.result)return;const o=new XF;return this.Ji(e,n,o).next(a=>{if(r.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>r.result)}Yi(e,n,s,i){return s.documentReadCount<this.Wi?(Oa()<=Me.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",Do(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),B.resolve()):(Oa()<=Me.DEBUG&&q("QueryEngine","Query:",Do(n),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.Gi*i?(Oa()<=Me.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",Do(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ds(n))):B.resolve())}ji(e,n){if(u0(n))return B.resolve(null);let s=Ds(n);return this.indexManager.getIndexType(e,s).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=xg(n,null,"F"),s=Ds(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(r=>{const o=Pe(...r);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(c=>{const l=this.Zi(n,a);return this.Xi(n,l,o,c.readTime)?this.ji(e,xg(n,null,"F")):this.es(e,l,n,c)}))})))}Hi(e,n,s,i){return u0(n)||i.isEqual(me.min())?B.resolve(null):this.zi.getDocuments(e,s).next(r=>{const o=this.Zi(n,r);return this.Xi(n,o,s,i)?B.resolve(null):(Oa()<=Me.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Do(n)),this.es(e,o,n,CV(i,-1)).next(a=>a))})}Zi(e,n){let s=new Jt(II(e));return n.forEach((i,r)=>{Yd(e,r)&&(s=s.add(r))}),s}Xi(e,n,s,i){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const r=e.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ji(e,n,s){return Oa()<=Me.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",Do(n)),this.zi.getDocumentsMatchingQuery(e,n,nr.min(),s)}es(e,n,s,i){return this.zi.getDocumentsMatchingQuery(e,s,i).next(r=>(n.forEach(o=>{r=r.insert(o.key,o)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{constructor(e,n,s,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new _t(He),this.rs=new va(r=>R_(r),x_),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(s)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HF(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function eB(t,e,n,s){return new ZF(t,e,n,s)}async function KI(t,e){const n=Ie(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let i;return n.mutationQueue.getAllMutationBatches(s).next(r=>(i=r,n._s(e),n.mutationQueue.getAllMutationBatches(s))).next(r=>{const o=[],a=[];let c=Pe();for(const l of i){o.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}for(const l of r){a.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(s,c).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function tB(t,e){const n=Ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const i=e.batch.keys(),r=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){const h=l.batch,d=h.keys();let f=B.resolve();return d.forEach(p=>{f=f.next(()=>u.getEntry(c,p)).next(m=>{const _=l.docVersions.get(p);et(_!==null),m.version.compareTo(_)<0&&(h.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),u.addEntry(m)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(n,s,e,r).next(()=>r.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(a){let c=Pe();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(s,i))})}function YI(t){const e=Ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function nB(t,e){const n=Ie(t),s=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((u,h)=>{const d=i.get(h);if(!d)return;a.push(n.Qr.removeMatchingKeys(r,u.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(r,u.addedDocuments,h)));let f=d.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(hn.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,s)),i=i.insert(h,f),function(m,_,y){return m.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,f,u)&&a.push(n.Qr.updateTargetData(r,f))});let c=ui(),l=Pe();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(r,u))}),a.push(sB(r,o,e.documentUpdates).next(u=>{c=u.cs,l=u.ls})),!s.isEqual(me.min())){const u=n.Qr.getLastRemoteSnapshotVersion(r).next(h=>n.Qr.setTargetsMetadata(r,r.currentSequenceNumber,s));a.push(u)}return B.waitFor(a).next(()=>o.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,c,l)).next(()=>c)}).then(r=>(n.ns=i,r))}function sB(t,e,n){let s=Pe(),i=Pe();return n.forEach(r=>s=s.add(r)),e.getEntries(t,s).next(r=>{let o=ui();return n.forEach((a,c)=>{const l=r.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(me.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:o,ls:i}})}function iB(t,e){const n=Ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function rB(t,e){const n=Ie(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let i;return n.Qr.getTargetData(s,e).next(r=>r?(i=r,B.resolve(i)):n.Qr.allocateTargetId(s).next(o=>(i=new Ui(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Qr.addTargetData(s,i).next(()=>i))))}).then(s=>{const i=n.ns.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(s.targetId,s),n.rs.set(e,s.targetId)),s})}async function Dg(t,e,n){const s=Ie(t),i=s.ns.get(e),r=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",r,o=>s.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Rl(o))throw o;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}s.ns=s.ns.remove(e),s.rs.delete(i.target)}function w0(t,e,n){const s=Ie(t);let i=me.min(),r=Pe();return s.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,u){const h=Ie(c),d=h.rs.get(u);return d!==void 0?B.resolve(h.ns.get(d)):h.Qr.getTargetData(l,u)}(s,o,Ds(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,s.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{r=c})}).next(()=>s.ts.getDocumentsMatchingQuery(o,e,n?i:me.min(),n?r:Pe())).next(a=>(oB(s,XV(e),a),{documents:a,hs:r})))}function oB(t,e,n){let s=t.ss.get(e)||me.min();n.forEach((i,r)=>{r.readTime.compareTo(s)>0&&(s=r.readTime)}),t.ss.set(e,s)}class E0{constructor(){this.activeTargetIds=sF()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aB{constructor(){this.no=new E0,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,s){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new E0,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cB{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fu=null;function up(){return fu===null?fu=function(){return 268435456+Math.round(2147483648*Math.random())}():fu++,"0x"+fu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uB{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt="WebChannelConnection";class hB extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const s=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=s+"://"+n.host,this.po=`projects/${i}/databases/${r}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${r}`}get wo(){return!1}So(n,s,i,r,o){const a=up(),c=this.bo(n,s.toUriEncodedString());q("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);const l={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(l,r,o),this.Co(n,c,l,i).then(u=>(q("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw na("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",c,"request:",i),u})}vo(n,s,i,r,o,a){return this.So(n,s,i,r,o)}Do(n,s,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ba}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((r,o)=>n[o]=r),i&&i.headers.forEach((r,o)=>n[o]=r)}bo(n,s){const i=lB[n];return`${this.fo}/v1/${s}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,s,i){const r=up();return new Promise((o,a)=>{const c=new _V;c.setWithCredentials(!0),c.listenOnce(gV.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case cp.NO_ERROR:const u=c.getResponseJson();q(Zt,`XHR for RPC '${e}' ${r} received:`,JSON.stringify(u)),o(u);break;case cp.TIMEOUT:q(Zt,`RPC '${e}' ${r} timed out`),a(new X(N.DEADLINE_EXCEEDED,"Request time out"));break;case cp.HTTP_ERROR:const h=c.getStatus();if(q(Zt,`RPC '${e}' ${r} failed with status:`,h,"response text:",c.getResponseText()),h>0){let d=c.getResponseJson();Array.isArray(d)&&(d=d[0]);const f=d==null?void 0:d.error;if(f&&f.status&&f.message){const p=function(_){const y=_.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(y)>=0?y:N.UNKNOWN}(f.status);a(new X(p,f.message))}else a(new X(N.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new X(N.UNAVAILABLE,"Connection failed."));break;default:de()}}finally{q(Zt,`RPC '${e}' ${r} completed.`)}});const l=JSON.stringify(i);q(Zt,`RPC '${e}' ${r} sending request:`,i),c.send(n,"POST",l,s,15)})}Fo(e,n,s){const i=up(),r=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=fV(),a=pV(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const u=r.join("");q(Zt,`Creating RPC '${e}' stream ${i}: ${u}`,c);const h=o.createWebChannel(u,c);let d=!1,f=!1;const p=new uB({lo:_=>{f?q(Zt,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(d||(q(Zt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),d=!0),q(Zt,`RPC '${e}' stream ${i} sending:`,_),h.send(_))},ho:()=>h.close()}),m=(_,y,b)=>{_.listen(y,w=>{try{b(w)}catch(T){setTimeout(()=>{throw T},0)}})};return m(h,uu.EventType.OPEN,()=>{f||q(Zt,`RPC '${e}' stream ${i} transport opened.`)}),m(h,uu.EventType.CLOSE,()=>{f||(f=!0,q(Zt,`RPC '${e}' stream ${i} transport closed`),p.Vo())}),m(h,uu.EventType.ERROR,_=>{f||(f=!0,na(Zt,`RPC '${e}' stream ${i} transport errored:`,_),p.Vo(new X(N.UNAVAILABLE,"The operation could not be completed")))}),m(h,uu.EventType.MESSAGE,_=>{var y;if(!f){const b=_.data[0];et(!!b);const w=b,T=w.error||((y=w[0])===null||y===void 0?void 0:y.error);if(T){q(Zt,`RPC '${e}' stream ${i} received error:`,T);const S=T.status;let x=function(P){const $=kt[P];if($!==void 0)return FI($)}(S),R=T.message;x===void 0&&(x=N.INTERNAL,R="Unknown error status: "+S+" with message "+T.message),f=!0,p.Vo(new X(x,R)),h.close()}else q(Zt,`RPC '${e}' stream ${i} received:`,b),p.mo(b)}}),m(a,mV.STAT_EVENT,_=>{_.stat===Jv.PROXY?q(Zt,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===Jv.NOPROXY&&q(Zt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.Ro()},0),p}}function hp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(t){return new EF(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e,n,s=1e3,i=1.5,r=6e4){this.oi=e,this.timerId=n,this.Mo=s,this.xo=i,this.Oo=r,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),s=Math.max(0,Date.now()-this.Lo),i=Math.max(0,n-s);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,n,s,i,r,o,a,c){this.oi=e,this.$o=s,this.Uo=i,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new QI(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(Bs(n.toString()),Bs("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(n)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,i])=>{this.Wo===n&&this.o_(s,i)},s=>{e(()=>{const i=new X(N.UNKNOWN,"Fetching auth token failed: "+s.message);return this.__(i)})})}o_(e,n){const s=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{s(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{s(()=>this.__(i))}),this.stream.onMessage(i=>{s(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dB extends XI{constructor(e,n,s,i,r,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=IF(this.serializer,e),s=function(r){if(!("targetChange"in r))return me.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?me.min():o.readTime?Os(o.readTime):me.min()}(e);return this.listener.u_(n,s)}c_(e){const n={};n.database=Pg(this.serializer),n.addTarget=function(r,o){let a;const c=o.target;if(a=Ig(c)?{documents:CF(r,c)}:{query:AF(r,c).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=$I(r,o.resumeToken);const l=Cg(r,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(me.min())>0){a.readTime=$h(r,o.snapshotVersion.toTimestamp());const l=Cg(r,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);const s=PF(this.serializer,e);s&&(n.labels=s),this.t_(n)}l_(e){const n={};n.database=Pg(this.serializer),n.removeTarget=e,this.t_(n)}}class fB extends XI{constructor(e,n,s,i,r,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=xF(e.writeResults,e.commitTime),s=Os(e.commitTime);return this.listener.T_(s,n)}return et(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=Pg(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>RF(this.serializer,s))};this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pB extends class{}{constructor(e,n,s,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new X(N.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,s,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.So(e,Ag(n,s),i,r,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new X(N.UNKNOWN,r.toString())})}vo(e,n,s,i,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,Ag(n,s),i,o,a,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new X(N.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class gB{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Bs(n),this.g_=!1):q("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mB{constructor(e,n,s,i,r){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=r,this.M_.io(o=>{s.enqueueAndForget(async()=>{mo(this)&&(q("RemoteStore","Restarting streams for network reachability change."),await async function(c){const l=Ie(c);l.v_.add(4),await kl(l),l.x_.set("Unknown"),l.v_.delete(4),await ef(l)}(this))})}),this.x_=new gB(s,i)}}async function ef(t){if(mo(t))for(const e of t.F_)await e(!0)}async function kl(t){for(const e of t.F_)await e(!1)}function JI(t,e){const n=Ie(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),V_(n)?N_(n):wa(n).Jo()&&L_(n,e))}function ZI(t,e){const n=Ie(t),s=wa(n);n.C_.delete(e),s.Jo()&&eR(n,e),n.C_.size===0&&(s.Jo()?s.Xo():mo(n)&&n.x_.set("Unknown"))}function L_(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}wa(t).c_(e)}function eR(t,e){t.O_.Oe(e),wa(t).l_(e)}function N_(t){t.O_=new yF({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),wa(t).start(),t.x_.p_()}function V_(t){return mo(t)&&!wa(t).Ho()&&t.C_.size>0}function mo(t){return Ie(t).v_.size===0}function tR(t){t.O_=void 0}async function _B(t){t.C_.forEach((e,n)=>{L_(t,e)})}async function yB(t,e){tR(t),V_(t)?(t.x_.S_(e),N_(t)):t.x_.set("Unknown")}async function bB(t,e,n){if(t.x_.set("Online"),e instanceof UI&&e.state===2&&e.cause)try{await async function(i,r){const o=r.cause;for(const a of r.targetIds)i.C_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.C_.delete(a),i.O_.removeTarget(a))}(t,e)}catch(s){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Hh(t,s)}else if(e instanceof Ku?t.O_.$e(e):e instanceof BI?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(me.min()))try{const s=await YI(t.localStore);n.compareTo(s)>=0&&await function(r,o){const a=r.O_.it(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){const u=r.C_.get(l);u&&r.C_.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{const u=r.C_.get(c);if(!u)return;r.C_.set(c,u.withResumeToken(hn.EMPTY_BYTE_STRING,u.snapshotVersion)),eR(r,c);const h=new Ui(u.target,c,l,u.sequenceNumber);L_(r,h)}),r.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(s){q("RemoteStore","Failed to raise snapshot:",s),await Hh(t,s)}}async function Hh(t,e,n){if(!Rl(e))throw e;t.v_.add(1),await kl(t),t.x_.set("Offline"),n||(n=()=>YI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await ef(t)})}function nR(t,e){return e().catch(n=>Hh(t,n,e))}async function tf(t){const e=Ie(t),n=ir(e);let s=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;vB(e);)try{const i=await iB(e.localStore,s);if(i===null){e.D_.length===0&&n.Xo();break}s=i.batchId,wB(e,i)}catch(i){await Hh(e,i)}sR(e)&&iR(e)}function vB(t){return mo(t)&&t.D_.length<10}function wB(t,e){t.D_.push(e);const n=ir(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function sR(t){return mo(t)&&!ir(t).Ho()&&t.D_.length>0}function iR(t){ir(t).start()}async function EB(t){ir(t).d_()}async function TB(t){const e=ir(t);for(const n of t.D_)e.I_(n.mutations)}async function SB(t,e,n){const s=t.D_.shift(),i=A_.from(s,e,n);await nR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await tf(t)}async function IB(t,e){e&&ir(t).P_&&await async function(s,i){if(function(o){return gF(o)&&o!==N.ABORTED}(i.code)){const r=s.D_.shift();ir(s).Zo(),await nR(s,()=>s.remoteSyncer.rejectFailedWrite(r.batchId,i)),await tf(s)}}(t,e),sR(t)&&iR(t)}async function S0(t,e){const n=Ie(t);n.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");const s=mo(n);n.v_.add(3),await kl(n),s&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await ef(n)}async function RB(t,e){const n=Ie(t);e?(n.v_.delete(2),await ef(n)):e||(n.v_.add(2),await kl(n),n.x_.set("Unknown"))}function wa(t){return t.N_||(t.N_=function(n,s,i){const r=Ie(n);return r.R_(),new dB(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{Po:_B.bind(null,t),To:yB.bind(null,t),u_:bB.bind(null,t)}),t.F_.push(async e=>{e?(t.N_.Zo(),V_(t)?N_(t):t.x_.set("Unknown")):(await t.N_.stop(),tR(t))})),t.N_}function ir(t){return t.B_||(t.B_=function(n,s,i){const r=Ie(n);return r.R_(),new fB(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{Po:EB.bind(null,t),To:IB.bind(null,t),E_:TB.bind(null,t),T_:SB.bind(null,t)}),t.F_.push(async e=>{e?(t.B_.Zo(),await tf(t)):(await t.B_.stop(),t.D_.length>0&&(q("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))})),t.B_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,n,s,i,r){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=i,this.removalCallback=r,this.deferred=new Ps,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,i,r){const o=Date.now()+s,a=new F_(e,n,o,i,r);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function B_(t,e){if(Bs("AsyncQueue",`${e}: ${t}`),Rl(t))return new X(N.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e){this.comparator=e?(n,s)=>e(n,s)||se.comparator(n.key,s.key):(n,s)=>se.comparator(n.key,s.key),this.keyedMap=Ya(),this.sortedSet=new _t(this.comparator)}static emptySet(e){return new Go(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Go)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(!i.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Go;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(){this.L_=new _t(se.comparator)}track(e){const n=e.doc.key,s=this.L_.get(n);s?e.type!==0&&s.type===3?this.L_=this.L_.insert(n,e):e.type===3&&s.type!==1?this.L_=this.L_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.L_=this.L_.remove(n):e.type===1&&s.type===2?this.L_=this.L_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):de():this.L_=this.L_.insert(n,e)}k_(){const e=[];return this.L_.inorderTraversal((n,s)=>{e.push(s)}),e}}class la{constructor(e,n,s,i,r,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,s,i,r){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new la(e,n,Go.emptySet(n),o,s,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==s[i].type||!n[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xB{constructor(){this.q_=void 0,this.Q_=[]}}class CB{constructor(){this.queries=new va(e=>SI(e),Kd),this.onlineState="Unknown",this.K_=new Set}}async function U_(t,e){const n=Ie(t),s=e.query;let i=!1,r=n.queries.get(s);if(r||(i=!0,r=new xB),i)try{r.q_=await n.onListen(s)}catch(o){const a=B_(o,`Initialization of query '${Do(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,r),r.Q_.push(e),e.U_(n.onlineState),r.q_&&e.W_(r.q_)&&H_(n)}async function $_(t,e){const n=Ie(t),s=e.query;let i=!1;const r=n.queries.get(s);if(r){const o=r.Q_.indexOf(e);o>=0&&(r.Q_.splice(o,1),i=r.Q_.length===0)}if(i)return n.queries.delete(s),n.onUnlisten(s)}function AB(t,e){const n=Ie(t);let s=!1;for(const i of e){const r=i.query,o=n.queries.get(r);if(o){for(const a of o.Q_)a.W_(i)&&(s=!0);o.q_=i}}s&&H_(n)}function kB(t,e,n){const s=Ie(t),i=s.queries.get(e);if(i)for(const r of i.Q_)r.onError(n);s.queries.delete(e)}function H_(t){t.K_.forEach(e=>{e.next()})}class z_{constructor(e,n,s){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=s||{}}W_(e){if(!this.options.includeMetadataChanges){const s=[];for(const i of e.docChanges)i.type!==3&&s.push(i);e=new la(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){if(!e.fromCache)return!0;const s=n!=="Offline";return(!this.options.Z_||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}H_(e){if(e.docChanges.length>0)return!0;const n=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(e){e=la.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e){this.key=e}}class oR{constructor(e){this.key=e}}class PB{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=Pe(),this.mutatedKeys=Pe(),this.ua=II(e),this.ca=new Go(this.ua)}get la(){return this.oa}ha(e,n){const s=n?n.Pa:new I0,i=n?n.ca:this.ca;let r=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{const d=i.get(u),f=Yd(this.query,h)?h:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let _=!1;d&&f?d.data.isEqual(f.data)?p!==m&&(s.track({type:3,doc:f}),_=!0):this.Ia(d,f)||(s.track({type:2,doc:f}),_=!0,(c&&this.ua(f,c)>0||l&&this.ua(f,l)<0)&&(a=!0)):!d&&f?(s.track({type:0,doc:f}),_=!0):d&&!f&&(s.track({type:1,doc:d}),_=!0,(c||l)&&(a=!0)),_&&(f?(o=o.add(f),r=m?r.add(u):r.delete(u)):(o=o.delete(u),r=r.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),r=r.delete(u.key),s.track({type:1,doc:u})}return{ca:o,Pa:s,Xi:a,mutatedKeys:r}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,i){const r=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const o=e.Pa.k_();o.sort((u,h)=>function(f,p){const m=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return de()}};return m(f)-m(p)}(u.type,h.type)||this.ua(u.doc,h.doc)),this.Ta(s),i=i!=null&&i;const a=n&&!i?this.Ea():[],c=this.aa.size===0&&this.current&&!i?1:0,l=c!==this._a;return this._a=c,o.length!==0||l?{snapshot:new la(this.query,e.ca,r,o,e.mutatedKeys,c===0,l,!1,!!s&&s.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new I0,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=Pe(),this.ca.forEach(s=>{this.Aa(s.key)&&(this.aa=this.aa.add(s.key))});const n=[];return e.forEach(s=>{this.aa.has(s)||n.push(new oR(s))}),this.aa.forEach(s=>{e.has(s)||n.push(new rR(s))}),n}Ra(e){this.oa=e.hs,this.aa=Pe();const n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return la.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}}class DB{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class OB{constructor(e){this.key=e,this.ma=!1}}class MB{constructor(e,n,s,i,r,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new va(a=>SI(a),Kd),this.pa=new Map,this.ya=new Set,this.wa=new _t(se.comparator),this.Sa=new Map,this.ba=new D_,this.Da={},this.Ca=new Map,this.va=ca.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}}async function LB(t,e){const n=WB(t);let s,i;const r=n.ga.get(e);if(r)s=r.targetId,n.sharedClientState.addLocalQueryTarget(s),i=r.view.Va();else{const o=await rB(n.localStore,Ds(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);s=o.targetId,i=await NB(n,e,s,a==="current",o.resumeToken),n.isPrimaryClient&&JI(n.remoteStore,o)}return i}async function NB(t,e,n,s,i){t.Ma=(h,d,f)=>async function(m,_,y,b){let w=_.view.ha(y);w.Xi&&(w=await w0(m.localStore,_.query,!1).then(({documents:R})=>_.view.ha(R,w)));const T=b&&b.targetChanges.get(_.targetId),S=b&&b.targetMismatches.get(_.targetId)!=null,x=_.view.applyChanges(w,m.isPrimaryClient,T,S);return x0(m,_.targetId,x.da),x.snapshot}(t,h,d,f);const r=await w0(t.localStore,e,!0),o=new PB(e,r.hs),a=o.ha(r.documents),c=Al.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,c);x0(t,n,l.da);const u=new DB(e,n,o);return t.ga.set(e,u),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),l.snapshot}async function VB(t,e){const n=Ie(t),s=n.ga.get(e),i=n.pa.get(s.targetId);if(i.length>1)return n.pa.set(s.targetId,i.filter(r=>!Kd(r,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Dg(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),ZI(n.remoteStore,s.targetId),Og(n,s.targetId)}).catch(Il)):(Og(n,s.targetId),await Dg(n.localStore,s.targetId,!0))}async function FB(t,e,n){const s=qB(t);try{const i=await function(o,a){const c=Ie(o),l=Ut.now(),u=a.reduce((f,p)=>f.add(p.key),Pe());let h,d;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=ui(),m=Pe();return c.os.getEntries(f,u).next(_=>{p=_,p.forEach((y,b)=>{b.isValidDocument()||(m=m.add(y))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,p)).next(_=>{h=_;const y=[];for(const b of a){const w=uF(b,h.get(b.key).overlayedDocument);w!=null&&y.push(new hr(b.key,w,mI(w.value.mapValue),Wn.exists(!0)))}return c.mutationQueue.addMutationBatch(f,l,y,a)}).next(_=>{d=_;const y=_.applyToLocalDocumentSet(h,m);return c.documentOverlayCache.saveOverlays(f,_.batchId,y)})}).then(()=>({batchId:d.batchId,changes:xI(h)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Da[o.currentUser.toKey()];l||(l=new _t(He)),l=l.insert(a,c),o.Da[o.currentUser.toKey()]=l}(s,i.batchId,n),await Pl(s,i.changes),await tf(s.remoteStore)}catch(i){const r=B_(i,"Failed to persist write");n.reject(r)}}async function aR(t,e){const n=Ie(t);try{const s=await nB(n.localStore,e);e.targetChanges.forEach((i,r)=>{const o=n.Sa.get(r);o&&(et(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ma=!0:i.modifiedDocuments.size>0?et(o.ma):i.removedDocuments.size>0&&(et(o.ma),o.ma=!1))}),await Pl(n,s,e)}catch(s){await Il(s)}}function R0(t,e,n){const s=Ie(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const i=[];s.ga.forEach((r,o)=>{const a=o.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const c=Ie(o);c.onlineState=a;let l=!1;c.queries.forEach((u,h)=>{for(const d of h.Q_)d.U_(a)&&(l=!0)}),l&&H_(c)}(s.eventManager,e),i.length&&s.fa.u_(i),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function BB(t,e,n){const s=Ie(t);s.sharedClientState.updateQueryState(e,"rejected",n);const i=s.Sa.get(e),r=i&&i.key;if(r){let o=new _t(se.comparator);o=o.insert(r,sn.newNoDocument(r,me.min()));const a=Pe().add(r),c=new Jd(me.min(),new Map,new _t(He),o,a);await aR(s,c),s.wa=s.wa.remove(r),s.Sa.delete(e),j_(s)}else await Dg(s.localStore,e,!1).then(()=>Og(s,e,n)).catch(Il)}async function UB(t,e){const n=Ie(t),s=e.batch.batchId;try{const i=await tB(n.localStore,e);lR(n,s,null),cR(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Pl(n,i)}catch(i){await Il(i)}}async function $B(t,e,n){const s=Ie(t);try{const i=await function(o,a){const c=Ie(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(h=>(et(h!==null),u=h.keys(),c.mutationQueue.removeMutationBatch(l,h))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})}(s.localStore,e);lR(s,e,n),cR(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Pl(s,i)}catch(i){await Il(i)}}function cR(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function lR(t,e,n){const s=Ie(t);let i=s.Da[s.currentUser.toKey()];if(i){const r=i.get(e);r&&(n?r.reject(n):r.resolve(),i=i.remove(e)),s.Da[s.currentUser.toKey()]=i}}function Og(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.pa.get(e))t.ga.delete(s),n&&t.fa.xa(s,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach(s=>{t.ba.containsKey(s)||uR(t,s)})}function uR(t,e){t.ya.delete(e.path.canonicalString());const n=t.wa.get(e);n!==null&&(ZI(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),j_(t))}function x0(t,e,n){for(const s of n)s instanceof rR?(t.ba.addReference(s.key,e),HB(t,s)):s instanceof oR?(q("SyncEngine","Document no longer in limbo: "+s.key),t.ba.removeReference(s.key,e),t.ba.containsKey(s.key)||uR(t,s.key)):de()}function HB(t,e){const n=e.key,s=n.path.canonicalString();t.wa.get(n)||t.ya.has(s)||(q("SyncEngine","New document in limbo: "+n),t.ya.add(s),j_(t))}function j_(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){const e=t.ya.values().next().value;t.ya.delete(e);const n=new se(rt.fromString(e)),s=t.va.next();t.Sa.set(s,new OB(n)),t.wa=t.wa.insert(n,s),JI(t.remoteStore,new Ui(Ds(Gd(n.path)),s,"TargetPurposeLimboResolution",E_._e))}}async function Pl(t,e,n){const s=Ie(t),i=[],r=[],o=[];s.ga.isEmpty()||(s.ga.forEach((a,c)=>{o.push(s.Ma(c,e,n).then(l=>{if((l||n)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(c.targetId,l!=null&&l.fromCache?"not-current":"current"),l){i.push(l);const u=M_.Ki(c.targetId,l);r.push(u)}}))}),await Promise.all(o),s.fa.u_(i),await async function(c,l){const u=Ie(c);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>B.forEach(l,d=>B.forEach(d.qi,f=>u.persistence.referenceDelegate.addReference(h,d.targetId,f)).next(()=>B.forEach(d.Qi,f=>u.persistence.referenceDelegate.removeReference(h,d.targetId,f)))))}catch(h){if(!Rl(h))throw h;q("LocalStore","Failed to update sequence numbers: "+h)}for(const h of l){const d=h.targetId;if(!h.fromCache){const f=u.ns.get(d),p=f.snapshotVersion,m=f.withLastLimboFreeSnapshotVersion(p);u.ns=u.ns.insert(d,m)}}}(s.localStore,r))}async function zB(t,e){const n=Ie(t);if(!n.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());const s=await KI(n.localStore,e);n.currentUser=e,function(r,o){r.Ca.forEach(a=>{a.forEach(c=>{c.reject(new X(N.CANCELLED,o))})}),r.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Pl(n,s.us)}}function jB(t,e){const n=Ie(t),s=n.Sa.get(e);if(s&&s.ma)return Pe().add(s.key);{let i=Pe();const r=n.pa.get(e);if(!r)return i;for(const o of r){const a=n.ga.get(o);i=i.unionWith(a.view.la)}return i}}function WB(t){const e=Ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=aR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BB.bind(null,e),e.fa.u_=AB.bind(null,e.eventManager),e.fa.xa=kB.bind(null,e.eventManager),e}function qB(t){const e=Ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=UB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$B.bind(null,e),e}class C0{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Zd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return eB(this.persistence,new JF,e.initialUser,this.serializer)}createPersistence(e){return new YF(O_.Hr,this.serializer)}createSharedClientState(e){return new aB}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class GB{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>R0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=zB.bind(null,this.syncEngine),await RB(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new CB}()}createDatastore(e){const n=Zd(e.databaseInfo.databaseId),s=function(r){return new hB(r)}(e.databaseInfo);return function(r,o,a,c){return new pB(r,o,a,c)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,i,r,o,a){return new mB(s,i,r,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>R0(this.syncEngine,n,0),function(){return T0.D()?new T0:new cB}())}createSyncEngine(e,n){return function(i,r,o,a,c,l,u){const h=new MB(i,r,o,a,c,l);return u&&(h.Fa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(s){const i=Ie(s);q("RemoteStore","RemoteStore shutting down."),i.v_.add(5),await kl(i),i.M_.shutdown(),i.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Bs("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KB{constructor(e,n,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=i,this.user=nn.UNAUTHENTICATED,this.clientId=fI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,async r=>{q("FirestoreClient","Received user=",r.uid),await this.authCredentialListener(r),this.user=r}),this.appCheckCredentials.start(s,r=>(q("FirestoreClient","Received new app check token=",r),this.appCheckCredentialListener(r,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new X(N.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ps;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=B_(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function dp(t,e){t.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async i=>{s.isEqual(i)||(await KI(e.localStore,i),s=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function A0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await QB(t);q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>S0(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>S0(e.remoteStore,i)),t._onlineComponents=e}function YB(t){return t.name==="FirebaseError"?t.code===N.FAILED_PRECONDITION||t.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function QB(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{await dp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!YB(n))throw n;na("Error using user provided cache. Falling back to memory cache: "+n),await dp(t,new C0)}}else q("FirestoreClient","Using default OfflineComponentProvider"),await dp(t,new C0);return t._offlineComponents}async function hR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),await A0(t,t._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),await A0(t,new GB))),t._onlineComponents}function XB(t){return hR(t).then(e=>e.syncEngine)}async function zh(t){const e=await hR(t),n=e.eventManager;return n.onListen=LB.bind(null,e.syncEngine),n.onUnlisten=VB.bind(null,e.syncEngine),n}function JB(t,e,n={}){const s=new Ps;return t.asyncQueue.enqueueAndForget(async()=>function(r,o,a,c,l){const u=new W_({next:d=>{o.enqueueAndForget(()=>$_(r,h));const f=d.docs.has(a);!f&&d.fromCache?l.reject(new X(N.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&d.fromCache&&c&&c.source==="server"?l.reject(new X(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),h=new z_(Gd(a.path),u,{includeMetadataChanges:!0,Z_:!0});return U_(r,h)}(await zh(t),t.asyncQueue,e,n,s)),s.promise}function ZB(t,e,n={}){const s=new Ps;return t.asyncQueue.enqueueAndForget(async()=>function(r,o,a,c,l){const u=new W_({next:d=>{o.enqueueAndForget(()=>$_(r,h)),d.fromCache&&c.source==="server"?l.reject(new X(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),h=new z_(a,u,{includeMetadataChanges:!0,Z_:!0});return U_(r,h)}(await zh(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(t,e,n){if(!n)throw new X(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function eU(t,e,n,s){if(e===!0&&s===!0)throw new X(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function P0(t){if(!se.isDocumentKey(t))throw new X(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function D0(t){if(se.isDocumentKey(t))throw new X(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function nf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":de()}function Sn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=nf(t);throw new X(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new X(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new X(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dR((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new X(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new X(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new X(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,i){return s.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sf{constructor(e,n,s,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new O0({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new X(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new X(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new O0(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new bV;switch(s.type){case"firstParty":return new TV(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new X(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=k0.get(n);s&&(q("ComponentProvider","Removing Datastore"),k0.delete(n),s.terminate())}(this),Promise.resolve()}}function tU(t,e,n,s={}){var i;const r=(t=Sn(t,sf))._getSettings(),o=`${e}:${n}`;if(r.host!=="firestore.googleapis.com"&&r.host!==o&&na("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},r),{host:o,ssl:!1})),s.mockUserToken){let a,c;if(typeof s.mockUserToken=="string")a=s.mockUserToken,c=nn.MOCK_USER;else{a=S1(s.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const l=s.mockUserToken.sub||s.mockUserToken.user_id;if(!l)throw new X(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new nn(l)}t._authCredentials=new vV(new dI(a,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new _o(this.firestore,e,this._query)}}class un{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new un(this.firestore,e,this._key)}}class Yi extends _o{constructor(e,n,s){super(e,n,Gd(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new un(this.firestore,null,new se(e))}withConverter(e){return new Yi(this.firestore,e,this._path)}}function Ms(t,e,...n){if(t=lt(t),fR("collection","path",e),t instanceof sf){const s=rt.fromString(e,...n);return D0(s),new Yi(t,null,s)}{if(!(t instanceof un||t instanceof Yi))throw new X(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(rt.fromString(e,...n));return D0(s),new Yi(t.firestore,null,s)}}function Ce(t,e,...n){if(t=lt(t),arguments.length===1&&(e=fI.newId()),fR("doc","path",e),t instanceof sf){const s=rt.fromString(e,...n);return P0(s),new un(t,null,new se(s))}{if(!(t instanceof un||t instanceof Yi))throw new X(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(rt.fromString(e,...n));return P0(s),new un(t.firestore,t instanceof Yi?t.converter:null,new se(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new QI(this,"async_queue_retry"),this._u=()=>{const n=hp();n&&q("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=hp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const n=hp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const n=new Ps;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}async cu(){if(this.eu.length!==0){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!Rl(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}}uu(e){const n=this.Xa.then(()=>(this.iu=!0,e().catch(s=>{this.ru=s,this.iu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(s);throw Bs("INTERNAL UNHANDLED ERROR: ",i),s}).then(s=>(this.iu=!1,s))));return this.Xa=n,n}enqueueAfterDelay(e,n,s){this.au(),this.ou.indexOf(e)>-1&&(n=0);const i=F_.createAndSchedule(this,e,n,s,r=>this.lu(r));return this.nu.push(i),i}au(){this.ru&&de()}verifyOperationInProgress(){}async hu(){let e;do e=this.Xa,await e;while(e!==this.Xa)}Pu(e){for(const n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.nu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const n=this.nu.indexOf(e);this.nu.splice(n,1)}}function M0(t){return function(n,s){if(typeof n!="object"||n===null)return!1;const i=n;for(const r of s)if(r in i&&typeof i[r]=="function")return!0;return!1}(t,["next","error","complete"])}class hi extends sf{constructor(e,n,s,i){super(e,n,s,i),this.type="firestore",this._queue=function(){return new nU}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||pR(this),this._firestoreClient.terminate()}}function ua(t,e){const n=typeof t=="object"?t:$m(),s=typeof t=="string"?t:e||"(default)",i=Id(n,"firestore").getImmediate({identifier:s});if(!i._initialized){const r=w1("firestore");r&&tU(i,...r)}return i}function rf(t){return t._firestoreClient||pR(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function pR(t){var e,n,s;const i=t._freezeSettings(),r=function(a,c,l,u){return new VV(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,dR(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new KB(t._authCredentials,t._appCheckCredentials,t._queue,r),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=i.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ha(hn.fromBase64String(e))}catch(n){throw new X(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ha(hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sU=/^__.*__$/;class iU{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new hr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Cl(e,this.data,n,this.fieldTransforms)}}class gR{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new hr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function mR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw de()}}class af{constructor(e,n,s,i,r,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=i,r===void 0&&this.Eu(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new af(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:s,Vu:!1});return i.mu(e),i}fu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:s,Vu:!1});return i.Eu(),i}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return jh(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(e.length===0)throw this.pu("Document fields must not be empty");if(mR(this.du)&&sU.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class rU{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Zd(e)}Su(e,n,s,i=!1){return new af({du:e,methodName:n,wu:s,path:Qt.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cf(t){const e=t._freezeSettings(),n=Zd(t._databaseId);return new rU(t._databaseId,!!e.ignoreUndefinedProperties,n)}function _R(t,e,n,s,i,r={}){const o=t.Su(r.merge||r.mergeFields?2:0,e,n,i);Y_("Data must be an object, but it was:",o,s);const a=bR(s,o);let c,l;if(r.merge)c=new Ln(o.fieldMask),l=o.fieldTransforms;else if(r.mergeFields){const u=[];for(const h of r.mergeFields){const d=Mg(e,h,n);if(!o.contains(d))throw new X(N.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);wR(u,d)||u.push(d)}c=new Ln(u),l=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,l=o.fieldTransforms;return new iU(new En(a),c,l)}class lf extends Dl{_toFieldTransform(e){if(e.du!==2)throw e.du===1?e.pu(`${this._methodName}() can only appear at the top level of your update data`):e.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lf}}function yR(t,e,n){return new af({du:3,wu:e.settings.wu,methodName:t._methodName,Vu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class G_ extends Dl{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){const n=yR(this,e,!0),s=this.bu.map(r=>yo(r,n)),i=new oa(s);return new LI(e.path,i)}isEqual(e){return e instanceof G_&&Zo(this.bu,e.bu)}}class K_ extends Dl{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){const n=yR(this,e,!0),s=this.bu.map(r=>yo(r,n)),i=new aa(s);return new LI(e.path,i)}isEqual(e){return e instanceof K_&&Zo(this.bu,e.bu)}}function oU(t,e,n,s){const i=t.Su(1,e,n);Y_("Data must be an object, but it was:",i,s);const r=[],o=En.empty();go(s,(c,l)=>{const u=Q_(e,c,n);l=lt(l);const h=i.fu(u);if(l instanceof lf)r.push(u);else{const d=yo(l,h);d!=null&&(r.push(u),o.set(u,d))}});const a=new Ln(r);return new gR(o,a,i.fieldTransforms)}function aU(t,e,n,s,i,r){const o=t.Su(1,e,n),a=[Mg(e,s,n)],c=[i];if(r.length%2!=0)throw new X(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<r.length;d+=2)a.push(Mg(e,r[d])),c.push(r[d+1]);const l=[],u=En.empty();for(let d=a.length-1;d>=0;--d)if(!wR(l,a[d])){const f=a[d];let p=c[d];p=lt(p);const m=o.fu(f);if(p instanceof lf)l.push(f);else{const _=yo(p,m);_!=null&&(l.push(f),u.set(f,_))}}const h=new Ln(l);return new gR(u,h,o.fieldTransforms)}function cU(t,e,n,s=!1){return yo(n,t.Su(s?4:3,e))}function yo(t,e){if(vR(t=lt(t)))return Y_("Unsupported field value:",e,t),bR(t,e);if(t instanceof Dl)return function(s,i){if(!mR(i.du))throw i.pu(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.pu(`${s._methodName}() is not currently supported inside arrays`);const r=s._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&e.du!==4)throw e.pu("Nested arrays are not supported");return function(s,i){const r=[];let o=0;for(const a of s){let c=yo(a,i.gu(o));c==null&&(c={nullValue:"NULL_VALUE"}),r.push(c),o++}return{arrayValue:{values:r}}}(t,e)}return function(s,i){if((s=lt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return iF(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const r=Ut.fromDate(s);return{timestampValue:$h(i.serializer,r)}}if(s instanceof Ut){const r=new Ut(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:$h(i.serializer,r)}}if(s instanceof q_)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ha)return{bytesValue:$I(i.serializer,s._byteString)};if(s instanceof un){const r=i.databaseId,o=s.firestore._databaseId;if(!o.isEqual(r))throw i.pu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:P_(s.firestore._databaseId||i.databaseId,s._key.path)}}throw i.pu(`Unsupported field value: ${nf(s)}`)}(t,e)}function bR(t,e){const n={};return pI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):go(t,(s,i)=>{const r=yo(i,e.Ru(s));r!=null&&(n[s]=r)}),{mapValue:{fields:n}}}function vR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ut||t instanceof q_||t instanceof ha||t instanceof un||t instanceof Dl)}function Y_(t,e,n){if(!vR(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const s=nf(n);throw s==="an object"?e.pu(t+" a custom object"):e.pu(t+" "+s)}}function Mg(t,e,n){if((e=lt(e))instanceof of)return e._internalPath;if(typeof e=="string")return Q_(t,e);throw jh("Field path arguments must be of type string or ",t,!1,void 0,n)}const lU=new RegExp("[~\\*/\\[\\]]");function Q_(t,e,n){if(e.search(lU)>=0)throw jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new of(...e.split("."))._internalPath}catch{throw jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function jh(t,e,n,s,i){const r=s&&!s.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(r||o)&&(c+=" (found",r&&(c+=` in field ${s}`),o&&(c+=` in document ${i}`),c+=")"),new X(N.INVALID_ARGUMENT,a+t+c)}function wR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,n,s,i,r){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new un(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(X_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class uU extends ER{data(){return super.data()}}function X_(t,e){return typeof e=="string"?Q_(t,e):e instanceof of?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new X(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class J_{}class hU extends J_{}function SR(t,e,...n){let s=[];e instanceof J_&&s.push(e),s=s.concat(n),function(r){const o=r.filter(c=>c instanceof Z_).length,a=r.filter(c=>c instanceof uf).length;if(o>1||o>0&&a>0)throw new X(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const i of s)t=i._apply(t);return t}class uf extends hU{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new uf(e,n,s)}_apply(e){const n=this._parse(e);return RR(e._query,n),new _o(e.firestore,e.converter,Rg(e._query,n))}_parse(e){const n=cf(e.firestore);return function(r,o,a,c,l,u,h){let d;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new X(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){N0(h,u);const f=[];for(const p of h)f.push(L0(c,r,p));d={arrayValue:{values:f}}}else d=L0(c,r,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||N0(h,u),d=cU(a,o,h,u==="in"||u==="not-in");return Dt.create(l,u,d)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function IR(t,e,n){const s=e,i=X_("where",t);return uf._create(i,s,n)}class Z_ extends J_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Z_(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:ls.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,r){let o=i;const a=r.getFlattenedFilters();for(const c of a)RR(o,c),o=Rg(o,c)}(e._query,n),new _o(e.firestore,e.converter,Rg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function L0(t,e,n){if(typeof(n=lt(n))=="string"){if(n==="")throw new X(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!TI(e)&&n.indexOf("/")!==-1)throw new X(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(rt.fromString(n));if(!se.isDocumentKey(s))throw new X(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return i0(t,new se(s))}if(n instanceof un)return i0(t,n._key);throw new X(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nf(n)}.`)}function N0(t,e){if(!Array.isArray(t)||t.length===0)throw new X(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function RR(t,e){const n=function(i,r){for(const o of i)for(const a of o.getFlattenedFilters())if(r.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new X(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new X(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class dU{convertValue(e,n="none"){switch(so(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(no(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw de()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return go(e,(i,r)=>{s[i]=this.convertValue(r,n)}),s}convertGeoPoint(e){return new q_(Pt(e.latitude),Pt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=S_(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Gc(e));default:return null}}convertTimestamp(e){const n=sr(e);return new Ut(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=rt.fromString(e);et(GI(s));const i=new Kc(s.get(1),s.get(3)),r=new se(s.popFirst(5));return i.isEqual(n)||Bs(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class CR extends ER{constructor(e,n,s,i,r,o){super(e,n,s,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Yu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(X_("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Yu extends CR{data(e={}){return super.data(e)}}class AR{constructor(e,n,s,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Xa(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Yu(this._firestore,this._userDataWriter,s.key,s,new Xa(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const c=new Yu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Xa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>r||a.type!==3).map(a=>{const c=new Yu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Xa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:fU(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function fU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return de()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(t){t=Sn(t,un);const e=Sn(t.firestore,hi);return JB(rf(e),t._key).then(n=>kR(e,t,n))}class ey extends dU{constructor(e){super(),this.firestore=e}convertBytes(e){return new ha(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new un(this.firestore,null,n)}}function Wr(t){t=Sn(t,_o);const e=Sn(t.firestore,hi),n=rf(e),s=new ey(e);return TR(t._query),ZB(n,t._query).then(i=>new AR(e,s,t,i))}function Vr(t,e,n){t=Sn(t,un);const s=Sn(t.firestore,hi),i=xR(t.converter,e,n);return hf(s,[_R(cf(s),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Wn.none())])}function In(t,e,n,...s){t=Sn(t,un);const i=Sn(t.firestore,hi),r=cf(i);let o;return o=typeof(e=lt(e))=="string"||e instanceof of?aU(r,"updateDoc",t._key,e,n,s):oU(r,"updateDoc",t._key,e),hf(i,[o.toMutation(t._key,Wn.exists(!0))])}function pU(t){return hf(Sn(t.firestore,hi),[new C_(t._key,Wn.none())])}function gU(t,e){const n=Sn(t.firestore,hi),s=Ce(t),i=xR(t.converter,e);return hf(n,[_R(cf(t.firestore),"addDoc",s._key,i,t.converter!==null,{}).toMutation(s._key,Wn.exists(!1))]).then(()=>s)}function mU(t,...e){var n,s,i;t=lt(t);let r={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||M0(e[o])||(r=e[o],o++);const a={includeMetadataChanges:r.includeMetadataChanges};if(M0(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(s=h.error)===null||s===void 0?void 0:s.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let c,l,u;if(t instanceof un)l=Sn(t.firestore,hi),u=Gd(t._key.path),c={next:h=>{e[o]&&e[o](kR(l,t,h))},error:e[o+1],complete:e[o+2]};else{const h=Sn(t,_o);l=Sn(h.firestore,hi),u=h._query;const d=new ey(l);c={next:f=>{e[o]&&e[o](new AR(l,d,h,f))},error:e[o+1],complete:e[o+2]},TR(t._query)}return function(d,f,p,m){const _=new W_(m),y=new z_(f,_,p);return d.asyncQueue.enqueueAndForget(async()=>U_(await zh(d),y)),()=>{_.La(),d.asyncQueue.enqueueAndForget(async()=>$_(await zh(d),y))}}(rf(l),u,a,c)}function hf(t,e){return function(s,i){const r=new Ps;return s.asyncQueue.enqueueAndForget(async()=>FB(await XB(s),i,r)),r.promise}(rf(t),e)}function kR(t,e,n){const s=n.docs.get(e._key),i=new ey(t);return new CR(t,i,e._key,s,new Xa(n.hasPendingWrites,n.fromCache),e.converter)}function Qc(...t){return new G_("arrayUnion",t)}function Qu(...t){return new K_("arrayRemove",t)}(function(e,n=!0){(function(i){ba=i})(uo),Jr(new tr("firestore",(s,{instanceIdentifier:i,options:r})=>{const o=s.getProvider("app").getImmediate(),a=new hi(new wV(s.getProvider("auth-internal")),new IV(s.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new X(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kc(l.options.projectId,u)}(o,i),o);return r=Object.assign({useFetchStreams:n},r),a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),Cs(Zv,"4.4.3",e),Cs(Zv,"4.4.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR="firebasestorage.googleapis.com",DR="storageBucket",_U=2*60*1e3,yU=10*60*1e3,bU=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt extends Hs{constructor(e,n,s=0){super(fp(e),`Firebase Storage: ${n} (${fp(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,yt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return fp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ut;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ut||(ut={}));function fp(t){return"storage/"+t}function ty(){const t="An unknown error occurred, please check the error payload for server response.";return new yt(ut.UNKNOWN,t)}function vU(t){return new yt(ut.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function wU(t){return new yt(ut.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function EU(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new yt(ut.UNAUTHENTICATED,t)}function TU(){return new yt(ut.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function SU(t){return new yt(ut.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function OR(){return new yt(ut.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function MR(){return new yt(ut.CANCELED,"User canceled the upload/download.")}function IU(t){return new yt(ut.INVALID_URL,"Invalid URL '"+t+"'.")}function RU(t){return new yt(ut.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function xU(){return new yt(ut.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+DR+"' property when initializing the app?")}function LR(){return new yt(ut.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function CU(){return new yt(ut.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function AU(){return new yt(ut.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function kU(t){return new yt(ut.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Lg(t){return new yt(ut.INVALID_ARGUMENT,t)}function NR(){return new yt(ut.APP_DELETED,"The Firebase app was deleted.")}function PU(t){return new yt(ut.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function yc(t,e){return new yt(ut.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ma(t){throw new yt(ut.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=Nn.makeFromUrl(e,n)}catch{return new Nn(e,"")}if(s.path==="")return s;throw RU(e)}static makeFromUrl(e,n){let s=null;const i="([A-Za-z0-9.\\-_]+)";function r(T){T.path.charAt(T.path.length-1)==="/"&&(T.path_=T.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function l(T){T.path_=decodeURIComponent(T.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${u}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===PR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,_="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${_}`,"i"),w=[{regex:a,indices:c,postModify:r},{regex:f,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let T=0;T<w.length;T++){const S=w[T],x=S.regex.exec(e);if(x){const R=x[S.indices.bucket];let I=x[S.indices.path];I||(I=""),s=new Nn(R,I),S.postModify(s);break}}if(s==null)throw IU(e);return s}}class DU{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OU(t,e,n){let s=1,i=null,r=null,o=!1,a=0;function c(){return a===2}let l=!1;function u(..._){l||(l=!0,e.apply(null,_))}function h(_){i=setTimeout(()=>{i=null,t(f,c())},_)}function d(){r&&clearTimeout(r)}function f(_,...y){if(l){d();return}if(_){d(),u.call(null,_,...y);return}if(c()||o){d(),u.call(null,_,...y);return}s<64&&(s*=2);let w;a===1?(a=2,w=0):w=(s+Math.random())*1e3,h(w)}let p=!1;function m(_){p||(p=!0,d(),!l&&(i!==null?(_||(a=2),clearTimeout(i),h(0)):_||(a=1)))}return h(0),r=setTimeout(()=>{o=!0,m(!0)},n),m}function MU(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LU(t){return t!==void 0}function NU(t){return typeof t=="function"}function VU(t){return typeof t=="object"&&!Array.isArray(t)}function df(t){return typeof t=="string"||t instanceof String}function V0(t){return ny()&&t instanceof Blob}function ny(){return typeof Blob<"u"}function F0(t,e,n,s){if(s<e)throw Lg(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw Lg(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(t,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${t}`}function VR(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const i=e(s)+"="+e(t[s]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qr;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(qr||(qr={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,r=e.indexOf(t)!==-1;return n||i||r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(e,n,s,i,r,o,a,c,l,u,h,d=!0){this.url_=e,this.method_=n,this.headers_=s,this.body_=i,this.successCodes_=r,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=u,this.connectionFactory_=h,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,p)=>{this.resolve_=f,this.reject_=p,this.start_()})}start_(){const e=(s,i)=>{if(i){s(!1,new pu(!1,null,!0));return}const r=this.connectionFactory_();this.pendingConnection_=r;const o=a=>{const c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&r.addUploadProgressListener(o),r.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&r.removeUploadProgressListener(o),this.pendingConnection_=null;const a=r.getErrorCode()===qr.NO_ERROR,c=r.getStatus();if(!a||FR(c,this.additionalRetryCodes_)&&this.retry){const u=r.getErrorCode()===qr.ABORT;s(!1,new pu(!1,null,u));return}const l=this.successCodes_.indexOf(c)!==-1;s(!0,new pu(l,r))})},n=(s,i)=>{const r=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());LU(c)?r(c):r()}catch(c){o(c)}else if(a!==null){const c=ty();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){const c=this.appDelete_?NR():MR();o(c)}else{const c=OR();o(c)}};this.canceled_?n(!1,new pu(!1,null,!0)):this.backoffId_=OU(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&MU(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class pu{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function BU(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function UU(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function $U(t,e){e&&(t["X-Firebase-GMPID"]=e)}function HU(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function zU(t,e,n,s,i,r,o=!0){const a=VR(t.urlParams),c=t.url+a,l=Object.assign({},t.headers);return $U(l,e),BU(l,n),UU(l,r),HU(l,s),new FU(c,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jU(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function WU(...t){const e=jU();if(e!==void 0){const n=new e;for(let s=0;s<t.length;s++)n.append(t[s]);return n.getBlob()}else{if(ny())return new Blob(t);throw new yt(ut.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function qU(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GU(t){if(typeof atob>"u")throw kU("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class pp{constructor(e,n){this.data=e,this.contentType=n||null}}function KU(t,e){switch(t){case Ss.RAW:return new pp(BR(e));case Ss.BASE64:case Ss.BASE64URL:return new pp(UR(t,e));case Ss.DATA_URL:return new pp(QU(e),XU(e))}throw ty()}function BR(t){const e=[];for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const r=s,o=t.charCodeAt(++n);s=65536|(r&1023)<<10|o&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function YU(t){let e;try{e=decodeURIComponent(t)}catch{throw yc(Ss.DATA_URL,"Malformed data URL.")}return BR(e)}function UR(t,e){switch(t){case Ss.BASE64:{const i=e.indexOf("-")!==-1,r=e.indexOf("_")!==-1;if(i||r)throw yc(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ss.BASE64URL:{const i=e.indexOf("+")!==-1,r=e.indexOf("/")!==-1;if(i||r)throw yc(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=GU(e)}catch(i){throw i.message.includes("polyfill")?i:yc(t,"Invalid character found")}const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s}class $R{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw yc(Ss.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=JU(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function QU(t){const e=new $R(t);return e.base64?UR(Ss.BASE64,e.rest):YU(e.rest)}function XU(t){return new $R(t).contentType}function JU(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,n){let s=0,i="";V0(e)?(this.data_=e,s=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(V0(this.data_)){const s=this.data_,i=qU(s,e,n);return i===null?null:new Bi(i)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new Bi(s,!0)}}static getBlob(...e){if(ny()){const n=e.map(s=>s instanceof Bi?s.data_:s);return new Bi(WU.apply(null,n))}else{const n=e.map(o=>df(o)?KU(Ss.RAW,o).data:o.data_);let s=0;n.forEach(o=>{s+=o.byteLength});const i=new Uint8Array(s);let r=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[r++]=o[a]}),new Bi(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(t){let e;try{e=JSON.parse(t)}catch{return null}return VU(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZU(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function e$(t,e){const n=e.split("/").filter(s=>s.length>0).join("/");return t.length===0?n:t+"/"+n}function zR(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t$(t,e){return e}class gn{constructor(e,n,s,i){this.server=e,this.local=n||e,this.writable=!!s,this.xform=i||t$}}let gu=null;function n$(t){return!df(t)||t.length<2?t:zR(t)}function jR(){if(gu)return gu;const t=[];t.push(new gn("bucket")),t.push(new gn("generation")),t.push(new gn("metageneration")),t.push(new gn("name","fullPath",!0));function e(r,o){return n$(o)}const n=new gn("name");n.xform=e,t.push(n);function s(r,o){return o!==void 0?Number(o):o}const i=new gn("size");return i.xform=s,t.push(i),t.push(new gn("timeCreated")),t.push(new gn("updated")),t.push(new gn("md5Hash",null,!0)),t.push(new gn("cacheControl",null,!0)),t.push(new gn("contentDisposition",null,!0)),t.push(new gn("contentEncoding",null,!0)),t.push(new gn("contentLanguage",null,!0)),t.push(new gn("contentType",null,!0)),t.push(new gn("metadata","customMetadata",!0)),gu=t,gu}function s$(t,e){function n(){const s=t.bucket,i=t.fullPath,r=new Nn(s,i);return e._makeStorageReference(r)}Object.defineProperty(t,"ref",{get:n})}function i$(t,e,n){const s={};s.type="file";const i=n.length;for(let r=0;r<i;r++){const o=n[r];s[o.local]=o.xform(s,e[o.server])}return s$(s,t),s}function WR(t,e,n){const s=HR(e);return s===null?null:i$(t,s,n)}function r$(t,e,n,s){const i=HR(e);if(i===null||!df(i.downloadTokens))return null;const r=i.downloadTokens;if(r.length===0)return null;const o=encodeURIComponent;return r.split(",").map(l=>{const u=t.bucket,h=t.fullPath,d="/b/"+o(u)+"/o/"+o(h),f=Ol(d,n,s),p=VR({alt:"media",token:l});return f+p})[0]}function qR(t,e){const n={},s=e.length;for(let i=0;i<s;i++){const r=e[i];r.writable&&(n[r.server]=t[r.local])}return JSON.stringify(n)}class Ea{constructor(e,n,s,i){this.url=e,this.method=n,this.handler=s,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(t){if(!t)throw ty()}function sy(t,e){function n(s,i){const r=WR(t,i,e);return ri(r!==null),r}return n}function o$(t,e){function n(s,i){const r=WR(t,i,e);return ri(r!==null),r$(r,i,t.host,t._protocol)}return n}function Ml(t){function e(n,s){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=TU():i=EU():n.getStatus()===402?i=wU(t.bucket):n.getStatus()===403?i=SU(t.path):i=s,i.status=n.getStatus(),i.serverResponse=s.serverResponse,i}return e}function GR(t){const e=Ml(t);function n(s,i){let r=e(s,i);return s.getStatus()===404&&(r=vU(t.path)),r.serverResponse=i.serverResponse,r}return n}function a$(t,e,n){const s=e.fullServerUrl(),i=Ol(s,t.host,t._protocol),r="GET",o=t.maxOperationRetryTime,a=new Ea(i,r,sy(t,n),o);return a.errorHandler=GR(e),a}function c$(t,e,n){const s=e.fullServerUrl(),i=Ol(s,t.host,t._protocol),r="GET",o=t.maxOperationRetryTime,a=new Ea(i,r,o$(t,n),o);return a.errorHandler=GR(e),a}function l$(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function KR(t,e,n){const s=Object.assign({},n);return s.fullPath=t.path,s.size=e.size(),s.contentType||(s.contentType=l$(null,e)),s}function u$(t,e,n,s,i){const r=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let T=0;T<2;T++)w=w+Math.random().toString().slice(2);return w}const c=a();o["Content-Type"]="multipart/related; boundary="+c;const l=KR(e,s,i),u=qR(l,n),h="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+c+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+c+"--",f=Bi.getBlob(h,s,d);if(f===null)throw LR();const p={name:l.fullPath},m=Ol(r,t.host,t._protocol),_="POST",y=t.maxUploadRetryTime,b=new Ea(m,_,sy(t,n),y);return b.urlParams=p,b.headers=o,b.body=f.uploadData(),b.errorHandler=Ml(e),b}class Wh{constructor(e,n,s,i){this.current=e,this.total=n,this.finalized=!!s,this.metadata=i||null}}function iy(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{ri(!1)}return ri(!!n&&(e||["active"]).indexOf(n)!==-1),n}function h$(t,e,n,s,i){const r=e.bucketOnlyServerUrl(),o=KR(e,s,i),a={name:o.fullPath},c=Ol(r,t.host,t._protocol),l="POST",u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${s.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=qR(o,n),d=t.maxUploadRetryTime;function f(m){iy(m);let _;try{_=m.getResponseHeader("X-Goog-Upload-URL")}catch{ri(!1)}return ri(df(_)),_}const p=new Ea(c,l,f,d);return p.urlParams=a,p.headers=u,p.body=h,p.errorHandler=Ml(e),p}function d$(t,e,n,s){const i={"X-Goog-Upload-Command":"query"};function r(l){const u=iy(l,["active","final"]);let h=null;try{h=l.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ri(!1)}h||ri(!1);const d=Number(h);return ri(!isNaN(d)),new Wh(d,s.size(),u==="final")}const o="POST",a=t.maxUploadRetryTime,c=new Ea(n,o,r,a);return c.headers=i,c.errorHandler=Ml(e),c}const B0=256*1024;function f$(t,e,n,s,i,r,o,a){const c=new Wh(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=s.size()),s.size()!==c.total)throw CU();const l=c.total-c.current;let u=l;i>0&&(u=Math.min(u,i));const h=c.current,d=h+u;let f="";u===0?f="finalize":l===u?f="upload, finalize":f="upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":`${c.current}`},m=s.slice(h,d);if(m===null)throw LR();function _(T,S){const x=iy(T,["active","final"]),R=c.current+u,I=s.size();let P;return x==="final"?P=sy(e,r)(T,S):P=null,new Wh(R,I,x==="final",P)}const y="POST",b=e.maxUploadRetryTime,w=new Ea(n,y,_,b);return w.headers=p,w.body=m.uploadData(),w.progressCallback=a||null,w.errorHandler=Ml(t),w}const wn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function gp(t){switch(t){case"running":case"pausing":case"canceling":return wn.RUNNING;case"paused":return wn.PAUSED;case"success":return wn.SUCCESS;case"canceled":return wn.CANCELED;case"error":return wn.ERROR;default:return wn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p${constructor(e,n,s){if(NU(e)||n!=null||s!=null)this.next=e,this.error=n??void 0,this.complete=s??void 0;else{const r=e;this.next=r.next,this.error=r.error,this.complete=r.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Io(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class g${constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=qr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=qr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=qr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,i){if(this.sent_)throw Ma("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const r in i)i.hasOwnProperty(r)&&this.xhr_.setRequestHeader(r,i[r].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ma("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ma("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ma("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ma("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class m$ extends g${initXhr(){this.xhr_.responseType="text"}}function Lo(){return new m$}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _${constructor(e,n,s=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=s,this._mappings=jR(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(ut.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const r=this.isExponentialBackoffExpired();if(FR(i.status,[]))if(r)i=OR();else{this.sleepTime=Math.max(this.sleepTime*2,bU),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(ut.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,r)=>{this._resolve=i,this._reject=r,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,s])=>{switch(this._state){case"running":e(n,s);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const s=h$(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(s,Lo,e,n);this._request=i,i.getPromise().then(r=>{this._request=void 0,this._uploadUrl=r,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,s)=>{const i=d$(this._ref.storage,this._ref._location,e,this._blob),r=this._ref.storage._makeRequest(i,Lo,n,s);this._request=r,r.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=B0*this._chunkMultiplier,n=new Wh(this._transferred,this._blob.size()),s=this._uploadUrl;this._resolveToken((i,r)=>{let o;try{o=f$(this._ref._location,this._ref.storage,s,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const a=this._ref.storage._makeRequest(o,Lo,i,r,!1);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){B0*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const s=a$(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(s,Lo,e,n);this._request=i,i.getPromise().then(r=>{this._request=void 0,this._metadata=r,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const s=u$(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(s,Lo,e,n);this._request=i,i.getPromise().then(r=>{this._request=void 0,this._metadata=r,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=MR(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=gp(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,s,i){const r=new p$(n||void 0,s||void 0,i||void 0);return this._addObserver(r),()=>{this._removeObserver(r)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(gp(this._state)){case wn.SUCCESS:Io(this._resolve.bind(null,this.snapshot))();break;case wn.CANCELED:case wn.ERROR:const n=this._reject;Io(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(gp(this._state)){case wn.RUNNING:case wn.PAUSED:e.next&&Io(e.next.bind(e,this.snapshot))();break;case wn.SUCCESS:e.complete&&Io(e.complete.bind(e))();break;case wn.CANCELED:case wn.ERROR:e.error&&Io(e.error.bind(e,this._error))();break;default:e.error&&Io(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,n){this._service=e,n instanceof Nn?this._location=n:this._location=Nn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new io(e,n)}get root(){const e=new Nn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zR(this._location.path)}get storage(){return this._service}get parent(){const e=ZU(this._location.path);if(e===null)return null;const n=new Nn(this._location.bucket,e);return new io(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw PU(e)}}function y$(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new _$(t,new Bi(e),n)}function b$(t){t._throwIfRoot("getDownloadURL");const e=c$(t.storage,t._location,jR());return t.storage.makeRequestWithTokens(e,Lo).then(n=>{if(n===null)throw AU();return n})}function v$(t,e){const n=e$(t._location.path,e),s=new Nn(t._location.bucket,n);return new io(t.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w$(t){return/^[A-Za-z]+:\/\//.test(t)}function E$(t,e){return new io(t,e)}function YR(t,e){if(t instanceof ry){const n=t;if(n._bucket==null)throw xU();const s=new io(n,n._bucket);return e!=null?YR(s,e):s}else return e!==void 0?v$(t,e):t}function T$(t,e){if(e&&w$(e)){if(t instanceof ry)return E$(t,e);throw Lg("To use ref(service, url), the first argument must be a Storage instance.")}else return YR(t,e)}function U0(t,e){const n=e==null?void 0:e[DR];return n==null?null:Nn.makeFromBucketSpec(n,t)}function S$(t,e,n,s={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=s;i&&(t._overrideAuthToken=typeof i=="string"?i:S1(i,t.app.options.projectId))}class ry{constructor(e,n,s,i,r){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=i,this._firebaseVersion=r,this._bucket=null,this._host=PR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=_U,this._maxUploadRetryTime=yU,this._requests=new Set,i!=null?this._bucket=Nn.makeFromBucketSpec(i,this._host):this._bucket=U0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Nn.makeFromBucketSpec(this._url,e):this._bucket=U0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){F0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){F0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new io(this,e)}_makeRequest(e,n,s,i,r=!0){if(this._deleted)return new DU(NR());{const o=zU(e,this._appId,s,i,n,this._firebaseVersion,r);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[s,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,i).getPromise()}}const $0="@firebase/storage",H0="0.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR="storage";function ff(t,e,n){return t=lt(t),y$(t,e,n)}function pf(t){return t=lt(t),b$(t)}function gf(t,e){return t=lt(t),T$(t,e)}function I$(t=$m(),e){t=lt(t);const s=Id(t,QR).getImmediate({identifier:e}),i=w1("storage");return i&&R$(s,...i),s}function R$(t,e,n,s={}){S$(t,e,n,s)}function x$(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new ry(n,s,i,e,uo)}function C$(){Jr(new tr(QR,x$,"PUBLIC").setMultipleInstances(!0)),Cs($0,H0,""),Cs($0,H0,"esm2017")}C$();const A$={apiKey:"AIzaSyCZ-HBufDf5JrElikOjjVwcVxeyLRd6BzU",authDomain:"pantrypal-e1225.firebaseapp.com",projectId:"pantrypal-e1225",storageBucket:"pantrypal-e1225.appspot.com",messagingSenderId:"694619781401",appId:"1:694619781401:web:ec0a8b6ad6950a1a222d88",measurementId:"G-SW04Z59K30"},rr=C1(A$),mf=I$(rr),Ae=hN(rr),Le=ua(rr);async function _f(){try{const e=(await Wr(Ms(Le,"categories"))).docs.map(n=>n.data());return console.log(e.map(n=>n.category_name)),e.map(n=>n.category_name)}catch(t){return console.error("Error fetching categories: ",t),[]}}var k$=Object.defineProperty,z0=Object.getOwnPropertySymbols,P$=Object.prototype.hasOwnProperty,D$=Object.prototype.propertyIsEnumerable,j0=(t,e,n)=>e in t?k$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,XR=(t,e)=>{for(var n in e||(e={}))P$.call(e,n)&&j0(t,n,e[n]);if(z0)for(var n of z0(e))D$.call(e,n)&&j0(t,n,e[n]);return t},yf=t=>typeof t=="function",bf=t=>typeof t=="string",JR=t=>bf(t)&&t.trim().length>0,O$=t=>typeof t=="number",Fr=t=>typeof t>"u",Xc=t=>typeof t=="object"&&t!==null,M$=t=>Ls(t,"tag")&&JR(t.tag),ZR=t=>window.TouchEvent&&t instanceof TouchEvent,ex=t=>Ls(t,"component")&&tx(t.component),L$=t=>yf(t)||Xc(t),tx=t=>!Fr(t)&&(bf(t)||L$(t)||ex(t)),W0=t=>Xc(t)&&["height","width","right","left","top","bottom"].every(e=>O$(t[e])),Ls=(t,e)=>(Xc(t)||yf(t))&&e in t,N$=(t=>()=>t++)(0);function mp(t){return ZR(t)?t.targetTouches[0].clientX:t.clientX}function q0(t){return ZR(t)?t.targetTouches[0].clientY:t.clientY}var V$=t=>{Fr(t.remove)?t.parentNode&&t.parentNode.removeChild(t):t.remove()},Ll=t=>ex(t)?Ll(t.component):M$(t)?pi({render(){return t}}):typeof t=="string"?t:Fe(Hr(t)),F$=t=>{if(typeof t=="string")return t;const e=Ls(t,"props")&&Xc(t.props)?t.props:{},n=Ls(t,"listeners")&&Xc(t.listeners)?t.listeners:{};return{component:Ll(t),props:e,listeners:n}},B$=()=>typeof window<"u",oy=class{constructor(){this.allHandlers={}}getHandlers(t){return this.allHandlers[t]||[]}on(t,e){const n=this.getHandlers(t);n.push(e),this.allHandlers[t]=n}off(t,e){const n=this.getHandlers(t);n.splice(n.indexOf(e)>>>0,1)}emit(t,e){this.getHandlers(t).forEach(s=>s(e))}},U$=t=>["on","off","emit"].every(e=>Ls(t,e)&&yf(t[e])),On;(function(t){t.SUCCESS="success",t.ERROR="error",t.WARNING="warning",t.INFO="info",t.DEFAULT="default"})(On||(On={}));var qh;(function(t){t.TOP_LEFT="top-left",t.TOP_CENTER="top-center",t.TOP_RIGHT="top-right",t.BOTTOM_LEFT="bottom-left",t.BOTTOM_CENTER="bottom-center",t.BOTTOM_RIGHT="bottom-right"})(qh||(qh={}));var Mn;(function(t){t.ADD="add",t.DISMISS="dismiss",t.UPDATE="update",t.CLEAR="clear",t.UPDATE_DEFAULTS="update_defaults"})(Mn||(Mn={}));var ss="Vue-Toastification",es={type:{type:String,default:On.DEFAULT},classNames:{type:[String,Array],default:()=>[]},trueBoolean:{type:Boolean,default:!0}},nx={type:es.type,customIcon:{type:[String,Boolean,Object,Function],default:!0}},Xu={component:{type:[String,Object,Function,Boolean],default:"button"},classNames:es.classNames,showOnHover:{type:Boolean,default:!1},ariaLabel:{type:String,default:"close"}},Ng={timeout:{type:[Number,Boolean],default:5e3},hideProgressBar:{type:Boolean,default:!1},isRunning:{type:Boolean,default:!1}},sx={transition:{type:[Object,String],default:`${ss}__bounce`}},$$={position:{type:String,default:qh.TOP_RIGHT},draggable:es.trueBoolean,draggablePercent:{type:Number,default:.6},pauseOnFocusLoss:es.trueBoolean,pauseOnHover:es.trueBoolean,closeOnClick:es.trueBoolean,timeout:Ng.timeout,hideProgressBar:Ng.hideProgressBar,toastClassName:es.classNames,bodyClassName:es.classNames,icon:nx.customIcon,closeButton:Xu.component,closeButtonClassName:Xu.classNames,showCloseButtonOnHover:Xu.showOnHover,accessibility:{type:Object,default:()=>({toastRole:"alert",closeButtonLabel:"close"})},rtl:{type:Boolean,default:!1},eventBus:{type:Object,required:!1,default:()=>new oy}},H$={id:{type:[String,Number],required:!0,default:0},type:es.type,content:{type:[String,Object,Function],required:!0,default:""},onClick:{type:Function,default:void 0},onClose:{type:Function,default:void 0}},z$={container:{type:[Object,Function],default:()=>document.body},newestOnTop:es.trueBoolean,maxToasts:{type:Number,default:20},transition:sx.transition,toastDefaults:Object,filterBeforeCreate:{type:Function,default:t=>t},filterToasts:{type:Function,default:t=>t},containerClassName:es.classNames,onMounted:Function,shareAppContext:[Boolean,Object]},oi={CORE_TOAST:$$,TOAST:H$,CONTAINER:z$,PROGRESS_BAR:Ng,ICON:nx,TRANSITION:sx,CLOSE_BUTTON:Xu},ix=pi({name:"VtProgressBar",props:oi.PROGRESS_BAR,data(){return{hasClass:!0}},computed:{style(){return{animationDuration:`${this.timeout}ms`,animationPlayState:this.isRunning?"running":"paused",opacity:this.hideProgressBar?0:1}},cpClass(){return this.hasClass?`${ss}__progress-bar`:""}},watch:{timeout(){this.hasClass=!1,this.$nextTick(()=>this.hasClass=!0)}},mounted(){this.$el.addEventListener("animationend",this.animationEnded)},beforeUnmount(){this.$el.removeEventListener("animationend",this.animationEnded)},methods:{animationEnded(){this.$emit("close-toast")}}});function j$(t,e){return A(),M("div",{style:ll(t.style),class:St(t.cpClass)},null,6)}ix.render=j$;var W$=ix,rx=pi({name:"VtCloseButton",props:oi.CLOSE_BUTTON,computed:{buttonComponent(){return this.component!==!1?Ll(this.component):"button"},classes(){const t=[`${ss}__close-button`];return this.showOnHover&&t.push("show-on-hover"),t.concat(this.classNames)}}}),q$=an(" × ");function G$(t,e){return A(),Oe(Pm(t.buttonComponent),bd({"aria-label":t.ariaLabel,class:t.classes},t.$attrs),{default:Qr(()=>[q$]),_:1},16,["aria-label","class"])}rx.render=G$;var K$=rx,ox={},Y$={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"check-circle",class:"svg-inline--fa fa-check-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},Q$=g("path",{fill:"currentColor",d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},null,-1),X$=[Q$];function J$(t,e){return A(),M("svg",Y$,X$)}ox.render=J$;var Z$=ox,ax={},e4={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"info-circle",class:"svg-inline--fa fa-info-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},t4=g("path",{fill:"currentColor",d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},null,-1),n4=[t4];function s4(t,e){return A(),M("svg",e4,n4)}ax.render=s4;var G0=ax,cx={},i4={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"exclamation-circle",class:"svg-inline--fa fa-exclamation-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},r4=g("path",{fill:"currentColor",d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},null,-1),o4=[r4];function a4(t,e){return A(),M("svg",i4,o4)}cx.render=a4;var c4=cx,lx={},l4={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"exclamation-triangle",class:"svg-inline--fa fa-exclamation-triangle fa-w-18",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},u4=g("path",{fill:"currentColor",d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},null,-1),h4=[u4];function d4(t,e){return A(),M("svg",l4,h4)}lx.render=d4;var f4=lx,ux=pi({name:"VtIcon",props:oi.ICON,computed:{customIconChildren(){return Ls(this.customIcon,"iconChildren")?this.trimValue(this.customIcon.iconChildren):""},customIconClass(){return bf(this.customIcon)?this.trimValue(this.customIcon):Ls(this.customIcon,"iconClass")?this.trimValue(this.customIcon.iconClass):""},customIconTag(){return Ls(this.customIcon,"iconTag")?this.trimValue(this.customIcon.iconTag,"i"):"i"},hasCustomIcon(){return this.customIconClass.length>0},component(){return this.hasCustomIcon?this.customIconTag:tx(this.customIcon)?Ll(this.customIcon):this.iconTypeComponent},iconTypeComponent(){return{[On.DEFAULT]:G0,[On.INFO]:G0,[On.SUCCESS]:Z$,[On.ERROR]:f4,[On.WARNING]:c4}[this.type]},iconClasses(){const t=[`${ss}__icon`];return this.hasCustomIcon?t.concat(this.customIconClass):t}},methods:{trimValue(t,e=""){return JR(t)?t.trim():e}}});function p4(t,e){return A(),Oe(Pm(t.component),{class:St(t.iconClasses)},{default:Qr(()=>[an(xe(t.customIconChildren),1)]),_:1},8,["class"])}ux.render=p4;var g4=ux,hx=pi({name:"VtToast",components:{ProgressBar:W$,CloseButton:K$,Icon:g4},inheritAttrs:!1,props:Object.assign({},oi.CORE_TOAST,oi.TOAST),data(){return{isRunning:!0,disableTransitions:!1,beingDragged:!1,dragStart:0,dragPos:{x:0,y:0},dragRect:{}}},computed:{classes(){const t=[`${ss}__toast`,`${ss}__toast--${this.type}`,`${this.position}`].concat(this.toastClassName);return this.disableTransitions&&t.push("disable-transition"),this.rtl&&t.push(`${ss}__toast--rtl`),t},bodyClasses(){return[`${ss}__toast-${bf(this.content)?"body":"component-body"}`].concat(this.bodyClassName)},draggableStyle(){return this.dragStart===this.dragPos.x?{}:this.beingDragged?{transform:`translateX(${this.dragDelta}px)`,opacity:1-Math.abs(this.dragDelta/this.removalDistance)}:{transition:"transform 0.2s, opacity 0.2s",transform:"translateX(0)",opacity:1}},dragDelta(){return this.beingDragged?this.dragPos.x-this.dragStart:0},removalDistance(){return W0(this.dragRect)?(this.dragRect.right-this.dragRect.left)*this.draggablePercent:0}},mounted(){this.draggable&&this.draggableSetup(),this.pauseOnFocusLoss&&this.focusSetup()},beforeUnmount(){this.draggable&&this.draggableCleanup(),this.pauseOnFocusLoss&&this.focusCleanup()},methods:{hasProp:Ls,getVueComponentFromObj:Ll,closeToast(){this.eventBus.emit(Mn.DISMISS,this.id)},clickHandler(){this.onClick&&this.onClick(this.closeToast),this.closeOnClick&&(!this.beingDragged||this.dragStart===this.dragPos.x)&&this.closeToast()},timeoutHandler(){this.closeToast()},hoverPause(){this.pauseOnHover&&(this.isRunning=!1)},hoverPlay(){this.pauseOnHover&&(this.isRunning=!0)},focusPause(){this.isRunning=!1},focusPlay(){this.isRunning=!0},focusSetup(){addEventListener("blur",this.focusPause),addEventListener("focus",this.focusPlay)},focusCleanup(){removeEventListener("blur",this.focusPause),removeEventListener("focus",this.focusPlay)},draggableSetup(){const t=this.$el;t.addEventListener("touchstart",this.onDragStart,{passive:!0}),t.addEventListener("mousedown",this.onDragStart),addEventListener("touchmove",this.onDragMove,{passive:!1}),addEventListener("mousemove",this.onDragMove),addEventListener("touchend",this.onDragEnd),addEventListener("mouseup",this.onDragEnd)},draggableCleanup(){const t=this.$el;t.removeEventListener("touchstart",this.onDragStart),t.removeEventListener("mousedown",this.onDragStart),removeEventListener("touchmove",this.onDragMove),removeEventListener("mousemove",this.onDragMove),removeEventListener("touchend",this.onDragEnd),removeEventListener("mouseup",this.onDragEnd)},onDragStart(t){this.beingDragged=!0,this.dragPos={x:mp(t),y:q0(t)},this.dragStart=mp(t),this.dragRect=this.$el.getBoundingClientRect()},onDragMove(t){this.beingDragged&&(t.preventDefault(),this.isRunning&&(this.isRunning=!1),this.dragPos={x:mp(t),y:q0(t)})},onDragEnd(){this.beingDragged&&(Math.abs(this.dragDelta)>=this.removalDistance?(this.disableTransitions=!0,this.$nextTick(()=>this.closeToast())):setTimeout(()=>{this.beingDragged=!1,W0(this.dragRect)&&this.pauseOnHover&&this.dragRect.bottom>=this.dragPos.y&&this.dragPos.y>=this.dragRect.top&&this.dragRect.left<=this.dragPos.x&&this.dragPos.x<=this.dragRect.right?this.isRunning=!1:this.isRunning=!0}))}}}),m4=["role"];function _4(t,e){const n=te("Icon"),s=te("CloseButton"),i=te("ProgressBar");return A(),M("div",{class:St(t.classes),style:ll(t.draggableStyle),onClick:e[0]||(e[0]=(...r)=>t.clickHandler&&t.clickHandler(...r)),onMouseenter:e[1]||(e[1]=(...r)=>t.hoverPause&&t.hoverPause(...r)),onMouseleave:e[2]||(e[2]=(...r)=>t.hoverPlay&&t.hoverPlay(...r))},[t.icon?(A(),Oe(n,{key:0,"custom-icon":t.icon,type:t.type},null,8,["custom-icon","type"])):we("v-if",!0),g("div",{role:t.accessibility.toastRole||"alert",class:St(t.bodyClasses)},[typeof t.content=="string"?(A(),M(_e,{key:0},[an(xe(t.content),1)],2112)):(A(),Oe(Pm(t.getVueComponentFromObj(t.content)),bd({key:1,"toast-id":t.id},t.hasProp(t.content,"props")?t.content.props:{},Kk(t.hasProp(t.content,"listeners")?t.content.listeners:{}),{onCloseToast:t.closeToast}),null,16,["toast-id","onCloseToast"]))],10,m4),t.closeButton?(A(),Oe(s,{key:1,component:t.closeButton,"class-names":t.closeButtonClassName,"show-on-hover":t.showCloseButtonOnHover,"aria-label":t.accessibility.closeButtonLabel,onClick:Qe(t.closeToast,["stop"])},null,8,["component","class-names","show-on-hover","aria-label","onClick"])):we("v-if",!0),t.timeout?(A(),Oe(i,{key:2,"is-running":t.isRunning,"hide-progress-bar":t.hideProgressBar,timeout:t.timeout,onCloseToast:t.timeoutHandler},null,8,["is-running","hide-progress-bar","timeout","onCloseToast"])):we("v-if",!0)],38)}hx.render=_4;var y4=hx,dx=pi({name:"VtTransition",props:oi.TRANSITION,emits:["leave"],methods:{hasProp:Ls,leave(t){t instanceof HTMLElement&&(t.style.left=t.offsetLeft+"px",t.style.top=t.offsetTop+"px",t.style.width=getComputedStyle(t).width,t.style.position="absolute")}}});function b4(t,e){return A(),Oe(QP,{tag:"div","enter-active-class":t.transition.enter?t.transition.enter:`${t.transition}-enter-active`,"move-class":t.transition.move?t.transition.move:`${t.transition}-move`,"leave-active-class":t.transition.leave?t.transition.leave:`${t.transition}-leave-active`,onLeave:t.leave},{default:Qr(()=>[en(t.$slots,"default")]),_:3},8,["enter-active-class","move-class","leave-active-class","onLeave"])}dx.render=b4;var v4=dx,fx=pi({name:"VueToastification",devtools:{hide:!0},components:{Toast:y4,VtTransition:v4},props:Object.assign({},oi.CORE_TOAST,oi.CONTAINER,oi.TRANSITION),data(){return{count:0,positions:Object.values(qh),toasts:{},defaults:{}}},computed:{toastArray(){return Object.values(this.toasts)},filteredToasts(){return this.defaults.filterToasts(this.toastArray)}},beforeMount(){const t=this.eventBus;t.on(Mn.ADD,this.addToast),t.on(Mn.CLEAR,this.clearToasts),t.on(Mn.DISMISS,this.dismissToast),t.on(Mn.UPDATE,this.updateToast),t.on(Mn.UPDATE_DEFAULTS,this.updateDefaults),this.defaults=this.$props},mounted(){this.setup(this.container)},methods:{async setup(t){yf(t)&&(t=await t()),V$(this.$el),t.appendChild(this.$el)},setToast(t){Fr(t.id)||(this.toasts[t.id]=t)},addToast(t){t.content=F$(t.content);const e=Object.assign({},this.defaults,t.type&&this.defaults.toastDefaults&&this.defaults.toastDefaults[t.type],t),n=this.defaults.filterBeforeCreate(e,this.toastArray);n&&this.setToast(n)},dismissToast(t){const e=this.toasts[t];!Fr(e)&&!Fr(e.onClose)&&e.onClose(),delete this.toasts[t]},clearToasts(){Object.keys(this.toasts).forEach(t=>{this.dismissToast(t)})},getPositionToasts(t){const e=this.filteredToasts.filter(n=>n.position===t).slice(0,this.defaults.maxToasts);return this.defaults.newestOnTop?e.reverse():e},updateDefaults(t){Fr(t.container)||this.setup(t.container),this.defaults=Object.assign({},this.defaults,t)},updateToast({id:t,options:e,create:n}){this.toasts[t]?(e.timeout&&e.timeout===this.toasts[t].timeout&&e.timeout++,this.setToast(Object.assign({},this.toasts[t],e))):n&&this.addToast(Object.assign({},{id:t},e))},getClasses(t){return[`${ss}__container`,t].concat(this.defaults.containerClassName)}}});function w4(t,e){const n=te("Toast"),s=te("VtTransition");return A(),M("div",null,[(A(!0),M(_e,null,pt(t.positions,i=>(A(),M("div",{key:i},[W(s,{transition:t.defaults.transition,class:St(t.getClasses(i))},{default:Qr(()=>[(A(!0),M(_e,null,pt(t.getPositionToasts(i),r=>(A(),Oe(n,bd({key:r.id},r),null,16))),128))]),_:2},1032,["transition","class"])]))),128))])}fx.render=w4;var E4=fx,K0=(t={},e=!0)=>{const n=t.eventBus=t.eventBus||new oy;e&&Cm(()=>{const r=r1(E4,XR({},t)),o=r.mount(document.createElement("div")),a=t.onMounted;if(Fr(a)||a(o,r),t.shareAppContext){const c=t.shareAppContext;c===!0?console.warn(`[${ss}] App to share context with was not provided.`):(r._context.components=c._context.components,r._context.directives=c._context.directives,r._context.mixins=c._context.mixins,r._context.provides=c._context.provides,r.config.globalProperties=c.config.globalProperties)}});const s=(r,o)=>{const a=Object.assign({},{id:N$(),type:On.DEFAULT},o,{content:r});return n.emit(Mn.ADD,a),a.id};s.clear=()=>n.emit(Mn.CLEAR,void 0),s.updateDefaults=r=>{n.emit(Mn.UPDATE_DEFAULTS,r)},s.dismiss=r=>{n.emit(Mn.DISMISS,r)};function i(r,{content:o,options:a},c=!1){const l=Object.assign({},a,{content:o});n.emit(Mn.UPDATE,{id:r,options:l,create:c})}return s.update=i,s.success=(r,o)=>s(r,Object.assign({},o,{type:On.SUCCESS})),s.info=(r,o)=>s(r,Object.assign({},o,{type:On.INFO})),s.error=(r,o)=>s(r,Object.assign({},o,{type:On.ERROR})),s.warning=(r,o)=>s(r,Object.assign({},o,{type:On.WARNING})),s},T4=()=>{const t=()=>console.warn(`[${ss}] This plugin does not support SSR!`);return new Proxy(t,{get(){return t}})};function Vg(t){return B$()?U$(t)?K0({eventBus:t},!1):K0(t,!0):T4()}var px=Symbol("VueToastification"),gx=new oy,S4=(t,e)=>{(e==null?void 0:e.shareAppContext)===!0&&(e.shareAppContext=t);const n=Vg(XR({eventBus:gx},e));t.provide(px,n)},bo=t=>{if(t)return Vg(t);const e=Nm()?xs(px,void 0):void 0;return e||Vg(gx)},I4=S4;const Nl="/assets/logo-PjH7a8V4.jpg",R4="/assets/landingfood-iaW25sLx.png",x4={name:"LandingPage",setup(){return{toast:bo()}},methods:{goToSignUp(){this.$router.push("/signup")},goToLogin(){this.$router.push("/login")},triggerToast(){this.toast.error("You need to be logged in to access that page.",{timeout:2e3,position:"top-center",hideProgressBar:!0})}},created(){this.$route.query.redirected&&this.triggerToast()}},ay=t=>(Lt("data-v-138f60e1"),t=t(),Nt(),t),C4={id:"app"},A4={class:"top-bar"},k4=ay(()=>g("img",{src:Nl,alt:"PantryPal Logo",class:"logo"},null,-1)),P4={class:"menu"},D4=ay(()=>g("div",{class:"separator"},null,-1)),O4=ay(()=>g("div",{class:"gallery-container"},[g("header",null,[g("h1",null,"Transform leftovers into culinary treasures!")]),g("section",{class:"gallery"},[g("div",null,[g("img",{class:"gallery-item",src:R4,alt:"food"})])])],-1));function M4(t,e,n,s,i,r){return A(),M("div",C4,[g("div",A4,[k4,g("div",P4,[g("button",{class:"btn-login",onClick:e[0]||(e[0]=(...o)=>r.goToLogin&&r.goToLogin(...o))},"Login"),g("button",{class:"btn-signup",onClick:e[1]||(e[1]=(...o)=>r.goToSignUp&&r.goToSignUp(...o))},"Sign Up")])]),D4,O4])}const L4=Be(x4,[["render",M4],["__scopeId","data-v-138f60e1"]]),N4={name:"SignUp",data(){return{user:{email:"",username:"",password:"",confirmPassword:""},error:""}},methods:{register(){if(this.user.password!==this.user.confirmPassword){this.error="Passwords do not match.";return}q2(Ae,this.user.email,this.user.password).then(()=>{try{console.log(Ae.currentUser.uid);const t=Ce(Le,"users",Ae.currentUser.uid);Vr(t,{email:this.user.email,liked_recipes:[],my_cookbook:[],profile_img_url:"https://firebasestorage.googleapis.com/v0/b/pantrypal-e1225.appspot.com/o/profileImg%2FGeneric-Profile-Placeholder-3660825460.png?alt=media&token=b9df0faf-9989-4c7d-b882-9a785254d07c",user_id:Ae.currentUser.uid,username:this.user.username})}catch(t){console.log(t)}this.$router.push("/community-page")}).catch(t=>{t.code==="auth/email-already-in-use"?this.error="This email is already in use. Please use a different email.":this.error=t.message,console.error("Registration error:",t)})}}},_i=t=>(Lt("data-v-f15d82f0"),t=t(),Nt(),t),V4={class:"signup-container"},F4=_i(()=>g("div",{class:"signup-image-container"},null,-1)),B4={class:"signup-form-container"},U4=_i(()=>g("img",{src:Nl,alt:"PantryPal Logo",class:"logo"},null,-1)),$4=_i(()=>g("h1",null,"Create New Account",-1)),H4={class:"input-group"},z4=_i(()=>g("label",{for:"email"},"EMAIL",-1)),j4={class:"input-group"},W4=_i(()=>g("label",{for:"username"},"USERNAME",-1)),q4={class:"input-group"},G4=_i(()=>g("label",{for:"password"},"PASSWORD",-1)),K4={class:"input-group"},Y4=_i(()=>g("label",{for:"confirm-password"},"CONFIRM PASSWORD",-1)),Q4=_i(()=>g("div",{class:"login-link"},[an("Already Registered? "),g("a",{href:"/login"},"Login")],-1)),X4=_i(()=>g("button",{type:"submit",class:"btn-signup"},"Sign Up",-1)),J4={key:0,class:"error-message",style:{color:"red","text-align":"center","margin-top":"20px"}};function Z4(t,e,n,s,i,r){return A(),M("div",V4,[F4,g("div",B4,[U4,$4,g("form",{class:"signup-form",onSubmit:e[4]||(e[4]=Qe((...o)=>r.register&&r.register(...o),["prevent"]))},[g("div",H4,[z4,ie(g("input",{type:"email",id:"email","onUpdate:modelValue":e[0]||(e[0]=o=>i.user.email=o),required:""},null,512),[[Ee,i.user.email]])]),g("div",j4,[W4,ie(g("input",{type:"text",id:"username","onUpdate:modelValue":e[1]||(e[1]=o=>i.user.username=o),required:""},null,512),[[Ee,i.user.username]])]),g("div",q4,[G4,ie(g("input",{type:"password",id:"password","onUpdate:modelValue":e[2]||(e[2]=o=>i.user.password=o),required:""},null,512),[[Ee,i.user.password]])]),g("div",K4,[Y4,ie(g("input",{type:"password",id:"confirm-password","onUpdate:modelValue":e[3]||(e[3]=o=>i.user.confirmPassword=o),required:""},null,512),[[Ee,i.user.confirmPassword]])]),Q4,X4],32),i.error?(A(),M("div",J4,xe(i.error),1)):we("",!0)])])}const e5=Be(N4,[["render",Z4],["__scopeId","data-v-f15d82f0"]]),t5={name:"Login",data(){return{user:{email:"",password:""},error:""}},methods:{login(){G2(Ae,this.user.email,this.user.password).then(()=>{this.$router.push("/community-page")}).catch(t=>{this.error="Invalid login credentials. Please try again.",console.error("Login error:",t)})}}},vo=t=>(Lt("data-v-e07e4202"),t=t(),Nt(),t),n5={class:"login-container"},s5={class:"login-form-container"},i5=vo(()=>g("img",{src:Nl,alt:"PantryPal Logo",class:"logo"},null,-1)),r5=vo(()=>g("h1",null,"Welcome Back",-1)),o5={class:"input-group"},a5=vo(()=>g("label",{for:"email"},"EMAIL",-1)),c5={class:"input-group"},l5=vo(()=>g("label",{for:"password"},"PASSWORD",-1)),u5=vo(()=>g("div",{class:"register-link"},[an(" New Here? "),g("a",{href:"/signup"},"Register")],-1)),h5=vo(()=>g("button",{type:"submit",class:"btn-login"},"Log In",-1)),d5={key:0,class:"error-message",style:{color:"red"}},f5=vo(()=>g("div",{class:"login-image-container"},null,-1));function p5(t,e,n,s,i,r){return A(),M("div",n5,[g("div",s5,[i5,r5,g("form",{class:"login-form",onSubmit:e[2]||(e[2]=Qe((...o)=>r.login&&r.login(...o),["prevent"]))},[g("div",o5,[a5,ie(g("input",{type:"email",id:"email","onUpdate:modelValue":e[0]||(e[0]=o=>i.user.email=o),required:""},null,512),[[Ee,i.user.email]])]),g("div",c5,[l5,ie(g("input",{type:"password",id:"password","onUpdate:modelValue":e[1]||(e[1]=o=>i.user.password=o),required:""},null,512),[[Ee,i.user.password]])]),u5,h5],32),i.error?(A(),M("div",d5,xe(i.error),1)):we("",!0)]),f5])}const g5=Be(t5,[["render",p5],["__scopeId","data-v-e07e4202"]]);function mx(t,e){return function(){return t.apply(e,arguments)}}const{toString:m5}=Object.prototype,{getPrototypeOf:cy}=Object,vf=(t=>e=>{const n=m5.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),zs=t=>(t=t.toLowerCase(),e=>vf(e)===t),wf=t=>e=>typeof e===t,{isArray:Ta}=Array,Jc=wf("undefined");function _5(t){return t!==null&&!Jc(t)&&t.constructor!==null&&!Jc(t.constructor)&&qn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const _x=zs("ArrayBuffer");function y5(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&_x(t.buffer),e}const b5=wf("string"),qn=wf("function"),yx=wf("number"),Ef=t=>t!==null&&typeof t=="object",v5=t=>t===!0||t===!1,Ju=t=>{if(vf(t)!=="object")return!1;const e=cy(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},w5=zs("Date"),E5=zs("File"),T5=zs("Blob"),S5=zs("FileList"),I5=t=>Ef(t)&&qn(t.pipe),R5=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||qn(t.append)&&((e=vf(t))==="formdata"||e==="object"&&qn(t.toString)&&t.toString()==="[object FormData]"))},x5=zs("URLSearchParams"),C5=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Vl(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let s,i;if(typeof t!="object"&&(t=[t]),Ta(t))for(s=0,i=t.length;s<i;s++)e.call(null,t[s],s,t);else{const r=n?Object.getOwnPropertyNames(t):Object.keys(t),o=r.length;let a;for(s=0;s<o;s++)a=r[s],e.call(null,t[a],a,t)}}function bx(t,e){e=e.toLowerCase();const n=Object.keys(t);let s=n.length,i;for(;s-- >0;)if(i=n[s],e===i.toLowerCase())return i;return null}const vx=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,wx=t=>!Jc(t)&&t!==vx;function Fg(){const{caseless:t}=wx(this)&&this||{},e={},n=(s,i)=>{const r=t&&bx(e,i)||i;Ju(e[r])&&Ju(s)?e[r]=Fg(e[r],s):Ju(s)?e[r]=Fg({},s):Ta(s)?e[r]=s.slice():e[r]=s};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&Vl(arguments[s],n);return e}const A5=(t,e,n,{allOwnKeys:s}={})=>(Vl(e,(i,r)=>{n&&qn(i)?t[r]=mx(i,n):t[r]=i},{allOwnKeys:s}),t),k5=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),P5=(t,e,n,s)=>{t.prototype=Object.create(e.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},D5=(t,e,n,s)=>{let i,r,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),r=i.length;r-- >0;)o=i[r],(!s||s(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&cy(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},O5=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const s=t.indexOf(e,n);return s!==-1&&s===n},M5=t=>{if(!t)return null;if(Ta(t))return t;let e=t.length;if(!yx(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},L5=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&cy(Uint8Array)),N5=(t,e)=>{const s=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=s.next())&&!i.done;){const r=i.value;e.call(t,r[0],r[1])}},V5=(t,e)=>{let n;const s=[];for(;(n=t.exec(e))!==null;)s.push(n);return s},F5=zs("HTMLFormElement"),B5=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,i){return s.toUpperCase()+i}),Y0=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),U5=zs("RegExp"),Ex=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),s={};Vl(n,(i,r)=>{let o;(o=e(i,r,t))!==!1&&(s[r]=o||i)}),Object.defineProperties(t,s)},$5=t=>{Ex(t,(e,n)=>{if(qn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=t[n];if(qn(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},H5=(t,e)=>{const n={},s=i=>{i.forEach(r=>{n[r]=!0})};return Ta(t)?s(t):s(String(t).split(e)),n},z5=()=>{},j5=(t,e)=>(t=+t,Number.isFinite(t)?t:e),_p="abcdefghijklmnopqrstuvwxyz",Q0="0123456789",Tx={DIGIT:Q0,ALPHA:_p,ALPHA_DIGIT:_p+_p.toUpperCase()+Q0},W5=(t=16,e=Tx.ALPHA_DIGIT)=>{let n="";const{length:s}=e;for(;t--;)n+=e[Math.random()*s|0];return n};function q5(t){return!!(t&&qn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const G5=t=>{const e=new Array(10),n=(s,i)=>{if(Ef(s)){if(e.indexOf(s)>=0)return;if(!("toJSON"in s)){e[i]=s;const r=Ta(s)?[]:{};return Vl(s,(o,a)=>{const c=n(o,i+1);!Jc(c)&&(r[a]=c)}),e[i]=void 0,r}}return s};return n(t,0)},K5=zs("AsyncFunction"),Y5=t=>t&&(Ef(t)||qn(t))&&qn(t.then)&&qn(t.catch),O={isArray:Ta,isArrayBuffer:_x,isBuffer:_5,isFormData:R5,isArrayBufferView:y5,isString:b5,isNumber:yx,isBoolean:v5,isObject:Ef,isPlainObject:Ju,isUndefined:Jc,isDate:w5,isFile:E5,isBlob:T5,isRegExp:U5,isFunction:qn,isStream:I5,isURLSearchParams:x5,isTypedArray:L5,isFileList:S5,forEach:Vl,merge:Fg,extend:A5,trim:C5,stripBOM:k5,inherits:P5,toFlatObject:D5,kindOf:vf,kindOfTest:zs,endsWith:O5,toArray:M5,forEachEntry:N5,matchAll:V5,isHTMLForm:F5,hasOwnProperty:Y0,hasOwnProp:Y0,reduceDescriptors:Ex,freezeMethods:$5,toObjectSet:H5,toCamelCase:B5,noop:z5,toFiniteNumber:j5,findKey:bx,global:vx,isContextDefined:wx,ALPHABET:Tx,generateString:W5,isSpecCompliantForm:q5,toJSONObject:G5,isAsyncFn:K5,isThenable:Y5};function Ve(t,e,n,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),s&&(this.request=s),i&&(this.response=i)}O.inherits(Ve,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:O.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Sx=Ve.prototype,Ix={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Ix[t]={value:t}});Object.defineProperties(Ve,Ix);Object.defineProperty(Sx,"isAxiosError",{value:!0});Ve.from=(t,e,n,s,i,r)=>{const o=Object.create(Sx);return O.toFlatObject(t,o,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),Ve.call(o,t.message,e,n,s,i),o.cause=t,o.name=t.name,r&&Object.assign(o,r),o};const Q5=null;function Bg(t){return O.isPlainObject(t)||O.isArray(t)}function Rx(t){return O.endsWith(t,"[]")?t.slice(0,-2):t}function X0(t,e,n){return t?t.concat(e).map(function(i,r){return i=Rx(i),!n&&r?"["+i+"]":i}).join(n?".":""):e}function X5(t){return O.isArray(t)&&!t.some(Bg)}const J5=O.toFlatObject(O,{},null,function(e){return/^is[A-Z]/.test(e)});function Tf(t,e,n){if(!O.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=O.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,_){return!O.isUndefined(_[m])});const s=n.metaTokens,i=n.visitor||u,r=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&O.isSpecCompliantForm(e);if(!O.isFunction(i))throw new TypeError("visitor must be a function");function l(p){if(p===null)return"";if(O.isDate(p))return p.toISOString();if(!c&&O.isBlob(p))throw new Ve("Blob is not supported. Use a Buffer instead.");return O.isArrayBuffer(p)||O.isTypedArray(p)?c&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,m,_){let y=p;if(p&&!_&&typeof p=="object"){if(O.endsWith(m,"{}"))m=s?m:m.slice(0,-2),p=JSON.stringify(p);else if(O.isArray(p)&&X5(p)||(O.isFileList(p)||O.endsWith(m,"[]"))&&(y=O.toArray(p)))return m=Rx(m),y.forEach(function(w,T){!(O.isUndefined(w)||w===null)&&e.append(o===!0?X0([m],T,r):o===null?m:m+"[]",l(w))}),!1}return Bg(p)?!0:(e.append(X0(_,m,r),l(p)),!1)}const h=[],d=Object.assign(J5,{defaultVisitor:u,convertValue:l,isVisitable:Bg});function f(p,m){if(!O.isUndefined(p)){if(h.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));h.push(p),O.forEach(p,function(y,b){(!(O.isUndefined(y)||y===null)&&i.call(e,y,O.isString(b)?b.trim():b,m,d))===!0&&f(y,m?m.concat(b):[b])}),h.pop()}}if(!O.isObject(t))throw new TypeError("data must be an object");return f(t),e}function J0(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function ly(t,e){this._pairs=[],t&&Tf(t,this,e)}const xx=ly.prototype;xx.append=function(e,n){this._pairs.push([e,n])};xx.toString=function(e){const n=e?function(s){return e.call(this,s,J0)}:J0;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function Z5(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Cx(t,e,n){if(!e)return t;const s=n&&n.encode||Z5,i=n&&n.serialize;let r;if(i?r=i(e,n):r=O.isURLSearchParams(e)?e.toString():new ly(e,n).toString(s),r){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+r}return t}class Z0{constructor(){this.handlers=[]}use(e,n,s){return this.handlers.push({fulfilled:e,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){O.forEach(this.handlers,function(s){s!==null&&e(s)})}}const Ax={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},e6=typeof URLSearchParams<"u"?URLSearchParams:ly,t6=typeof FormData<"u"?FormData:null,n6=typeof Blob<"u"?Blob:null,s6={isBrowser:!0,classes:{URLSearchParams:e6,FormData:t6,Blob:n6},protocols:["http","https","file","blob","url","data"]},kx=typeof window<"u"&&typeof document<"u",i6=(t=>kx&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),r6=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",o6=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:kx,hasStandardBrowserEnv:i6,hasStandardBrowserWebWorkerEnv:r6},Symbol.toStringTag,{value:"Module"})),Is={...o6,...s6};function a6(t,e){return Tf(t,new Is.classes.URLSearchParams,Object.assign({visitor:function(n,s,i,r){return Is.isNode&&O.isBuffer(n)?(this.append(s,n.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}function c6(t){return O.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function l6(t){const e={},n=Object.keys(t);let s;const i=n.length;let r;for(s=0;s<i;s++)r=n[s],e[r]=t[r];return e}function Px(t){function e(n,s,i,r){let o=n[r++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),c=r>=n.length;return o=!o&&O.isArray(i)?i.length:o,c?(O.hasOwnProp(i,o)?i[o]=[i[o],s]:i[o]=s,!a):((!i[o]||!O.isObject(i[o]))&&(i[o]=[]),e(n,s,i[o],r)&&O.isArray(i[o])&&(i[o]=l6(i[o])),!a)}if(O.isFormData(t)&&O.isFunction(t.entries)){const n={};return O.forEachEntry(t,(s,i)=>{e(c6(s),i,n,0)}),n}return null}function u6(t,e,n){if(O.isString(t))try{return(e||JSON.parse)(t),O.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(t)}const uy={transitional:Ax,adapter:["xhr","http"],transformRequest:[function(e,n){const s=n.getContentType()||"",i=s.indexOf("application/json")>-1,r=O.isObject(e);if(r&&O.isHTMLForm(e)&&(e=new FormData(e)),O.isFormData(e))return i?JSON.stringify(Px(e)):e;if(O.isArrayBuffer(e)||O.isBuffer(e)||O.isStream(e)||O.isFile(e)||O.isBlob(e))return e;if(O.isArrayBufferView(e))return e.buffer;if(O.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(r){if(s.indexOf("application/x-www-form-urlencoded")>-1)return a6(e,this.formSerializer).toString();if((a=O.isFileList(e))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Tf(a?{"files[]":e}:e,c&&new c,this.formSerializer)}}return r||i?(n.setContentType("application/json",!1),u6(e)):e}],transformResponse:[function(e){const n=this.transitional||uy.transitional,s=n&&n.forcedJSONParsing,i=this.responseType==="json";if(e&&O.isString(e)&&(s&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Ve.from(a,Ve.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Is.classes.FormData,Blob:Is.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};O.forEach(["delete","get","head","post","put","patch"],t=>{uy.headers[t]={}});const hy=uy,h6=O.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),d6=t=>{const e={};let n,s,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),s=o.substring(i+1).trim(),!(!n||e[n]&&h6[n])&&(n==="set-cookie"?e[n]?e[n].push(s):e[n]=[s]:e[n]=e[n]?e[n]+", "+s:s)}),e},ew=Symbol("internals");function La(t){return t&&String(t).trim().toLowerCase()}function Zu(t){return t===!1||t==null?t:O.isArray(t)?t.map(Zu):String(t)}function f6(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(t);)e[s[1]]=s[2];return e}const p6=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function yp(t,e,n,s,i){if(O.isFunction(s))return s.call(this,e,n);if(i&&(e=n),!!O.isString(e)){if(O.isString(s))return e.indexOf(s)!==-1;if(O.isRegExp(s))return s.test(e)}}function g6(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,s)=>n.toUpperCase()+s)}function m6(t,e){const n=O.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+n,{value:function(i,r,o){return this[s].call(this,e,i,r,o)},configurable:!0})})}class Sf{constructor(e){e&&this.set(e)}set(e,n,s){const i=this;function r(a,c,l){const u=La(c);if(!u)throw new Error("header name must be a non-empty string");const h=O.findKey(i,u);(!h||i[h]===void 0||l===!0||l===void 0&&i[h]!==!1)&&(i[h||c]=Zu(a))}const o=(a,c)=>O.forEach(a,(l,u)=>r(l,u,c));return O.isPlainObject(e)||e instanceof this.constructor?o(e,n):O.isString(e)&&(e=e.trim())&&!p6(e)?o(d6(e),n):e!=null&&r(n,e,s),this}get(e,n){if(e=La(e),e){const s=O.findKey(this,e);if(s){const i=this[s];if(!n)return i;if(n===!0)return f6(i);if(O.isFunction(n))return n.call(this,i,s);if(O.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=La(e),e){const s=O.findKey(this,e);return!!(s&&this[s]!==void 0&&(!n||yp(this,this[s],s,n)))}return!1}delete(e,n){const s=this;let i=!1;function r(o){if(o=La(o),o){const a=O.findKey(s,o);a&&(!n||yp(s,s[a],a,n))&&(delete s[a],i=!0)}}return O.isArray(e)?e.forEach(r):r(e),i}clear(e){const n=Object.keys(this);let s=n.length,i=!1;for(;s--;){const r=n[s];(!e||yp(this,this[r],r,e,!0))&&(delete this[r],i=!0)}return i}normalize(e){const n=this,s={};return O.forEach(this,(i,r)=>{const o=O.findKey(s,r);if(o){n[o]=Zu(i),delete n[r];return}const a=e?g6(r):String(r).trim();a!==r&&delete n[r],n[a]=Zu(i),s[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return O.forEach(this,(s,i)=>{s!=null&&s!==!1&&(n[i]=e&&O.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const s=new this(e);return n.forEach(i=>s.set(i)),s}static accessor(e){const s=(this[ew]=this[ew]={accessors:{}}).accessors,i=this.prototype;function r(o){const a=La(o);s[a]||(m6(i,o),s[a]=!0)}return O.isArray(e)?e.forEach(r):r(e),this}}Sf.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);O.reduceDescriptors(Sf.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(s){this[n]=s}}});O.freezeMethods(Sf);const ai=Sf;function bp(t,e){const n=this||hy,s=e||n,i=ai.from(s.headers);let r=s.data;return O.forEach(t,function(a){r=a.call(n,r,i.normalize(),e?e.status:void 0)}),i.normalize(),r}function Dx(t){return!!(t&&t.__CANCEL__)}function Fl(t,e,n){Ve.call(this,t??"canceled",Ve.ERR_CANCELED,e,n),this.name="CanceledError"}O.inherits(Fl,Ve,{__CANCEL__:!0});function _6(t,e,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?t(n):e(new Ve("Request failed with status code "+n.status,[Ve.ERR_BAD_REQUEST,Ve.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const y6=Is.hasStandardBrowserEnv?{write(t,e,n,s,i,r){const o=[t+"="+encodeURIComponent(e)];O.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),O.isString(s)&&o.push("path="+s),O.isString(i)&&o.push("domain="+i),r===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function b6(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function v6(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Ox(t,e){return t&&!b6(e)?v6(t,e):e}const w6=Is.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let s;function i(r){let o=r;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return s=i(window.location.href),function(o){const a=O.isString(o)?i(o):o;return a.protocol===s.protocol&&a.host===s.host}}():function(){return function(){return!0}}();function E6(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function T6(t,e){t=t||10;const n=new Array(t),s=new Array(t);let i=0,r=0,o;return e=e!==void 0?e:1e3,function(c){const l=Date.now(),u=s[r];o||(o=l),n[i]=c,s[i]=l;let h=r,d=0;for(;h!==i;)d+=n[h++],h=h%t;if(i=(i+1)%t,i===r&&(r=(r+1)%t),l-o<e)return;const f=u&&l-u;return f?Math.round(d*1e3/f):void 0}}function tw(t,e){let n=0;const s=T6(50,250);return i=>{const r=i.loaded,o=i.lengthComputable?i.total:void 0,a=r-n,c=s(a),l=r<=o;n=r;const u={loaded:r,total:o,progress:o?r/o:void 0,bytes:a,rate:c||void 0,estimated:c&&o&&l?(o-r)/c:void 0,event:i};u[e?"download":"upload"]=!0,t(u)}}const S6=typeof XMLHttpRequest<"u",I6=S6&&function(t){return new Promise(function(n,s){let i=t.data;const r=ai.from(t.headers).normalize();let{responseType:o,withXSRFToken:a}=t,c;function l(){t.cancelToken&&t.cancelToken.unsubscribe(c),t.signal&&t.signal.removeEventListener("abort",c)}let u;if(O.isFormData(i)){if(Is.hasStandardBrowserEnv||Is.hasStandardBrowserWebWorkerEnv)r.setContentType(!1);else if((u=r.getContentType())!==!1){const[m,..._]=u?u.split(";").map(y=>y.trim()).filter(Boolean):[];r.setContentType([m||"multipart/form-data",..._].join("; "))}}let h=new XMLHttpRequest;if(t.auth){const m=t.auth.username||"",_=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";r.set("Authorization","Basic "+btoa(m+":"+_))}const d=Ox(t.baseURL,t.url);h.open(t.method.toUpperCase(),Cx(d,t.params,t.paramsSerializer),!0),h.timeout=t.timeout;function f(){if(!h)return;const m=ai.from("getAllResponseHeaders"in h&&h.getAllResponseHeaders()),y={data:!o||o==="text"||o==="json"?h.responseText:h.response,status:h.status,statusText:h.statusText,headers:m,config:t,request:h};_6(function(w){n(w),l()},function(w){s(w),l()},y),h=null}if("onloadend"in h?h.onloadend=f:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf("file:")===0)||setTimeout(f)},h.onabort=function(){h&&(s(new Ve("Request aborted",Ve.ECONNABORTED,t,h)),h=null)},h.onerror=function(){s(new Ve("Network Error",Ve.ERR_NETWORK,t,h)),h=null},h.ontimeout=function(){let _=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const y=t.transitional||Ax;t.timeoutErrorMessage&&(_=t.timeoutErrorMessage),s(new Ve(_,y.clarifyTimeoutError?Ve.ETIMEDOUT:Ve.ECONNABORTED,t,h)),h=null},Is.hasStandardBrowserEnv&&(a&&O.isFunction(a)&&(a=a(t)),a||a!==!1&&w6(d))){const m=t.xsrfHeaderName&&t.xsrfCookieName&&y6.read(t.xsrfCookieName);m&&r.set(t.xsrfHeaderName,m)}i===void 0&&r.setContentType(null),"setRequestHeader"in h&&O.forEach(r.toJSON(),function(_,y){h.setRequestHeader(y,_)}),O.isUndefined(t.withCredentials)||(h.withCredentials=!!t.withCredentials),o&&o!=="json"&&(h.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&h.addEventListener("progress",tw(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&h.upload&&h.upload.addEventListener("progress",tw(t.onUploadProgress)),(t.cancelToken||t.signal)&&(c=m=>{h&&(s(!m||m.type?new Fl(null,t,h):m),h.abort(),h=null)},t.cancelToken&&t.cancelToken.subscribe(c),t.signal&&(t.signal.aborted?c():t.signal.addEventListener("abort",c)));const p=E6(d);if(p&&Is.protocols.indexOf(p)===-1){s(new Ve("Unsupported protocol "+p+":",Ve.ERR_BAD_REQUEST,t));return}h.send(i||null)})},Ug={http:Q5,xhr:I6};O.forEach(Ug,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const nw=t=>`- ${t}`,R6=t=>O.isFunction(t)||t===null||t===!1,Mx={getAdapter:t=>{t=O.isArray(t)?t:[t];const{length:e}=t;let n,s;const i={};for(let r=0;r<e;r++){n=t[r];let o;if(s=n,!R6(n)&&(s=Ug[(o=String(n)).toLowerCase()],s===void 0))throw new Ve(`Unknown adapter '${o}'`);if(s)break;i[o||"#"+r]=s}if(!s){const r=Object.entries(i).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=e?r.length>1?`since :
`+r.map(nw).join(`
`):" "+nw(r[0]):"as no adapter specified";throw new Ve("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s},adapters:Ug};function vp(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Fl(null,t)}function sw(t){return vp(t),t.headers=ai.from(t.headers),t.data=bp.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Mx.getAdapter(t.adapter||hy.adapter)(t).then(function(s){return vp(t),s.data=bp.call(t,t.transformResponse,s),s.headers=ai.from(s.headers),s},function(s){return Dx(s)||(vp(t),s&&s.response&&(s.response.data=bp.call(t,t.transformResponse,s.response),s.response.headers=ai.from(s.response.headers))),Promise.reject(s)})}const iw=t=>t instanceof ai?{...t}:t;function da(t,e){e=e||{};const n={};function s(l,u,h){return O.isPlainObject(l)&&O.isPlainObject(u)?O.merge.call({caseless:h},l,u):O.isPlainObject(u)?O.merge({},u):O.isArray(u)?u.slice():u}function i(l,u,h){if(O.isUndefined(u)){if(!O.isUndefined(l))return s(void 0,l,h)}else return s(l,u,h)}function r(l,u){if(!O.isUndefined(u))return s(void 0,u)}function o(l,u){if(O.isUndefined(u)){if(!O.isUndefined(l))return s(void 0,l)}else return s(void 0,u)}function a(l,u,h){if(h in e)return s(l,u);if(h in t)return s(void 0,l)}const c={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(l,u)=>i(iw(l),iw(u),!0)};return O.forEach(Object.keys(Object.assign({},t,e)),function(u){const h=c[u]||i,d=h(t[u],e[u],u);O.isUndefined(d)&&h!==a||(n[u]=d)}),n}const Lx="1.6.8",dy={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{dy[t]=function(s){return typeof s===t||"a"+(e<1?"n ":" ")+t}});const rw={};dy.transitional=function(e,n,s){function i(r,o){return"[Axios v"+Lx+"] Transitional option '"+r+"'"+o+(s?". "+s:"")}return(r,o,a)=>{if(e===!1)throw new Ve(i(o," has been removed"+(n?" in "+n:"")),Ve.ERR_DEPRECATED);return n&&!rw[o]&&(rw[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(r,o,a):!0}};function x6(t,e,n){if(typeof t!="object")throw new Ve("options must be an object",Ve.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let i=s.length;for(;i-- >0;){const r=s[i],o=e[r];if(o){const a=t[r],c=a===void 0||o(a,r,t);if(c!==!0)throw new Ve("option "+r+" must be "+c,Ve.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ve("Unknown option "+r,Ve.ERR_BAD_OPTION)}}const $g={assertOptions:x6,validators:dy},Si=$g.validators;class Gh{constructor(e){this.defaults=e,this.interceptors={request:new Z0,response:new Z0}}async request(e,n){try{return await this._request(e,n)}catch(s){if(s instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const r=i.stack?i.stack.replace(/^.+\n/,""):"";s.stack?r&&!String(s.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+r):s.stack=r}throw s}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=da(this.defaults,n);const{transitional:s,paramsSerializer:i,headers:r}=n;s!==void 0&&$g.assertOptions(s,{silentJSONParsing:Si.transitional(Si.boolean),forcedJSONParsing:Si.transitional(Si.boolean),clarifyTimeoutError:Si.transitional(Si.boolean)},!1),i!=null&&(O.isFunction(i)?n.paramsSerializer={serialize:i}:$g.assertOptions(i,{encode:Si.function,serialize:Si.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=r&&O.merge(r.common,r[n.method]);r&&O.forEach(["delete","get","head","post","put","patch","common"],p=>{delete r[p]}),n.headers=ai.concat(o,r);const a=[];let c=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(c=c&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const l=[];this.interceptors.response.forEach(function(m){l.push(m.fulfilled,m.rejected)});let u,h=0,d;if(!c){const p=[sw.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,l),d=p.length,u=Promise.resolve(n);h<d;)u=u.then(p[h++],p[h++]);return u}d=a.length;let f=n;for(h=0;h<d;){const p=a[h++],m=a[h++];try{f=p(f)}catch(_){m.call(this,_);break}}try{u=sw.call(this,f)}catch(p){return Promise.reject(p)}for(h=0,d=l.length;h<d;)u=u.then(l[h++],l[h++]);return u}getUri(e){e=da(this.defaults,e);const n=Ox(e.baseURL,e.url);return Cx(n,e.params,e.paramsSerializer)}}O.forEach(["delete","get","head","options"],function(e){Gh.prototype[e]=function(n,s){return this.request(da(s||{},{method:e,url:n,data:(s||{}).data}))}});O.forEach(["post","put","patch"],function(e){function n(s){return function(r,o,a){return this.request(da(a||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}Gh.prototype[e]=n(),Gh.prototype[e+"Form"]=n(!0)});const eh=Gh;class fy{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(r){n=r});const s=this;this.promise.then(i=>{if(!s._listeners)return;let r=s._listeners.length;for(;r-- >0;)s._listeners[r](i);s._listeners=null}),this.promise.then=i=>{let r;const o=new Promise(a=>{s.subscribe(a),r=a}).then(i);return o.cancel=function(){s.unsubscribe(r)},o},e(function(r,o,a){s.reason||(s.reason=new Fl(r,o,a),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new fy(function(i){e=i}),cancel:e}}}const C6=fy;function A6(t){return function(n){return t.apply(null,n)}}function k6(t){return O.isObject(t)&&t.isAxiosError===!0}const Hg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Hg).forEach(([t,e])=>{Hg[e]=t});const P6=Hg;function Nx(t){const e=new eh(t),n=mx(eh.prototype.request,e);return O.extend(n,eh.prototype,e,{allOwnKeys:!0}),O.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return Nx(da(t,i))},n}const At=Nx(hy);At.Axios=eh;At.CanceledError=Fl;At.CancelToken=C6;At.isCancel=Dx;At.VERSION=Lx;At.toFormData=Tf;At.AxiosError=Ve;At.Cancel=At.CanceledError;At.all=function(e){return Promise.all(e)};At.spread=A6;At.isAxiosError=k6;At.mergeConfig=da;At.AxiosHeaders=ai;At.formToJSON=t=>Px(O.isHTMLForm(t)?new FormData(t):t);At.getAdapter=Mx.getAdapter;At.HttpStatusCode=P6;At.default=At;const D6="/assets/chefbot-icon-BTOuAu8B.png",O6="/assets/send-icon-Ca7Far_h.png",M6={name:"ChefBot",data(){return{currentMessage:"",messages:[],isTyping:!1}},props:{selectedRecipe:{type:Object,required:!0}},mounted(){console.log(this.selectedRecipe),console.log("mounted");const t=`Welcome to ChefBot! Let's get cooking with your selected recipe: ${this.selectedRecipe.recipe_name}. Do you have any questions?`;this.messages.push({from:"chatGpt",data:t})},methods:{async sendMessage(){const t=this.currentMessage.trim();if(!t)return;this.currentMessage=null,this.messages.push({from:"user",data:t}),this.scrollToBottom(),this.isTyping=!0;const e=this.messages.map(n=>({role:n.from==="user"?"user":"assistant",content:n.data}));await At.post("https://us-central1-pantrypal-e1225.cloudfunctions.net/api/chatbot",{message:t,conversationHistory:e,selectedRecipe:this.selectedRecipe}).then(n=>{this.isTyping=!1,this.messages.push({from:"chatGpt",data:n.data.data}),this.scrollToBottom()})},scrollToBottom(){this.$nextTick(()=>{const t=this.$refs.messageBox;t.scrollTo({top:t.scrollHeight,behavior:"smooth"})})}}},Bl=t=>(Lt("data-v-c01024d7"),t=t(),Nt(),t),L6={class:"chatbox-container"},N6={class:"container"},V6=Bl(()=>g("div",{class:"chefbot-icon-container"},[g("img",{src:D6,height:"85px",width:"85px"})],-1)),F6={class:"messageBox mt-8",ref:"messageBox"},B6={key:0,class:"typing-indicator"},U6=Bl(()=>g("span",null,null,-1)),$6=Bl(()=>g("span",null,null,-1)),H6=Bl(()=>g("span",null,null,-1)),z6=[U6,$6,H6],j6=Bl(()=>g("button",{type:"submit",class:"askButton"},[g("img",{src:O6,height:"20px"})],-1));function W6(t,e,n,s,i,r){return A(),M("div",{class:"popup-container",onMousedown:e[2]||(e[2]=Qe(o=>this.$emit("close"),["self","prevent"]))},[g("div",L6,[g("div",N6,[V6,g("div",F6,[(A(!0),M(_e,null,pt(i.messages,(o,a)=>(A(),M("div",{key:a,class:St(o.from=="user"?"messageFromUser":"messageFromChatGpt")},[g("div",{class:St(o.from=="user"?"userMessageWrapper":"chatGptMessageWrapper")},[g("div",{class:St(o.from=="user"?"userMessageContent":"chatGptMessageContent")},xe(o.data),3)],2)],2))),128)),i.isTyping?(A(),M("div",B6,z6)):we("",!0)],512),g("form",{onSubmit:e[1]||(e[1]=Qe((...o)=>r.sendMessage&&r.sendMessage(...o),["prevent"])),class:"inputContainer"},[ie(g("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>i.currentMessage=o),type:"text",class:"messageInput",placeholder:"Ask me anything..."},null,512),[[Ee,i.currentMessage]]),j6],32)])])],32)}const q6=Be(M6,[["render",W6],["__scopeId","data-v-c01024d7"]]),G6={name:"CircleButton",props:{logo:String}},K6={class:"circle-button"},Y6=["src"];function Q6(t,e,n,s,i,r){return A(),M("div",K6,[g("img",{class:"logo",src:n.logo,alt:"button"},null,8,Y6)])}const Ul=Be(G6,[["render",Q6],["__scopeId","data-v-40d75ded"]]);function wp(t){return t===0?!1:Array.isArray(t)&&t.length===0?!0:!t}function X6(t){return(...e)=>!t(...e)}function J6(t,e){return t===void 0&&(t="undefined"),t===null&&(t="null"),t===!1&&(t="false"),t.toString().toLowerCase().indexOf(e.trim())!==-1}function Vx(t,e,n,s){return e?t.filter(i=>J6(s(i,n),e)).sort((i,r)=>s(i,n).length-s(r,n).length):t}function Z6(t){return t.filter(e=>!e.$isLabel)}function Ep(t,e){return n=>n.reduce((s,i)=>i[t]&&i[t].length?(s.push({$groupLabel:i[e],$isLabel:!0}),s.concat(i[t])):s,[])}function e3(t,e,n,s,i){return r=>r.map(o=>{if(!o[n])return console.warn("Options passed to vue-multiselect do not contain groups, despite the config."),[];const a=Vx(o[n],t,e,i);return a.length?{[s]:o[s],[n]:a}:[]})}const ow=(...t)=>e=>t.reduce((n,s)=>s(n),e);var t3={data(){return{search:"",isOpen:!1,preferredOpenDirection:"below",optimizedHeight:this.maxHeight}},props:{internalSearch:{type:Boolean,default:!0},options:{type:Array,required:!0},multiple:{type:Boolean,default:!1},trackBy:{type:String},label:{type:String},searchable:{type:Boolean,default:!0},clearOnSelect:{type:Boolean,default:!0},hideSelected:{type:Boolean,default:!1},placeholder:{type:String,default:"Select option"},allowEmpty:{type:Boolean,default:!0},resetAfter:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:!0},customLabel:{type:Function,default(t,e){return wp(t)?"":e?t[e]:t}},taggable:{type:Boolean,default:!1},tagPlaceholder:{type:String,default:"Press enter to create a tag"},tagPosition:{type:String,default:"top"},max:{type:[Number,Boolean],default:!1},id:{default:null},optionsLimit:{type:Number,default:1e3},groupValues:{type:String},groupLabel:{type:String},groupSelect:{type:Boolean,default:!1},blockKeys:{type:Array,default(){return[]}},preserveSearch:{type:Boolean,default:!1},preselectFirst:{type:Boolean,default:!1},preventAutofocus:{type:Boolean,default:!1}},mounted(){!this.multiple&&this.max&&console.warn("[Vue-Multiselect warn]: Max prop should not be used when prop Multiple equals false."),this.preselectFirst&&!this.internalValue.length&&this.options.length&&this.select(this.filteredOptions[0])},computed:{internalValue(){return this.modelValue||this.modelValue===0?Array.isArray(this.modelValue)?this.modelValue:[this.modelValue]:[]},filteredOptions(){const t=this.search||"",e=t.toLowerCase().trim();let n=this.options.concat();return this.internalSearch?n=this.groupValues?this.filterAndFlat(n,e,this.label):Vx(n,e,this.label,this.customLabel):n=this.groupValues?Ep(this.groupValues,this.groupLabel)(n):n,n=this.hideSelected?n.filter(X6(this.isSelected)):n,this.taggable&&e.length&&!this.isExistingOption(e)&&(this.tagPosition==="bottom"?n.push({isTag:!0,label:t}):n.unshift({isTag:!0,label:t})),n.slice(0,this.optionsLimit)},valueKeys(){return this.trackBy?this.internalValue.map(t=>t[this.trackBy]):this.internalValue},optionKeys(){return(this.groupValues?this.flatAndStrip(this.options):this.options).map(e=>this.customLabel(e,this.label).toString().toLowerCase())},currentOptionLabel(){return this.multiple?this.searchable?"":this.placeholder:this.internalValue.length?this.getOptionLabel(this.internalValue[0]):this.searchable?"":this.placeholder}},watch:{internalValue:{handler(){this.resetAfter&&this.internalValue.length&&(this.search="",this.$emit("update:modelValue",this.multiple?[]:null))},deep:!0},search(){this.$emit("search-change",this.search)}},emits:["open","search-change","close","select","update:modelValue","remove","tag"],methods:{getValue(){return this.multiple?this.internalValue:this.internalValue.length===0?null:this.internalValue[0]},filterAndFlat(t,e,n){return ow(e3(e,n,this.groupValues,this.groupLabel,this.customLabel),Ep(this.groupValues,this.groupLabel))(t)},flatAndStrip(t){return ow(Ep(this.groupValues,this.groupLabel),Z6)(t)},updateSearch(t){this.search=t},isExistingOption(t){return this.options?this.optionKeys.indexOf(t)>-1:!1},isSelected(t){const e=this.trackBy?t[this.trackBy]:t;return this.valueKeys.indexOf(e)>-1},isOptionDisabled(t){return!!t.$isDisabled},getOptionLabel(t){if(wp(t))return"";if(t.isTag)return t.label;if(t.$isLabel)return t.$groupLabel;const e=this.customLabel(t,this.label);return wp(e)?"":e},select(t,e){if(t.$isLabel&&this.groupSelect){this.selectGroup(t);return}if(!(this.blockKeys.indexOf(e)!==-1||this.disabled||t.$isDisabled||t.$isLabel)&&!(this.max&&this.multiple&&this.internalValue.length===this.max)&&!(e==="Tab"&&!this.pointerDirty)){if(t.isTag)this.$emit("tag",t.label,this.id),this.search="",this.closeOnSelect&&!this.multiple&&this.deactivate();else{if(this.isSelected(t)){e!=="Tab"&&this.removeElement(t);return}this.multiple?this.$emit("update:modelValue",this.internalValue.concat([t])):this.$emit("update:modelValue",t),this.$emit("select",t,this.id),this.clearOnSelect&&(this.search="")}this.closeOnSelect&&this.deactivate()}},selectGroup(t){const e=this.options.find(n=>n[this.groupLabel]===t.$groupLabel);if(e){if(this.wholeGroupSelected(e)){this.$emit("remove",e[this.groupValues],this.id);const n=this.internalValue.filter(s=>e[this.groupValues].indexOf(s)===-1);this.$emit("update:modelValue",n)}else{let n=e[this.groupValues].filter(s=>!(this.isOptionDisabled(s)||this.isSelected(s)));this.max&&n.splice(this.max-this.internalValue.length),this.$emit("select",n,this.id),this.$emit("update:modelValue",this.internalValue.concat(n))}this.closeOnSelect&&this.deactivate()}},wholeGroupSelected(t){return t[this.groupValues].every(e=>this.isSelected(e)||this.isOptionDisabled(e))},wholeGroupDisabled(t){return t[this.groupValues].every(this.isOptionDisabled)},removeElement(t,e=!0){if(this.disabled||t.$isDisabled)return;if(!this.allowEmpty&&this.internalValue.length<=1){this.deactivate();return}const n=typeof t=="object"?this.valueKeys.indexOf(t[this.trackBy]):this.valueKeys.indexOf(t);if(this.multiple){const s=this.internalValue.slice(0,n).concat(this.internalValue.slice(n+1));this.$emit("update:modelValue",s)}else this.$emit("update:modelValue",null);this.$emit("remove",t,this.id),this.closeOnSelect&&e&&this.deactivate()},removeLastElement(){this.blockKeys.indexOf("Delete")===-1&&this.search.length===0&&Array.isArray(this.internalValue)&&this.internalValue.length&&this.removeElement(this.internalValue[this.internalValue.length-1],!1)},activate(){this.isOpen||this.disabled||(this.adjustPosition(),this.groupValues&&this.pointer===0&&this.filteredOptions.length&&(this.pointer=1),this.isOpen=!0,this.searchable?(this.preserveSearch||(this.search=""),this.preventAutofocus||this.$nextTick(()=>this.$refs.search&&this.$refs.search.focus())):this.preventAutofocus||typeof this.$el<"u"&&this.$el.focus(),this.$emit("open",this.id))},deactivate(){this.isOpen&&(this.isOpen=!1,this.searchable?this.$refs.search!==null&&typeof this.$refs.search<"u"&&this.$refs.search.blur():typeof this.$el<"u"&&this.$el.blur(),this.preserveSearch||(this.search=""),this.$emit("close",this.getValue(),this.id))},toggle(){this.isOpen?this.deactivate():this.activate()},adjustPosition(){if(typeof window>"u")return;const t=this.$el.getBoundingClientRect().top,e=window.innerHeight-this.$el.getBoundingClientRect().bottom;e>this.maxHeight||e>t||this.openDirection==="below"||this.openDirection==="bottom"?(this.preferredOpenDirection="below",this.optimizedHeight=Math.min(e-40,this.maxHeight)):(this.preferredOpenDirection="above",this.optimizedHeight=Math.min(t-40,this.maxHeight))}}},n3={data(){return{pointer:0,pointerDirty:!1}},props:{showPointer:{type:Boolean,default:!0},optionHeight:{type:Number,default:40}},computed:{pointerPosition(){return this.pointer*this.optionHeight},visibleElements(){return this.optimizedHeight/this.optionHeight}},watch:{filteredOptions(){this.pointerAdjust()},isOpen(){this.pointerDirty=!1},pointer(){this.$refs.search&&this.$refs.search.setAttribute("aria-activedescendant",this.id+"-"+this.pointer.toString())}},methods:{optionHighlight(t,e){return{"multiselect__option--highlight":t===this.pointer&&this.showPointer,"multiselect__option--selected":this.isSelected(e)}},groupHighlight(t,e){if(!this.groupSelect)return["multiselect__option--disabled",{"multiselect__option--group":e.$isLabel}];const n=this.options.find(s=>s[this.groupLabel]===e.$groupLabel);return n&&!this.wholeGroupDisabled(n)?["multiselect__option--group",{"multiselect__option--highlight":t===this.pointer&&this.showPointer},{"multiselect__option--group-selected":this.wholeGroupSelected(n)}]:"multiselect__option--disabled"},addPointerElement({key:t}="Enter"){this.filteredOptions.length>0&&this.select(this.filteredOptions[this.pointer],t),this.pointerReset()},pointerForward(){this.pointer<this.filteredOptions.length-1&&(this.pointer++,this.$refs.list.scrollTop<=this.pointerPosition-(this.visibleElements-1)*this.optionHeight&&(this.$refs.list.scrollTop=this.pointerPosition-(this.visibleElements-1)*this.optionHeight),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()),this.pointerDirty=!0},pointerBackward(){this.pointer>0?(this.pointer--,this.$refs.list.scrollTop>=this.pointerPosition&&(this.$refs.list.scrollTop=this.pointerPosition),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerBackward()):this.filteredOptions[this.pointer]&&this.filteredOptions[0].$isLabel&&!this.groupSelect&&this.pointerForward(),this.pointerDirty=!0},pointerReset(){this.closeOnSelect&&(this.pointer=0,this.$refs.list&&(this.$refs.list.scrollTop=0))},pointerAdjust(){this.pointer>=this.filteredOptions.length-1&&(this.pointer=this.filteredOptions.length?this.filteredOptions.length-1:0),this.filteredOptions.length>0&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()},pointerSet(t){this.pointer=t,this.pointerDirty=!0}}},$l={name:"vue-multiselect",mixins:[t3,n3],compatConfig:{MODE:3,ATTR_ENUMERATED_COERCION:!1},props:{name:{type:String,default:""},modelValue:{type:null,default(){return[]}},selectLabel:{type:String,default:"Press enter to select"},selectGroupLabel:{type:String,default:"Press enter to select group"},selectedLabel:{type:String,default:"Selected"},deselectLabel:{type:String,default:"Press enter to remove"},deselectGroupLabel:{type:String,default:"Press enter to deselect group"},showLabels:{type:Boolean,default:!0},limit:{type:Number,default:99999},maxHeight:{type:Number,default:300},limitText:{type:Function,default:t=>`and ${t} more`},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},openDirection:{type:String,default:""},showNoOptions:{type:Boolean,default:!0},showNoResults:{type:Boolean,default:!0},tabindex:{type:Number,default:0}},computed:{hasOptionGroup(){return this.groupValues&&this.groupLabel&&this.groupSelect},isSingleLabelVisible(){return(this.singleValue||this.singleValue===0)&&(!this.isOpen||!this.searchable)&&!this.visibleValues.length},isPlaceholderVisible(){return!this.internalValue.length&&(!this.searchable||!this.isOpen)},visibleValues(){return this.multiple?this.internalValue.slice(0,this.limit):[]},singleValue(){return this.internalValue[0]},deselectLabelText(){return this.showLabels?this.deselectLabel:""},deselectGroupLabelText(){return this.showLabels?this.deselectGroupLabel:""},selectLabelText(){return this.showLabels?this.selectLabel:""},selectGroupLabelText(){return this.showLabels?this.selectGroupLabel:""},selectedLabelText(){return this.showLabels?this.selectedLabel:""},inputStyle(){return this.searchable||this.multiple&&this.modelValue&&this.modelValue.length?this.isOpen?{width:"100%"}:{width:"0",position:"absolute",padding:"0"}:""},contentStyle(){return this.options.length?{display:"inline-block"}:{display:"block"}},isAbove(){return this.openDirection==="above"||this.openDirection==="top"?!0:this.openDirection==="below"||this.openDirection==="bottom"?!1:this.preferredOpenDirection==="above"},showSearchInput(){return this.searchable&&(this.hasSingleSelectedSlot&&(this.visibleSingleValue||this.visibleSingleValue===0)?this.isOpen:!0)}}};const s3={ref:"tags",class:"multiselect__tags"},i3={class:"multiselect__tags-wrap"},r3={class:"multiselect__spinner"},o3={key:0},a3={class:"multiselect__option"},c3={class:"multiselect__option"},l3=an("No elements found. Consider changing the search query."),u3={class:"multiselect__option"},h3=an("List is empty.");function d3(t,e,n,s,i,r){return A(),Oe("div",{tabindex:t.searchable?-1:n.tabindex,class:[{"multiselect--active":t.isOpen,"multiselect--disabled":n.disabled,"multiselect--above":r.isAbove,"multiselect--has-options-group":r.hasOptionGroup},"multiselect"],onFocus:e[14]||(e[14]=o=>t.activate()),onBlur:e[15]||(e[15]=o=>t.searchable?!1:t.deactivate()),onKeydown:[e[16]||(e[16]=fs(Qe(o=>t.pointerForward(),["self","prevent"]),["down"])),e[17]||(e[17]=fs(Qe(o=>t.pointerBackward(),["self","prevent"]),["up"]))],onKeypress:e[18]||(e[18]=fs(Qe(o=>t.addPointerElement(o),["stop","self"]),["enter","tab"])),onKeyup:e[19]||(e[19]=fs(o=>t.deactivate(),["esc"])),role:"combobox","aria-owns":"listbox-"+t.id},[en(t.$slots,"caret",{toggle:t.toggle},()=>[W("div",{onMousedown:e[1]||(e[1]=Qe(o=>t.toggle(),["prevent","stop"])),class:"multiselect__select"},null,32)]),en(t.$slots,"clear",{search:t.search}),W("div",s3,[en(t.$slots,"selection",{search:t.search,remove:t.removeElement,values:r.visibleValues,isOpen:t.isOpen},()=>[ie(W("div",i3,[(A(!0),Oe(_e,null,pt(r.visibleValues,(o,a)=>en(t.$slots,"tag",{option:o,search:t.search,remove:t.removeElement},()=>[(A(),Oe("span",{class:"multiselect__tag",key:a},[W("span",{textContent:xe(t.getOptionLabel(o))},null,8,["textContent"]),W("i",{tabindex:"1",onKeypress:fs(Qe(c=>t.removeElement(o),["prevent"]),["enter"]),onMousedown:Qe(c=>t.removeElement(o),["prevent"]),class:"multiselect__tag-icon"},null,40,["onKeypress","onMousedown"])]))])),256))],512),[[ko,r.visibleValues.length>0]]),t.internalValue&&t.internalValue.length>n.limit?en(t.$slots,"limit",{key:0},()=>[W("strong",{class:"multiselect__strong",textContent:xe(n.limitText(t.internalValue.length-n.limit))},null,8,["textContent"])]):we("v-if",!0)]),W(bh,{name:"multiselect__loading"},{default:Qr(()=>[en(t.$slots,"loading",{},()=>[ie(W("div",r3,null,512),[[ko,n.loading]])])]),_:3}),t.searchable?(A(),Oe("input",{key:0,ref:"search",name:n.name,id:t.id,type:"text",autocomplete:"off",spellcheck:!1,placeholder:t.placeholder,style:r.inputStyle,value:t.search,disabled:n.disabled,tabindex:n.tabindex,onInput:e[2]||(e[2]=o=>t.updateSearch(o.target.value)),onFocus:e[3]||(e[3]=Qe(o=>t.activate(),["prevent"])),onBlur:e[4]||(e[4]=Qe(o=>t.deactivate(),["prevent"])),onKeyup:e[5]||(e[5]=fs(o=>t.deactivate(),["esc"])),onKeydown:[e[6]||(e[6]=fs(Qe(o=>t.pointerForward(),["prevent"]),["down"])),e[7]||(e[7]=fs(Qe(o=>t.pointerBackward(),["prevent"]),["up"])),e[9]||(e[9]=fs(Qe(o=>t.removeLastElement(),["stop"]),["delete"]))],onKeypress:e[8]||(e[8]=fs(Qe(o=>t.addPointerElement(o),["prevent","stop","self"]),["enter"])),class:"multiselect__input","aria-controls":"listbox-"+t.id},null,44,["name","id","placeholder","value","disabled","tabindex","aria-controls"])):we("v-if",!0),r.isSingleLabelVisible?(A(),Oe("span",{key:1,class:"multiselect__single",onMousedown:e[10]||(e[10]=Qe((...o)=>t.toggle&&t.toggle(...o),["prevent"]))},[en(t.$slots,"singleLabel",{option:r.singleValue},()=>[an(xe(t.currentOptionLabel),1)])],32)):we("v-if",!0),r.isPlaceholderVisible?(A(),Oe("span",{key:2,class:"multiselect__placeholder",onMousedown:e[11]||(e[11]=Qe((...o)=>t.toggle&&t.toggle(...o),["prevent"]))},[en(t.$slots,"placeholder",{},()=>[an(xe(t.placeholder),1)])],32)):we("v-if",!0)],512),W(bh,{name:"multiselect"},{default:Qr(()=>[ie(W("div",{class:"multiselect__content-wrapper",onFocus:e[12]||(e[12]=(...o)=>t.activate&&t.activate(...o)),tabindex:"-1",onMousedown:e[13]||(e[13]=Qe(()=>{},["prevent"])),style:{maxHeight:t.optimizedHeight+"px"},ref:"list"},[W("ul",{class:"multiselect__content",style:r.contentStyle,role:"listbox",id:"listbox-"+t.id},[en(t.$slots,"beforeList"),t.multiple&&t.max===t.internalValue.length?(A(),Oe("li",o3,[W("span",a3,[en(t.$slots,"maxElements",{},()=>[an("Maximum of "+xe(t.max)+" options selected. First remove a selected option to select another.",1)])])])):we("v-if",!0),!t.max||t.internalValue.length<t.max?(A(!0),Oe(_e,{key:1},pt(t.filteredOptions,(o,a)=>(A(),Oe("li",{class:"multiselect__element",key:a,id:t.id+"-"+a,role:o&&(o.$isLabel||o.$isDisabled)?null:"option"},[o&&(o.$isLabel||o.$isDisabled)?we("v-if",!0):(A(),Oe("span",{key:0,class:[t.optionHighlight(a,o),"multiselect__option"],onClick:Qe(c=>t.select(o),["stop"]),onMouseenter:Qe(c=>t.pointerSet(a),["self"]),"data-select":o&&o.isTag?t.tagPlaceholder:r.selectLabelText,"data-selected":r.selectedLabelText,"data-deselect":r.deselectLabelText},[en(t.$slots,"option",{option:o,search:t.search,index:a},()=>[W("span",null,xe(t.getOptionLabel(o)),1)])],42,["onClick","onMouseenter","data-select","data-selected","data-deselect"])),o&&(o.$isLabel||o.$isDisabled)?(A(),Oe("span",{key:1,"data-select":t.groupSelect&&r.selectGroupLabelText,"data-deselect":t.groupSelect&&r.deselectGroupLabelText,class:[t.groupHighlight(a,o),"multiselect__option"],onMouseenter:Qe(c=>t.groupSelect&&t.pointerSet(a),["self"]),onMousedown:Qe(c=>t.selectGroup(o),["prevent"])},[en(t.$slots,"option",{option:o,search:t.search,index:a},()=>[W("span",null,xe(t.getOptionLabel(o)),1)])],42,["data-select","data-deselect","onMouseenter","onMousedown"])):we("v-if",!0)],8,["id","role"]))),128)):we("v-if",!0),ie(W("li",null,[W("span",c3,[en(t.$slots,"noResult",{search:t.search},()=>[l3])])],512),[[ko,n.showNoResults&&t.filteredOptions.length===0&&t.search&&!n.loading]]),ie(W("li",null,[W("span",u3,[en(t.$slots,"noOptions",{},()=>[h3])])],512),[[ko,n.showNoOptions&&(t.options.length===0||r.hasOptionGroup===!0&&t.filteredOptions.length===0)&&!t.search&&!n.loading]]),en(t.$slots,"afterList")],12,["id"])],36),[[ko,t.isOpen]])]),_:3})],42,["tabindex","aria-owns"])}$l.render=d3;const f3={components:{Multiselect:$l},name:"InputLeftover",setup(){return{toast:bo()}},data(){return{options:[],value:null,dietaryRestrictions:"",ingredients:[{name:"",quantity:""},{name:"",quantity:""}]}},async mounted(){this.options=await _f()},methods:{addIngredient(){this.ingredients.push({name:"",quantity:""})},validateIngredients(){return this.ingredients.every(t=>t.name.trim()&&t.quantity.trim())},removeIngredient(t){this.ingredients.splice(t,1)},generateRecipe(){console.log("Generating recipe..."),console.log(this.value),this.validateIngredients()===!1?this.triggerToast():this.$emit("generate-recipe",{categories:this.value,dietaryRestrictions:this.dietaryRestrictions,ingredients:this.ingredients})},triggerToast(){this.toast.error("Please fill in all leftover names and quantities.",{timeout:2e3,position:"top-center",hideProgressBar:!0})}}},py=t=>(Lt("data-v-b1931c74"),t=t(),Nt(),t),p3={class:"grid-container"},g3={class:"column"},m3=py(()=>g("label",null,"Preferred Cuisines",-1)),_3={class:"dropdown-container"},y3=py(()=>g("label",null,"Dietary Restrictions",-1)),b3={class:"column"},v3={class:"ingredient-container"},w3={class:"one-ingredient-container"},E3=["onUpdate:modelValue"],T3=py(()=>g("label",null,"Quantity",-1)),S3=["onUpdate:modelValue"],I3=["onClick"],R3={class:"button-container"},x3={class:"button-container"};function C3(t,e,n,s,i,r){const o=te("multiselect");return A(),M(_e,null,[g("div",p3,[g("div",g3,[m3,g("div",_3,[W(o,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=a=>i.value=a),options:i.options,multiple:!0,"close-on-select":!1,max:3},null,8,["modelValue","options"])]),y3,ie(g("textarea",{"onUpdate:modelValue":e[1]||(e[1]=a=>i.dietaryRestrictions=a),type:"text",placeholder:"e.g. dairy, nuts",rows:"5"},null,512),[[Ee,i.dietaryRestrictions]])]),g("div",b3,[(A(!0),M(_e,null,pt(i.ingredients,(a,c)=>(A(),M("div",v3,[g("div",w3,[g("label",null,"Name of leftover #"+xe(c+1),1),ie(g("input",{"onUpdate:modelValue":l=>i.ingredients[c].name=l,type:"text",placeholder:"e.g. Chicken",required:""},null,8,E3),[[Ee,i.ingredients[c].name]])]),g("div",null,[T3,ie(g("input",{"onUpdate:modelValue":l=>i.ingredients[c].quantity=l,type:"text",placeholder:"e.g. 100g",required:""},null,8,S3),[[Ee,i.ingredients[c].quantity]])]),g("button",{type:"button",class:"remove-button",onClick:l=>r.removeIngredient(c)}," x ",8,I3)]))),256)),g("div",R3,[g("button",{type:"submit",class:"add-button",onClick:e[2]||(e[2]=(...a)=>r.addIngredient&&r.addIngredient(...a))},"+ ADD MORE")])])]),g("div",x3,[g("button",{type:"submit",class:"generate-button",onClick:e[3]||(e[3]=(...a)=>r.generateRecipe&&r.generateRecipe(...a))}," Generate Recipe ")])],64)}const A3=Be(f3,[["render",C3],["__scopeId","data-v-b1931c74"]]),k3="modulepreload",P3=function(t){return"/"+t},aw={},D3=function(e,n,s){let i=Promise.resolve();if(n&&n.length>0){const r=document.getElementsByTagName("link");i=Promise.all(n.map(o=>{if(o=P3(o),o in aw)return;aw[o]=!0;const a=o.endsWith(".css"),c=a?'[rel="stylesheet"]':"";if(!!s)for(let h=r.length-1;h>=0;h--){const d=r[h];if(d.href===o&&(!a||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${c}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":k3,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((h,d)=>{u.addEventListener("load",h),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${o}`)))})}))}return i.then(()=>e()).catch(r=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r})},O3={data(){return{defaultProfileUrl:"@/assets/profile.svg",profileKey:0}},props:{path:String},async created(){try{this.defaultProfileUrl=(await D3(()=>import("./profile-CucqEQJk.js"),__vite__mapDeps([]))).default}catch(t){console.error("Error loading default profile picture:",t)}},computed:{renderedUrl(){return console.log(this.path),this.path&&this.path.trim()!==""?this.path:this.defaultProfileUrl}},watch:{path(t,e){t!==e&&this.profileKey++}}},M3=["src"];function L3(t,e,n,s,i,r){return A(),M("img",{class:"",src:r.renderedUrl,alt:""},null,8,M3)}const Fx=Be(O3,[["render",L3],["__scopeId","data-v-d63a781f"]]),N3={props:{whichPage:{type:String,required:!0}},components:{ProfileImage:Fx},data(){return{userData:{},showNavbar:!0,lastScrollPosition:0}},mounted(){let t=localStorage.getItem("userData");console.log(t),t&&t!==""&&t!=="undefined"?this.userData=JSON.parse(t):this.fetchUserData(),window.addEventListener("scroll",this.handleScroll)},beforeDestroy(){window.removeEventListener("scroll",this.handleScroll)},watch:{userData:{handler(){this.fetchUserData()},deep:!0}},methods:{goToCommunityPage(){this.$router.push("/community-page")},goToRecipeGenerator(){this.$router.push("/recipe-generator")},goToProfile(){this.$router.push("/profile")},logout(){Z2(Ae).then(()=>{localStorage.clear(),this.$router.push("/")}).catch(t=>{console.error("Logout Error:",t)})},async fetchUserData(){if(Ae.currentUser){const t=await Vt(Ce(Le,"users",Ae.currentUser.uid));this.userData=t.data(),localStorage.setItem("userData",JSON.stringify(this.userData))}},handleScroll(){const t=window.scrollY||document.documentElement.scrollTop;t<0||Math.abs(t-this.lastScrollPosition)<20||(this.showNavbar=t<this.lastScrollPosition,this.lastScrollPosition=t)}}},V3=g("img",{src:Nl,alt:"PantryPal Logo",class:"logo"},null,-1),F3=[V3],B3={key:0,class:"secondContainer"},U3=g("p",{class:"button-text-selected"},"My Feed",-1),$3=[U3],H3=g("p",{class:"button-text"},"Smart Leftovers",-1),z3=[H3],j3={key:1,class:"secondContainer"},W3=g("p",{class:"button-text"},"My Feed",-1),q3=[W3],G3=g("p",{class:"button-text-selected"},"Smart Leftovers",-1),K3=[G3],Y3={key:2,class:"secondContainer"},Q3=g("p",{class:"button-text"},"My Feed",-1),X3=[Q3],J3=g("p",{class:"button-text"},"Smart Leftovers",-1),Z3=[J3],e9={class:"thirdContainer"},t9=g("p",{class:"logOutButton-text"},"Log Out",-1),n9=[t9],s9=g("hr",null,null,-1);function i9(t,e,n,s,i,r){const o=te("ProfileImage");return A(),M("div",{class:St(["topBar",{"topBar--hidden":!i.showNavbar}])},[g("button",{class:"firstContainer",onClick:e[0]||(e[0]=a=>r.goToCommunityPage())},F3),n.whichPage==="feed"?(A(),M("div",B3,[g("button",{class:"custom-button",onClick:e[1]||(e[1]=a=>r.goToCommunityPage())},$3),g("button",{class:"custom-button",onClick:e[2]||(e[2]=a=>r.goToRecipeGenerator())},z3)])):n.whichPage==="generator"?(A(),M("div",j3,[g("button",{class:"custom-button",onClick:e[3]||(e[3]=a=>r.goToCommunityPage())},q3),g("button",{class:"custom-button",onClick:e[4]||(e[4]=a=>r.goToRecipeGenerator())},K3)])):(A(),M("div",Y3,[g("button",{class:"custom-button",onClick:e[5]||(e[5]=a=>r.goToCommunityPage())},X3),g("button",{class:"custom-button",onClick:e[6]||(e[6]=a=>r.goToRecipeGenerator())},Z3)])),g("div",e9,[g("button",{class:"logOutButton",onClick:e[7]||(e[7]=(...a)=>r.logout&&r.logout(...a))},n9),g("button",{type:"button",class:"profileButton",onClick:e[9]||(e[9]=a=>r.goToProfile())},[W(o,{path:t.profilePicUrl||i.userData.profile_img_url,alt:"profile pic",class:"profile",onClick:e[8]||(e[8]=a=>r.goToProfile())},null,8,["path"])])]),s9],2)}const Sa=Be(N3,[["render",i9]]),r9="/assets/recipe-generator-map-Bwcu6ihu.png",o9={name:"Recipe Generator Sidebar",props:{selected:String}},Hl=t=>(Lt("data-v-1e18b1f9"),t=t(),Nt(),t),a9={class:"sidebar"},c9={class:"menu-container"},l9=Hl(()=>g("img",{src:r9,height:"500px"},null,-1)),u9=Hl(()=>g("h3",null,"Input Leftovers",-1)),h9=[u9],d9=Hl(()=>g("h3",null,"Generate Recipe",-1)),f9=[d9],p9=Hl(()=>g("h3",null,"Save Recipe",-1)),g9=[p9],m9=Hl(()=>g("div",null,[g("h3",null,"And Start Cooking!")],-1));function _9(t,e,n,s,i,r){return A(),M("aside",a9,[g("div",c9,[l9,g("div",{class:St(["header",{selected:n.selected==="input"}])},h9,2),g("div",{class:St(["header",{selected:n.selected==="generate"}])},f9,2),g("div",{class:St(["header save",{selected:n.selected==="save"}])},g9,2),m9])])}const y9=Be(o9,[["render",_9],["__scopeId","data-v-1e18b1f9"]]),b9={name:"GenerateErrorModal",props:{isVisible:Boolean},methods:{handleBack(){this.$emit("back")}}},Bx=t=>(Lt("data-v-de519fd0"),t=t(),Nt(),t),v9={key:0,class:"modal-overlay"},w9={class:"modal"},E9=Bx(()=>g("h2",null,"Error",-1)),T9=Bx(()=>g("p",null,"An error occurred while generating the recipe due to inappropriate ingredients. Please try again with edible leftovers.",-1)),S9={class:"buttons"};function I9(t,e,n,s,i,r){return n.isVisible?(A(),M("div",v9,[g("div",w9,[E9,T9,g("div",S9,[g("button",{type:"button",onClick:e[0]||(e[0]=(...o)=>r.handleBack&&r.handleBack(...o))},"Go Back")])])])):we("",!0)}const R9=Be(b9,[["render",I9],["__scopeId","data-v-de519fd0"]]),x9="/assets/loading-BZDBN9Kl.gif",C9={name:"Generator Loading",components:{GenerateErrorModal:R9},data(){return{showErrorModal:!1}},props:{ingredients:Array,categories:Array,dietaryRestrictions:String,prev_recipe_name:{type:String,default:()=>null}},async mounted(){await this.fetchRecipe()},methods:{async fetchRecipe(){const t={ingredients:this.ingredients,categories:this.categories,dietaryRestrictions:this.dietaryRestrictions};this.prev_recipe_name!==null?(t.prev_recipe_name=this.prev_recipe_name,t.first=!1):t.first=!0;try{const e=await At.post("https://us-central1-pantrypal-e1225.cloudfunctions.net/api/initial-recipe",t);e.status===400?this.showErrorModal=!0:this.$emit("recipeGenerated",{generatedRecipe:e.data.content})}catch(e){this.showErrorModal=!0,console.error("Error fetching recipe:",e)}},handleModalClose(){this.showErrorModal=!1,this.$emit("back")}}},gy=t=>(Lt("data-v-d853cb5d"),t=t(),Nt(),t),A9={class:"generate-container"},k9=gy(()=>g("h1",null,"We are cooking up your recipe!",-1)),P9=gy(()=>g("h1",null,"Give us a few seconds...",-1)),D9={class:"ingredient-container"},O9=gy(()=>g("img",{src:x9,height:"40px"},null,-1));function M9(t,e,n,s,i,r){const o=te("GenerateErrorModal");return A(),M("div",A9,[W(o,{isVisible:i.showErrorModal,"onUpdate:isVisible":e[0]||(e[0]=a=>i.showErrorModal=a),onBack:r.handleModalClose},null,8,["isVisible","onBack"]),k9,P9,(A(!0),M(_e,null,pt(n.ingredients,(a,c)=>(A(),M("div",null,[g("div",D9,[g("span",null,xe(n.ingredients[c].name),1),g("span",null,xe(n.ingredients[c].quantity),1)])]))),256)),O9])}const L9=Be(C9,[["render",M9],["__scopeId","data-v-d853cb5d"]]),N9={data(){return{url:"https://via.placeholder.com/140x100"}},props:{path:String,ifCard:Boolean},created(){this.url=this.path}},V9=["src"],F9=["src"];function B9(t,e,n,s,i,r){return n.ifCard?(A(),M("img",{key:0,class:"card",src:i.url,alt:""},null,8,V9)):(A(),M("img",{key:1,class:"window",src:i.url,alt:""},null,8,F9))}const zl=Be(N9,[["render",B9],["__scopeId","data-v-5ff3ff91"]]),U9={props:{recipe:{type:Object,required:!0}},data(){return{recipeIsLiked:!1}},async created(){if(Ae.currentUser){const e=(await Vt(Ce(Le,"users",Ae.currentUser.uid))).data();this.recipeIsLiked=e.liked_recipes.includes(this.recipe.recipe_id)}},methods:{async toggleLikeRecipe(){Ae.currentUser;const t=Ce(Le,"all_recipes",this.recipe.recipe_id);try{if(this.$emit("updateLiked"),this.recipeIsLiked){this.recipe.like_count--,await Vr(t,{...this.recipe,like_count:this.recipe.like_count});const e=Ce(Le,"users",Ae.currentUser.uid),s=(await Vt(Ce(Le,"users",Ae.currentUser.uid))).data();await Vr(e,{...s,liked_recipes:s.liked_recipes.filter(i=>i!==this.recipe.recipe_id)})}else{this.recipe.like_count++,await Vr(t,{...this.recipe,like_count:this.recipe.like_count});const e=Ce(Le,"users",Ae.currentUser.uid),s=(await Vt(Ce(Le,"users",Ae.currentUser.uid))).data();await Vr(e,{...s,liked_recipes:[...s.liked_recipes,this.recipe.recipe_id]})}this.recipeIsLiked=!this.recipeIsLiked}catch(e){console.error("Error toggling recipe like:",e)}}}},$9={class:"like"};function H9(t,e,n,s,i,r){return A(),M("div",$9,[g("button",{class:"like-button",onClick:e[0]||(e[0]=Qe((...o)=>r.toggleLikeRecipe&&r.toggleLikeRecipe(...o),["stop"]))},[g("i",{class:St(["fa",["fa-thumbs-up",{liked:!i.recipeIsLiked}]]),"aria-hidden":"true"},null,2)]),g("span",null,xe(n.recipe.like_count),1)])}const Ux=Be(U9,[["render",H9],["__scopeId","data-v-9169d626"]]),z9={props:{onConfirm:{type:Function,required:!0},onCancel:{type:Function,required:!0}}},j9={class:"confirm-toast"},W9=g("p",null,"Are you sure you want to delete this recipe?",-1),q9={class:"button-container"};function G9(t,e,n,s,i,r){return A(),M("div",j9,[W9,g("div",q9,[g("button",{class:"cancel-delete-button",onClick:e[0]||(e[0]=(...o)=>n.onCancel&&n.onCancel(...o))},"Cancel"),g("button",{class:"confirm-delete-button",onClick:e[1]||(e[1]=(...o)=>n.onConfirm&&n.onConfirm(...o))},"Delete")])])}const K9=Be(z9,[["render",G9]]),$x="/assets/warning-icon-BnsmZdPz.png",Y9={components:{RecipeImage:zl,LikeButton:Ux},data(){return{username:"",cookingTimeInHrAndMin:"",user:Ae.currentUser}},props:{selectedRecipe:{type:Object,required:!0},selectedIngredients:{type:Array,required:!0},likeExists:{type:Boolean},disabled:{type:Boolean}},setup(){return{toast:bo({position:"top-center",timeout:!1,hideProgressBar:!0,closeButton:!1})}},mounted(){this.fetchRecipeUsernameAndCookingTime()},methods:{async fetchRecipeUsernameAndCookingTime(){const t=SR(Ms(Le,"users"),IR("user_id","==",this.selectedRecipe.user_id)),e=await Wr(t);if(!e.empty){const n=e.docs[0].data();this.username=n.username}this.calculateCookingTime()},calculateCookingTime(){const t=this.selectedRecipe.cook_time,e=Math.floor(t/60),n=t%60;let s="";e>0&&(s+=`${e}h`),n>0&&(s+=`${n}mins`),this.cookingTimeInHrAndMin=s||"0mins"},togglePublishToCommunity(){this.$emit("togglePublishToCommunity",this.selectedRecipe.community)},edit(){this.$router.push({name:"RecipeEdit",params:{id:this.selectedRecipe.recipe_id}})},confirmDelete(){this.toast.warning({component:K9,props:{onConfirm:()=>this.deleteRecipe(),onCancel:()=>this.toast.clear()},position:"top-center",timeout:!1,hideProgressBar:!0,closeButton:!1})},async deleteRecipe(){try{console.log("Deleting from all_recipes");const t=Ce(Le,"all_recipes",this.selectedRecipe.recipe_id);await pU(t),console.log("Fetching categories"),(await Wr(Ms(Le,"categories"))).forEach(i=>{const r=i.data();this.selectedRecipe.categories.includes(r.category_name)&&In(i.ref,{recipes:Qu(this.selectedRecipe.recipe_id)})}),console.log("Updating user cookbook");const n=Ce(Le,"users",this.selectedRecipe.user_id);await In(n,{my_cookbook:Qu(this.selectedRecipe.recipe_id)}),console.log("Fetching users to update liked recipes"),(await Wr(Ms(Le,"users"))).forEach(i=>{i.data().liked_recipes.includes(this.selectedRecipe.recipe_id)&&In(i.ref,{liked_recipes:Qu(this.selectedRecipe.recipe_id)})}),console.log("success"),this.toast.success("Recipe deleted successfully!",{timeout:2e3,position:"top-center",hideProgressBar:!0}),this.$router.push("/community-page")}catch(t){this.toast.error("Failed to delete recipe: "+t.message,{position:"top-center",hideProgressBar:!0})}},goBack(){this.likeExists?this.$router.push("/community-page"):location.reload()}}},Gn=t=>(Lt("data-v-1ee2adf6"),t=t(),Nt(),t),Q9=Gn(()=>g("i",{class:"fas fa-arrow-left"},null,-1)),X9={class:"horizontalRow"},J9={class:"first"},Z9={key:0,class:"switch-container"},eH={class:"switch"},tH=["disabled"],nH=Gn(()=>g("span",{class:"slider"},null,-1)),sH=Gn(()=>g("label",{for:"publishToCommunity"},"Publish to Community",-1)),iH={class:"second"},rH={class:"title-row"},oH={key:0,class:"warning"},aH=Gn(()=>g("img",{clas:"warning-logo",src:$x,height:"16px"},null,-1)),cH=Gn(()=>g("span",null,"This recipe is AI-generated and PantryPal has not verified it for accuracy and safety.",-1)),lH=[aH,cH],uH={key:1,class:"warning"},hH=Gn(()=>g("img",{clas:"warning-logo",src:$x,height:"16px"},null,-1)),dH=Gn(()=>g("span",null,"This recipe has been edited since its previous revision.",-1)),fH=[hH,dH],pH={key:0},gH={key:1},mH={class:"description"},_H={class:"serving-size-cooking-time"},yH=Gn(()=>g("b",null,"SERVING SIZE:",-1)),bH=Gn(()=>g("b",null,"COOK TIME:",-1)),vH={class:"allergens-container"},wH=Gn(()=>g("p",null,[g("b",null,"CONTAINS:")],-1)),EH={key:0},TH={class:"horizontalRow"},SH={class:"first"},IH={class:"recipe-section"},RH=Gn(()=>g("h3",null,"Ingredients:",-1)),xH={class:"checkbox-list"},CH=["id","onUpdate:modelValue"],AH=["for"],kH={class:"second"},PH={class:"recipe-section"},DH=Gn(()=>g("h3",null,"Directions:",-1)),OH={key:0,class:"button-container"};function MH(t,e,n,s,i,r){const o=te("RecipeImage"),a=te("LikeButton");return A(),M(_e,null,[g("button",{class:"back-button",onClick:e[0]||(e[0]=(...c)=>r.goBack&&r.goBack(...c))},[Q9,an(" Back ")]),g("div",X9,[g("div",J9,[W(o,{path:n.selectedRecipe.recipe_img_url,ifCard:!1},null,8,["path"]),n.likeExists?we("",!0):(A(),M("div",Z9,[g("label",eH,[ie(g("input",{type:"checkbox",id:"publishToCommunity","onUpdate:modelValue":e[1]||(e[1]=c=>n.selectedRecipe.community=c),onChange:e[2]||(e[2]=(...c)=>r.togglePublishToCommunity&&r.togglePublishToCommunity(...c)),disabled:n.disabled},null,40,tH),[[Dc,n.selectedRecipe.community]]),nH]),sH]))]),g("div",iH,[g("div",rH,[g("h1",null,xe(n.selectedRecipe.recipe_name),1),n.likeExists?(A(),Oe(a,{key:0,recipe:n.selectedRecipe},null,8,["recipe"])):we("",!0)]),n.selectedRecipe.AIgenerated?(A(),M("div",oH,lH)):we("",!0),n.selectedRecipe.editted?(A(),M("div",uH,fH)):we("",!0),g("p",null,[n.likeExists?(A(),M("i",pH," By @"+xe(i.username)+", "+xe(new Date(n.selectedRecipe.created_date.seconds*1e3).toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"numeric"})),1)):(A(),M("i",gH," By @"+xe(i.username)+", "+xe(new Date(n.selectedRecipe.created_date).toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"numeric"})),1))]),g("p",mH,xe(n.selectedRecipe.description),1),g("p",_H,[yH,an(" "+xe(n.selectedRecipe.serving_size)+" | ",1),bH,an(" "+xe(i.cookingTimeInHrAndMin),1)]),g("span",vH,[wH,(A(!0),M(_e,null,pt(n.selectedRecipe.allergens,(c,l)=>(A(),M(_e,{key:l},[g("span",null,xe(c),1),l<n.selectedRecipe.allergens.length-1?(A(),M("p",EH,",")):we("",!0)],64))),128))]),(A(!0),M(_e,null,pt(n.selectedRecipe.categories,(c,l)=>(A(),M("span",{key:l,class:"category-bubble"},xe(c),1))),128))])]),g("div",TH,[g("div",SH,[g("div",IH,[RH,g("ul",xH,[(A(!0),M(_e,null,pt(n.selectedRecipe.ingredients,(c,l)=>(A(),M("li",{key:l},[n.likeExists?we("",!0):ie((A(),M("input",{key:0,type:"checkbox",id:"ingredient"+l,"onUpdate:modelValue":u=>n.selectedIngredients[l]=u},null,8,CH)),[[Dc,n.selectedIngredients[l]]]),g("label",{for:"ingredient"+l},xe(c),9,AH)]))),128))])])]),g("div",kH,[g("div",PH,[DH,g("ol",null,[(A(!0),M(_e,null,pt(n.selectedRecipe.directions,(c,l)=>(A(),M("li",{key:l},xe(l+1)+". "+xe(c),1))),128))])]),i.user&&i.user.uid===n.selectedRecipe.user_id&&n.likeExists?(A(),M("div",OH,[g("button",{class:"edit-recipe-button",onClick:e[3]||(e[3]=(...c)=>r.edit&&r.edit(...c))},"Edit Recipe"),g("button",{class:"delete-recipe-button",onClick:e[4]||(e[4]=(...c)=>r.confirmDelete&&r.confirmDelete(...c))}," Delete Recipe ")])):we("",!0)])])],64)}const Hx=Be(Y9,[["render",MH],["__scopeId","data-v-1ee2adf6"]]),LH={name:"SaveRecipeButton",props:{disabled:Boolean},methods:{submitRecipe(){this.$emit("save-recipe")}}},NH=["disabled"];function VH(t,e,n,s,i,r){return A(),M("button",{class:"save-recipe-button",onClick:e[0]||(e[0]=(...o)=>r.submitRecipe&&r.submitRecipe(...o)),disabled:n.disabled}," Save Recipe ",8,NH)}const If=Be(LH,[["render",VH],["__scopeId","data-v-ee7f9c86"]]);let mu;const FH=new Uint8Array(16);function BH(){if(!mu&&(mu=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!mu))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return mu(FH)}const qt=[];for(let t=0;t<256;++t)qt.push((t+256).toString(16).slice(1));function UH(t,e=0){return qt[t[e+0]]+qt[t[e+1]]+qt[t[e+2]]+qt[t[e+3]]+"-"+qt[t[e+4]]+qt[t[e+5]]+"-"+qt[t[e+6]]+qt[t[e+7]]+"-"+qt[t[e+8]]+qt[t[e+9]]+"-"+qt[t[e+10]]+qt[t[e+11]]+qt[t[e+12]]+qt[t[e+13]]+qt[t[e+14]]+qt[t[e+15]]}const $H=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),cw={randomUUID:$H};function zx(t,e,n){if(cw.randomUUID&&!e&&!t)return cw.randomUUID();t=t||{};const s=t.random||(t.rng||BH)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=s[i];return e}return UH(s)}const Tp=ua(rr),HH={name:"Recipe Generator",components:{ChefBot:q6,CircleButton:Ul,InputLeftover:A3,TopBar:Sa,RecipeGeneratorSidebar:y9,GenerateLoading:L9,RecipeDetails:Hx,SaveRecipeButton:If},setup(){return{toast:bo()}},data(){return{showChefBot:!1,selected:"input",categories:null,dietaryRestrictions:"",ingredients:[],recipe:{},selectedIngredients:[],prev_recipe_name:null,disabled:!1}},methods:{toggleChefBot(){this.showChefBot=!this.showChefBot},regenerateRecipe(){this.disabled=!1,this.selected="generate"},handleBack(){this.selected="input"},generateRecipe(t){this.categories=t.categories,this.dietaryRestrictions=t.dietaryRestrictions,this.ingredients=t.ingredients,this.selected="generate",console.log(this.categories),console.log(this.dietaryRestrictions)},recipeGenerated(t){console.log("recipegenerated :)"),console.log(t.generatedRecipe);try{this.recipe=t.generatedRecipe;const e=Ae.currentUser;let n=e?e.uid:"chefbot";this.recipe.user_id=n,this.recipe.created_date=new Date,this.prev_recipe_name=this.recipe.recipe_name,this.recipe.community=!1,this.recipe.AIgenerated=!0,this.selectedIngredients=this.recipe.ingredients.map(()=>!1);let s=[];this.recipe.ingredients.forEach((i,r)=>{for(let o=0;o<this.ingredients.length;o++){const a=this.ingredients[o].name;if(i.toLowerCase().includes(a.toLowerCase())){this.selectedIngredients[r]=!0,s.push(a.toLowerCase());break}}}),this.recipe.leftovers=s,console.log(this.recipe.leftovers),this.selected="save",console.log(this.recipe),console.log(typeof this.recipe)}catch(e){console.error("Error parsing JSON:",e)}},async submitRecipe(){this.disabled=!0;const t=zx().toString();this.recipe.like_count=0,this.recipe.recipe_id=t,console.log(this.recipe);try{const e=await this.saveDalleImageToFirebase(this.recipe.recipe_img_url,this.recipe.recipe_id);this.recipe.recipe_img_url=e}catch{console.error("Error converting Dall-e")}try{const e=await Vr(Ce(Tp,"all_recipes",t),this.recipe);await In(Ce(Tp,"users",this.recipe.user_id),{my_cookbook:Qc(this.recipe.recipe_id)}),this.recipe.categories&&this.recipe.categories.forEach(n=>In(Ce(Tp,"categories",n),{recipes:Qc(this.recipe.recipe_id)})),this.triggerToast()}catch(e){console.error("Error adding document:",e)}},async saveDalleImageToFirebase(t,e){try{const n=await this.fetchImageAsBlob(t),s=await this.uploadImageToFirebase(n,e);return console.log("Image uploaded to Firebase:",s),s}catch(n){throw console.error("Error saving Dalle image to Firebase:",n),n}},async fetchImageAsBlob(t){const e=await fetch(`https://us-central1-pantrypal-e1225.cloudfunctions.net/api/fetch-image?url=${encodeURIComponent(t)}`);if(!e.ok)throw new Error(`Network response was not ok for URL: ${t}`);return await e.blob()},async uploadImageToFirebase(t,e){return new Promise((n,s)=>{const i=gf(mf,`recipeImg/${e}`),r=ff(i,t);r.on("state_changed",o=>{const a=o.bytesTransferred/o.totalBytes*100;console.log("Upload is "+a+"% done")},o=>{console.error("Upload failed",o),s(o)},()=>{pf(r.snapshot.ref).then(o=>{console.log("File available at",o),n(o)}).catch(o=>{console.error("Failed to get download URL",o),s(o)})})})},triggerToast(){this.toast.success("Recipe saved successfully!",{position:"top-center",timeout:2e3,closeOnClick:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0})},togglePublishToCommunity(t){this.recipe.community=t}}},zH={class:"recipeGenerator"},jH={class:"content-container"},WH={class:"view-container"},qH={key:2,class:"recipe-details-container"},GH={class:"button-container"};function KH(t,e,n,s,i,r){const o=te("TopBar"),a=te("RecipeGeneratorSidebar"),c=te("InputLeftover"),l=te("GenerateLoading"),u=te("RecipeDetails"),h=te("CircleButton"),d=te("ChefBot"),f=te("SaveRecipeButton");return A(),M("div",zH,[W(o,{whichPage:"generator"}),g("div",jH,[W(a,{selected:i.selected},null,8,["selected"]),g("div",WH,[i.selected==="input"?(A(),Oe(c,{key:0,onGenerateRecipe:r.generateRecipe},null,8,["onGenerateRecipe"])):we("",!0),i.selected==="generate"?(A(),Oe(l,{key:1,ingredients:i.ingredients,categories:i.categories,dietaryRestrictions:i.dietaryRestrictions,prev_recipe_name:i.prev_recipe_name,onRecipeGenerated:r.recipeGenerated,onBack:r.handleBack},null,8,["ingredients","categories","dietaryRestrictions","prev_recipe_name","onRecipeGenerated","onBack"])):we("",!0),i.selected==="save"?(A(),M("div",qH,[W(u,{selectedRecipe:i.recipe,selectedIngredients:i.selectedIngredients,likeExists:!1,disabled:i.disabled},null,8,["selectedRecipe","selectedIngredients","disabled"]),W(h,{logo:"./chefbot-button.png",onClick:r.toggleChefBot},null,8,["onClick"]),ie((A(),Oe(d,{key:t.componentKey,selectedRecipe:i.recipe,onClose:e[0]||(e[0]=p=>i.showChefBot=!1),onTogglePublishToCommunity:r.togglePublishToCommunity},null,8,["selectedRecipe","onTogglePublishToCommunity"])),[[ko,i.showChefBot]]),g("div",GH,[W(f,{onSaveRecipe:r.submitRecipe,disabled:i.disabled},null,8,["onSaveRecipe","disabled"]),g("button",{onClick:e[1]||(e[1]=(...p)=>r.regenerateRecipe&&r.regenerateRecipe(...p)),class:"reloadButton"},"Regenerate")])])):we("",!0)])])])}const YH=Be(HH,[["render",KH],["__scopeId","data-v-ee294d0e"]]),QH={components:{RecipeImage:zl,LikeButton:Ux},props:{recipe:{type:Object,required:!0}},data(){return{recipeIsLiked:!1,userName:""}},async created(){if(Ae.currentUser){const e=(await Vt(Ce(Le,"users",Ae.currentUser.uid))).data();this.recipeIsLiked=e.liked_recipes.includes(this.recipe.recipe_id);const n=SR(Ms(Le,"users"),IR("user_id","==",this.recipe.user_id)),s=await Wr(n);if(!s.empty){const i=s.docs[0].data();this.userName=i.username}}},methods:{toggleRecipeDetails(){this.$router.push({name:"RecipeDetailsPage",params:{id:this.recipe.recipe_id}})},updateLiked(){this.$emit("updateLiked")}}},XH={class:"recipe-image"},JH={class:"recipe-details"},ZH={class:"recipe-name-container"},ez={class:"recipe-name"},tz={class:"info"},nz={class:"bottomRow"},sz={class:"user-id"},iz={class:"like"};function rz(t,e,n,s,i,r){const o=te("RecipeImage"),a=te("LikeButton");return A(),M("div",{class:"recipe-card",onClick:e[0]||(e[0]=(...c)=>r.toggleRecipeDetails&&r.toggleRecipeDetails(...c))},[g("div",XH,[W(o,{path:n.recipe.recipe_img_url,ifCard:!0},null,8,["path"])]),g("div",JH,[g("div",ZH,[g("text",ez,xe(n.recipe.recipe_name),1)]),g("div",tz,[(A(!0),M(_e,null,pt(n.recipe.categories,(c,l)=>(A(),M("span",{key:l,class:"category-bubble"},xe(c),1))),128))]),g("div",nz,[g("div",sz,[g("p",null,"@"+xe(i.userName),1)]),g("div",iz,[W(a,{recipe:n.recipe,onUpdateLiked:r.updateLiked},null,8,["recipe","onUpdateLiked"])])])])])}const my=Be(QH,[["render",rz],["__scopeId","data-v-5567a87f"]]),oz={data(){return{selectedOption:{name:""},showMenu:!1,placeholderText:"Please select an item"}},props:{options:{type:[Array,Object]},selected:{},placeholder:[String],closeOnOutsideClick:{type:[Boolean],default:!0}},mounted(){this.selectedOption=this.selected,this.placeholder&&(this.placeholderText=this.placeholder),this.closeOnOutsideClick&&document.addEventListener("click",this.clickHandler)},beforeDestroy(){document.removeEventListener("click",this.clickHandler)},methods:{updateOption(t){this.selectedOption=t,this.showMenu=!1,this.$emit("updateOption",this.selectedOption)},toggleMenu(){this.showMenu=!this.showMenu},clickHandler(t){const{target:e}=t,{$el:n}=this;n.contains(e)||(this.showMenu=!1)}}},az={class:"btn-group"},cz=g("span",{class:"caret"},null,-1),lz=g("span",{class:"caret"},null,-1),uz={key:2,class:"dropdown-menu"},hz=["onClick"];function dz(t,e,n,s,i,r){return A(),M("div",az,[i.selectedOption.name!==void 0?(A(),M("li",{key:0,onClick:e[0]||(e[0]=o=>r.toggleMenu()),class:"dropdown-toggle"},[an(xe(i.selectedOption.name)+" ",1),cz])):we("",!0),i.selectedOption.name===void 0?(A(),M("li",{key:1,onClick:e[1]||(e[1]=o=>r.toggleMenu()),class:"dropdown-toggle dropdown-toggle-placeholder"},[an(xe(i.placeholderText)+" ",1),lz])):we("",!0),i.showMenu?(A(),M("ul",uz,[(A(!0),M(_e,null,pt(n.options,(o,a)=>(A(),M("li",{key:a},[g("a",{href:"javascript:void(0)",onClick:c=>r.updateOption(o)},xe(o.name),9,hz)]))),128))])):we("",!0)])}const _y=Be(oz,[["render",dz]]),fz="/assets/image-upload-bKK7DP3T.png",pz={components:{Multiselect:$l,SaveRecipeButton:If},data(){return{recipeData:{imageSrc:null,publish_to_community:!1,recipe_name:"",serving_size:"",description:"",allergen_info:"",allergens:[],cook_time_hours:"",cook_time_minutes:"",categories:[],category:[],ingredients:[""],directions:[{stepNumber:1,text:""}]}}},async created(){this.recipeData.categories=await _f()},methods:{chooseFile(){this.$refs.fileInput.click()},handleImageUpload(t){const e=t.target.files[0];if(e&&(e.type==="image/jpeg"||e.type==="image/png")){const n=new FileReader;n.onload=s=>{this.recipeData.imageSrc=s.target.result},n.readAsDataURL(e)}else alert("Please select a JPG or PNG image file.")},addIngredient(){this.recipeData.ingredients.push("")},removeIngredient(t){this.recipeData.ingredients.splice(t,1)},addDirection(){const t=this.recipeData.directions.length+1;this.recipeData.directions.push({stepNumber:t,text:""})},removeDirection(t){this.recipeData.directions.splice(t,1);for(let e=t;e<this.recipeData.directions.length;e++)this.recipeData.directions[e].stepNumber--},close(){this.$emit("close")},validateForm(){return!this.recipeData.recipe_name||!this.recipeData.description||!this.recipeData.allergen_info||!this.recipeData.imageSrc||!this.recipeData.cook_time_hours||!this.recipeData.cook_time_minutes||!this.recipeData.category.length||!this.recipeData.serving_size||!this.recipeData.ingredients.length||!this.recipeData.directions.length?(alert("Please fill in all fields properly before submitting the recipe."),!1):!0},submitRecipe(){if(!this.validateForm())return;const t=Ae.currentUser,e=t?t.uid:"",n={allergens:this.recipeData.allergen_info.split(",").map(r=>r.trim()),categories:this.recipeData.category,community:this.recipeData.publish_to_community,cook_time:parseInt(this.recipeData.cook_time_hours)*60+parseInt(this.recipeData.cook_time_minutes),created_date:new Date,description:this.recipeData.description,directions:this.recipeData.directions.map(r=>r.text),ingredients:this.recipeData.ingredients,like_count:0,recipe_id:"",recipe_img_url:this.recipeData.imageSrc,recipe_name:this.recipeData.recipe_name,serving_size:parseInt(this.recipeData.serving_size),user_id:e},s=ua(rr),i=Ms(s,"all_recipes");gU(i,n).then(r=>{console.log("Document written with ID: ",r.id),In(r,{recipe_id:r.id}).then(()=>{console.log("Document updated successfully."),this.$emit("close"),this.$router.push("/community-page")}).catch(o=>{console.error("Error updating document: ",o)})}).catch(r=>{console.error("Error adding document: ",r)})}}},Kn=t=>(Lt("data-v-49840b6d"),t=t(),Nt(),t),gz={class:"create-recipe-modal"},mz={class:"recipe-form"},_z={class:"recipe-form-content"},yz={class:"createRecipeRow"},bz={class:"first1"},vz=["src"],wz={class:"switch-container"},Ez={class:"switch"},Tz=Kn(()=>g("span",{class:"slider"},null,-1)),Sz=Kn(()=>g("label",{for:"publishToCommunity"},"Publish to Community",-1)),Iz={class:"first2"},Rz=Kn(()=>g("label",{for:"recipeName"},"Title:",-1)),xz=Kn(()=>g("label",{for:"recipeDescription"},"Description:",-1)),Cz=Kn(()=>g("label",{for:"allergenInfo"},"Allergen Information:",-1)),Az={class:"additional-info"},kz={class:"input-group"},Pz=Kn(()=>g("label",{for:"cookTime"},"Cook Time:",-1)),Dz={class:"time-input-group"},Oz=Kn(()=>g("span",null,"hours",-1)),Mz=Kn(()=>g("span",null,"mins",-1)),Lz={class:"input-group"},Nz=Kn(()=>g("label",{for:"category"},"Category:",-1)),Vz={class:"input-group"},Fz=Kn(()=>g("label",{for:"servingSize"},"Serving Size:",-1)),Bz={class:"createRecipeRow"},Uz={class:"second1"},$z={class:"recipe-section"},Hz=Kn(()=>g("label",{for:"ingredients"},"Ingredients:",-1)),zz={class:"ingredients-container"},jz=["onUpdate:modelValue"],Wz=["onClick"],qz={class:"button-group"},Gz={class:"second2"},Kz={class:"recipe-section"},Yz=Kn(()=>g("label",{for:"directions"},"Directions:",-1)),Qz={class:"directions-container"},Xz=["for"],Jz={class:"direction-input"},Zz=["id","onUpdate:modelValue"],ej=["onClick"],tj={class:"button-group"},nj={class:"button-container"};function sj(t,e,n,s,i,r){const o=te("multiselect"),a=te("save-recipe-button");return A(),M("div",gz,[g("div",mz,[g("div",_z,[g("div",yz,[g("div",bz,[g("input",{type:"file",id:"recipeImage",ref:"fileInput",style:{display:"none"},onChange:e[0]||(e[0]=(...c)=>r.handleImageUpload&&r.handleImageUpload(...c))},null,544),g("div",{class:"plus-icon-container",onClick:e[1]||(e[1]=(...c)=>r.chooseFile&&r.chooseFile(...c))},[i.recipeData.imageSrc?(A(),M("img",{key:0,src:i.recipeData.imageSrc,class:"uploaded-image",alt:"Uploaded Image"},null,8,vz)):we("",!0),g("img",{class:St([{hidden:i.recipeData.imageSrc},"upload-image"]),src:fz,alt:"Upload Image"},null,2)]),g("div",wz,[g("label",Ez,[ie(g("input",{type:"checkbox",id:"publishToCommunity","onUpdate:modelValue":e[2]||(e[2]=c=>i.recipeData.publish_to_community=c)},null,512),[[Dc,i.recipeData.publish_to_community]]),Tz]),Sz])]),g("div",Iz,[Rz,ie(g("input",{type:"text",id:"recipeName","onUpdate:modelValue":e[3]||(e[3]=c=>i.recipeData.recipe_name=c)},null,512),[[Ee,i.recipeData.recipe_name]]),xz,ie(g("textarea",{id:"recipeDescription","onUpdate:modelValue":e[4]||(e[4]=c=>i.recipeData.description=c)},null,512),[[Ee,i.recipeData.description]]),Cz,ie(g("textarea",{id:"allergenInfo","onUpdate:modelValue":e[5]||(e[5]=c=>i.recipeData.allergen_info=c)},null,512),[[Ee,i.recipeData.allergen_info]]),g("div",Az,[g("div",kz,[Pz,g("div",Dz,[ie(g("input",{type:"number",id:"cookTimeHours","onUpdate:modelValue":e[6]||(e[6]=c=>i.recipeData.cook_time_hours=c),min:"0"},null,512),[[Ee,i.recipeData.cook_time_hours]]),Oz,ie(g("input",{type:"number",id:"cookTimeMins","onUpdate:modelValue":e[7]||(e[7]=c=>i.recipeData.cook_time_minutes=c),min:"0"},null,512),[[Ee,i.recipeData.cook_time_minutes]]),Mz])]),g("div",Lz,[Nz,W(o,{modelValue:i.recipeData.category,"onUpdate:modelValue":e[8]||(e[8]=c=>i.recipeData.category=c),options:i.recipeData.categories,multiple:!0,"close-on-select":!1},null,8,["modelValue","options"])]),g("div",Vz,[Fz,ie(g("input",{type:"number",id:"servingSize","onUpdate:modelValue":e[9]||(e[9]=c=>i.recipeData.serving_size=c),min:"0"},null,512),[[Ee,i.recipeData.serving_size]])])])])]),g("div",Bz,[g("div",Uz,[g("div",$z,[Hz,g("div",zz,[(A(!0),M(_e,null,pt(i.recipeData.ingredients,(c,l)=>(A(),M("div",{key:l,class:"ingredient-input"},[ie(g("input",{type:"text","onUpdate:modelValue":u=>i.recipeData.ingredients[l]=u,placeholder:"e.g. 10g Apple"},null,8,jz),[[Ee,i.recipeData.ingredients[l]]]),g("button",{class:"remove-button",onClick:u=>r.removeIngredient(l)}," x ",8,Wz)]))),128)),g("div",qz,[g("button",{class:"add-more-button",onClick:e[10]||(e[10]=(...c)=>r.addIngredient&&r.addIngredient(...c))}," + ADD MORE ")])])])]),g("div",Gz,[g("div",Kz,[Yz,g("div",Qz,[(A(!0),M(_e,null,pt(i.recipeData.directions,(c,l)=>(A(),M("div",{key:l,class:"direction-step"},[g("label",{for:"direction"+c.stepNumber},"Step "+xe(c.stepNumber),9,Xz),g("div",Jz,[ie(g("textarea",{id:"direction"+c.stepNumber,"onUpdate:modelValue":u=>c.text=u},null,8,Zz),[[Ee,c.text]]),g("button",{class:"remove-button",onClick:u=>r.removeDirection(l)}," x ",8,ej)])]))),128)),g("div",tj,[g("button",{class:"add-more-button",onClick:e[11]||(e[11]=(...c)=>r.addDirection&&r.addDirection(...c))}," + ADD MORE ")])])])])])]),g("div",nj,[g("button",{class:"cancel-button",onClick:e[12]||(e[12]=(...c)=>r.close&&r.close(...c))},"Cancel"),W(a,{onSaveRecipe:r.submitRecipe},null,8,["onSaveRecipe"])])])])}const ij=Be(pz,[["render",sj],["__scopeId","data-v-49840b6d"]]),rj={components:{}},oj={class:"recipe-card"},aj=mP('<div class="recipe-image" data-v-b026639d></div><div class="recipe-details" data-v-b026639d><div class="recipe-name-container" data-v-b026639d></div><div class="info" data-v-b026639d></div><div class="bottomRow" data-v-b026639d></div></div>',2),cj=[aj];function lj(t,e,n,s,i,r){return A(),M("div",oj,cj)}const jx=Be(rj,[["render",lj],["__scopeId","data-v-b026639d"]]),yy="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M15.7955%2015.8111L21%2021M18%2010.5C18%2014.6421%2014.6421%2018%2010.5%2018C6.35786%2018%203%2014.6421%203%2010.5C3%206.35786%206.35786%203%2010.5%203C14.6421%203%2018%206.35786%2018%2010.5Z'%20stroke='%23000000'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",uj={components:{RecipeCard:my,TopBar:Sa,dropdown:_y,RecipeImage:zl,CreateRecipe:ij,CircleButton:Ul,RecipeCardPlaceholder:jx},data(){return{arrayOfCategories:[{name:"All"},{name:"Asian"},{name:"Western"},{name:"Local Delights"},{name:"Healthy Choices"},{name:"Fast Food"},{name:"Desserts and Snacks"},{name:"Beverages"},{name:"Specialty"},{name:"Breakfast and Brunch"},{name:"Late-night Eats"},{name:"Others"}],category:{},arrayOfSorts:[{name:"Most Recent"},{name:"Most Liked"}],sort:{},allCommunityRecipes:[],filteredRecipes:[],filteredRecipesByName:[],allRecipes:[],searchQuery:"",selectedRecipe:null,selectedIngredients:[],showCreateRecipe:!1,showBackToTop:!1,isDataLoaded:!1,showTopBar:!0,lastScrollPosition:0}},watch:{searchQuery(t){this.filterByNameOrIngredients(),localStorage.setItem("searchQuery",t)}},created(){this.fetchRecipes(),this.router=rb,window.addEventListener("scroll",this.handleScroll)},destroyed(){window.removeEventListener("scroll",this.handleScroll)},mounted(){const t=localStorage.getItem("searchQuery");t&&(this.searchQuery=t),window.addEventListener("scroll",this.handleScroll)},methods:{async fetchRecipes(){(await Wr(Ms(Le,"all_recipes"))).forEach(e=>{this.allRecipes.push(e.data()),e.data().community&&e.data().community===!0&&(this.allCommunityRecipes.push(e.data()),this.filteredRecipes.push(e.data()),this.filteredRecipesByName.push(e.data()))}),this.filterByNameOrIngredients(),this.sortByMostRecent(this.allCommunityRecipes),this.sortByMostRecent(this.filteredRecipes),this.sortByMostRecent(this.filteredRecipesByName),this.isDataLoaded=!0},toggleCreateRecipe(){this.showCreateRecipe=!this.showCreateRecipe,this.showCreateRecipe&&this.router.push("/create-recipe")},toggleRecipeDetails(t){t.showDetails=!t.showDetails,this.selectedRecipe=t},filterByNameOrIngredients(){this.filteredRecipes=this.allCommunityRecipes.filter(t=>{const e=t.recipe_name.toLowerCase().includes(this.searchQuery.toLowerCase());let n=!1;t.ingredients.forEach(i=>{i.toLowerCase().includes(this.searchQuery.toLowerCase())&&(n=!0)});const s=this.category.name==="All"||Object.keys(this.category).length===0||t.categories.includes(this.category.name);return(e||n)&&s}),this.filteredRecipesByName=this.filteredRecipes},async filterUsingCategory(t){if(this.category=t,this.category.name=="All"&&this.searchQuery=="")this.filteredRecipes=this.allCommunityRecipes,this.filteredRecipesByName=this.allCommunityRecipes,this.filteredRecipes=this.filteredRecipesByName;else if(this.category.name=="All")this.filteredRecipes=this.filteredRecipesByName;else{const n=(await Vt(Ce(Le,"categories",t.name))).data().recipes;this.filteredRecipes=this.filteredRecipesByName,this.filteredRecipes=this.filteredRecipesByName.filter(s=>n.includes(s.recipe_id))}},filterUsingSort(t){this.sort=t,t.name=="Most Recent"?this.sortByMostRecent(this.filteredRecipes):this.sortByMostLiked()},sortByMostRecent(t){t=t.sort((e,n)=>n.created_date.toDate()-e.created_date.toDate())},sortByMostLiked(){this.filteredRecipes=this.filteredRecipes.sort((t,e)=>e.like_count-t.like_count)},handleScroll(){this.showBackToTop=window.scrollY>250;const t=window.scrollY||document.documentElement.scrollTop;t<0||(t>this.lastScrollPosition?this.showTopBar=!1:this.showTopBar=!0,this.lastScrollPosition=t)},scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}}},by=t=>(Lt("data-v-762d86c0"),t=t(),Nt(),t),hj={class:"community-page"},dj={class:"filters"},fj={class:"filterBar"},pj={class:"search-bar"},gj=by(()=>g("img",{class:"search-button",src:yy,alt:"Search Icon"},null,-1)),mj=by(()=>g("div",{class:"category-bar-text"},[g("p",null,"Category:")],-1)),_j={class:"category-bar-dropdown"},yj={class:"dropdown-container"},bj=by(()=>g("div",{class:"sortby-bar-text"},[g("p",null,"Sort By:")],-1)),vj={class:"category-bar-dropdown"},wj={class:"dropdown-container"},Ej={class:"main-content"},Tj={key:0,class:"recipe-list"},Sj={key:1,class:"recipe-list"},Ij={class:"NoSearchResultsContainer"},Rj={key:0};function xj(t,e,n,s,i,r){const o=te("TopBar"),a=te("dropdown"),c=te("RecipeCardPlaceholder"),l=te("RecipeCard"),u=te("CircleButton");return A(),M(_e,null,[W(o,{whichPage:"feed",showNavbar:i.showTopBar},null,8,["showNavbar"]),g("div",hj,[g("div",dj,[g("div",fj,[g("div",pj,[ie(g("input",{type:"text",class:"search-input",placeholder:"Search name or ingredients...","onUpdate:modelValue":e[0]||(e[0]=h=>i.searchQuery=h)},null,512),[[Ee,i.searchQuery]]),gj]),mj,g("div",_j,[g("div",yj,[W(a,{class:"my-dropdown-toggle",options:i.arrayOfCategories,selected:i.category,placeholder:"All",closeOnOutsideClick:!0,onUpdateOption:r.filterUsingCategory},null,8,["options","selected","onUpdateOption"])])]),bj,g("div",vj,[g("div",wj,[W(a,{class:"my-dropdown-toggle",options:i.arrayOfSorts,selected:i.sort,placeholder:"Most Recent",closeOnOutsideClick:!0,onUpdateOption:r.filterUsingSort},null,8,["options","selected","onUpdateOption"])])])])]),g("div",Ej,[i.isDataLoaded?(A(),M("div",Sj,[(A(!0),M(_e,null,pt(i.filteredRecipes,h=>(A(),Oe(l,{key:h.recipe_id,recipe:h,onToggle:r.toggleRecipeDetails},null,8,["recipe","onToggle"]))),128))])):(A(),M("div",Tj,[(A(),M(_e,null,pt(15,h=>W(c,{key:h})),64))])),g("div",Ij,[this.filteredRecipes.length==0?(A(),M("text",Rj,"No Search Results Found")):we("",!0)]),W(u,{logo:"./plus-icon.png",onClick:r.toggleCreateRecipe},null,8,["onClick"])])])],64)}const Cj=Be(uj,[["render",xj],["__scopeId","data-v-762d86c0"]]),Aj={components:{TopBar:Sa,RecipeDetails:Hx},props:{id:String},data(){return{selectedRecipe:null,selectedIngredients:[]}},created(){this.fetchRecipeDetails()},methods:{async fetchRecipeDetails(){const t=await Vt(Ce(Le,"all_recipes",this.id));this.selectedRecipe=t.data()}}},kj={class:"main-recipe-details"},Pj={class:"recipe-content"},Dj=g("br",null,null,-1),Oj=g("br",null,null,-1),Mj=g("br",null,null,-1),Lj=g("br",null,null,-1),Nj=g("br",null,null,-1);function Vj(t,e,n,s,i,r){const o=te("TopBar"),a=te("RecipeDetails");return A(),M("div",kj,[W(o,{whichPage:"feed"}),g("div",Pj,[Dj,Oj,Mj,Lj,Nj,i.selectedRecipe?(A(),Oe(a,{key:0,selectedRecipe:i.selectedRecipe,selectedIngredients:i.selectedIngredients,likeExists:!0},null,8,["selectedRecipe","selectedIngredients"])):we("",!0)])])}const Fj=Be(Aj,[["render",Vj]]),Bj={name:"NotFoundPage",methods:{goToLanding(){this.$router.push("/")}}},Rf=t=>(Lt("data-v-7a831135"),t=t(),Nt(),t),Uj={id:"app"},$j=Rf(()=>g("div",{class:"top-bar"},[g("img",{src:Nl,alt:"PantryPal Logo",class:"logo"})],-1)),Hj=Rf(()=>g("div",{class:"separator"},null,-1)),zj={class:"gallery-container"},jj=Rf(()=>g("header",null,[g("h1",null,"404 Error: Page Not Found")],-1)),Wj=Rf(()=>g("p",null,"The above link does not exist, click below to go back to landing page.",-1));function qj(t,e,n,s,i,r){return A(),M("div",Uj,[$j,Hj,g("div",zj,[jj,g("div",null,[Wj,g("button",{class:"btn-login",onClick:e[0]||(e[0]=(...o)=>r.goToLanding&&r.goToLanding(...o))},"Landing Page")])])])}const Gj=Be(Bj,[["render",qj],["__scopeId","data-v-7a831135"]]),Kj="/assets/profile-plus-icon-uthoFEDF.png",Yj={name:"Profile Sidebar",data(){return{profilePicUrl:""}},props:{selected:"",userData:{}},components:{ProfileImage:Fx},emits:["selected"],watch:{profilePicUrl(t){localStorage.setItem("userData",JSON.stringify({...this.userData,profile_img_url:t}))}},methods:{selectedSettings(){this.$emit("selected","settings")},selectedLikedRecipes(){this.$emit("selected","likedRecipes")},selectedMyCookbook(){this.$emit("selected","myCookbook")},selectedStats(){this.$emit("selected","stats")},triggerFileInput(){this.$refs.fileInput.click()},onFileSelected(t){const e=t.target.files[0];e&&this.uploadImageToFirebase(e)},async uploadImageToFirebase(t){const e=gf(mf,`profileImg/${t.name}`),n=ff(e,t);n.on("state_changed",s=>{s.bytesTransferred/s.totalBytes*100},s=>{console.error("Upload failed",s)},()=>{console.log("HI"),pf(n.snapshot.ref).then(s=>{console.log("File available at",s),this.profilePicUrl=s,this.$emit("refreshProfilePic",s),this.updateUserProfilePic(s)}).catch(s=>{console.error("Failed to get download URL",s)})})},async updateUserProfilePic(t){const e=Ae.currentUser,n=Ce(Le,"users",e.uid);await In(n,{profile_img_url:t})}}},js=t=>(Lt("data-v-21edb59f"),t=t(),Nt(),t),Qj={class:"sidebar"},Xj={class:"profile-container"},Jj=js(()=>g("br",null,null,-1)),Zj=js(()=>g("br",null,null,-1)),eW=js(()=>g("br",null,null,-1)),tW=js(()=>g("br",null,null,-1)),nW=js(()=>g("br",null,null,-1)),sW={class:"profile-pic"},iW={key:0},rW=js(()=>g("img",{class:"plus-icon",src:Kj,height:"10px"},null,-1)),oW=[rW],aW={class:"personal-details"},cW={class:"user-name"},lW={class:"created-number"},uW={class:"profile-options"},hW=js(()=>g("h3",null,"Settings",-1)),dW=[hW],fW=js(()=>g("h3",null,"Liked Recipes",-1)),pW=[fW],gW=js(()=>g("h3",null,"My Cookbook",-1)),mW=[gW],_W=js(()=>g("h3",null,"User Stats",-1)),yW=[_W];function bW(t,e,n,s,i,r){var a;const o=te("ProfileImage");return A(),M("aside",Qj,[g("div",Xj,[Jj,Zj,eW,tW,nW,g("div",sW,[W(o,{path:i.profilePicUrl||n.userData.profile_img_url,alt:"profile pic",class:"profile"},null,8,["path"]),g("input",{type:"file",onChange:e[0]||(e[0]=(...c)=>r.onFileSelected&&r.onFileSelected(...c)),hidden:"",ref:"fileInput"},null,544),n.selected==="settings"?(A(),M("div",iW,[g("button",{onClick:e[1]||(e[1]=(...c)=>r.triggerFileInput&&r.triggerFileInput(...c))},oW)])):we("",!0)]),g("div",aW,[g("h4",cW,"@"+xe(n.userData.username),1),g("h4",lW," Created "+xe(((a=n.userData.my_cookbook)==null?void 0:a.length)||0)+" recipes ",1)]),g("div",uW,[g("div",{class:St(["header",{selected:n.selected==="settings"}]),onClick:e[2]||(e[2]=c=>r.selectedSettings())},dW,2),g("div",{class:St(["header",{selected:n.selected==="likedRecipes"}]),onClick:e[3]||(e[3]=c=>r.selectedLikedRecipes())},pW,2),g("div",{class:St(["header",{selected:n.selected==="myCookbook"}]),onClick:e[4]||(e[4]=c=>r.selectedMyCookbook())},mW,2),g("div",{class:St(["header",{selected:n.selected==="stats"}]),onClick:e[5]||(e[5]=c=>r.selectedStats())},yW,2)])])])}const vW=Be(Yj,[["render",bW],["__scopeId","data-v-21edb59f"]]),wW={name:"PasswordConfirmationModal",props:{isVisible:Boolean},data(){return{currentPassword:""}},watch:{isVisible(t){t||(this.currentPassword="")}},methods:{closeModal(){this.$emit("update:isVisible",!1)},confirmPassword(){this.$emit("confirm",this.currentPassword),this.closeModal()}}},Wx=t=>(Lt("data-v-71fed75f"),t=t(),Nt(),t),EW={key:0,class:"modal-overlay"},TW={class:"modal"},SW=Wx(()=>g("h2",null,"Confirm Current Password",-1)),IW={class:"buttons"},RW=Wx(()=>g("button",{type:"submit"},"Confirm",-1));function xW(t,e,n,s,i,r){return n.isVisible?(A(),M("div",EW,[g("div",TW,[SW,g("form",{onSubmit:e[2]||(e[2]=Qe((...o)=>r.confirmPassword&&r.confirmPassword(...o),["prevent"]))},[ie(g("input",{type:"password","onUpdate:modelValue":e[0]||(e[0]=o=>i.currentPassword=o),placeholder:"Enter current password",class:"input-field"},null,512),[[Ee,i.currentPassword]]),g("div",IW,[RW,g("button",{type:"button",onClick:e[1]||(e[1]=(...o)=>r.closeModal&&r.closeModal(...o))},"Cancel")])],32)])])):we("",!0)}const CW=Be(wW,[["render",xW],["__scopeId","data-v-71fed75f"]]),AW={name:"UserProfileEdit",props:{userData:{type:Object,required:!0}},components:{PasswordConfirmationModal:CW},data(){return{email:"",username:"",newPassword:"",confirmPassword:"",user:null,showPasswordModal:!1,passwordUpdateComplete:!0}},created(){this.email=this.userData.email,this.username=this.userData.username,this.toast=bo()},methods:{async saveChangesDetails(){try{const t=Ae.currentUser;if(t){const e=Ce(Le,"users",t.uid);await In(e,{username:this.username}),this.triggerToastUserComplete(),this.$emit("userData",{...this.userData,username:this.username})}}catch(t){console.error("Error updating profile:",t)}},async saveChangesPassword(){try{const t=Ae.currentUser;if(await this.changePassword(this.newPassword),this.newPassword&&!this.passwordUpdateComplete){this.triggerToastPasswordComplete();const e=Ce(Le,"users",t.uid);await In(e,{username:this.username});return}}catch(t){console.error("Error updating profile:",t)}},async changePassword(){if(this.newPassword!==this.confirmPassword){this.triggerToastPasswordNoMatch();return}if(!this.newPassword||!this.confirmPassword){this.triggerToastPasswordTooShort();return}this.showPasswordModal=!0,this.passwordUpdateComplete=!1},async handlePasswordConfirm(t){try{const e=Ae.currentUser,n=fo.credential(e.email,t);await W2(e,n),await K2(e,this.newPassword),this.passwordUpdateComplete=!0,this.triggerToastPasswordSuccess(),this.newPassword="",this.confirmPassword=""}catch(e){console.error("Error updating password:",e),this.triggerToastPasswordFailed(),this.passwordUpdateComplete=!0}},triggerToastUserComplete(){this.toast("Profile updated successfully.",{timeout:2e3,position:"top-center",hideProgressBar:!0})},triggerToastPasswordNoMatch(){this.toast.error("Passwords do not match.",{timeout:2e3,position:"top-center",hideProgressBar:!0})},triggerToastPasswordTooShort(){this.toast.error("Password fields cannot be empty",{timeout:2e3,position:"top-center",hideProgressBar:!0})},triggerToastPasswordComplete(){this.toast("Please complete the password update process first.",{timeout:2e3,position:"top-center",hideProgressBar:!0})},triggerToastPasswordSuccess(){this.toast("Password updated successfully.",{timeout:2e3,position:"top-center",hideProgressBar:!0})},triggerToastPasswordFailed(){this.toast.error("Invalid Credentials",{timeout:2e3,position:"top-center",hideProgressBar:!0})}}},dr=t=>(Lt("data-v-3fc76cc4"),t=t(),Nt(),t),kW={class:"user-profile-edit"},PW=dr(()=>g("h2",null,"Edit User Details",-1)),DW={class:"form-group"},OW=dr(()=>g("label",{for:"email"},"Email Address",-1)),MW={class:"form-group"},LW=dr(()=>g("label",{for:"username"},"Username",-1)),NW=dr(()=>g("div",{class:"save-changes-btn-container"},[g("button",{type:"submit",class:"save-changes-btn"},"Save Changes")],-1)),VW=dr(()=>g("h2",null,"Change Password",-1)),FW={class:"form-group"},BW=dr(()=>g("label",{for:"newPassword"},"New Password",-1)),UW={class:"form-group"},$W=dr(()=>g("label",{for:"confirmPassword"},"Confirm New Password",-1)),HW=dr(()=>g("div",{class:"save-changes-btn-container"},[g("button",{type:"submit",class:"save-changes-btn"},"Save Changes")],-1));function zW(t,e,n,s,i,r){const o=te("PasswordConfirmationModal");return A(),M("div",kW,[W(o,{isVisible:i.showPasswordModal,"onUpdate:isVisible":e[0]||(e[0]=a=>i.showPasswordModal=a),onConfirm:r.handlePasswordConfirm},null,8,["isVisible","onConfirm"]),PW,g("form",{onSubmit:e[3]||(e[3]=Qe((...a)=>r.saveChangesDetails&&r.saveChangesDetails(...a),["prevent"])),class:"user-form first-form"},[g("div",DW,[OW,ie(g("input",{type:"email",id:"email","onUpdate:modelValue":e[1]||(e[1]=a=>i.email=a),disabled:"",class:"input-field non-editable"},null,512),[[Ee,i.email]])]),g("div",MW,[LW,ie(g("input",{type:"text",id:"username","onUpdate:modelValue":e[2]||(e[2]=a=>i.username=a),class:"input-field"},null,512),[[Ee,i.username]])]),NW],32),VW,g("form",{onSubmit:e[6]||(e[6]=Qe((...a)=>r.saveChangesPassword&&r.saveChangesPassword(...a),["prevent"])),class:"user-form second-form"},[g("div",FW,[BW,ie(g("input",{type:"password",id:"newPassword","onUpdate:modelValue":e[4]||(e[4]=a=>i.newPassword=a),class:"input-field"},null,512),[[Ee,i.newPassword]])]),g("div",UW,[$W,ie(g("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":e[5]||(e[5]=a=>i.confirmPassword=a),class:"input-field"},null,512),[[Ee,i.confirmPassword]])]),HW],32)])}const jW=Be(AW,[["render",zW],["__scopeId","data-v-3fc76cc4"]]),WW={components:{RecipeCard:my,dropdown:_y,RecipeImage:zl,RecipeCardPlaceholder:jx},props:{userData:{type:Object,required:!0}},data(){return{arrayOfCategories:[{name:"All",id:"00"},{name:"Asian",id:"01"},{name:"Western",id:"02"},{name:"Local Delights",id:"03"},{name:"Healthy Choices",id:"04"},{name:"Fast Food",id:"05"},{name:"Desserts and Snacks",id:"06"},{name:"Beverages",id:"07"},{name:"Specialty",id:"08"},{name:"Breakfast and Brunch",id:"09"},{name:"Late-night Eats",id:"10"},{name:"Others",id:"11"}],category:{},arrayOfSorts:[{name:"Most Recent"},{name:"Most Liked"}],sort:{},allLikedRecipes:[],filteredRecipes:[],filteredRecipesByName:[],allRecipes:[],searchQuery:"",selectedRecipe:null,selectedIngredients:[],showCreateRecipe:!1,isDataLoaded:!1}},watch:{searchQuery(t){this.filterByNameOrIngredients()}},created(){if(this.fetchRecipes(),this.userData&&this.userData.uid){const t=Ce(Le,"users",this.userData.uid);mU(t,e=>{if(e.exists()){const n=e.data().liked_recipes||[];this.updateLikedRecipes(n)}})}},methods:{updateLiked(){this.$emit("updateLiked")},async fetchRecipes(){if(Ae.currentUser){const e=(await Vt(Ce(Le,"users",Ae.currentUser.uid))).data().liked_recipes||[];this.updateLikedRecipes(e)}else{const t=this.userData.liked_recipes||[];this.updateLikedRecipes(t)}},filterByNameOrIngredients(){this.filteredRecipes=this.allLikedRecipes.filter(t=>{const e=t.recipe_name.toLowerCase().includes(this.searchQuery.toLowerCase());let n=!1;t.ingredients.forEach(i=>{i.toLowerCase().includes(this.searchQuery.toLowerCase())&&(n=!0)});const s=this.category.name==="All"||Object.keys(this.category).length===0||t.categories.includes(this.category.name);return(e||n)&&s}),this.filteredRecipesByName=this.filteredRecipes},async filterUsingCategory(t){if(this.category=t,this.category.name=="All"&&this.searchQuery=="")this.filteredRecipes=this.allLikedRecipes,this.filteredRecipesByName=this.allLikedRecipes,this.filteredRecipes=this.filteredRecipesByName;else if(this.category.name=="All")this.filteredRecipes=this.filteredRecipesByName;else{const n=(await Vt(Ce(Le,"categories",t.name))).data().recipes;this.filteredRecipes=this.filteredRecipesByName,this.filteredRecipes=this.filteredRecipesByName.filter(s=>n.includes(s.recipe_id))}},filterUsingSort(t){this.sort=t,t.name=="Most Recent"?this.sortByMostRecent():this.sortByMostLiked()},sortAllByMostRecent(){this.allLikedRecipes=this.allLikedRecipes.sort((t,e)=>e.created_date.toDate()-t.created_date.toDate())},sortByMostRecent(){this.filteredRecipes=this.filteredRecipes.sort((t,e)=>e.created_date.toDate()-t.created_date.toDate())},sortByMostLiked(){this.filteredRecipes=this.filteredRecipes.sort((t,e)=>e.like_count-t.like_count)},async updateLikedRecipes(t){try{this.filteredRecipes=[],this.allLikedRecipes=[];const e=t.map(async n=>{const s=await Vt(Ce(Le,"all_recipes",n));if(s.exists()){const i=s.data();this.allLikedRecipes.some(r=>r.recipe_id===i.recipe_id)||this.allLikedRecipes.push(i),this.filteredRecipes.some(r=>r.recipe_id===i.recipe_id)||(this.filteredRecipes.push(i),this.filteredRecipesByName=this.filteredRecipes)}else console.error(`Recipe with ID ${n} does not exist.`)});await Promise.all(e),this.isDataLoaded=!0}catch(e){console.error("Error fetching recipes:",e)}}}},vy=t=>(Lt("data-v-d079ca8a"),t=t(),Nt(),t),qW={class:"liked-recipes-page"},GW={class:"filterBar"},KW={class:"search-bar"},YW=vy(()=>g("img",{class:"search-button",src:yy,alt:"Search Icon"},null,-1)),QW=vy(()=>g("div",{class:"category-bar-text"},[g("p",null,"Category:")],-1)),XW={class:"category-bar-dropdown"},JW={class:"dropdown-container"},ZW=vy(()=>g("div",{class:"sortby-bar-text"},[g("p",null,"Sort By:")],-1)),e8={class:"category-bar-dropdown"},t8={class:"dropdown-container"},n8={class:"recipe-container"},s8={key:0,class:"recipe-list"},i8={class:"recipe-list"},r8={class:"NoSearchResultsContainer"},o8={key:0};function a8(t,e,n,s,i,r){const o=te("dropdown"),a=te("RecipeCardPlaceholder"),c=te("RecipeCard");return A(),M("div",qW,[g("div",GW,[g("div",KW,[ie(g("input",{type:"text",class:"search-input",placeholder:"Search name or ingredients...","onUpdate:modelValue":e[0]||(e[0]=l=>i.searchQuery=l)},null,512),[[Ee,i.searchQuery]]),YW]),QW,g("div",XW,[g("div",JW,[W(o,{class:"my-dropdown-toggle",options:i.arrayOfCategories,selected:i.category,placeholder:"All",closeOnOutsideClick:!0,onUpdateOption:r.filterUsingCategory},null,8,["options","selected","onUpdateOption"])])]),ZW,g("div",e8,[g("div",t8,[W(o,{class:"my-dropdown-toggle",options:i.arrayOfSorts,selected:i.sort,placeholder:"Most Recent",closeOnOutsideClick:!0,onUpdateOption:r.filterUsingSort},null,8,["options","selected","onUpdateOption"])])])]),g("div",n8,[i.isDataLoaded?we("",!0):(A(),M("div",s8,[(A(),M(_e,null,pt(15,l=>W(a,{key:l})),64))])),g("div",i8,[(A(!0),M(_e,null,pt(i.filteredRecipes,l=>(A(),Oe(c,{key:l.recipe_id,recipe:l,onUpdateLiked:r.updateLiked},null,8,["recipe","onUpdateLiked"]))),128))])]),g("div",r8,[this.filteredRecipes.length==0&&i.isDataLoaded?(A(),M("text",o8,"No Search Results Found")):we("",!0)])])}const c8=Be(WW,[["render",a8],["__scopeId","data-v-d079ca8a"]]),l8={components:{RecipeCard:my,dropdown:_y,RecipeImage:zl,CircleButton:Ul},props:{userData:{type:Object,required:!0}},data(){return{arrayOfCategories:[{name:"All",id:"00"},{name:"Asian",id:"01"},{name:"Western",id:"02"},{name:"Local Delights",id:"03"},{name:"Healthy Choices",id:"04"},{name:"Fast Food",id:"05"},{name:"Desserts and Snacks",id:"06"},{name:"Beverages",id:"07"},{name:"Specialty",id:"08"},{name:"Breakfast and Brunch",id:"09"},{name:"Late-night Eats",id:"10"},{name:"Others",id:"11"}],category:{},arrayOfSorts:[{name:"Most Recent"},{name:"Most Liked"}],sort:{},myRecipes:[],filteredRecipes:[],filteredRecipesByName:[],searchQuery:"",selectedRecipe:null,selectedIngredients:[],showCreateRecipe:!1,isDataLoaded:!1}},watch:{searchQuery(t){this.filterByNameOrIngredients()}},created(){this.fetchRecipes(),this.sortAllByMostRecent()},methods:{toggleCreateRecipe(){this.$router.push("/create-recipe")},updateLiked(){this.$emit("updateLiked")},async fetchRecipes(){console.log(this.userData);const t=this.userData.my_cookbook||[];this.filteredRecipes=await Promise.all(t.map(async e=>(await Vt(Ce(Le,"all_recipes",e))).data())),this.myRecipes=this.filteredRecipes,this.filteredRecipesByName=this.filteredRecipes,this.sortByMostRecent(),this.sortAllByMostRecent(),this.isDataLoaded=!0},filterByNameOrIngredients(){this.filteredRecipes=this.myRecipes.filter(t=>{const e=t.recipe_name.toLowerCase().includes(this.searchQuery.toLowerCase());let n=!1;t.ingredients.forEach(i=>{i.toLowerCase().includes(this.searchQuery.toLowerCase())&&(n=!0)});const s=this.category.name==="All"||Object.keys(this.category).length===0||t.categories.includes(this.category.name);return(e||n)&&s}),this.filteredRecipesByName=this.filteredRecipes},async filterUsingCategory(t){if(this.category=t,this.category.name=="All"&&this.searchQuery=="")this.filteredRecipes=this.myRecipes,this.filteredRecipesByName=this.myRecipes;else if(this.category.name=="All")this.filteredRecipes=this.filteredRecipesByName;else{const n=(await Vt(Ce(Le,"categories",t.name))).data().recipes;this.filteredRecipes=this.filteredRecipesByName,this.filteredRecipes=this.filteredRecipesByName.filter(s=>n.includes(s.recipe_id))}},filterUsingSort(t){this.sort=t,t.name=="Most Recent"?this.sortByMostRecent():this.sortByMostLiked()},sortAllByMostRecent(){this.allLikedRecipes=this.myRecipes.sort((t,e)=>e.created_date.toDate()-t.created_date.toDate())},sortByMostRecent(){this.filteredRecipes=this.filteredRecipes.sort((t,e)=>e.created_date.toDate()-t.created_date.toDate())},sortByMostLiked(){this.filteredRecipes=this.filteredRecipes.sort((t,e)=>e.like_count-t.like_count)}}},wy=t=>(Lt("data-v-ab1e4a0d"),t=t(),Nt(),t),u8={class:"myCookbook-page"},h8={class:"filterBar"},d8={class:"search-bar"},f8=wy(()=>g("img",{class:"search-button",src:yy,alt:"Search Icon"},null,-1)),p8=wy(()=>g("div",{class:"category-bar-text"},[g("p",null,"Category:")],-1)),g8={class:"category-bar-dropdown"},m8={class:"dropdown-container"},_8=wy(()=>g("div",{class:"sortby-bar-text"},[g("p",null,"Sort By:")],-1)),y8={class:"category-bar-dropdown"},b8={class:"dropdown-container"},v8={class:"recipe-container"},w8={class:"recipe-list"},E8={class:"NoSearchResultsContainer"},T8={key:0};function S8(t,e,n,s,i,r){const o=te("dropdown"),a=te("RecipeCard"),c=te("CircleButton");return A(),M("div",u8,[g("div",h8,[g("div",d8,[ie(g("input",{type:"text",class:"search-input",placeholder:"Search name or ingredients...","onUpdate:modelValue":e[0]||(e[0]=l=>i.searchQuery=l)},null,512),[[Ee,i.searchQuery]]),f8]),p8,g("div",g8,[g("div",m8,[W(o,{class:"my-dropdown-toggle",options:i.arrayOfCategories,selected:i.category,placeholder:"All",closeOnOutsideClick:!0,onUpdateOption:r.filterUsingCategory},null,8,["options","selected","onUpdateOption"])])]),_8,g("div",y8,[g("div",b8,[W(o,{class:"my-dropdown-toggle",options:i.arrayOfSorts,selected:i.sort,placeholder:"Most Recent",closeOnOutsideClick:!0,onUpdateOption:r.filterUsingSort},null,8,["options","selected","onUpdateOption"])])])]),g("div",v8,[g("div",w8,[(A(!0),M(_e,null,pt(i.filteredRecipes,l=>(A(),Oe(a,{key:l.recipe_id,recipe:l,onUpdateLiked:r.updateLiked},null,8,["recipe","onUpdateLiked"]))),128))])]),g("div",E8,[this.filteredRecipes.length==0&&i.isDataLoaded?(A(),M("text",T8,"No Search Results Found")):we("",!0)]),W(c,{logo:"./plus-icon.png",onClick:r.toggleCreateRecipe},null,8,["onClick"])])}const I8=Be(l8,[["render",S8],["__scopeId","data-v-ab1e4a0d"]]);/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function jl(t){return t+.5|0}const $i=(t,e,n)=>Math.max(Math.min(t,n),e);function Ja(t){return $i(jl(t*2.55),0,255)}function Qi(t){return $i(jl(t*255),0,255)}function Xs(t){return $i(jl(t/2.55)/100,0,1)}function lw(t){return $i(jl(t*100),0,100)}const Un={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},zg=[..."0123456789ABCDEF"],R8=t=>zg[t&15],x8=t=>zg[(t&240)>>4]+zg[t&15],_u=t=>(t&240)>>4===(t&15),C8=t=>_u(t.r)&&_u(t.g)&&_u(t.b)&&_u(t.a);function A8(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Un[t[1]]*17,g:255&Un[t[2]]*17,b:255&Un[t[3]]*17,a:e===5?Un[t[4]]*17:255}:(e===7||e===9)&&(n={r:Un[t[1]]<<4|Un[t[2]],g:Un[t[3]]<<4|Un[t[4]],b:Un[t[5]]<<4|Un[t[6]],a:e===9?Un[t[7]]<<4|Un[t[8]]:255})),n}const k8=(t,e)=>t<255?e(t):"";function P8(t){var e=C8(t)?R8:x8;return t?"#"+e(t.r)+e(t.g)+e(t.b)+k8(t.a,e):void 0}const D8=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function qx(t,e,n){const s=e*Math.min(n,1-n),i=(r,o=(r+t/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function O8(t,e,n){const s=(i,r=(i+t/60)%6)=>n-n*e*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function M8(t,e,n){const s=qx(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)s[i]*=1-e-n,s[i]+=e;return s}function L8(t,e,n,s,i){return t===i?(e-n)/s+(e<n?6:0):e===i?(n-t)/s+2:(t-e)/s+4}function Ey(t){const n=t.r/255,s=t.g/255,i=t.b/255,r=Math.max(n,s,i),o=Math.min(n,s,i),a=(r+o)/2;let c,l,u;return r!==o&&(u=r-o,l=a>.5?u/(2-r-o):u/(r+o),c=L8(n,s,i,u,r),c=c*60+.5),[c|0,l||0,a]}function Ty(t,e,n,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,s)).map(Qi)}function Sy(t,e,n){return Ty(qx,t,e,n)}function N8(t,e,n){return Ty(M8,t,e,n)}function V8(t,e,n){return Ty(O8,t,e,n)}function Gx(t){return(t%360+360)%360}function F8(t){const e=D8.exec(t);let n=255,s;if(!e)return;e[5]!==s&&(n=e[6]?Ja(+e[5]):Qi(+e[5]));const i=Gx(+e[2]),r=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?s=N8(i,r,o):e[1]==="hsv"?s=V8(i,r,o):s=Sy(i,r,o),{r:s[0],g:s[1],b:s[2],a:n}}function B8(t,e){var n=Ey(t);n[0]=Gx(n[0]+e),n=Sy(n),t.r=n[0],t.g=n[1],t.b=n[2]}function U8(t){if(!t)return;const e=Ey(t),n=e[0],s=lw(e[1]),i=lw(e[2]);return t.a<255?`hsla(${n}, ${s}%, ${i}%, ${Xs(t.a)})`:`hsl(${n}, ${s}%, ${i}%)`}const uw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},hw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function $8(){const t={},e=Object.keys(hw),n=Object.keys(uw);let s,i,r,o,a;for(s=0;s<e.length;s++){for(o=a=e[s],i=0;i<n.length;i++)r=n[i],a=a.replace(r,uw[r]);r=parseInt(hw[o],16),t[a]=[r>>16&255,r>>8&255,r&255]}return t}let yu;function H8(t){yu||(yu=$8(),yu.transparent=[0,0,0,0]);const e=yu[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const z8=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function j8(t){const e=z8.exec(t);let n=255,s,i,r;if(e){if(e[7]!==s){const o=+e[7];n=e[8]?Ja(o):$i(o*255,0,255)}return s=+e[1],i=+e[3],r=+e[5],s=255&(e[2]?Ja(s):$i(s,0,255)),i=255&(e[4]?Ja(i):$i(i,0,255)),r=255&(e[6]?Ja(r):$i(r,0,255)),{r:s,g:i,b:r,a:n}}}function W8(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Xs(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Sp=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Ro=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function q8(t,e,n){const s=Ro(Xs(t.r)),i=Ro(Xs(t.g)),r=Ro(Xs(t.b));return{r:Qi(Sp(s+n*(Ro(Xs(e.r))-s))),g:Qi(Sp(i+n*(Ro(Xs(e.g))-i))),b:Qi(Sp(r+n*(Ro(Xs(e.b))-r))),a:t.a+n*(e.a-t.a)}}function bu(t,e,n){if(t){let s=Ey(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*n,e===0?360:1)),s=Sy(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function Kx(t,e){return t&&Object.assign(e||{},t)}function dw(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Qi(t[3]))):(e=Kx(t,{r:0,g:0,b:0,a:1}),e.a=Qi(e.a)),e}function G8(t){return t.charAt(0)==="r"?j8(t):F8(t)}class Zc{constructor(e){if(e instanceof Zc)return e;const n=typeof e;let s;n==="object"?s=dw(e):n==="string"&&(s=A8(e)||H8(e)||G8(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=Kx(this._rgb);return e&&(e.a=Xs(e.a)),e}set rgb(e){this._rgb=dw(e)}rgbString(){return this._valid?W8(this._rgb):void 0}hexString(){return this._valid?P8(this._rgb):void 0}hslString(){return this._valid?U8(this._rgb):void 0}mix(e,n){if(e){const s=this.rgb,i=e.rgb;let r;const o=n===r?.5:n,a=2*o-1,c=s.a-i.a,l=((a*c===-1?a:(a+c)/(1+a*c))+1)/2;r=1-l,s.r=255&l*s.r+r*i.r+.5,s.g=255&l*s.g+r*i.g+.5,s.b=255&l*s.b+r*i.b+.5,s.a=o*s.a+(1-o)*i.a,this.rgb=s}return this}interpolate(e,n){return e&&(this._rgb=q8(this._rgb,e._rgb,n)),this}clone(){return new Zc(this.rgb)}alpha(e){return this._rgb.a=Qi(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=jl(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return bu(this._rgb,2,e),this}darken(e){return bu(this._rgb,2,-e),this}saturate(e){return bu(this._rgb,1,e),this}desaturate(e){return bu(this._rgb,1,-e),this}rotate(e){return B8(this._rgb,e),this}}/*!
 * Chart.js v4.4.2
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function Gs(){}const K8=(()=>{let t=0;return()=>t++})();function $e(t){return t===null||typeof t>"u"}function ot(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function De(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function bt(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function kn(t,e){return bt(t)?t:e}function Te(t,e){return typeof t>"u"?e:t}const Y8=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,Yx=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ze(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Ge(t,e,n,s){let i,r,o;if(ot(t))if(r=t.length,s)for(i=r-1;i>=0;i--)e.call(n,t[i],i);else for(i=0;i<r;i++)e.call(n,t[i],i);else if(De(t))for(o=Object.keys(t),r=o.length,i=0;i<r;i++)e.call(n,t[o[i]],o[i])}function Kh(t,e){let n,s,i,r;if(!t||!e||t.length!==e.length)return!1;for(n=0,s=t.length;n<s;++n)if(i=t[n],r=e[n],i.datasetIndex!==r.datasetIndex||i.index!==r.index)return!1;return!0}function Yh(t){if(ot(t))return t.map(Yh);if(De(t)){const e=Object.create(null),n=Object.keys(t),s=n.length;let i=0;for(;i<s;++i)e[n[i]]=Yh(t[n[i]]);return e}return t}function Qx(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function Q8(t,e,n,s){if(!Qx(t))return;const i=e[t],r=n[t];De(i)&&De(r)?el(i,r,s):e[t]=Yh(r)}function el(t,e,n){const s=ot(e)?e:[e],i=s.length;if(!De(t))return t;n=n||{};const r=n.merger||Q8;let o;for(let a=0;a<i;++a){if(o=s[a],!De(o))continue;const c=Object.keys(o);for(let l=0,u=c.length;l<u;++l)r(c[l],t,o,n)}return t}function bc(t,e){return el(t,e,{merger:X8})}function X8(t,e,n){if(!Qx(t))return;const s=e[t],i=n[t];De(s)&&De(i)?bc(s,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Yh(i))}const fw={"":t=>t,x:t=>t.x,y:t=>t.y};function J8(t){const e=t.split("."),n=[];let s="";for(const i of e)s+=i,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function Z8(t){const e=J8(t);return n=>{for(const s of e){if(s==="")break;n=n&&n[s]}return n}}function or(t,e){return(fw[e]||(fw[e]=Z8(e)))(t)}function Iy(t){return t.charAt(0).toUpperCase()+t.slice(1)}const tl=t=>typeof t<"u",ar=t=>typeof t=="function",pw=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function eq(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const ct=Math.PI,at=2*ct,tq=at+ct,Qh=Number.POSITIVE_INFINITY,nq=ct/180,It=ct/2,br=ct/4,gw=ct*2/3,Hi=Math.log10,Ns=Math.sign;function vc(t,e,n){return Math.abs(t-e)<n}function mw(t){const e=Math.round(t);t=vc(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Hi(t))),s=t/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function sq(t){const e=[],n=Math.sqrt(t);let s;for(s=1;s<n;s++)t%s===0&&(e.push(s),e.push(t/s));return n===(n|0)&&e.push(n),e.sort((i,r)=>i-r).pop(),e}function fa(t){return!isNaN(parseFloat(t))&&isFinite(t)}function iq(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function Xx(t,e,n){let s,i,r;for(s=0,i=t.length;s<i;s++)r=t[s][n],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function is(t){return t*(ct/180)}function Ry(t){return t*(180/ct)}function _w(t){if(!bt(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function Jx(t,e){const n=e.x-t.x,s=e.y-t.y,i=Math.sqrt(n*n+s*s);let r=Math.atan2(s,n);return r<-.5*ct&&(r+=at),{angle:r,distance:i}}function jg(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function rq(t,e){return(t-e+tq)%at-ct}function Pn(t){return(t%at+at)%at}function nl(t,e,n,s){const i=Pn(t),r=Pn(e),o=Pn(n),a=Pn(r-i),c=Pn(o-i),l=Pn(i-r),u=Pn(i-o);return i===r||i===o||s&&r===o||a>c&&l<u}function zt(t,e,n){return Math.max(e,Math.min(n,t))}function oq(t){return zt(t,-32768,32767)}function ti(t,e,n,s=1e-6){return t>=Math.min(e,n)-s&&t<=Math.max(e,n)+s}function xy(t,e,n){n=n||(o=>t[o]<e);let s=t.length-1,i=0,r;for(;s-i>1;)r=i+s>>1,n(r)?i=r:s=r;return{lo:i,hi:s}}const ni=(t,e,n,s)=>xy(t,n,s?i=>{const r=t[i][e];return r<n||r===n&&t[i+1][e]===n}:i=>t[i][e]<n),aq=(t,e,n)=>xy(t,n,s=>t[s][e]>=n);function cq(t,e,n){let s=0,i=t.length;for(;s<i&&t[s]<e;)s++;for(;i>s&&t[i-1]>n;)i--;return s>0||i<t.length?t.slice(s,i):t}const Zx=["push","pop","shift","splice","unshift"];function lq(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Zx.forEach(n=>{const s="_onData"+Iy(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...r){const o=i.apply(this,r);return t._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...r)}),o}})})}function yw(t,e){const n=t._chartjs;if(!n)return;const s=n.listeners,i=s.indexOf(e);i!==-1&&s.splice(i,1),!(s.length>0)&&(Zx.forEach(r=>{delete t[r]}),delete t._chartjs)}function eC(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const tC=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function nC(t,e){let n=[],s=!1;return function(...i){n=i,s||(s=!0,tC.call(window,()=>{s=!1,t.apply(e,n)}))}}function uq(t,e){let n;return function(...s){return e?(clearTimeout(n),n=setTimeout(t,e,s)):t.apply(this,s),e}}const Cy=t=>t==="start"?"left":t==="end"?"right":"center",tn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,hq=(t,e,n,s)=>t===(s?"left":"right")?n:t==="center"?(e+n)/2:e;function sC(t,e,n){const s=e.length;let i=0,r=s;if(t._sorted){const{iScale:o,_parsed:a}=t,c=o.axis,{min:l,max:u,minDefined:h,maxDefined:d}=o.getUserBounds();h&&(i=zt(Math.min(ni(a,c,l).lo,n?s:ni(e,c,o.getPixelForValue(l)).lo),0,s-1)),d?r=zt(Math.max(ni(a,o.axis,u,!0).hi+1,n?0:ni(e,c,o.getPixelForValue(u),!0).hi+1),i,s)-i:r=s-i}return{start:i,count:r}}function iC(t){const{xScale:e,yScale:n,_scaleRanges:s}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!s)return t._scaleRanges=i,!0;const r=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,i),r}const vu=t=>t===0||t===1,bw=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*at/n)),vw=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*at/n)+1,wc={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*It)+1,easeOutSine:t=>Math.sin(t*It),easeInOutSine:t=>-.5*(Math.cos(ct*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>vu(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>vu(t)?t:bw(t,.075,.3),easeOutElastic:t=>vu(t)?t:vw(t,.075,.3),easeInOutElastic(t){return vu(t)?t:t<.5?.5*bw(t*2,.1125,.45):.5+.5*vw(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-wc.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?wc.easeInBounce(t*2)*.5:wc.easeOutBounce(t*2-1)*.5+.5};function Ay(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function ww(t){return Ay(t)?t:new Zc(t)}function Ip(t){return Ay(t)?t:new Zc(t).saturate(.5).darken(.1).hexString()}const dq=["x","y","borderWidth","radius","tension"],fq=["color","borderColor","backgroundColor"];function pq(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:fq},numbers:{type:"number",properties:dq}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function gq(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Ew=new Map;function mq(t,e){e=e||{};const n=t+JSON.stringify(e);let s=Ew.get(n);return s||(s=new Intl.NumberFormat(t,e),Ew.set(n,s)),s}function Wl(t,e,n){return mq(e,n).format(t)}const rC={values(t){return ot(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const s=this.chart.options.locale;let i,r=t;if(n.length>1){const l=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(l<1e-4||l>1e15)&&(i="scientific"),r=_q(t,n)}const o=Hi(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),Wl(t,s,c)},logarithmic(t,e,n){if(t===0)return"0";const s=n[e].significand||t/Math.pow(10,Math.floor(Hi(t)));return[1,2,3,5,10,15].includes(s)||e>.8*n.length?rC.numeric.call(this,t,e,n):""}};function _q(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var xf={formatters:rC};function yq(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:xf.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const ro=Object.create(null),Wg=Object.create(null);function Ec(t,e){if(!e)return t;const n=e.split(".");for(let s=0,i=n.length;s<i;++s){const r=n[s];t=t[r]||(t[r]=Object.create(null))}return t}function Rp(t,e,n){return typeof e=="string"?el(Ec(t,e),n):el(Ec(t,""),e)}class bq{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,i)=>Ip(i.backgroundColor),this.hoverBorderColor=(s,i)=>Ip(i.borderColor),this.hoverColor=(s,i)=>Ip(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Rp(this,e,n)}get(e){return Ec(this,e)}describe(e,n){return Rp(Wg,e,n)}override(e,n){return Rp(ro,e,n)}route(e,n,s,i){const r=Ec(this,e),o=Ec(this,s),a="_"+n;Object.defineProperties(r,{[a]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const c=this[a],l=o[i];return De(c)?Object.assign({},l,c):Te(c,l)},set(c){this[a]=c}}})}apply(e){e.forEach(n=>n(this))}}var vt=new bq({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[pq,gq,yq]);function vq(t){return!t||$e(t.size)||$e(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Xh(t,e,n,s,i){let r=e[i];return r||(r=e[i]=t.measureText(i).width,n.push(i)),r>s&&(s=r),s}function wq(t,e,n,s){s=s||{};let i=s.data=s.data||{},r=s.garbageCollect=s.garbageCollect||[];s.font!==e&&(i=s.data={},r=s.garbageCollect=[],s.font=e),t.save(),t.font=e;let o=0;const a=n.length;let c,l,u,h,d;for(c=0;c<a;c++)if(h=n[c],h!=null&&!ot(h))o=Xh(t,i,r,o,h);else if(ot(h))for(l=0,u=h.length;l<u;l++)d=h[l],d!=null&&!ot(d)&&(o=Xh(t,i,r,o,d));t.restore();const f=r.length/2;if(f>n.length){for(c=0;c<f;c++)delete i[r[c]];r.splice(0,f)}return o}function vr(t,e,n){const s=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*s)/s+i}function Tw(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function qg(t,e,n,s){oC(t,e,n,s,null)}function oC(t,e,n,s,i){let r,o,a,c,l,u,h,d;const f=e.pointStyle,p=e.rotation,m=e.radius;let _=(p||0)*nq;if(f&&typeof f=="object"&&(r=f.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){t.save(),t.translate(n,s),t.rotate(_),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!(isNaN(m)||m<=0)){switch(t.beginPath(),f){default:i?t.ellipse(n,s,i/2,m,0,0,at):t.arc(n,s,m,0,at),t.closePath();break;case"triangle":u=i?i/2:m,t.moveTo(n+Math.sin(_)*u,s-Math.cos(_)*m),_+=gw,t.lineTo(n+Math.sin(_)*u,s-Math.cos(_)*m),_+=gw,t.lineTo(n+Math.sin(_)*u,s-Math.cos(_)*m),t.closePath();break;case"rectRounded":l=m*.516,c=m-l,o=Math.cos(_+br)*c,h=Math.cos(_+br)*(i?i/2-l:c),a=Math.sin(_+br)*c,d=Math.sin(_+br)*(i?i/2-l:c),t.arc(n-h,s-a,l,_-ct,_-It),t.arc(n+d,s-o,l,_-It,_),t.arc(n+h,s+a,l,_,_+It),t.arc(n-d,s+o,l,_+It,_+ct),t.closePath();break;case"rect":if(!p){c=Math.SQRT1_2*m,u=i?i/2:c,t.rect(n-u,s-c,2*u,2*c);break}_+=br;case"rectRot":h=Math.cos(_)*(i?i/2:m),o=Math.cos(_)*m,a=Math.sin(_)*m,d=Math.sin(_)*(i?i/2:m),t.moveTo(n-h,s-a),t.lineTo(n+d,s-o),t.lineTo(n+h,s+a),t.lineTo(n-d,s+o),t.closePath();break;case"crossRot":_+=br;case"cross":h=Math.cos(_)*(i?i/2:m),o=Math.cos(_)*m,a=Math.sin(_)*m,d=Math.sin(_)*(i?i/2:m),t.moveTo(n-h,s-a),t.lineTo(n+h,s+a),t.moveTo(n+d,s-o),t.lineTo(n-d,s+o);break;case"star":h=Math.cos(_)*(i?i/2:m),o=Math.cos(_)*m,a=Math.sin(_)*m,d=Math.sin(_)*(i?i/2:m),t.moveTo(n-h,s-a),t.lineTo(n+h,s+a),t.moveTo(n+d,s-o),t.lineTo(n-d,s+o),_+=br,h=Math.cos(_)*(i?i/2:m),o=Math.cos(_)*m,a=Math.sin(_)*m,d=Math.sin(_)*(i?i/2:m),t.moveTo(n-h,s-a),t.lineTo(n+h,s+a),t.moveTo(n+d,s-o),t.lineTo(n-d,s+o);break;case"line":o=i?i/2:Math.cos(_)*m,a=Math.sin(_)*m,t.moveTo(n-o,s-a),t.lineTo(n+o,s+a);break;case"dash":t.moveTo(n,s),t.lineTo(n+Math.cos(_)*(i?i/2:m),s+Math.sin(_)*m);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function si(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Cf(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Af(t){t.restore()}function Eq(t,e,n,s,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const r=(e.x+n.x)/2;t.lineTo(r,e.y),t.lineTo(r,n.y)}else i==="after"!=!!s?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Tq(t,e,n,s){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function Sq(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),$e(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Iq(t,e,n,s,i){if(i.strikethrough||i.underline){const r=t.measureText(s),o=e-r.actualBoundingBoxLeft,a=e+r.actualBoundingBoxRight,c=n-r.actualBoundingBoxAscent,l=n+r.actualBoundingBoxDescent,u=i.strikethrough?(c+l)/2:l;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function Rq(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function oo(t,e,n,s,i,r={}){const o=ot(e)?e:[e],a=r.strokeWidth>0&&r.strokeColor!=="";let c,l;for(t.save(),t.font=i.string,Sq(t,r),c=0;c<o.length;++c)l=o[c],r.backdrop&&Rq(t,r.backdrop),a&&(r.strokeColor&&(t.strokeStyle=r.strokeColor),$e(r.strokeWidth)||(t.lineWidth=r.strokeWidth),t.strokeText(l,n,s,r.maxWidth)),t.fillText(l,n,s,r.maxWidth),Iq(t,n,s,l,r),s+=Number(i.lineHeight);t.restore()}function sl(t,e){const{x:n,y:s,w:i,h:r,radius:o}=e;t.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*ct,ct,!0),t.lineTo(n,s+r-o.bottomLeft),t.arc(n+o.bottomLeft,s+r-o.bottomLeft,o.bottomLeft,ct,It,!0),t.lineTo(n+i-o.bottomRight,s+r),t.arc(n+i-o.bottomRight,s+r-o.bottomRight,o.bottomRight,It,0,!0),t.lineTo(n+i,s+o.topRight),t.arc(n+i-o.topRight,s+o.topRight,o.topRight,0,-It,!0),t.lineTo(n+o.topLeft,s)}const xq=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Cq=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Aq(t,e){const n=(""+t).match(xq);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const kq=t=>+t||0;function ky(t,e){const n={},s=De(e),i=s?Object.keys(e):e,r=De(t)?s?o=>Te(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=kq(r(o));return n}function aC(t){return ky(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Gr(t){return ky(t,["topLeft","topRight","bottomLeft","bottomRight"])}function dn(t){const e=aC(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Bt(t,e){t=t||{},e=e||vt.font;let n=Te(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let s=Te(t.style,e.style);s&&!(""+s).match(Cq)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const i={family:Te(t.family,e.family),lineHeight:Aq(Te(t.lineHeight,e.lineHeight),n),size:n,style:s,weight:Te(t.weight,e.weight),string:""};return i.string=vq(i),i}function Za(t,e,n,s){let i=!0,r,o,a;for(r=0,o=t.length;r<o;++r)if(a=t[r],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),i=!1),n!==void 0&&ot(a)&&(a=a[n%a.length],i=!1),a!==void 0))return s&&!i&&(s.cacheable=!1),a}function Pq(t,e,n){const{min:s,max:i}=t,r=Yx(e,(i-s)/2),o=(a,c)=>n&&a===0?0:a+c;return{min:o(s,-Math.abs(r)),max:o(i,r)}}function fr(t,e){return Object.assign(Object.create(t),e)}function Py(t,e=[""],n,s,i=()=>t[0]){const r=n||t;typeof s>"u"&&(s=hC("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:r,_fallback:s,_getTarget:i,override:a=>Py([a,...t],e,r,s)};return new Proxy(o,{deleteProperty(a,c){return delete a[c],delete a._keys,delete t[0][c],!0},get(a,c){return lC(a,c,()=>Bq(c,e,t,a))},getOwnPropertyDescriptor(a,c){return Reflect.getOwnPropertyDescriptor(a._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,c){return Iw(a).includes(c)},ownKeys(a){return Iw(a)},set(a,c,l){const u=a._storage||(a._storage=i());return a[c]=u[c]=l,delete a._keys,!0}})}function pa(t,e,n,s){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:cC(t,s),setContext:r=>pa(t,r,n,s),override:r=>pa(t.override(r),e,n,s)};return new Proxy(i,{deleteProperty(r,o){return delete r[o],delete t[o],!0},get(r,o,a){return lC(r,o,()=>Oq(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(r,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(r,o,a){return t[o]=a,delete r[o],!0}})}function cC(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:s=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:s,isScriptable:ar(n)?n:()=>n,isIndexable:ar(s)?s:()=>s}}const Dq=(t,e)=>t?t+Iy(e):e,Dy=(t,e)=>De(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function lC(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const s=n();return t[e]=s,s}function Oq(t,e,n){const{_proxy:s,_context:i,_subProxy:r,_descriptors:o}=t;let a=s[e];return ar(a)&&o.isScriptable(e)&&(a=Mq(e,a,t,n)),ot(a)&&a.length&&(a=Lq(e,a,t,o.isIndexable)),Dy(e,a)&&(a=pa(a,i,r&&r[e],o)),a}function Mq(t,e,n,s){const{_proxy:i,_context:r,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let c=e(r,o||s);return a.delete(t),Dy(t,c)&&(c=Oy(i._scopes,i,t,c)),c}function Lq(t,e,n,s){const{_proxy:i,_context:r,_subProxy:o,_descriptors:a}=n;if(typeof r.index<"u"&&s(t))return e[r.index%e.length];if(De(e[0])){const c=e,l=i._scopes.filter(u=>u!==c);e=[];for(const u of c){const h=Oy(l,i,t,u);e.push(pa(h,r,o&&o[t],a))}}return e}function uC(t,e,n){return ar(t)?t(e,n):t}const Nq=(t,e)=>t===!0?e:typeof t=="string"?or(e,t):void 0;function Vq(t,e,n,s,i){for(const r of e){const o=Nq(n,r);if(o){t.add(o);const a=uC(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==s)return a}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function Oy(t,e,n,s){const i=e._rootScopes,r=uC(e._fallback,n,s),o=[...t,...i],a=new Set;a.add(s);let c=Sw(a,o,n,r||n,s);return c===null||typeof r<"u"&&r!==n&&(c=Sw(a,o,r,c,s),c===null)?!1:Py(Array.from(a),[""],i,r,()=>Fq(e,n,s))}function Sw(t,e,n,s,i){for(;n;)n=Vq(t,e,n,s,i);return n}function Fq(t,e,n){const s=t._getTarget();e in s||(s[e]={});const i=s[e];return ot(i)&&De(n)?n:i||{}}function Bq(t,e,n,s){let i;for(const r of e)if(i=hC(Dq(r,t),n),typeof i<"u")return Dy(t,i)?Oy(n,s,t,i):i}function hC(t,e){for(const n of e){if(!n)continue;const s=n[t];if(typeof s<"u")return s}}function Iw(t){let e=t._keys;return e||(e=t._keys=Uq(t._scopes)),e}function Uq(t){const e=new Set;for(const n of t)for(const s of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(s);return Array.from(e)}function dC(t,e,n,s){const{iScale:i}=t,{key:r="r"}=this._parsing,o=new Array(s);let a,c,l,u;for(a=0,c=s;a<c;++a)l=a+n,u=e[l],o[a]={r:i.parse(or(u,r),l)};return o}const $q=Number.EPSILON||1e-14,ga=(t,e)=>e<t.length&&!t[e].skip&&t[e],fC=t=>t==="x"?"y":"x";function Hq(t,e,n,s){const i=t.skip?e:t,r=e,o=n.skip?e:n,a=jg(r,i),c=jg(o,r);let l=a/(a+c),u=c/(a+c);l=isNaN(l)?0:l,u=isNaN(u)?0:u;const h=s*l,d=s*u;return{previous:{x:r.x-h*(o.x-i.x),y:r.y-h*(o.y-i.y)},next:{x:r.x+d*(o.x-i.x),y:r.y+d*(o.y-i.y)}}}function zq(t,e,n){const s=t.length;let i,r,o,a,c,l=ga(t,0);for(let u=0;u<s-1;++u)if(c=l,l=ga(t,u+1),!(!c||!l)){if(vc(e[u],0,$q)){n[u]=n[u+1]=0;continue}i=n[u]/e[u],r=n[u+1]/e[u],a=Math.pow(i,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=i*o*e[u],n[u+1]=r*o*e[u])}}function jq(t,e,n="x"){const s=fC(n),i=t.length;let r,o,a,c=ga(t,0);for(let l=0;l<i;++l){if(o=a,a=c,c=ga(t,l+1),!a)continue;const u=a[n],h=a[s];o&&(r=(u-o[n])/3,a[`cp1${n}`]=u-r,a[`cp1${s}`]=h-r*e[l]),c&&(r=(c[n]-u)/3,a[`cp2${n}`]=u+r,a[`cp2${s}`]=h+r*e[l])}}function Wq(t,e="x"){const n=fC(e),s=t.length,i=Array(s).fill(0),r=Array(s);let o,a,c,l=ga(t,0);for(o=0;o<s;++o)if(a=c,c=l,l=ga(t,o+1),!!c){if(l){const u=l[e]-c[e];i[o]=u!==0?(l[n]-c[n])/u:0}r[o]=a?l?Ns(i[o-1])!==Ns(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}zq(t,i,r),jq(t,r,e)}function wu(t,e,n){return Math.max(Math.min(t,n),e)}function qq(t,e){let n,s,i,r,o,a=si(t[0],e);for(n=0,s=t.length;n<s;++n)o=r,r=a,a=n<s-1&&si(t[n+1],e),r&&(i=t[n],o&&(i.cp1x=wu(i.cp1x,e.left,e.right),i.cp1y=wu(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=wu(i.cp2x,e.left,e.right),i.cp2y=wu(i.cp2y,e.top,e.bottom)))}function Gq(t,e,n,s,i){let r,o,a,c;if(e.spanGaps&&(t=t.filter(l=>!l.skip)),e.cubicInterpolationMode==="monotone")Wq(t,i);else{let l=s?t[t.length-1]:t[0];for(r=0,o=t.length;r<o;++r)a=t[r],c=Hq(l,a,t[Math.min(r+1,o-(s?0:1))%o],e.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,l=a}e.capBezierPoints&&qq(t,n)}function My(){return typeof window<"u"&&typeof document<"u"}function Ly(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Jh(t,e,n){let s;return typeof t=="string"?(s=parseInt(t,10),t.indexOf("%")!==-1&&(s=s/100*e.parentNode[n])):s=t,s}const kf=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Kq(t,e){return kf(t).getPropertyValue(e)}const Yq=["top","right","bottom","left"];function Kr(t,e,n){const s={};n=n?"-"+n:"";for(let i=0;i<4;i++){const r=Yq[i];s[r]=parseFloat(t[e+"-"+r+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const Qq=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function Xq(t,e){const n=t.touches,s=n&&n.length?n[0]:t,{offsetX:i,offsetY:r}=s;let o=!1,a,c;if(Qq(i,r,t.target))a=i,c=r;else{const l=e.getBoundingClientRect();a=s.clientX-l.left,c=s.clientY-l.top,o=!0}return{x:a,y:c,box:o}}function Sr(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:s}=e,i=kf(n),r=i.boxSizing==="border-box",o=Kr(i,"padding"),a=Kr(i,"border","width"),{x:c,y:l,box:u}=Xq(t,n),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:p}=e;return r&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((c-h)/f*n.width/s),y:Math.round((l-d)/p*n.height/s)}}function Jq(t,e,n){let s,i;if(e===void 0||n===void 0){const r=Ly(t);if(!r)e=t.clientWidth,n=t.clientHeight;else{const o=r.getBoundingClientRect(),a=kf(r),c=Kr(a,"border","width"),l=Kr(a,"padding");e=o.width-l.width-c.width,n=o.height-l.height-c.height,s=Jh(a.maxWidth,r,"clientWidth"),i=Jh(a.maxHeight,r,"clientHeight")}}return{width:e,height:n,maxWidth:s||Qh,maxHeight:i||Qh}}const Eu=t=>Math.round(t*10)/10;function Zq(t,e,n,s){const i=kf(t),r=Kr(i,"margin"),o=Jh(i.maxWidth,t,"clientWidth")||Qh,a=Jh(i.maxHeight,t,"clientHeight")||Qh,c=Jq(t,e,n);let{width:l,height:u}=c;if(i.boxSizing==="content-box"){const d=Kr(i,"border","width"),f=Kr(i,"padding");l-=f.width+d.width,u-=f.height+d.height}return l=Math.max(0,l-r.width),u=Math.max(0,s?l/s:u-r.height),l=Eu(Math.min(l,o,c.maxWidth)),u=Eu(Math.min(u,a,c.maxHeight)),l&&!u&&(u=Eu(l/2)),(e!==void 0||n!==void 0)&&s&&c.height&&u>c.height&&(u=c.height,l=Eu(Math.floor(u*s))),{width:l,height:u}}function Rw(t,e,n){const s=e||1,i=Math.floor(t.height*s),r=Math.floor(t.width*s);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==s||o.height!==i||o.width!==r?(t.currentDevicePixelRatio=s,o.height=i,o.width=r,t.ctx.setTransform(s,0,0,s,0,0),!0):!1}const e7=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};My()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function xw(t,e){const n=Kq(t,e),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Ir(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function t7(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:s==="middle"?n<.5?t.y:e.y:s==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function n7(t,e,n,s){const i={x:t.cp2x,y:t.cp2y},r={x:e.cp1x,y:e.cp1y},o=Ir(t,i,n),a=Ir(i,r,n),c=Ir(r,e,n),l=Ir(o,a,n),u=Ir(a,c,n);return Ir(l,u,n)}const s7=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},i7=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Ko(t,e,n){return t?s7(e,n):i7()}function pC(t,e){let n,s;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=s)}function gC(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function mC(t){return t==="angle"?{between:nl,compare:rq,normalize:Pn}:{between:ti,compare:(e,n)=>e-n,normalize:e=>e}}function Cw({start:t,end:e,count:n,loop:s,style:i}){return{start:t%n,end:e%n,loop:s&&(e-t+1)%n===0,style:i}}function r7(t,e,n){const{property:s,start:i,end:r}=n,{between:o,normalize:a}=mC(s),c=e.length;let{start:l,end:u,loop:h}=t,d,f;if(h){for(l+=c,u+=c,d=0,f=c;d<f&&o(a(e[l%c][s]),i,r);++d)l--,u--;l%=c,u%=c}return u<l&&(u+=c),{start:l,end:u,loop:h,style:t.style}}function _C(t,e,n){if(!n)return[t];const{property:s,start:i,end:r}=n,o=e.length,{compare:a,between:c,normalize:l}=mC(s),{start:u,end:h,loop:d,style:f}=r7(t,e,n),p=[];let m=!1,_=null,y,b,w;const T=()=>c(i,w,y)&&a(i,w)!==0,S=()=>a(r,y)===0||c(r,w,y),x=()=>m||T(),R=()=>!m||S();for(let I=u,P=u;I<=h;++I)b=e[I%o],!b.skip&&(y=l(b[s]),y!==w&&(m=c(y,i,r),_===null&&x()&&(_=a(y,i)===0?I:P),_!==null&&R()&&(p.push(Cw({start:_,end:I,loop:d,count:o,style:f})),_=null),P=I,w=y));return _!==null&&p.push(Cw({start:_,end:h,loop:d,count:o,style:f})),p}function yC(t,e){const n=[],s=t.segments;for(let i=0;i<s.length;i++){const r=_C(s[i],t.points,e);r.length&&n.push(...r)}return n}function o7(t,e,n,s){let i=0,r=e-1;if(n&&!s)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(r+=i);r>i&&t[r%e].skip;)r--;return r%=e,{start:i,end:r}}function a7(t,e,n,s){const i=t.length,r=[];let o=e,a=t[e],c;for(c=e+1;c<=n;++c){const l=t[c%i];l.skip||l.stop?a.skip||(s=!1,r.push({start:e%i,end:(c-1)%i,loop:s}),e=o=l.stop?c:null):(o=c,a.skip&&(e=c)),a=l}return o!==null&&r.push({start:e%i,end:o%i,loop:s}),r}function c7(t,e){const n=t.points,s=t.options.spanGaps,i=n.length;if(!i)return[];const r=!!t._loop,{start:o,end:a}=o7(n,i,r,s);if(s===!0)return Aw(t,[{start:o,end:a,loop:r}],n,e);const c=a<o?a+i:a,l=!!t._fullLoop&&o===0&&a===i-1;return Aw(t,a7(n,o,c,l),n,e)}function Aw(t,e,n,s){return!s||!s.setContext||!n?e:l7(t,e,n,s)}function l7(t,e,n,s){const i=t._chart.getContext(),r=kw(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,c=n.length,l=[];let u=r,h=e[0].start,d=h;function f(p,m,_,y){const b=a?-1:1;if(p!==m){for(p+=c;n[p%c].skip;)p-=b;for(;n[m%c].skip;)m+=b;p%c!==m%c&&(l.push({start:p%c,end:m%c,loop:_,style:y}),u=y,h=m%c)}}for(const p of e){h=a?h:p.start;let m=n[h%c],_;for(d=h+1;d<=p.end;d++){const y=n[d%c];_=kw(s.setContext(fr(i,{type:"segment",p0:m,p1:y,p0DataIndex:(d-1)%c,p1DataIndex:d%c,datasetIndex:o}))),u7(_,u)&&f(h,d-1,p.loop,u),m=y,u=_}h<d-1&&f(h,d-1,p.loop,u)}return l}function kw(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function u7(t,e){if(!e)return!1;const n=[],s=function(i,r){return Ay(r)?(n.includes(r)||n.push(r),n.indexOf(r)):r};return JSON.stringify(t,s)!==JSON.stringify(e,s)}/*!
 * Chart.js v4.4.2
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class h7{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,s,i){const r=n.listeners[i],o=n.duration;r.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=tC.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((s,i)=>{if(!s.running||!s.items.length)return;const r=s.items;let o=r.length-1,a=!1,c;for(;o>=0;--o)c=r[o],c._active?(c._total>s.duration&&(s.duration=c._total),c.tick(e),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,s,e,"progress")),r.length||(s.running=!1,this._notify(i,s,e,"complete"),s.initial=!1),n+=r.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let s=n.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,s)),s}listen(e,n,s){this._getAnims(e).listeners[n].push(s)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,i)=>Math.max(s,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const s=n.items;let i=s.length-1;for(;i>=0;--i)s[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ys=new h7;const Pw="transparent",d7={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const s=ww(t||Pw),i=s.valid&&ww(e||Pw);return i&&i.valid?i.mix(s,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class f7{constructor(e,n,s,i){const r=n[s];i=Za([e.to,i,r,e.from]);const o=Za([e.from,r,i]);this._active=!0,this._fn=e.fn||d7[e.type||typeof o],this._easing=wc[e.easing]||wc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=s,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,s){if(this._active){this._notify(!1);const i=this._target[this._prop],r=s-this._start,o=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=Za([e.to,n,i,e.from]),this._from=Za([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,s=this._duration,i=this._prop,r=this._from,o=this._loop,a=this._to;let c;if(this._active=r!==a&&(o||n<s),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=r;return}c=n/s%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[i]=this._fn(r,a,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,s)=>{e.push({res:n,rej:s})})}_notify(e){const n=e?"res":"rej",s=this._promises||[];for(let i=0;i<s.length;i++)s[i][n]()}}class bC{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!De(e))return;const n=Object.keys(vt.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const r=e[i];if(!De(r))return;const o={};for(const a of n)o[a]=r[a];(ot(r.properties)&&r.properties||[i]).forEach(a=>{(a===i||!s.has(a))&&s.set(a,o)})})}_animateOptions(e,n){const s=n.options,i=g7(e,s);if(!i)return[];const r=this._createAnimations(i,s);return s.$shared&&p7(e.options.$animations,s).then(()=>{e.options=s},()=>{}),r}_createAnimations(e,n){const s=this._properties,i=[],r=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let c;for(c=o.length-1;c>=0;--c){const l=o[c];if(l.charAt(0)==="$")continue;if(l==="options"){i.push(...this._animateOptions(e,n));continue}const u=n[l];let h=r[l];const d=s.get(l);if(h)if(d&&h.active()){h.update(d,u,a);continue}else h.cancel();if(!d||!d.duration){e[l]=u;continue}r[l]=h=new f7(d,e,l,u),i.push(h)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const s=this._createAnimations(e,n);if(s.length)return Ys.add(this._chart,s),!0}}function p7(t,e){const n=[],s=Object.keys(e);for(let i=0;i<s.length;i++){const r=t[s[i]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function g7(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Dw(t,e){const n=t&&t.options||{},s=n.reverse,i=n.min===void 0?e:0,r=n.max===void 0?e:0;return{start:s?r:i,end:s?i:r}}function m7(t,e,n){if(n===!1)return!1;const s=Dw(t,n),i=Dw(e,n);return{top:i.end,right:s.end,bottom:i.start,left:s.start}}function _7(t){let e,n,s,i;return De(t)?(e=t.top,n=t.right,s=t.bottom,i=t.left):e=n=s=i=t,{top:e,right:n,bottom:s,left:i,disabled:t===!1}}function vC(t,e){const n=[],s=t._getSortedDatasetMetas(e);let i,r;for(i=0,r=s.length;i<r;++i)n.push(s[i].index);return n}function Ow(t,e,n,s={}){const i=t.keys,r=s.mode==="single";let o,a,c,l;if(e!==null){for(o=0,a=i.length;o<a;++o){if(c=+i[o],c===n){if(s.all)continue;break}l=t.values[c],bt(l)&&(r||e===0||Ns(e)===Ns(l))&&(e+=l)}return e}}function y7(t){const e=Object.keys(t),n=new Array(e.length);let s,i,r;for(s=0,i=e.length;s<i;++s)r=e[s],n[s]={x:r,y:t[r]};return n}function Mw(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function b7(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function v7(t){const{min:e,max:n,minDefined:s,maxDefined:i}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function w7(t,e,n){const s=t[e]||(t[e]={});return s[n]||(s[n]={})}function Lw(t,e,n,s){for(const i of e.getMatchingVisibleMetas(s).reverse()){const r=t[i.index];if(n&&r>0||!n&&r<0)return i.index}return null}function Nw(t,e){const{chart:n,_cachedMeta:s}=t,i=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:a}=s,c=r.axis,l=o.axis,u=b7(r,o,s),h=e.length;let d;for(let f=0;f<h;++f){const p=e[f],{[c]:m,[l]:_}=p,y=p._stacks||(p._stacks={});d=y[l]=w7(i,u,m),d[a]=_,d._top=Lw(d,o,!0,s.type),d._bottom=Lw(d,o,!1,s.type);const b=d._visualValues||(d._visualValues={});b[a]=_}}function xp(t,e){const n=t.scales;return Object.keys(n).filter(s=>n[s].axis===e).shift()}function E7(t,e){return fr(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function T7(t,e,n){return fr(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Na(t,e){const n=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const i of e){const r=i._stacks;if(!r||r[s]===void 0||r[s][n]===void 0)return;delete r[s][n],r[s]._visualValues!==void 0&&r[s]._visualValues[n]!==void 0&&delete r[s]._visualValues[n]}}}const Cp=t=>t==="reset"||t==="none",Vw=(t,e)=>e?t:Object.assign({},t),S7=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:vC(n,!0),values:null};class rs{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Mw(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Na(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,s=this.getDataset(),i=(h,d,f,p)=>h==="x"?d:h==="r"?p:f,r=n.xAxisID=Te(s.xAxisID,xp(e,"x")),o=n.yAxisID=Te(s.yAxisID,xp(e,"y")),a=n.rAxisID=Te(s.rAxisID,xp(e,"r")),c=n.indexAxis,l=n.iAxisID=i(c,r,o,a),u=n.vAxisID=i(c,o,r,a);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(l),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&yw(this._data,this),e._stacked&&Na(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),s=this._data;if(De(n))this._data=y7(n);else if(s!==n){if(s){yw(s,this);const i=this._cachedMeta;Na(i),i._parsed=[]}n&&Object.isExtensible(n)&&lq(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,s=this.getDataset();let i=!1;this._dataCheck();const r=n._stacked;n._stacked=Mw(n.vScale,n),n.stack!==s.stack&&(i=!0,Na(n),n.stack=s.stack),this._resyncElements(e),(i||r!==n._stacked)&&Nw(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:s,_data:i}=this,{iScale:r,_stacked:o}=s,a=r.axis;let c=e===0&&n===i.length?!0:s._sorted,l=e>0&&s._parsed[e-1],u,h,d;if(this._parsing===!1)s._parsed=i,s._sorted=!0,d=i;else{ot(i[e])?d=this.parseArrayData(s,i,e,n):De(i[e])?d=this.parseObjectData(s,i,e,n):d=this.parsePrimitiveData(s,i,e,n);const f=()=>h[a]===null||l&&h[a]<l[a];for(u=0;u<n;++u)s._parsed[u+e]=h=d[u],c&&(f()&&(c=!1),l=h);s._sorted=c}o&&Nw(this,d)}parsePrimitiveData(e,n,s,i){const{iScale:r,vScale:o}=e,a=r.axis,c=o.axis,l=r.getLabels(),u=r===o,h=new Array(i);let d,f,p;for(d=0,f=i;d<f;++d)p=d+s,h[d]={[a]:u||r.parse(l[p],p),[c]:o.parse(n[p],p)};return h}parseArrayData(e,n,s,i){const{xScale:r,yScale:o}=e,a=new Array(i);let c,l,u,h;for(c=0,l=i;c<l;++c)u=c+s,h=n[u],a[c]={x:r.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,n,s,i){const{xScale:r,yScale:o}=e,{xAxisKey:a="x",yAxisKey:c="y"}=this._parsing,l=new Array(i);let u,h,d,f;for(u=0,h=i;u<h;++u)d=u+s,f=n[d],l[u]={x:r.parse(or(f,a),d),y:o.parse(or(f,c),d)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,s){const i=this.chart,r=this._cachedMeta,o=n[e.axis],a={keys:vC(i,!0),values:n._stacks[e.axis]._visualValues};return Ow(a,o,r.index,{mode:s})}updateRangeFromParsed(e,n,s,i){const r=s[n.axis];let o=r===null?NaN:r;const a=i&&s._stacks[n.axis];i&&a&&(i.values=a,o=Ow(i,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const s=this._cachedMeta,i=s._parsed,r=s._sorted&&e===s.iScale,o=i.length,a=this._getOtherScale(e),c=S7(n,s,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=v7(a);let d,f;function p(){f=i[d];const m=f[a.axis];return!bt(f[e.axis])||u>m||h<m}for(d=0;d<o&&!(!p()&&(this.updateRangeFromParsed(l,e,f,c),r));++d);if(r){for(d=o-1;d>=0;--d)if(!p()){this.updateRangeFromParsed(l,e,f,c);break}}return l}getAllParsedValues(e){const n=this._cachedMeta._parsed,s=[];let i,r,o;for(i=0,r=n.length;i<r;++i)o=n[i][e.axis],bt(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,s=n.iScale,i=n.vScale,r=this.getParsed(e);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=_7(Te(this.options.clip,m7(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,s=this._cachedMeta,i=s.data||[],r=n.chartArea,o=[],a=this._drawStart||0,c=this._drawCount||i.length-a,l=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(e,r,a,c),u=a;u<a+c;++u){const h=i[u];h.hidden||(h.active&&l?o.push(h):h.draw(e,r))}for(u=0;u<o.length;++u)o[u].draw(e,r)}getStyle(e,n){const s=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,n,s){const i=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];r=o.$context||(o.$context=T7(this.getContext(),e,o)),r.parsed=this.getParsed(e),r.raw=i.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=E7(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=s,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",s){const i=n==="active",r=this._cachedDataOpts,o=e+"-"+n,a=r[o],c=this.enableOptionSharing&&tl(s);if(a)return Vw(a,c);const l=this.chart.config,u=l.datasetElementScopeKeys(this._type,e),h=i?[`${e}Hover`,"hover",e,""]:[e,""],d=l.getOptionScopes(this.getDataset(),u),f=Object.keys(vt.elements[e]),p=()=>this.getContext(s,i,n),m=l.resolveNamedOptions(d,f,p,h);return m.$shared&&(m.$shared=c,r[o]=Object.freeze(Vw(m,c))),m}_resolveAnimations(e,n,s){const i=this.chart,r=this._cachedDataOpts,o=`animation-${n}`,a=r[o];if(a)return a;let c;if(i.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),d=u.getOptionScopes(this.getDataset(),h);c=u.createResolver(d,this.getContext(e,s,n))}const l=new bC(i,c&&c.animations);return c&&c._cacheable&&(r[o]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Cp(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const s=this.resolveDataElementOptions(e,n),i=this._sharedOptions,r=this.getSharedOptions(s),o=this.includeOptions(n,r)||r!==i;return this.updateSharedOptions(r,n,s),{sharedOptions:r,includeOptions:o}}updateElement(e,n,s,i){Cp(i)?Object.assign(e,s):this._resolveAnimations(n,i).update(e,s)}updateSharedOptions(e,n,s){e&&!Cp(n)&&this._resolveAnimations(void 0,n).update(e,s)}_setStyle(e,n,s,i){e.active=i;const r=this.getStyle(n,i);this._resolveAnimations(n,s,i).update(e,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(e,n,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,n,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,s=this._cachedMeta.data;for(const[a,c,l]of this._syncList)this[a](c,l);this._syncList=[];const i=s.length,r=n.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,e):r<i&&this._removeElements(r,i-r)}_insertElements(e,n,s=!0){const i=this._cachedMeta,r=i.data,o=e+n;let a;const c=l=>{for(l.length+=n,a=l.length-1;a>=o;a--)l[a]=l[a-n]};for(c(r),a=e;a<o;++a)r[a]=new this.dataElementType;this._parsing&&c(i._parsed),this.parse(e,n),s&&this.updateElements(r,e,n,"reset")}updateElements(e,n,s,i){}_removeElements(e,n){const s=this._cachedMeta;if(this._parsing){const i=s._parsed.splice(e,n);s._stacked&&Na(s,i)}s.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,s,i]=e;this[n](s,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}C(rs,"defaults",{}),C(rs,"datasetElementType",null),C(rs,"dataElementType",null);function I7(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let s=[];for(let i=0,r=n.length;i<r;i++)s=s.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=eC(s.sort((i,r)=>i-r))}return t._cache.$bar}function R7(t){const e=t.iScale,n=I7(e,t.type);let s=e._length,i,r,o,a;const c=()=>{o===32767||o===-32768||(tl(a)&&(s=Math.min(s,Math.abs(o-a)||s)),a=o)};for(i=0,r=n.length;i<r;++i)o=e.getPixelForValue(n[i]),c();for(a=void 0,i=0,r=e.ticks.length;i<r;++i)o=e.getPixelForTick(i),c();return s}function x7(t,e,n,s){const i=n.barThickness;let r,o;return $e(i)?(r=e.min*n.categoryPercentage,o=n.barPercentage):(r=i*s,o=1),{chunk:r/s,ratio:o,start:e.pixels[t]-r/2}}function C7(t,e,n,s){const i=e.pixels,r=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const c=n.categoryPercentage;o===null&&(o=r-(a===null?e.end-e.start:a-r)),a===null&&(a=r+r-o);const l=r-(r-Math.min(o,a))/2*c;return{chunk:Math.abs(a-o)/2*c/s,ratio:n.barPercentage,start:l}}function A7(t,e,n,s){const i=n.parse(t[0],s),r=n.parse(t[1],s),o=Math.min(i,r),a=Math.max(i,r);let c=o,l=a;Math.abs(o)>Math.abs(a)&&(c=a,l=o),e[n.axis]=l,e._custom={barStart:c,barEnd:l,start:i,end:r,min:o,max:a}}function wC(t,e,n,s){return ot(t)?A7(t,e,n,s):e[n.axis]=n.parse(t,s),e}function Fw(t,e,n,s){const i=t.iScale,r=t.vScale,o=i.getLabels(),a=i===r,c=[];let l,u,h,d;for(l=n,u=n+s;l<u;++l)d=e[l],h={},h[i.axis]=a||i.parse(o[l],l),c.push(wC(d,h,r,l));return c}function Ap(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function k7(t,e,n){return t!==0?Ns(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function P7(t){let e,n,s,i,r;return t.horizontal?(e=t.base>t.x,n="left",s="right"):(e=t.base<t.y,n="bottom",s="top"),e?(i="end",r="start"):(i="start",r="end"),{start:n,end:s,reverse:e,top:i,bottom:r}}function D7(t,e,n,s){let i=e.borderSkipped;const r={};if(!i){t.borderSkipped=r;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:c,top:l,bottom:u}=P7(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===s?i=l:(n._bottom||0)===s?i=u:(r[Bw(u,o,a,c)]=!0,i=l)),r[Bw(i,o,a,c)]=!0,t.borderSkipped=r}function Bw(t,e,n,s){return s?(t=O7(t,e,n),t=Uw(t,n,e)):t=Uw(t,e,n),t}function O7(t,e,n){return t===e?n:t===n?e:t}function Uw(t,e,n){return t==="start"?e:t==="end"?n:t}function M7(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class th extends rs{parsePrimitiveData(e,n,s,i){return Fw(e,n,s,i)}parseArrayData(e,n,s,i){return Fw(e,n,s,i)}parseObjectData(e,n,s,i){const{iScale:r,vScale:o}=e,{xAxisKey:a="x",yAxisKey:c="y"}=this._parsing,l=r.axis==="x"?a:c,u=o.axis==="x"?a:c,h=[];let d,f,p,m;for(d=s,f=s+i;d<f;++d)m=n[d],p={},p[r.axis]=r.parse(or(m,l),d),h.push(wC(or(m,u),p,o,d));return h}updateRangeFromParsed(e,n,s,i){super.updateRangeFromParsed(e,n,s,i);const r=s._custom;r&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:s,vScale:i}=n,r=this.getParsed(e),o=r._custom,a=Ap(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+s.getLabelForValue(r[s.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,s,i){const r=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,c=a.getBasePixel(),l=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,i);for(let f=n;f<n+s;f++){const p=this.getParsed(f),m=r||$e(p[a.axis])?{base:c,head:c}:this._calculateBarValuePixels(f),_=this._calculateBarIndexPixels(f,u),y=(p._stacks||{})[a.axis],b={horizontal:l,base:m.base,enableBorderRadius:!y||Ap(p._custom)||o===y._top||o===y._bottom,x:l?m.head:_.center,y:l?_.center:m.head,height:l?_.size:Math.abs(m.size),width:l?Math.abs(m.size):_.size};d&&(b.options=h||this.resolveDataElementOptions(f,e[f].active?"active":i));const w=b.options||e[f].options;D7(b,w,y,o),M7(b,w,u.ratio),this.updateElement(e[f],f,b,i)}}_getStacks(e,n){const{iScale:s}=this._cachedMeta,i=s.getMatchingVisibleMetas(this._type).filter(c=>c.controller.options.grouped),r=s.options.stacked,o=[],a=c=>{const l=c.controller.getParsed(n),u=l&&l[c.vScale.axis];if($e(u)||isNaN(u))return!0};for(const c of i)if(!(n!==void 0&&a(c))&&((r===!1||o.indexOf(c.stack)===-1||r===void 0&&c.stack===void 0)&&o.push(c.stack),c.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,s){const i=this._getStacks(e,s),r=n!==void 0?i.indexOf(n):-1;return r===-1?i.length-1:r}_getRuler(){const e=this.options,n=this._cachedMeta,s=n.iScale,i=[];let r,o;for(r=0,o=n.data.length;r<o;++r)i.push(s.getPixelForValue(this.getParsed(r)[s.axis],r));const a=e.barThickness;return{min:a||R7(n),pixels:i,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:s,index:i},options:{base:r,minBarLength:o}}=this,a=r||0,c=this.getParsed(e),l=c._custom,u=Ap(l);let h=c[n.axis],d=0,f=s?this.applyStack(n,c,s):h,p,m;f!==h&&(d=f-h,f=h),u&&(h=l.barStart,f=l.barEnd-l.barStart,h!==0&&Ns(h)!==Ns(l.barEnd)&&(d=0),d+=h);const _=!$e(r)&&!u?r:d;let y=n.getPixelForValue(_);if(this.chart.getDataVisibility(e)?p=n.getPixelForValue(d+f):p=y,m=p-y,Math.abs(m)<o){m=k7(m,n,a)*o,h===a&&(y-=m/2);const b=n.getPixelForDecimal(0),w=n.getPixelForDecimal(1),T=Math.min(b,w),S=Math.max(b,w);y=Math.max(Math.min(y,S),T),p=y+m,s&&!u&&(c._stacks[n.axis]._visualValues[i]=n.getValueForPixel(p)-n.getValueForPixel(y))}if(y===n.getPixelForValue(a)){const b=Ns(m)*n.getLineWidthForValue(a)/2;y+=b,m-=b}return{size:m,base:y,head:p,center:p+m/2}}_calculateBarIndexPixels(e,n){const s=n.scale,i=this.options,r=i.skipNull,o=Te(i.maxBarThickness,1/0);let a,c;if(n.grouped){const l=r?this._getStackCount(e):n.stackCount,u=i.barThickness==="flex"?C7(e,n,i,l):x7(e,n,i,l),h=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0);a=u.start+u.chunk*h+u.chunk/2,c=Math.min(o,u.chunk*u.ratio)}else a=s.getPixelForValue(this.getParsed(e)[s.axis],e),c=Math.min(o,n.min*n.ratio);return{base:a-c/2,head:a+c/2,center:a,size:c}}draw(){const e=this._cachedMeta,n=e.vScale,s=e.data,i=s.length;let r=0;for(;r<i;++r)this.getParsed(r)[n.axis]!==null&&s[r].draw(this._ctx)}}C(th,"id","bar"),C(th,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),C(th,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class nh extends rs{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,s,i){const r=super.parsePrimitiveData(e,n,s,i);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+s).radius;return r}parseArrayData(e,n,s,i){const r=super.parseArrayData(e,n,s,i);for(let o=0;o<r.length;o++){const a=n[s+o];r[o]._custom=Te(a[2],this.resolveDataElementOptions(o+s).radius)}return r}parseObjectData(e,n,s,i){const r=super.parseObjectData(e,n,s,i);for(let o=0;o<r.length;o++){const a=n[s+o];r[o]._custom=Te(a&&a.r&&+a.r,this.resolveDataElementOptions(o+s).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let s=e.length-1;s>=0;--s)n=Math.max(n,e[s].size(this.resolveDataElementOptions(s))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart.data.labels||[],{xScale:i,yScale:r}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),c=r.getLabelForValue(o.y),l=o._custom;return{label:s[e]||"",value:"("+a+", "+c+(l?", "+l:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,s,i){const r=i==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:c,includeOptions:l}=this._getSharedOptions(n,i),u=o.axis,h=a.axis;for(let d=n;d<n+s;d++){const f=e[d],p=!r&&this.getParsed(d),m={},_=m[u]=r?o.getPixelForDecimal(.5):o.getPixelForValue(p[u]),y=m[h]=r?a.getBasePixel():a.getPixelForValue(p[h]);m.skip=isNaN(_)||isNaN(y),l&&(m.options=c||this.resolveDataElementOptions(d,f.active?"active":i),r&&(m.options.radius=0)),this.updateElement(f,d,m,i)}}resolveDataElementOptions(e,n){const s=this.getParsed(e);let i=super.resolveDataElementOptions(e,n);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return n!=="active"&&(i.radius=0),i.radius+=Te(s&&s._custom,r),i}}C(nh,"id","bubble"),C(nh,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),C(nh,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function L7(t,e,n){let s=1,i=1,r=0,o=0;if(e<at){const a=t,c=a+e,l=Math.cos(a),u=Math.sin(a),h=Math.cos(c),d=Math.sin(c),f=(w,T,S)=>nl(w,a,c,!0)?1:Math.max(T,T*n,S,S*n),p=(w,T,S)=>nl(w,a,c,!0)?-1:Math.min(T,T*n,S,S*n),m=f(0,l,h),_=f(It,u,d),y=p(ct,l,h),b=p(ct+It,u,d);s=(m-y)/2,i=(_-b)/2,r=-(m+y)/2,o=-(_+b)/2}return{ratioX:s,ratioY:i,offsetX:r,offsetY:o}}class Br extends rs{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const s=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=s;else{let r=c=>+s[c];if(De(s[e])){const{key:c="value"}=this._parsing;r=l=>+or(s[l],c)}let o,a;for(o=e,a=e+n;o<a;++o)i._parsed[o]=r(o)}}_getRotation(){return is(this.options.rotation-90)}_getCircumference(){return is(this.options.circumference)}_getRotationExtents(){let e=at,n=-at;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const i=this.chart.getDatasetMeta(s).controller,r=i._getRotation(),o=i._getCircumference();e=Math.min(e,r),n=Math.max(n,r+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:s}=n,i=this._cachedMeta,r=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),c=Math.min(Y8(this.options.cutout,a),1),l=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:d,ratioY:f,offsetX:p,offsetY:m}=L7(h,u,c),_=(s.width-o)/d,y=(s.height-o)/f,b=Math.max(Math.min(_,y)/2,0),w=Yx(this.options.radius,b),T=Math.max(w*c,0),S=(w-T)/this._getVisibleDatasetWeightTotal();this.offsetX=p*w,this.offsetY=m*w,i.total=this.calculateTotal(),this.outerRadius=w-S*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-S*l,0),this.updateElements(r,0,r.length,e)}_circumference(e,n){const s=this.options,i=this._cachedMeta,r=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*r/at)}updateElements(e,n,s,i){const r=i==="reset",o=this.chart,a=o.chartArea,l=o.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,d=r&&l.animateScale,f=d?0:this.innerRadius,p=d?0:this.outerRadius,{sharedOptions:m,includeOptions:_}=this._getSharedOptions(n,i);let y=this._getRotation(),b;for(b=0;b<n;++b)y+=this._circumference(b,r);for(b=n;b<n+s;++b){const w=this._circumference(b,r),T=e[b],S={x:u+this.offsetX,y:h+this.offsetY,startAngle:y,endAngle:y+w,circumference:w,outerRadius:p,innerRadius:f};_&&(S.options=m||this.resolveDataElementOptions(b,T.active?"active":i)),y+=w,this.updateElement(T,b,S,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let s=0,i;for(i=0;i<n.length;i++){const r=e._parsed[i];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(s+=Math.abs(r))}return s}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?at*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart,i=s.data.labels||[],r=Wl(n._parsed[e],s.options.locale);return{label:i[e]||"",value:r}}getMaxBorderWidth(e){let n=0;const s=this.chart;let i,r,o,a,c;if(!e){for(i=0,r=s.data.datasets.length;i<r;++i)if(s.isDatasetVisible(i)){o=s.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,r=e.length;i<r;++i)c=a.resolveDataElementOptions(i),c.borderAlign!=="inner"&&(n=Math.max(n,c.borderWidth||0,c.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let s=0,i=e.length;s<i;++s){const r=this.resolveDataElementOptions(s);n=Math.max(n,r.offset||0,r.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(e){return Math.max(Te(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}C(Br,"id","doughnut"),C(Br,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),C(Br,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),C(Br,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:s,color:i}}=e.legend.options;return n.labels.map((r,o)=>{const c=e.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:i,lineWidth:c.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}});class sh extends rs{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:s,data:i=[],_dataset:r}=n,o=this.chart._animationsDisabled;let{start:a,count:c}=sC(n,i,o);this._drawStart=a,this._drawCount=c,iC(n)&&(a=0,c=i.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!r._decimated,s.points=i;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:l},e),this.updateElements(i,a,c,e)}updateElements(e,n,s,i){const r=i==="reset",{iScale:o,vScale:a,_stacked:c,_dataset:l}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(n,i),d=o.axis,f=a.axis,{spanGaps:p,segment:m}=this.options,_=fa(p)?p:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||r||i==="none",b=n+s,w=e.length;let T=n>0&&this.getParsed(n-1);for(let S=0;S<w;++S){const x=e[S],R=y?x:{};if(S<n||S>=b){R.skip=!0;continue}const I=this.getParsed(S),P=$e(I[f]),$=R[d]=o.getPixelForValue(I[d],S),Q=R[f]=r||P?a.getBasePixel():a.getPixelForValue(c?this.applyStack(a,I,c):I[f],S);R.skip=isNaN($)||isNaN(Q)||P,R.stop=S>0&&Math.abs(I[d]-T[d])>_,m&&(R.parsed=I,R.raw=l.data[S]),h&&(R.options=u||this.resolveDataElementOptions(S,x.active?"active":i)),y||this.updateElement(x,S,R,i),T=I}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,s=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return s;const r=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,r,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}C(sh,"id","line"),C(sh,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),C(sh,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Tc extends rs{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart,i=s.data.labels||[],r=Wl(n._parsed[e].r,s.options.locale);return{label:i[e]||"",value:r}}parseObjectData(e,n,s,i){return dC.bind(this)(e,n,s,i)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((s,i)=>{const r=this.getParsed(i).r;!isNaN(r)&&this.chart.getDataVisibility(i)&&(r<n.min&&(n.min=r),r>n.max&&(n.max=r))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,s=e.options,i=Math.min(n.right-n.left,n.bottom-n.top),r=Math.max(i/2,0),o=Math.max(s.cutoutPercentage?r/100*s.cutoutPercentage:1,0),a=(r-o)/e.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,s,i){const r=i==="reset",o=this.chart,c=o.options.animation,l=this._cachedMeta.rScale,u=l.xCenter,h=l.yCenter,d=l.getIndexAngle(0)-.5*ct;let f=d,p;const m=360/this.countVisibleElements();for(p=0;p<n;++p)f+=this._computeAngle(p,i,m);for(p=n;p<n+s;p++){const _=e[p];let y=f,b=f+this._computeAngle(p,i,m),w=o.getDataVisibility(p)?l.getDistanceFromCenterForValue(this.getParsed(p).r):0;f=b,r&&(c.animateScale&&(w=0),c.animateRotate&&(y=b=d));const T={x:u,y:h,innerRadius:0,outerRadius:w,startAngle:y,endAngle:b,options:this.resolveDataElementOptions(p,_.active?"active":i)};this.updateElement(_,p,T,i)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((s,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&n++}),n}_computeAngle(e,n,s){return this.chart.getDataVisibility(e)?is(this.resolveDataElementOptions(e,n).angle||s):0}}C(Tc,"id","polarArea"),C(Tc,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),C(Tc,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:s,color:i}}=e.legend.options;return n.labels.map((r,o)=>{const c=e.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:i,lineWidth:c.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Gg extends Br{}C(Gg,"id","pie"),C(Gg,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class ih extends rs{getLabelAndValue(e){const n=this._cachedMeta.vScale,s=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(s[n.axis])}}parseObjectData(e,n,s,i){return dC.bind(this)(e,n,s,i)}update(e){const n=this._cachedMeta,s=n.dataset,i=n.data||[],r=n.iScale.getLabels();if(s.points=i,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===i.length,options:o};this.updateElement(s,void 0,a,e)}this.updateElements(i,0,i.length,e)}updateElements(e,n,s,i){const r=this._cachedMeta.rScale,o=i==="reset";for(let a=n;a<n+s;a++){const c=e[a],l=this.resolveDataElementOptions(a,c.active?"active":i),u=r.getPointPositionForValue(a,this.getParsed(a).r),h=o?r.xCenter:u.x,d=o?r.yCenter:u.y,f={x:h,y:d,angle:u.angle,skip:isNaN(h)||isNaN(d),options:l};this.updateElement(c,a,f,i)}}}C(ih,"id","radar"),C(ih,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),C(ih,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class rh extends rs{getLabelAndValue(e){const n=this._cachedMeta,s=this.chart.data.labels||[],{xScale:i,yScale:r}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),c=r.getLabelForValue(o.y);return{label:s[e]||"",value:"("+a+", "+c+")"}}update(e){const n=this._cachedMeta,{data:s=[]}=n,i=this.chart._animationsDisabled;let{start:r,count:o}=sC(n,s,i);if(this._drawStart=r,this._drawCount=o,iC(n)&&(r=0,o=s.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:c}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!c._decimated,a.points=s;const l=this.resolveDatasetElementOptions(e);l.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:l},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(s,r,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,s,i){const r=i==="reset",{iScale:o,vScale:a,_stacked:c,_dataset:l}=this._cachedMeta,u=this.resolveDataElementOptions(n,i),h=this.getSharedOptions(u),d=this.includeOptions(i,h),f=o.axis,p=a.axis,{spanGaps:m,segment:_}=this.options,y=fa(m)?m:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||r||i==="none";let w=n>0&&this.getParsed(n-1);for(let T=n;T<n+s;++T){const S=e[T],x=this.getParsed(T),R=b?S:{},I=$e(x[p]),P=R[f]=o.getPixelForValue(x[f],T),$=R[p]=r||I?a.getBasePixel():a.getPixelForValue(c?this.applyStack(a,x,c):x[p],T);R.skip=isNaN(P)||isNaN($)||I,R.stop=T>0&&Math.abs(x[f]-w[f])>y,_&&(R.parsed=x,R.raw=l.data[T]),d&&(R.options=h||this.resolveDataElementOptions(T,S.active?"active":i)),b||this.updateElement(S,T,R,i),w=x}this.updateSharedOptions(h,i,u)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let c=n.length-1;c>=0;--c)a=Math.max(a,n[c].size(this.resolveDataElementOptions(c))/2);return a>0&&a}const s=e.dataset,i=s.options&&s.options.borderWidth||0;if(!n.length)return i;const r=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,r,o)/2}}C(rh,"id","scatter"),C(rh,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),C(rh,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var N7=Object.freeze({__proto__:null,BarController:th,BubbleController:nh,DoughnutController:Br,LineController:sh,PieController:Gg,PolarAreaController:Tc,RadarController:ih,ScatterController:rh});function wr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ny{constructor(e){C(this,"options");this.options=e||{}}static override(e){Object.assign(Ny.prototype,e)}init(){}formats(){return wr()}parse(){return wr()}format(){return wr()}add(){return wr()}diff(){return wr()}startOf(){return wr()}endOf(){return wr()}}var EC={_date:Ny};function V7(t,e,n,s){const{controller:i,data:r,_sorted:o}=t,a=i._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&r.length){const c=a._reversePixels?aq:ni;if(s){if(i._sharedOptions){const l=r[0],u=typeof l.getRange=="function"&&l.getRange(e);if(u){const h=c(r,e,n-u),d=c(r,e,n+u);return{lo:h.lo,hi:d.hi}}}}else return c(r,e,n)}return{lo:0,hi:r.length-1}}function ql(t,e,n,s,i){const r=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,c=r.length;a<c;++a){const{index:l,data:u}=r[a],{lo:h,hi:d}=V7(r[a],e,o,i);for(let f=h;f<=d;++f){const p=u[f];p.skip||s(p,l,f)}}}function F7(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(s,i){const r=e?Math.abs(s.x-i.x):0,o=n?Math.abs(s.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function kp(t,e,n,s,i){const r=[];return!i&&!t.isPointInArea(e)||ql(t,n,e,function(a,c,l){!i&&!si(a,t.chartArea,0)||a.inRange(e.x,e.y,s)&&r.push({element:a,datasetIndex:c,index:l})},!0),r}function B7(t,e,n,s){let i=[];function r(o,a,c){const{startAngle:l,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:h}=Jx(o,{x:e.x,y:e.y});nl(h,l,u)&&i.push({element:o,datasetIndex:a,index:c})}return ql(t,n,e,r),i}function U7(t,e,n,s,i,r){let o=[];const a=F7(n);let c=Number.POSITIVE_INFINITY;function l(u,h,d){const f=u.inRange(e.x,e.y,i);if(s&&!f)return;const p=u.getCenterPoint(i);if(!(!!r||t.isPointInArea(p))&&!f)return;const _=a(e,p);_<c?(o=[{element:u,datasetIndex:h,index:d}],c=_):_===c&&o.push({element:u,datasetIndex:h,index:d})}return ql(t,n,e,l),o}function Pp(t,e,n,s,i,r){return!r&&!t.isPointInArea(e)?[]:n==="r"&&!s?B7(t,e,n,i):U7(t,e,n,s,i,r)}function $w(t,e,n,s,i){const r=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return ql(t,n,e,(c,l,u)=>{c[o](e[n],i)&&(r.push({element:c,datasetIndex:l,index:u}),a=a||c.inRange(e.x,e.y,i))}),s&&!a?[]:r}var $7={evaluateInteractionItems:ql,modes:{index(t,e,n,s){const i=Sr(e,t),r=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?kp(t,i,r,s,o):Pp(t,i,r,!1,s,o),c=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(l=>{const u=a[0].index,h=l.data[u];h&&!h.skip&&c.push({element:h,datasetIndex:l.index,index:u})}),c):[]},dataset(t,e,n,s){const i=Sr(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?kp(t,i,r,s,o):Pp(t,i,r,!1,s,o);if(a.length>0){const c=a[0].datasetIndex,l=t.getDatasetMeta(c).data;a=[];for(let u=0;u<l.length;++u)a.push({element:l[u],datasetIndex:c,index:u})}return a},point(t,e,n,s){const i=Sr(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return kp(t,i,r,s,o)},nearest(t,e,n,s){const i=Sr(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return Pp(t,i,r,n.intersect,s,o)},x(t,e,n,s){const i=Sr(e,t);return $w(t,i,"x",n.intersect,s)},y(t,e,n,s){const i=Sr(e,t);return $w(t,i,"y",n.intersect,s)}}};const TC=["left","top","right","bottom"];function Va(t,e){return t.filter(n=>n.pos===e)}function Hw(t,e){return t.filter(n=>TC.indexOf(n.pos)===-1&&n.box.axis===e)}function Fa(t,e){return t.sort((n,s)=>{const i=e?s:n,r=e?n:s;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function H7(t){const e=[];let n,s,i,r,o,a;for(n=0,s=(t||[]).length;n<s;++n)i=t[n],{position:r,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&r+o,stackWeight:a});return e}function z7(t){const e={};for(const n of t){const{stack:s,pos:i,stackWeight:r}=n;if(!s||!TC.includes(i))continue;const o=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}function j7(t,e){const n=z7(t),{vBoxMaxWidth:s,hBoxMaxHeight:i}=e;let r,o,a;for(r=0,o=t.length;r<o;++r){a=t[r];const{fullSize:c}=a.box,l=n[a.stack],u=l&&a.stackWeight/l.weight;a.horizontal?(a.width=u?u*s:c&&e.availableWidth,a.height=i):(a.width=s,a.height=u?u*i:c&&e.availableHeight)}return n}function W7(t){const e=H7(t),n=Fa(e.filter(l=>l.box.fullSize),!0),s=Fa(Va(e,"left"),!0),i=Fa(Va(e,"right")),r=Fa(Va(e,"top"),!0),o=Fa(Va(e,"bottom")),a=Hw(e,"x"),c=Hw(e,"y");return{fullSize:n,leftAndTop:s.concat(r),rightAndBottom:i.concat(c).concat(o).concat(a),chartArea:Va(e,"chartArea"),vertical:s.concat(i).concat(c),horizontal:r.concat(o).concat(a)}}function zw(t,e,n,s){return Math.max(t[n],e[n])+Math.max(t[s],e[s])}function SC(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function q7(t,e,n,s){const{pos:i,box:r}=n,o=t.maxPadding;if(!De(i)){n.size&&(t[i]-=n.size);const h=s[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?r.height:r.width),n.size=h.size/h.count,t[i]+=n.size}r.getPadding&&SC(o,r.getPadding());const a=Math.max(0,e.outerWidth-zw(o,t,"left","right")),c=Math.max(0,e.outerHeight-zw(o,t,"top","bottom")),l=a!==t.w,u=c!==t.h;return t.w=a,t.h=c,n.horizontal?{same:l,other:u}:{same:u,other:l}}function G7(t){const e=t.maxPadding;function n(s){const i=Math.max(e[s]-t[s],0);return t[s]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function K7(t,e){const n=e.maxPadding;function s(i){const r={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{r[o]=Math.max(e[o],n[o])}),r}return s(t?["left","right"]:["top","bottom"])}function ec(t,e,n,s){const i=[];let r,o,a,c,l,u;for(r=0,o=t.length,l=0;r<o;++r){a=t[r],c=a.box,c.update(a.width||e.w,a.height||e.h,K7(a.horizontal,e));const{same:h,other:d}=q7(e,n,a,s);l|=h&&i.length,u=u||d,c.fullSize||i.push(a)}return l&&ec(i,e,n,s)||u}function Tu(t,e,n,s,i){t.top=n,t.left=e,t.right=e+s,t.bottom=n+i,t.width=s,t.height=i}function jw(t,e,n,s){const i=n.padding;let{x:r,y:o}=e;for(const a of t){const c=a.box,l=s[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/l.weight||1;if(a.horizontal){const h=e.w*u,d=l.size||c.height;tl(l.start)&&(o=l.start),c.fullSize?Tu(c,i.left,o,n.outerWidth-i.right-i.left,d):Tu(c,e.left+l.placed,o,h,d),l.start=o,l.placed+=h,o=c.bottom}else{const h=e.h*u,d=l.size||c.width;tl(l.start)&&(r=l.start),c.fullSize?Tu(c,r,i.top,d,n.outerHeight-i.bottom-i.top):Tu(c,r,e.top+l.placed,d,h),l.start=r,l.placed+=h,r=c.right}}e.x=r,e.y=o}var on={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,s){if(!t)return;const i=dn(t.options.layout.padding),r=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=W7(t.boxes),c=a.vertical,l=a.horizontal;Ge(t.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const u=c.reduce((m,_)=>_.box.options&&_.box.options.display===!1?m:m+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},i);SC(d,dn(s));const f=Object.assign({maxPadding:d,w:r,h:o,x:i.left,y:i.top},i),p=j7(c.concat(l),h);ec(a.fullSize,f,h,p),ec(c,f,h,p),ec(l,f,h,p)&&ec(c,f,h,p),G7(f),jw(a.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,jw(a.rightAndBottom,f,h,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Ge(a.chartArea,m=>{const _=m.box;Object.assign(_,t.chartArea),_.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class IC{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,s){}removeEventListener(e,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,s,i){return n=Math.max(0,n||e.width),s=s||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):s)}}isAttached(e){return!0}updateConfig(e){}}class Y7 extends IC{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const oh="$chartjs",Q7={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Ww=t=>t===null||t==="";function X7(t,e){const n=t.style,s=t.getAttribute("height"),i=t.getAttribute("width");if(t[oh]={initial:{height:s,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Ww(i)){const r=xw(t,"width");r!==void 0&&(t.width=r)}if(Ww(s))if(t.style.height==="")t.height=t.width/(e||2);else{const r=xw(t,"height");r!==void 0&&(t.height=r)}return t}const RC=e7?{passive:!0}:!1;function J7(t,e,n){t&&t.addEventListener(e,n,RC)}function Z7(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,RC)}function eG(t,e){const n=Q7[t.type]||t.type,{x:s,y:i}=Sr(t,e);return{type:n,chart:e,native:t,x:s!==void 0?s:null,y:i!==void 0?i:null}}function Zh(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function tG(t,e,n){const s=t.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Zh(a.addedNodes,s),o=o&&!Zh(a.removedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function nG(t,e,n){const s=t.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Zh(a.removedNodes,s),o=o&&!Zh(a.addedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const il=new Map;let qw=0;function xC(){const t=window.devicePixelRatio;t!==qw&&(qw=t,il.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function sG(t,e){il.size||window.addEventListener("resize",xC),il.set(t,e)}function iG(t){il.delete(t),il.size||window.removeEventListener("resize",xC)}function rG(t,e,n){const s=t.canvas,i=s&&Ly(s);if(!i)return;const r=nC((a,c)=>{const l=i.clientWidth;n(a,c),l<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const c=a[0],l=c.contentRect.width,u=c.contentRect.height;l===0&&u===0||r(l,u)});return o.observe(i),sG(t,r),o}function Dp(t,e,n){n&&n.disconnect(),e==="resize"&&iG(t)}function oG(t,e,n){const s=t.canvas,i=nC(r=>{t.ctx!==null&&n(eG(r,t))},t);return J7(s,e,i),i}class aG extends IC{acquireContext(e,n){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(X7(e,n),s):null}releaseContext(e){const n=e.canvas;if(!n[oh])return!1;const s=n[oh].initial;["height","width"].forEach(r=>{const o=s[r];$e(o)?n.removeAttribute(r):n.setAttribute(r,o)});const i=s.style||{};return Object.keys(i).forEach(r=>{n.style[r]=i[r]}),n.width=n.width,delete n[oh],!0}addEventListener(e,n,s){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:tG,detach:nG,resize:rG}[n]||oG;i[n]=o(e,n,s)}removeEventListener(e,n){const s=e.$proxies||(e.$proxies={}),i=s[n];if(!i)return;({attach:Dp,detach:Dp,resize:Dp}[n]||Z7)(e,n,i),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,s,i){return Zq(e,n,s,i)}isAttached(e){const n=Ly(e);return!!(n&&n.isConnected)}}function cG(t){return!My()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?Y7:aG}var Ou;let yi=(Ou=class{constructor(){C(this,"x");C(this,"y");C(this,"active",!1);C(this,"options");C(this,"$animations")}tooltipPosition(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}hasValue(){return fa(this.x)&&fa(this.y)}getProps(e,n){const s=this.$animations;if(!n||!s)return this;const i={};return e.forEach(r=>{i[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),i}},C(Ou,"defaults",{}),C(Ou,"defaultRoutes"),Ou);function lG(t,e){const n=t.options.ticks,s=uG(t),i=Math.min(n.maxTicksLimit||s,s),r=n.major.enabled?dG(e):[],o=r.length,a=r[0],c=r[o-1],l=[];if(o>i)return fG(e,l,r,o/i),l;const u=hG(r,e,i);if(o>0){let h,d;const f=o>1?Math.round((c-a)/(o-1)):null;for(Su(e,l,u,$e(f)?0:a-f,a),h=0,d=o-1;h<d;h++)Su(e,l,u,r[h],r[h+1]);return Su(e,l,u,c,$e(f)?e.length:c+f),l}return Su(e,l,u),l}function uG(t){const e=t.options.offset,n=t._tickSize(),s=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(s,i))}function hG(t,e,n){const s=pG(t),i=e.length/n;if(!s)return Math.max(i,1);const r=sq(s);for(let o=0,a=r.length-1;o<a;o++){const c=r[o];if(c>i)return c}return Math.max(i,1)}function dG(t){const e=[];let n,s;for(n=0,s=t.length;n<s;n++)t[n].major&&e.push(n);return e}function fG(t,e,n,s){let i=0,r=n[0],o;for(s=Math.ceil(s),o=0;o<t.length;o++)o===r&&(e.push(t[o]),i++,r=n[i*s])}function Su(t,e,n,s,i){const r=Te(s,0),o=Math.min(Te(i,t.length),t.length);let a=0,c,l,u;for(n=Math.ceil(n),i&&(c=i-s,n=c/Math.floor(c/n)),u=r;u<0;)a++,u=Math.round(r+a*n);for(l=Math.max(r,0);l<o;l++)l===u&&(e.push(t[l]),a++,u=Math.round(r+a*n))}function pG(t){const e=t.length;let n,s;if(e<2)return!1;for(s=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==s)return!1;return s}const gG=t=>t==="left"?"right":t==="right"?"left":t,Gw=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Kw=(t,e)=>Math.min(e||t,t);function Yw(t,e){const n=[],s=t.length/e,i=t.length;let r=0;for(;r<i;r+=s)n.push(t[Math.floor(r)]);return n}function mG(t,e,n){const s=t.ticks.length,i=Math.min(e,s-1),r=t._startPixel,o=t._endPixel,a=1e-6;let c=t.getPixelForTick(i),l;if(!(n&&(s===1?l=Math.max(c-r,o-c):e===0?l=(t.getPixelForTick(1)-c)/2:l=(c-t.getPixelForTick(i-1))/2,c+=i<e?l:-l,c<r-a||c>o+a)))return c}function _G(t,e){Ge(t,n=>{const s=n.gc,i=s.length/2;let r;if(i>e){for(r=0;r<i;++r)delete n.data[s[r]];s.splice(0,i)}})}function Ba(t){return t.drawTicks?t.tickLength:0}function Qw(t,e){if(!t.display)return 0;const n=Bt(t.font,e),s=dn(t.padding);return(ot(t.text)?t.text.length:1)*n.lineHeight+s.height}function yG(t,e){return fr(t,{scale:e,type:"scale"})}function bG(t,e,n){return fr(t,{tick:n,index:e,type:"tick"})}function vG(t,e,n){let s=Cy(t);return(n&&e!=="right"||!n&&e==="right")&&(s=gG(s)),s}function wG(t,e,n,s){const{top:i,left:r,bottom:o,right:a,chart:c}=t,{chartArea:l,scales:u}=c;let h=0,d,f,p;const m=o-i,_=a-r;if(t.isHorizontal()){if(f=tn(s,r,a),De(n)){const y=Object.keys(n)[0],b=n[y];p=u[y].getPixelForValue(b)+m-e}else n==="center"?p=(l.bottom+l.top)/2+m-e:p=Gw(t,n,e);d=a-r}else{if(De(n)){const y=Object.keys(n)[0],b=n[y];f=u[y].getPixelForValue(b)-_+e}else n==="center"?f=(l.left+l.right)/2-_+e:f=Gw(t,n,e);p=tn(s,o,i),h=n==="left"?-It:It}return{titleX:f,titleY:p,maxWidth:d,rotation:h}}class wo extends yi{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:s,_suggestedMax:i}=this;return e=kn(e,Number.POSITIVE_INFINITY),n=kn(n,Number.NEGATIVE_INFINITY),s=kn(s,Number.POSITIVE_INFINITY),i=kn(i,Number.NEGATIVE_INFINITY),{min:kn(e,s),max:kn(n,i),minDefined:bt(e),maxDefined:bt(n)}}getMinMax(e){let{min:n,max:s,minDefined:i,maxDefined:r}=this.getUserBounds(),o;if(i&&r)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let c=0,l=a.length;c<l;++c)o=a[c].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),r||(s=Math.max(s,o.max));return n=r&&n>s?s:n,s=i&&n>s?n:s,{min:kn(n,kn(s,n)),max:kn(s,kn(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ze(this.options.beforeUpdate,[this])}update(e,n,s){const{beginAtZero:i,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Pq(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=a<this.ticks.length;this._convertTicksToLabels(c?Yw(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=lG(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,e=!e),this._startPixel=n,this._endPixel=s,this._reversePixels=e,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ze(this.options.afterUpdate,[this])}beforeSetDimensions(){Ze(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ze(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ze(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ze(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let s,i,r;for(s=0,i=e.length;s<i;s++)r=e[s],r.label=Ze(n.callback,[r.value,s,e],this)}afterTickToLabelConversion(){Ze(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ze(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,s=Kw(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,r=n.maxRotation;let o=i,a,c,l;if(!this._isVisible()||!n.display||i>=r||s<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),h=u.widest.width,d=u.highest.height,f=zt(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/s:f/(s-1),h+6>a&&(a=f/(s-(e.offset?.5:1)),c=this.maxHeight-Ba(e.grid)-n.padding-Qw(e.title,this.chart.options.font),l=Math.sqrt(h*h+d*d),o=Ry(Math.min(Math.asin(zt((u.highest.height+6)/a,-1,1)),Math.asin(zt(c/l,-1,1))-Math.asin(zt(d/l,-1,1)))),o=Math.max(i,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ze(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ze(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:s,title:i,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const c=Qw(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=Ba(r)+c):(e.height=this.maxHeight,e.width=Ba(r)+c),s.display&&this.ticks.length){const{first:l,last:u,widest:h,highest:d}=this._getLabelSizes(),f=s.padding*2,p=is(this.labelRotation),m=Math.cos(p),_=Math.sin(p);if(a){const y=s.mirror?0:_*h.width+m*d.height;e.height=Math.min(this.maxHeight,e.height+y+f)}else{const y=s.mirror?0:m*h.width+_*d.height;e.width=Math.min(this.maxWidth,e.width+y+f)}this._calculatePadding(l,u,_,m)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,s,i){const{ticks:{align:r,padding:o},position:a}=this.options,c=this.labelRotation!==0,l=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;c?l?(d=i*e.width,f=s*n.height):(d=s*e.height,f=i*n.width):r==="start"?f=n.width:r==="end"?d=e.width:r!=="inner"&&(d=e.width/2,f=n.width/2),this.paddingLeft=Math.max((d-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-h+o)*this.width/(this.width-h),0)}else{let u=n.height/2,h=e.height/2;r==="start"?(u=0,h=e.height):r==="end"&&(u=n.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ze(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,s;for(n=0,s=e.length;n<s;n++)$e(e[n].label)&&(e.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=Yw(s,n)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,s){const{ctx:i,_longestTextCache:r}=this,o=[],a=[],c=Math.floor(n/Kw(n,s));let l=0,u=0,h,d,f,p,m,_,y,b,w,T,S;for(h=0;h<n;h+=c){if(p=e[h].label,m=this._resolveTickFontOptions(h),i.font=_=m.string,y=r[_]=r[_]||{data:{},gc:[]},b=m.lineHeight,w=T=0,!$e(p)&&!ot(p))w=Xh(i,y.data,y.gc,w,p),T=b;else if(ot(p))for(d=0,f=p.length;d<f;++d)S=p[d],!$e(S)&&!ot(S)&&(w=Xh(i,y.data,y.gc,w,S),T+=b);o.push(w),a.push(T),l=Math.max(w,l),u=Math.max(T,u)}_G(r,n);const x=o.indexOf(l),R=a.indexOf(u),I=P=>({width:o[P]||0,height:a[P]||0});return{first:I(0),last:I(n-1),widest:I(x),highest:I(R),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return oq(this._alignToPixels?vr(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const s=n[e];return s.$context||(s.$context=bG(this.getContext(),e,s))}return this.$context||(this.$context=yG(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=is(this.labelRotation),s=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,a=r?r.widest.width+o:0,c=r?r.highest.height+o:0;return this.isHorizontal()?c*s>a*i?a/s:c/i:c*i<a*s?c/s:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,s=this.chart,i=this.options,{grid:r,position:o,border:a}=i,c=r.offset,l=this.isHorizontal(),h=this.ticks.length+(c?1:0),d=Ba(r),f=[],p=a.setContext(this.getContext()),m=p.display?p.width:0,_=m/2,y=function(ue){return vr(s,ue,m)};let b,w,T,S,x,R,I,P,$,Q,F,oe;if(o==="top")b=y(this.bottom),R=this.bottom-d,P=b-_,Q=y(e.top)+_,oe=e.bottom;else if(o==="bottom")b=y(this.top),Q=e.top,oe=y(e.bottom)-_,R=b+_,P=this.top+d;else if(o==="left")b=y(this.right),x=this.right-d,I=b-_,$=y(e.left)+_,F=e.right;else if(o==="right")b=y(this.left),$=e.left,F=y(e.right)-_,x=b+_,I=this.left+d;else if(n==="x"){if(o==="center")b=y((e.top+e.bottom)/2+.5);else if(De(o)){const ue=Object.keys(o)[0],le=o[ue];b=y(this.chart.scales[ue].getPixelForValue(le))}Q=e.top,oe=e.bottom,R=b+_,P=R+d}else if(n==="y"){if(o==="center")b=y((e.left+e.right)/2);else if(De(o)){const ue=Object.keys(o)[0],le=o[ue];b=y(this.chart.scales[ue].getPixelForValue(le))}x=b-_,I=x-d,$=e.left,F=e.right}const Re=Te(i.ticks.maxTicksLimit,h),ye=Math.max(1,Math.ceil(h/Re));for(w=0;w<h;w+=ye){const ue=this.getContext(w),le=r.setContext(ue),be=a.setContext(ue),Je=le.lineWidth,fn=le.color,pn=be.dash||[],Tt=be.dashOffset,Fn=le.tickWidth,yn=le.tickColor,us=le.tickBorderDash||[],ht=le.tickBorderDashOffset;T=mG(this,w,c),T!==void 0&&(S=vr(s,T,Je),l?x=I=$=F=S:R=P=Q=oe=S,f.push({tx1:x,ty1:R,tx2:I,ty2:P,x1:$,y1:Q,x2:F,y2:oe,width:Je,color:fn,borderDash:pn,borderDashOffset:Tt,tickWidth:Fn,tickColor:yn,tickBorderDash:us,tickBorderDashOffset:ht}))}return this._ticksLength=h,this._borderValue=b,f}_computeLabelItems(e){const n=this.axis,s=this.options,{position:i,ticks:r}=s,o=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:l,padding:u,mirror:h}=r,d=Ba(s.grid),f=d+u,p=h?-u:f,m=-is(this.labelRotation),_=[];let y,b,w,T,S,x,R,I,P,$,Q,F,oe="middle";if(i==="top")x=this.bottom-p,R=this._getXAxisLabelAlignment();else if(i==="bottom")x=this.top+p,R=this._getXAxisLabelAlignment();else if(i==="left"){const ye=this._getYAxisLabelAlignment(d);R=ye.textAlign,S=ye.x}else if(i==="right"){const ye=this._getYAxisLabelAlignment(d);R=ye.textAlign,S=ye.x}else if(n==="x"){if(i==="center")x=(e.top+e.bottom)/2+f;else if(De(i)){const ye=Object.keys(i)[0],ue=i[ye];x=this.chart.scales[ye].getPixelForValue(ue)+f}R=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")S=(e.left+e.right)/2-f;else if(De(i)){const ye=Object.keys(i)[0],ue=i[ye];S=this.chart.scales[ye].getPixelForValue(ue)}R=this._getYAxisLabelAlignment(d).textAlign}n==="y"&&(c==="start"?oe="top":c==="end"&&(oe="bottom"));const Re=this._getLabelSizes();for(y=0,b=a.length;y<b;++y){w=a[y],T=w.label;const ye=r.setContext(this.getContext(y));I=this.getPixelForTick(y)+r.labelOffset,P=this._resolveTickFontOptions(y),$=P.lineHeight,Q=ot(T)?T.length:1;const ue=Q/2,le=ye.color,be=ye.textStrokeColor,Je=ye.textStrokeWidth;let fn=R;o?(S=I,R==="inner"&&(y===b-1?fn=this.options.reverse?"left":"right":y===0?fn=this.options.reverse?"right":"left":fn="center"),i==="top"?l==="near"||m!==0?F=-Q*$+$/2:l==="center"?F=-Re.highest.height/2-ue*$+$:F=-Re.highest.height+$/2:l==="near"||m!==0?F=$/2:l==="center"?F=Re.highest.height/2-ue*$:F=Re.highest.height-Q*$,h&&(F*=-1),m!==0&&!ye.showLabelBackdrop&&(S+=$/2*Math.sin(m))):(x=I,F=(1-Q)*$/2);let pn;if(ye.showLabelBackdrop){const Tt=dn(ye.backdropPadding),Fn=Re.heights[y],yn=Re.widths[y];let us=F-Tt.top,ht=0-Tt.left;switch(oe){case"middle":us-=Fn/2;break;case"bottom":us-=Fn;break}switch(R){case"center":ht-=yn/2;break;case"right":ht-=yn;break;case"inner":y===b-1?ht-=yn:y>0&&(ht-=yn/2);break}pn={left:ht,top:us,width:yn+Tt.width,height:Fn+Tt.height,color:ye.backdropColor}}_.push({label:T,font:P,textOffset:F,options:{rotation:m,color:le,strokeColor:be,strokeWidth:Je,textAlign:fn,textBaseline:oe,translation:[S,x],backdrop:pn}})}return _}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-is(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:s,mirror:i,padding:r}}=this.options,o=this._getLabelSizes(),a=e+r,c=o.widest.width;let l,u;return n==="left"?i?(u=this.right+r,s==="near"?l="left":s==="center"?(l="center",u+=c/2):(l="right",u+=c)):(u=this.right-a,s==="near"?l="right":s==="center"?(l="center",u-=c/2):(l="left",u=this.left)):n==="right"?i?(u=this.left+r,s==="near"?l="right":s==="center"?(l="center",u-=c/2):(l="left",u-=c)):(u=this.left+a,s==="near"?l="left":s==="center"?(l="center",u+=c/2):(l="right",u=this.right)):l="right",{textAlign:l,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:s,top:i,width:r,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(s,i,r,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(r=>r.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,s=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const a=(c,l,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(c.x,c.y),s.lineTo(l.x,l.y),s.stroke(),s.restore())};if(n.display)for(r=0,o=i.length;r<o;++r){const c=i[r];n.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),n.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:s,grid:i}}=this,r=s.setContext(this.getContext()),o=s.display?r.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let l,u,h,d;this.isHorizontal()?(l=vr(e,this.left,o)-o/2,u=vr(e,this.right,a)+a/2,h=d=c):(h=vr(e,this.top,o)-o/2,d=vr(e,this.bottom,a)+a/2,l=u=c),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(l,h),n.lineTo(u,d),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,i=this._computeLabelArea();i&&Cf(s,i);const r=this.getLabelItems(e);for(const o of r){const a=o.options,c=o.font,l=o.label,u=o.textOffset;oo(s,l,0,u,c,a)}i&&Af(s)}drawTitle(){const{ctx:e,options:{position:n,title:s,reverse:i}}=this;if(!s.display)return;const r=Bt(s.font),o=dn(s.padding),a=s.align;let c=r.lineHeight/2;n==="bottom"||n==="center"||De(n)?(c+=o.bottom,ot(s.text)&&(c+=r.lineHeight*(s.text.length-1))):c+=o.top;const{titleX:l,titleY:u,maxWidth:h,rotation:d}=wG(this,c,n,a);oo(e,s.text,0,0,r,{color:s.color,maxWidth:h,rotation:d,textAlign:vG(a,n,i),textBaseline:"middle",translation:[l,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,s=Te(e.grid&&e.grid.z,-1),i=Te(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==wo.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",i=[];let r,o;for(r=0,o=n.length;r<o;++r){const a=n[r];a[s]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Bt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Iu{constructor(e,n,s){this.type=e,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let s;SG(n)&&(s=this.register(n));const i=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in i||(i[r]=e,EG(e,o,s),this.override&&vt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,s=e.id,i=this.scope;s in n&&delete n[s],i&&s in vt[i]&&(delete vt[i][s],this.override&&delete ro[s])}}function EG(t,e,n){const s=el(Object.create(null),[n?vt.get(n):{},vt.get(e),t.defaults]);vt.set(e,s),t.defaultRoutes&&TG(e,t.defaultRoutes),t.descriptors&&vt.describe(e,t.descriptors)}function TG(t,e){Object.keys(e).forEach(n=>{const s=n.split("."),i=s.pop(),r=[t].concat(s).join("."),o=e[n].split("."),a=o.pop(),c=o.join(".");vt.route(r,i,c,a)})}function SG(t){return"id"in t&&"defaults"in t}class IG{constructor(){this.controllers=new Iu(rs,"datasets",!0),this.elements=new Iu(yi,"elements"),this.plugins=new Iu(Object,"plugins"),this.scales=new Iu(wo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,s){[...n].forEach(i=>{const r=s||this._getRegistryForType(i);s||r.isForType(i)||r===this.plugins&&i.id?this._exec(e,r,i):Ge(i,o=>{const a=s||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,s){const i=Iy(e);Ze(s["before"+i],[],s),n[e](s),Ze(s["after"+i],[],s)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(e))return s}return this.plugins}_get(e,n,s){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return i}}var gs=new IG;class RG{constructor(){this._init=[]}notify(e,n,s,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(r,e,n,s);return n==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,s,i){i=i||{};for(const r of e){const o=r.plugin,a=o[s],c=[n,i,r.options];if(Ze(a,c,o)===!1&&i.cancelable)return!1}return!0}invalidate(){$e(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const s=e&&e.config,i=Te(s.options&&s.options.plugins,{}),r=xG(s);return i===!1&&!n?[]:AG(e,r,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],s=this._cache,i=(r,o)=>r.filter(a=>!o.some(c=>a.plugin.id===c.plugin.id));this._notify(i(n,s),e,"stop"),this._notify(i(s,n),e,"start")}}function xG(t){const e={},n=[],s=Object.keys(gs.plugins.items);for(let r=0;r<s.length;r++)n.push(gs.getPlugin(s[r]));const i=t.plugins||[];for(let r=0;r<i.length;r++){const o=i[r];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function CG(t,e){return!e&&t===!1?null:t===!0?{}:t}function AG(t,{plugins:e,localIds:n},s,i){const r=[],o=t.getContext();for(const a of e){const c=a.id,l=CG(s[c],i);l!==null&&r.push({plugin:a,options:kG(t.config,{plugin:a,local:n[c]},l,o)})}return r}function kG(t,{plugin:e,local:n},s,i){const r=t.pluginScopeKeys(e),o=t.getOptionScopes(s,r);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Kg(t,e){const n=vt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function PG(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function DG(t,e){return t===e?"_index_":"_value_"}function Xw(t){if(t==="x"||t==="y"||t==="r")return t}function OG(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Yg(t,...e){if(Xw(t))return t;for(const n of e){const s=n.axis||OG(n.position)||t.length>1&&Xw(t[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Jw(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function MG(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(s=>s.xAxisID===t||s.yAxisID===t);if(n.length)return Jw(t,"x",n[0])||Jw(t,"y",n[0])}return{}}function LG(t,e){const n=ro[t.type]||{scales:{}},s=e.scales||{},i=Kg(t.type,e),r=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!De(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=Yg(o,a,MG(o,t),vt.scales[a.type]),l=DG(c,i),u=n.scales||{};r[o]=bc(Object.create(null),[{axis:c},a,u[c],u[l]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,c=o.indexAxis||Kg(a,e),u=(ro[a]||{}).scales||{};Object.keys(u).forEach(h=>{const d=PG(h,c),f=o[d+"AxisID"]||d;r[f]=r[f]||Object.create(null),bc(r[f],[{axis:d},s[f],u[h]])})}),Object.keys(r).forEach(o=>{const a=r[o];bc(a,[vt.scales[a.type],vt.scale])}),r}function CC(t){const e=t.options||(t.options={});e.plugins=Te(e.plugins,{}),e.scales=LG(t,e)}function AC(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function NG(t){return t=t||{},t.data=AC(t.data),CC(t),t}const Zw=new Map,kC=new Set;function Ru(t,e){let n=Zw.get(t);return n||(n=e(),Zw.set(t,n),kC.add(n)),n}const Ua=(t,e,n)=>{const s=or(e,n);s!==void 0&&t.add(s)};let VG=class{constructor(e){this._config=NG(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=AC(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),CC(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Ru(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Ru(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Ru(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,s=this.type;return Ru(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const s=this._scopeCache;let i=s.get(e);return(!i||n)&&(i=new Map,s.set(e,i)),i}getOptionScopes(e,n,s){const{options:i,type:r}=this,o=this._cachedScopes(e,s),a=o.get(n);if(a)return a;const c=new Set;n.forEach(u=>{e&&(c.add(e),u.forEach(h=>Ua(c,e,h))),u.forEach(h=>Ua(c,i,h)),u.forEach(h=>Ua(c,ro[r]||{},h)),u.forEach(h=>Ua(c,vt,h)),u.forEach(h=>Ua(c,Wg,h))});const l=Array.from(c);return l.length===0&&l.push(Object.create(null)),kC.has(n)&&o.set(n,l),l}chartOptionScopes(){const{options:e,type:n}=this;return[e,ro[n]||{},vt.datasets[n]||{},{type:n},vt,Wg]}resolveNamedOptions(e,n,s,i=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=eE(this._resolverCache,e,i);let c=o;if(BG(o,n)){r.$shared=!1,s=ar(s)?s():s;const l=this.createResolver(e,s,a);c=pa(o,s,l)}for(const l of n)r[l]=c[l];return r}createResolver(e,n,s=[""],i){const{resolver:r}=eE(this._resolverCache,e,s);return De(n)?pa(r,n,void 0,i):r}};function eE(t,e,n){let s=t.get(e);s||(s=new Map,t.set(e,s));const i=n.join();let r=s.get(i);return r||(r={resolver:Py(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(i,r)),r}const FG=t=>De(t)&&Object.getOwnPropertyNames(t).some(e=>ar(t[e]));function BG(t,e){const{isScriptable:n,isIndexable:s}=cC(t);for(const i of e){const r=n(i),o=s(i),a=(o||r)&&t[i];if(r&&(ar(a)||FG(a))||o&&ot(a))return!0}return!1}var UG="4.4.2";const $G=["top","bottom","left","right","chartArea"];function tE(t,e){return t==="top"||t==="bottom"||$G.indexOf(t)===-1&&e==="x"}function nE(t,e){return function(n,s){return n[t]===s[t]?n[e]-s[e]:n[t]-s[t]}}function sE(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Ze(n&&n.onComplete,[t],e)}function HG(t){const e=t.chart,n=e.options.animation;Ze(n&&n.onProgress,[t],e)}function PC(t){return My()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const ah={},iE=t=>{const e=PC(t);return Object.values(ah).filter(n=>n.canvas===e).pop()};function zG(t,e,n){const s=Object.keys(t);for(const i of s){const r=+i;if(r>=e){const o=t[i];delete t[i],(n>0||r>e)&&(t[r+n]=o)}}}function jG(t,e,n,s){return!n||t.type==="mouseout"?null:s?e:t}function xu(t,e,n){return t.options.clip?t[n]:e[n]}function WG(t,e){const{xScale:n,yScale:s}=t;return n&&s?{left:xu(n,e,"left"),right:xu(n,e,"right"),top:xu(s,e,"top"),bottom:xu(s,e,"bottom")}:e}var Ci;let Vy=(Ci=class{static register(...e){gs.add(...e),rE()}static unregister(...e){gs.remove(...e),rE()}constructor(e,n){const s=this.config=new VG(n),i=PC(e),r=iE(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||cG(i)),this.platform.updateConfig(s);const a=this.platform.acquireContext(i,o.aspectRatio),c=a&&a.canvas,l=c&&c.height,u=c&&c.width;if(this.id=K8(),this.ctx=a,this.canvas=c,this.width=u,this.height=l,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new RG,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=uq(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],ah[this.id]=this,!a||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Ys.listen(this,"complete",sE),Ys.listen(this,"progress",HG),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:s,height:i,_aspectRatio:r}=this;return $e(e)?n&&r?r:i?s/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return gs}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Rw(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Tw(this.canvas,this.ctx),this}stop(){return Ys.stop(this),this}resize(e,n){Ys.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const s=this.options,i=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,r),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Rw(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Ze(s.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ge(n,(s,i)=>{s.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,s=this.scales,i=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let r=[];n&&(r=r.concat(Object.keys(n).map(o=>{const a=n[o],c=Yg(o,a),l=c==="r",u=c==="x";return{options:a,dposition:l?"chartArea":u?"bottom":"left",dtype:l?"radialLinear":u?"category":"linear"}}))),Ge(r,o=>{const a=o.options,c=a.id,l=Yg(c,a),u=Te(a.type,o.dtype);(a.position===void 0||tE(a.position,l)!==tE(o.dposition))&&(a.position=o.dposition),i[c]=!0;let h=null;if(c in s&&s[c].type===u)h=s[c];else{const d=gs.getScale(u);h=new d({id:c,type:u,ctx:this.ctx,chart:this}),s[h.id]=h}h.init(a,e)}),Ge(i,(o,a)=>{o||delete s[a]}),Ge(s,o=>{on.configure(this,o,o.options),on.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,s=e.length;if(e.sort((i,r)=>i.index-r.index),s>n){for(let i=n;i<s;++i)this._destroyDatasetMeta(i);e.splice(n,s-n)}this._sortedMetasets=e.slice(0).sort(nE("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((s,i)=>{n.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let s,i;for(this._removeUnreferencedMetasets(),s=0,i=n.length;s<i;s++){const r=n[s];let o=this.getDatasetMeta(s);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=r.indexAxis||Kg(a,this.options),o.order=r.order||0,o.index=s,o.label=""+r.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const c=gs.getController(a),{datasetElementType:l,dataElementType:u}=vt.datasets[a];Object.assign(c,{dataElementType:gs.getElement(u),datasetElementType:l&&gs.getElement(l)}),o.controller=new c(this,s),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Ge(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let l=0,u=this.data.datasets.length;l<u;l++){const{controller:h}=this.getDatasetMeta(l),d=!i&&r.indexOf(h)===-1;h.buildOrUpdateElements(d),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),i||Ge(r,l=>{l.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(nE("z","_idx"));const{_active:a,_lastEvent:c}=this;c?this._eventHandler(c,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ge(this.scales,e=>{on.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!pw(n,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:i,count:r}of n){const o=s==="_removeElements"?-r:r;zG(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=r=>new Set(e.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),i=s(0);for(let r=1;r<n;r++)if(!pw(i,s(r)))return;return Array.from(i).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;on.update(this,this.width,this.height,e);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],Ge(this.boxes,i=>{s&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,r)=>{i._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,ar(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const s=this.getDatasetMeta(e),i={meta:s,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(s.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ys.has(this)?this.attached&&!Ys.running(this)&&Ys.start(this):(this.draw(),sE({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:i}=this._resizeBeforeDraw;this._resize(s,i),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,s=[];let i,r;for(i=0,r=n.length;i<r;++i){const o=n[i];(!e||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,s=e._clip,i=!s.disabled,r=WG(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(i&&Cf(n,{left:s.left===!1?0:r.left-s.left,right:s.right===!1?this.width:r.right+s.right,top:s.top===!1?0:r.top-s.top,bottom:s.bottom===!1?this.height:r.bottom+s.bottom}),e.controller.draw(),i&&Af(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return si(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,s,i){const r=$7.modes[n];return typeof r=="function"?r(this,e,s,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],s=this._metasets;let i=s.filter(r=>r&&r._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},s.push(i)),i}getContext(){return this.$context||(this.$context=fr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(e,n){const s=this.getDatasetMeta(e);s.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,s){const i=s?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,i);tl(n)?(r.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),o.update(r,{visible:s}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Ys.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Tw(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete ah[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,s=(r,o)=>{n.addEventListener(this,r,o),e[r]=o},i=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};Ge(this.options.events,r=>s(r,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,s=(c,l)=>{n.addEventListener(this,c,l),e[c]=l},i=(c,l)=>{e[c]&&(n.removeEventListener(this,c,l),delete e[c])},r=(c,l)=>{this.canvas&&this.resize(c,l)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),s("resize",r),s("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Ge(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Ge(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,s){const i=s?"set":"remove";let r,o,a,c;for(n==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,c=e.length;a<c;++a){o=e[a];const l=o&&this.getDatasetMeta(o.datasetIndex).controller;l&&l[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],s=e.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Kh(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(e,n,s){return this._plugins.notify(this,e,n,s)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,s){const i=this.options.hover,r=(c,l)=>c.filter(u=>!l.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=r(n,e),a=s?e:r(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const s={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,i)===!1)return;const r=this._handleEvent(e,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,i),(r||s.changed)&&this.render(),this}_handleEvent(e,n,s){const{_active:i=[],options:r}=this,o=n,a=this._getActiveElements(e,i,s,o),c=eq(e),l=jG(e,this._lastEvent,s,c);s&&(this._lastEvent=null,Ze(r.onHover,[e,a,this],this),c&&Ze(r.onClick,[e,a,this],this));const u=!Kh(a,i);return(u||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=l,u}_getActiveElements(e,n,s,i){if(e.type==="mouseout")return[];if(!s)return n;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,i)}},C(Ci,"defaults",vt),C(Ci,"instances",ah),C(Ci,"overrides",ro),C(Ci,"registry",gs),C(Ci,"version",UG),C(Ci,"getChart",iE),Ci);function rE(){return Ge(Vy.instances,t=>t._plugins.invalidate())}function qG(t,e,n){const{startAngle:s,pixelMargin:i,x:r,y:o,outerRadius:a,innerRadius:c}=e;let l=i/a;t.beginPath(),t.arc(r,o,a,s-l,n+l),c>i?(l=i/c,t.arc(r,o,c,n+l,s-l,!0)):t.arc(r,o,i,n+It,s-It),t.closePath(),t.clip()}function GG(t){return ky(t,["outerStart","outerEnd","innerStart","innerEnd"])}function KG(t,e,n,s){const i=GG(t.options.borderRadius),r=(n-e)/2,o=Math.min(r,s*e/2),a=c=>{const l=(n-Math.min(r,c))*s/2;return zt(c,0,Math.min(r,l))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:zt(i.innerStart,0,o),innerEnd:zt(i.innerEnd,0,o)}}function xo(t,e,n,s){return{x:n+t*Math.cos(e),y:s+t*Math.sin(e)}}function ed(t,e,n,s,i,r){const{x:o,y:a,startAngle:c,pixelMargin:l,innerRadius:u}=e,h=Math.max(e.outerRadius+s+n-l,0),d=u>0?u+s+n+l:0;let f=0;const p=i-c;if(s){const ye=u>0?u-s:0,ue=h>0?h-s:0,le=(ye+ue)/2,be=le!==0?p*le/(le+s):p;f=(p-be)/2}const m=Math.max(.001,p*h-n/ct)/h,_=(p-m)/2,y=c+_+f,b=i-_-f,{outerStart:w,outerEnd:T,innerStart:S,innerEnd:x}=KG(e,d,h,b-y),R=h-w,I=h-T,P=y+w/R,$=b-T/I,Q=d+S,F=d+x,oe=y+S/Q,Re=b-x/F;if(t.beginPath(),r){const ye=(P+$)/2;if(t.arc(o,a,h,P,ye),t.arc(o,a,h,ye,$),T>0){const Je=xo(I,$,o,a);t.arc(Je.x,Je.y,T,$,b+It)}const ue=xo(F,b,o,a);if(t.lineTo(ue.x,ue.y),x>0){const Je=xo(F,Re,o,a);t.arc(Je.x,Je.y,x,b+It,Re+Math.PI)}const le=(b-x/d+(y+S/d))/2;if(t.arc(o,a,d,b-x/d,le,!0),t.arc(o,a,d,le,y+S/d,!0),S>0){const Je=xo(Q,oe,o,a);t.arc(Je.x,Je.y,S,oe+Math.PI,y-It)}const be=xo(R,y,o,a);if(t.lineTo(be.x,be.y),w>0){const Je=xo(R,P,o,a);t.arc(Je.x,Je.y,w,y-It,P)}}else{t.moveTo(o,a);const ye=Math.cos(P)*h+o,ue=Math.sin(P)*h+a;t.lineTo(ye,ue);const le=Math.cos($)*h+o,be=Math.sin($)*h+a;t.lineTo(le,be)}t.closePath()}function YG(t,e,n,s,i){const{fullCircles:r,startAngle:o,circumference:a}=e;let c=e.endAngle;if(r){ed(t,e,n,s,c,i);for(let l=0;l<r;++l)t.fill();isNaN(a)||(c=o+(a%at||at))}return ed(t,e,n,s,c,i),t.fill(),c}function QG(t,e,n,s,i){const{fullCircles:r,startAngle:o,circumference:a,options:c}=e,{borderWidth:l,borderJoinStyle:u,borderDash:h,borderDashOffset:d}=c,f=c.borderAlign==="inner";if(!l)return;t.setLineDash(h||[]),t.lineDashOffset=d,f?(t.lineWidth=l*2,t.lineJoin=u||"round"):(t.lineWidth=l,t.lineJoin=u||"bevel");let p=e.endAngle;if(r){ed(t,e,n,s,p,i);for(let m=0;m<r;++m)t.stroke();isNaN(a)||(p=o+(a%at||at))}f&&qG(t,e,p),r||(ed(t,e,n,s,p,i),t.stroke())}class tc extends yi{constructor(n){super();C(this,"circumference");C(this,"endAngle");C(this,"fullCircles");C(this,"innerRadius");C(this,"outerRadius");C(this,"pixelMargin");C(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,s,i){const r=this.getProps(["x","y"],i),{angle:o,distance:a}=Jx(r,{x:n,y:s}),{startAngle:c,endAngle:l,innerRadius:u,outerRadius:h,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),f=(this.options.spacing+this.options.borderWidth)/2,m=Te(d,l-c)>=at||nl(o,c,l),_=ti(a,u+f,h+f);return m&&_}getCenterPoint(n){const{x:s,y:i,startAngle:r,endAngle:o,innerRadius:a,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:l,spacing:u}=this.options,h=(r+o)/2,d=(a+c+u+l)/2;return{x:s+Math.cos(h)*d,y:i+Math.sin(h)*d}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:s,circumference:i}=this,r=(s.offset||0)/4,o=(s.spacing||0)/2,a=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=i>at?Math.floor(i/at):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const c=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(c)*r,Math.sin(c)*r);const l=1-Math.sin(Math.min(ct,i||0)),u=r*l;n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,YG(n,this,u,o,a),QG(n,this,u,o,a),n.restore()}}C(tc,"id","arc"),C(tc,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),C(tc,"defaultRoutes",{backgroundColor:"backgroundColor"}),C(tc,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function DC(t,e,n=e){t.lineCap=Te(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Te(n.borderDash,e.borderDash)),t.lineDashOffset=Te(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Te(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Te(n.borderWidth,e.borderWidth),t.strokeStyle=Te(n.borderColor,e.borderColor)}function XG(t,e,n){t.lineTo(n.x,n.y)}function JG(t){return t.stepped?Eq:t.tension||t.cubicInterpolationMode==="monotone"?Tq:XG}function OC(t,e,n={}){const s=t.length,{start:i=0,end:r=s-1}=n,{start:o,end:a}=e,c=Math.max(i,o),l=Math.min(r,a),u=i<o&&r<o||i>a&&r>a;return{count:s,start:c,loop:e.loop,ilen:l<c&&!u?s+l-c:l-c}}function ZG(t,e,n,s){const{points:i,options:r}=e,{count:o,start:a,loop:c,ilen:l}=OC(i,n,s),u=JG(r);let{move:h=!0,reverse:d}=s||{},f,p,m;for(f=0;f<=l;++f)p=i[(a+(d?l-f:f))%o],!p.skip&&(h?(t.moveTo(p.x,p.y),h=!1):u(t,m,p,d,r.stepped),m=p);return c&&(p=i[(a+(d?l:0))%o],u(t,m,p,d,r.stepped)),!!c}function eK(t,e,n,s){const i=e.points,{count:r,start:o,ilen:a}=OC(i,n,s),{move:c=!0,reverse:l}=s||{};let u=0,h=0,d,f,p,m,_,y;const b=T=>(o+(l?a-T:T))%r,w=()=>{m!==_&&(t.lineTo(u,_),t.lineTo(u,m),t.lineTo(u,y))};for(c&&(f=i[b(0)],t.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=i[b(d)],f.skip)continue;const T=f.x,S=f.y,x=T|0;x===p?(S<m?m=S:S>_&&(_=S),u=(h*u+T)/++h):(w(),t.lineTo(T,S),p=x,h=0,m=_=S),y=S}w()}function Qg(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?eK:ZG}function tK(t){return t.stepped?t7:t.tension||t.cubicInterpolationMode==="monotone"?n7:Ir}function nK(t,e,n,s){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,s)&&i.closePath()),DC(t,e.options),t.stroke(i)}function sK(t,e,n,s){const{segments:i,options:r}=e,o=Qg(e);for(const a of i)DC(t,r,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+s-1})&&t.closePath(),t.stroke()}const iK=typeof Path2D=="function";function rK(t,e,n,s){iK&&!e.options.segment?nK(t,e,n,s):sK(t,e,n,s)}class zi extends yi{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const i=s.spanGaps?this._loop:this._fullLoop;Gq(this._points,s,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=c7(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,s=e.length;return s&&n[e[s-1].end]}interpolate(e,n){const s=this.options,i=e[n],r=this.points,o=yC(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],c=tK(s);let l,u;for(l=0,u=o.length;l<u;++l){const{start:h,end:d}=o[l],f=r[h],p=r[d];if(f===p){a.push(f);continue}const m=Math.abs((i-f[n])/(p[n]-f[n])),_=c(f,p,m,s.stepped);_[n]=e[n],a.push(_)}return a.length===1?a[0]:a}pathSegment(e,n,s){return Qg(this)(e,this,n,s)}path(e,n,s){const i=this.segments,r=Qg(this);let o=this._loop;n=n||0,s=s||this.points.length-n;for(const a of i)o&=r(e,this,a,{start:n,end:n+s-1});return!!o}draw(e,n,s,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),rK(e,this,s,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}C(zi,"id","line"),C(zi,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),C(zi,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),C(zi,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function oE(t,e,n,s){const i=t.options,{[n]:r}=t.getProps([n],s);return Math.abs(e-r)<i.radius+i.hitRadius}class ch extends yi{constructor(n){super();C(this,"parsed");C(this,"skip");C(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,s,i){const r=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(s-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(n,s){return oE(this,n,"x",s)}inYRange(n,s){return oE(this,n,"y",s)}getCenterPoint(n){const{x:s,y:i}=this.getProps(["x","y"],n);return{x:s,y:i}}size(n){n=n||this.options||{};let s=n.radius||0;s=Math.max(s,s&&n.hoverRadius||0);const i=s&&n.borderWidth||0;return(s+i)*2}draw(n,s){const i=this.options;this.skip||i.radius<.1||!si(this,s,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,qg(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}C(ch,"id","point"),C(ch,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),C(ch,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function MC(t,e){const{x:n,y:s,base:i,width:r,height:o}=t.getProps(["x","y","base","width","height"],e);let a,c,l,u,h;return t.horizontal?(h=o/2,a=Math.min(n,i),c=Math.max(n,i),l=s-h,u=s+h):(h=r/2,a=n-h,c=n+h,l=Math.min(s,i),u=Math.max(s,i)),{left:a,top:l,right:c,bottom:u}}function ji(t,e,n,s){return t?0:zt(e,n,s)}function oK(t,e,n){const s=t.options.borderWidth,i=t.borderSkipped,r=aC(s);return{t:ji(i.top,r.top,0,n),r:ji(i.right,r.right,0,e),b:ji(i.bottom,r.bottom,0,n),l:ji(i.left,r.left,0,e)}}function aK(t,e,n){const{enableBorderRadius:s}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,r=Gr(i),o=Math.min(e,n),a=t.borderSkipped,c=s||De(i);return{topLeft:ji(!c||a.top||a.left,r.topLeft,0,o),topRight:ji(!c||a.top||a.right,r.topRight,0,o),bottomLeft:ji(!c||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:ji(!c||a.bottom||a.right,r.bottomRight,0,o)}}function cK(t){const e=MC(t),n=e.right-e.left,s=e.bottom-e.top,i=oK(t,n/2,s/2),r=aK(t,n/2,s/2);return{outer:{x:e.left,y:e.top,w:n,h:s,radius:r},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:s-i.t-i.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,r.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(i.b,i.r))}}}}function Op(t,e,n,s){const i=e===null,r=n===null,a=t&&!(i&&r)&&MC(t,s);return a&&(i||ti(e,a.left,a.right))&&(r||ti(n,a.top,a.bottom))}function lK(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function uK(t,e){t.rect(e.x,e.y,e.w,e.h)}function Mp(t,e,n={}){const s=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,r=(t.x+t.w!==n.x+n.w?e:0)-s,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+s,y:t.y+i,w:t.w+r,h:t.h+o,radius:t.radius}}class lh extends yi{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:s,backgroundColor:i}}=this,{inner:r,outer:o}=cK(this),a=lK(o.radius)?sl:uK;e.save(),(o.w!==r.w||o.h!==r.h)&&(e.beginPath(),a(e,Mp(o,n,r)),e.clip(),a(e,Mp(r,-n,o)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),a(e,Mp(r,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,s){return Op(this,e,n,s)}inXRange(e,n){return Op(this,e,null,n)}inYRange(e,n){return Op(this,null,e,n)}getCenterPoint(e){const{x:n,y:s,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(n+i)/2:n,y:r?s:(s+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}C(lh,"id","bar"),C(lh,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),C(lh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var hK=Object.freeze({__proto__:null,ArcElement:tc,BarElement:lh,LineElement:zi,PointElement:ch});const Xg=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],aE=Xg.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function LC(t){return Xg[t%Xg.length]}function NC(t){return aE[t%aE.length]}function dK(t,e){return t.borderColor=LC(e),t.backgroundColor=NC(e),++e}function fK(t,e){return t.backgroundColor=t.data.map(()=>LC(e++)),e}function pK(t,e){return t.backgroundColor=t.data.map(()=>NC(e++)),e}function gK(t){let e=0;return(n,s)=>{const i=t.getDatasetMeta(s).controller;i instanceof Br?e=fK(n,e):i instanceof Tc?e=pK(n,e):i&&(e=dK(n,e))}}function cE(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function mK(t){return t&&(t.borderColor||t.backgroundColor)}var _K={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:s},options:i}=t.config,{elements:r}=i;if(!n.forceOverride&&(cE(s)||mK(i)||r&&cE(r)))return;const o=gK(t);s.forEach(o)}};function yK(t,e,n,s,i){const r=i.samples||s;if(r>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(r-2);let c=0;const l=e+n-1;let u=e,h,d,f,p,m;for(o[c++]=t[u],h=0;h<r-2;h++){let _=0,y=0,b;const w=Math.floor((h+1)*a)+1+e,T=Math.min(Math.floor((h+2)*a)+1,n)+e,S=T-w;for(b=w;b<T;b++)_+=t[b].x,y+=t[b].y;_/=S,y/=S;const x=Math.floor(h*a)+1+e,R=Math.min(Math.floor((h+1)*a)+1,n)+e,{x:I,y:P}=t[u];for(f=p=-1,b=x;b<R;b++)p=.5*Math.abs((I-_)*(t[b].y-P)-(I-t[b].x)*(y-P)),p>f&&(f=p,d=t[b],m=b);o[c++]=d,u=m}return o[c++]=t[l],o}function bK(t,e,n,s){let i=0,r=0,o,a,c,l,u,h,d,f,p,m;const _=[],y=e+n-1,b=t[e].x,T=t[y].x-b;for(o=e;o<e+n;++o){a=t[o],c=(a.x-b)/T*s,l=a.y;const S=c|0;if(S===u)l<p?(p=l,h=o):l>m&&(m=l,d=o),i=(r*i+a.x)/++r;else{const x=o-1;if(!$e(h)&&!$e(d)){const R=Math.min(h,d),I=Math.max(h,d);R!==f&&R!==x&&_.push({...t[R],x:i}),I!==f&&I!==x&&_.push({...t[I],x:i})}o>0&&x!==f&&_.push(t[x]),_.push(a),u=S,r=0,p=m=l,h=d=f=o}}return _}function VC(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function lE(t){t.data.datasets.forEach(e=>{VC(e)})}function vK(t,e){const n=e.length;let s=0,i;const{iScale:r}=t,{min:o,max:a,minDefined:c,maxDefined:l}=r.getUserBounds();return c&&(s=zt(ni(e,r.axis,o).lo,0,n-1)),l?i=zt(ni(e,r.axis,a).hi+1,s,n)-s:i=n-s,{start:s,count:i}}var wK={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){lE(t);return}const s=t.width;t.data.datasets.forEach((i,r)=>{const{_data:o,indexAxis:a}=i,c=t.getDatasetMeta(r),l=o||i.data;if(Za([a,t.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;const u=t.scales[c.xAxisID];if(u.type!=="linear"&&u.type!=="time"||t.options.parsing)return;let{start:h,count:d}=vK(c,l);const f=n.threshold||4*s;if(d<=f){VC(i);return}$e(o)&&(i._data=l,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(m){this._data=m}}));let p;switch(n.algorithm){case"lttb":p=yK(l,h,d,s,n);break;case"min-max":p=bK(l,h,d,s);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}i._decimated=p})},destroy(t){lE(t)}};function EK(t,e,n){const s=t.segments,i=t.points,r=e.points,o=[];for(const a of s){let{start:c,end:l}=a;l=Fy(c,l,i);const u=Jg(n,i[c],i[l],a.loop);if(!e.segments){o.push({source:a,target:u,start:i[c],end:i[l]});continue}const h=yC(e,u);for(const d of h){const f=Jg(n,r[d.start],r[d.end],d.loop),p=_C(a,i,f);for(const m of p)o.push({source:m,target:d,start:{[n]:uE(u,f,"start",Math.max)},end:{[n]:uE(u,f,"end",Math.min)}})}}return o}function Jg(t,e,n,s){if(s)return;let i=e[t],r=n[t];return t==="angle"&&(i=Pn(i),r=Pn(r)),{property:t,start:i,end:r}}function TK(t,e){const{x:n=null,y:s=null}=t||{},i=e.points,r=[];return e.segments.forEach(({start:o,end:a})=>{a=Fy(o,a,i);const c=i[o],l=i[a];s!==null?(r.push({x:c.x,y:s}),r.push({x:l.x,y:s})):n!==null&&(r.push({x:n,y:c.y}),r.push({x:n,y:l.y}))}),r}function Fy(t,e,n){for(;e>t;e--){const s=n[e];if(!isNaN(s.x)&&!isNaN(s.y))break}return e}function uE(t,e,n,s){return t&&e?s(t[n],e[n]):t?t[n]:e?e[n]:0}function FC(t,e){let n=[],s=!1;return ot(t)?(s=!0,n=t):n=TK(t,e),n.length?new zi({points:n,options:{tension:0},_loop:s,_fullLoop:s}):null}function hE(t){return t&&t.fill!==!1}function SK(t,e,n){let i=t[e].fill;const r=[e];let o;if(!n)return i;for(;i!==!1&&r.indexOf(i)===-1;){if(!bt(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;r.push(i),i=o.fill}return!1}function IK(t,e,n){const s=AK(t);if(De(s))return isNaN(s.value)?!1:s;let i=parseFloat(s);return bt(i)&&Math.floor(i)===i?RK(s[0],e,i,n):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function RK(t,e,n,s){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=s?!1:n}function xK(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:De(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function CK(t,e,n){let s;return t==="start"?s=n:t==="end"?s=e.options.reverse?e.min:e.max:De(t)?s=t.value:s=e.getBaseValue(),s}function AK(t){const e=t.options,n=e.fill;let s=Te(n&&n.target,n);return s===void 0&&(s=!!e.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function kK(t){const{scale:e,index:n,line:s}=t,i=[],r=s.segments,o=s.points,a=PK(e,n);a.push(FC({x:null,y:e.bottom},s));for(let c=0;c<r.length;c++){const l=r[c];for(let u=l.start;u<=l.end;u++)DK(i,o[u],a)}return new zi({points:i,options:{}})}function PK(t,e){const n=[],s=t.getMatchingVisibleMetas("line");for(let i=0;i<s.length;i++){const r=s[i];if(r.index===e)break;r.hidden||n.unshift(r.dataset)}return n}function DK(t,e,n){const s=[];for(let i=0;i<n.length;i++){const r=n[i],{first:o,last:a,point:c}=OK(r,e,"x");if(!(!c||o&&a)){if(o)s.unshift(c);else if(t.push(c),!a)break}}t.push(...s)}function OK(t,e,n){const s=t.interpolate(e,n);if(!s)return{};const i=s[n],r=t.segments,o=t.points;let a=!1,c=!1;for(let l=0;l<r.length;l++){const u=r[l],h=o[u.start][n],d=o[u.end][n];if(ti(i,h,d)){a=i===h,c=i===d;break}}return{first:a,last:c,point:s}}class BC{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,s){const{x:i,y:r,radius:o}=this;return n=n||{start:0,end:at},e.arc(i,r,o,n.end,n.start,!0),!s.bounds}interpolate(e){const{x:n,y:s,radius:i}=this,r=e.angle;return{x:n+Math.cos(r)*i,y:s+Math.sin(r)*i,angle:r}}}function MK(t){const{chart:e,fill:n,line:s}=t;if(bt(n))return LK(e,n);if(n==="stack")return kK(t);if(n==="shape")return!0;const i=NK(t);return i instanceof BC?i:FC(i,s)}function LK(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function NK(t){return(t.scale||{}).getPointPositionForValue?FK(t):VK(t)}function VK(t){const{scale:e={},fill:n}=t,s=xK(n,e);if(bt(s)){const i=e.isHorizontal();return{x:i?s:null,y:i?null:s}}return null}function FK(t){const{scale:e,fill:n}=t,s=e.options,i=e.getLabels().length,r=s.reverse?e.max:e.min,o=CK(n,e,r),a=[];if(s.grid.circular){const c=e.getPointPositionForValue(0,r);return new BC({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<i;++c)a.push(e.getPointPositionForValue(c,o));return a}function Lp(t,e,n){const s=MK(e),{line:i,scale:r,axis:o}=e,a=i.options,c=a.fill,l=a.backgroundColor,{above:u=l,below:h=l}=c||{};s&&i.points.length&&(Cf(t,n),BK(t,{line:i,target:s,above:u,below:h,area:n,scale:r,axis:o}),Af(t))}function BK(t,e){const{line:n,target:s,above:i,below:r,area:o,scale:a}=e,c=n._loop?"angle":e.axis;t.save(),c==="x"&&r!==i&&(dE(t,s,o.top),fE(t,{line:n,target:s,color:i,scale:a,property:c}),t.restore(),t.save(),dE(t,s,o.bottom)),fE(t,{line:n,target:s,color:r,scale:a,property:c}),t.restore()}function dE(t,e,n){const{segments:s,points:i}=e;let r=!0,o=!1;t.beginPath();for(const a of s){const{start:c,end:l}=a,u=i[c],h=i[Fy(c,l,i)];r?(t.moveTo(u.x,u.y),r=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(h.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function fE(t,e){const{line:n,target:s,property:i,color:r,scale:o}=e,a=EK(n,s,i);for(const{source:c,target:l,start:u,end:h}of a){const{style:{backgroundColor:d=r}={}}=c,f=s!==!0;t.save(),t.fillStyle=d,UK(t,o,f&&Jg(i,u,h)),t.beginPath();const p=!!n.pathSegment(t,c);let m;if(f){p?t.closePath():pE(t,s,h,i);const _=!!s.pathSegment(t,l,{move:p,reverse:!0});m=p&&_,m||pE(t,s,u,i)}t.closePath(),t.fill(m?"evenodd":"nonzero"),t.restore()}}function UK(t,e,n){const{top:s,bottom:i}=e.chart.chartArea,{property:r,start:o,end:a}=n||{};r==="x"&&(t.beginPath(),t.rect(o,s,a-o,i-s),t.clip())}function pE(t,e,n,s){const i=e.interpolate(n,s);i&&t.lineTo(i.x,i.y)}var $K={id:"filler",afterDatasetsUpdate(t,e,n){const s=(t.data.datasets||[]).length,i=[];let r,o,a,c;for(o=0;o<s;++o)r=t.getDatasetMeta(o),a=r.dataset,c=null,a&&a.options&&a instanceof zi&&(c={visible:t.isDatasetVisible(o),index:o,fill:IK(a,o,s),chart:t,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=c,i.push(c);for(o=0;o<s;++o)c=i[o],!(!c||c.fill===!1)&&(c.fill=SK(i,o,n.propagate))},beforeDraw(t,e,n){const s=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),r=t.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),s&&a.fill&&Lp(t.ctx,a,r))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const s=t.getSortedVisibleDatasetMetas();for(let i=s.length-1;i>=0;--i){const r=s[i].$filler;hE(r)&&Lp(t.ctx,r,t.chartArea)}},beforeDatasetDraw(t,e,n){const s=e.meta.$filler;!hE(s)||n.drawTime!=="beforeDatasetDraw"||Lp(t.ctx,s,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const gE=(t,e)=>{let{boxHeight:n=e,boxWidth:s=e}=t;return t.usePointStyle&&(n=Math.min(n,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(e,n)}},HK=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class mE extends yi{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,s){this.maxWidth=e,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Ze(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(s=>e.filter(s,this.chart.data))),e.sort&&(n=n.sort((s,i)=>e.sort(s,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,i=Bt(s.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:c}=gE(s,r);let l,u;n.font=i.string,this.isHorizontal()?(l=this.maxWidth,u=this._fitRows(o,r,a,c)+10):(u=this.maxHeight,l=this._fitCols(o,i,a,c)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,s,i){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.lineWidths=[0],u=i+a;let h=e;r.textAlign="left",r.textBaseline="middle";let d=-1,f=-u;return this.legendItems.forEach((p,m)=>{const _=s+n/2+r.measureText(p.text).width;(m===0||l[l.length-1]+_+2*a>o)&&(h+=u,l[l.length-(m>0?0:1)]=0,f+=u,d++),c[m]={left:0,top:f,row:d,width:_,height:i},l[l.length-1]+=_+a}),h}_fitCols(e,n,s,i){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.columnSizes=[],u=o-e;let h=a,d=0,f=0,p=0,m=0;return this.legendItems.forEach((_,y)=>{const{itemWidth:b,itemHeight:w}=zK(s,n,r,_,i);y>0&&f+w+2*a>u&&(h+=d+a,l.push({width:d,height:f}),p+=d+a,m++,d=f=0),c[y]={left:p,top:f,col:m,width:b,height:w},d=Math.max(d,b),f+=w+a}),h+=d,l.push({width:d,height:f}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:i},rtl:r}}=this,o=Ko(r,this.left,this.width);if(this.isHorizontal()){let a=0,c=tn(s,this.left+i,this.right-this.lineWidths[a]);for(const l of n)a!==l.row&&(a=l.row,c=tn(s,this.left+i,this.right-this.lineWidths[a])),l.top+=this.top+e+i,l.left=o.leftForLtr(o.x(c),l.width),c+=l.width+i}else{let a=0,c=tn(s,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const l of n)l.col!==a&&(a=l.col,c=tn(s,this.top+e+i,this.bottom-this.columnSizes[a].height)),l.top=c,l.left+=this.left+i,l.left=o.leftForLtr(o.x(l.left),l.width),c+=l.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Cf(e,this),this._draw(),Af(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:s,ctx:i}=this,{align:r,labels:o}=e,a=vt.color,c=Ko(e.rtl,this.left,this.width),l=Bt(o.font),{padding:u}=o,h=l.size,d=h/2;let f;this.drawTitle(),i.textAlign=c.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;const{boxWidth:p,boxHeight:m,itemHeight:_}=gE(o,h),y=function(x,R,I){if(isNaN(p)||p<=0||isNaN(m)||m<0)return;i.save();const P=Te(I.lineWidth,1);if(i.fillStyle=Te(I.fillStyle,a),i.lineCap=Te(I.lineCap,"butt"),i.lineDashOffset=Te(I.lineDashOffset,0),i.lineJoin=Te(I.lineJoin,"miter"),i.lineWidth=P,i.strokeStyle=Te(I.strokeStyle,a),i.setLineDash(Te(I.lineDash,[])),o.usePointStyle){const $={radius:m*Math.SQRT2/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:P},Q=c.xPlus(x,p/2),F=R+d;oC(i,$,Q,F,o.pointStyleWidth&&p)}else{const $=R+Math.max((h-m)/2,0),Q=c.leftForLtr(x,p),F=Gr(I.borderRadius);i.beginPath(),Object.values(F).some(oe=>oe!==0)?sl(i,{x:Q,y:$,w:p,h:m,radius:F}):i.rect(Q,$,p,m),i.fill(),P!==0&&i.stroke()}i.restore()},b=function(x,R,I){oo(i,I.text,x,R+_/2,l,{strikethrough:I.hidden,textAlign:c.textAlign(I.textAlign)})},w=this.isHorizontal(),T=this._computeTitleHeight();w?f={x:tn(r,this.left+u,this.right-s[0]),y:this.top+u+T,line:0}:f={x:this.left+u,y:tn(r,this.top+T+u,this.bottom-n[0].height),line:0},pC(this.ctx,e.textDirection);const S=_+u;this.legendItems.forEach((x,R)=>{i.strokeStyle=x.fontColor,i.fillStyle=x.fontColor;const I=i.measureText(x.text).width,P=c.textAlign(x.textAlign||(x.textAlign=o.textAlign)),$=p+d+I;let Q=f.x,F=f.y;c.setWidth(this.width),w?R>0&&Q+$+u>this.right&&(F=f.y+=S,f.line++,Q=f.x=tn(r,this.left+u,this.right-s[f.line])):R>0&&F+S>this.bottom&&(Q=f.x=Q+n[f.line].width+u,f.line++,F=f.y=tn(r,this.top+T+u,this.bottom-n[f.line].height));const oe=c.x(Q);if(y(oe,F,x),Q=hq(P,Q+p+d,w?Q+$:this.right,e.rtl),b(c.x(Q),F,x),w)f.x+=$+u;else if(typeof x.text!="string"){const Re=l.lineHeight;f.y+=UC(x,Re)+u}else f.y+=S}),gC(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,s=Bt(n.font),i=dn(n.padding);if(!n.display)return;const r=Ko(e.rtl,this.left,this.width),o=this.ctx,a=n.position,c=s.size/2,l=i.top+c;let u,h=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),u=this.top+l,h=tn(e.align,h,this.right-d);else{const p=this.columnSizes.reduce((m,_)=>Math.max(m,_.height),0);u=l+tn(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const f=tn(a,h,h+d);o.textAlign=r.textAlign(Cy(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,oo(o,n.text,f,u,s)}_computeTitleHeight(){const e=this.options.title,n=Bt(e.font),s=dn(e.padding);return e.display?n.lineHeight+s.height:0}_getLegendItemAt(e,n){let s,i,r;if(ti(e,this.left,this.right)&&ti(n,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(i=r[s],ti(e,i.left,i.left+i.width)&&ti(n,i.top,i.top+i.height))return this.legendItems[s]}return null}handleEvent(e){const n=this.options;if(!qK(e.type,n))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,r=HK(i,s);i&&!r&&Ze(n.onLeave,[e,i,this],this),this._hoveredItem=s,s&&!r&&Ze(n.onHover,[e,s,this],this)}else s&&Ze(n.onClick,[e,s,this],this)}}function zK(t,e,n,s,i){const r=jK(s,t,e,n),o=WK(i,s,e.lineHeight);return{itemWidth:r,itemHeight:o}}function jK(t,e,n,s){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((r,o)=>r.length>o.length?r:o)),e+n.size/2+s.measureText(i).width}function WK(t,e,n){let s=t;return typeof e.text!="string"&&(s=UC(e,n)),s}function UC(t,e){const n=t.text?t.text.length:0;return e*n}function qK(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var GK={id:"legend",_element:mE,start(t,e,n){const s=t.legend=new mE({ctx:t.ctx,options:n,chart:t});on.configure(t,s,n),on.addBox(t,s)},stop(t){on.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const s=t.legend;on.configure(t,s,n),s.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const s=e.datasetIndex,i=n.chart;i.isDatasetVisible(s)?(i.hide(s),e.hidden=!0):(i.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(c=>{const l=c.controller.getStyle(n?0:void 0),u=dn(l.borderWidth);return{text:e[c.index].label,fillStyle:l.backgroundColor,fontColor:r,hidden:!c.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:l.borderColor,pointStyle:s||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:c.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class By extends yi{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=ot(s.text)?s.text.length:1;this._padding=dn(s.padding);const r=i*Bt(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:s,bottom:i,right:r,options:o}=this,a=o.align;let c=0,l,u,h;return this.isHorizontal()?(u=tn(a,s,r),h=n+e,l=r-s):(o.position==="left"?(u=s+e,h=tn(a,i,n),c=ct*-.5):(u=r-e,h=tn(a,n,i),c=ct*.5),l=i-n),{titleX:u,titleY:h,maxWidth:l,rotation:c}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const s=Bt(n.font),r=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:c,rotation:l}=this._drawArgs(r);oo(e,n.text,0,0,s,{color:n.color,maxWidth:c,rotation:l,textAlign:Cy(n.align),textBaseline:"middle",translation:[o,a]})}}function KK(t,e){const n=new By({ctx:t.ctx,options:e,chart:t});on.configure(t,n,e),on.addBox(t,n),t.titleBlock=n}var YK={id:"title",_element:By,start(t,e,n){KK(t,n)},stop(t){const e=t.titleBlock;on.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const s=t.titleBlock;on.configure(t,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Cu=new WeakMap;var QK={id:"subtitle",start(t,e,n){const s=new By({ctx:t.ctx,options:n,chart:t});on.configure(t,s,n),on.addBox(t,s),Cu.set(t,s)},stop(t){on.removeBox(t,Cu.get(t)),Cu.delete(t)},beforeUpdate(t,e,n){const s=Cu.get(t);on.configure(t,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const nc={average(t){if(!t.length)return!1;let e,n,s=new Set,i=0,r=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const c=a.tooltipPosition();s.add(c.x),i+=c.y,++r}}return{x:[...s].reduce((a,c)=>a+c)/s.size,y:i/r}},nearest(t,e){if(!t.length)return!1;let n=e.x,s=e.y,i=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=t.length;r<o;++r){const c=t[r].element;if(c&&c.hasValue()){const l=c.getCenterPoint(),u=jg(e,l);u<i&&(i=u,a=c)}}if(a){const c=a.tooltipPosition();n=c.x,s=c.y}return{x:n,y:s}}};function ps(t,e){return e&&(ot(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Qs(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function XK(t,e){const{element:n,datasetIndex:s,index:i}=e,r=t.getDatasetMeta(s).controller,{label:o,value:a}=r.getLabelAndValue(i);return{chart:t,label:o,parsed:r.getParsed(i),raw:t.data.datasets[s].data[i],formattedValue:a,dataset:r.getDataset(),dataIndex:i,datasetIndex:s,element:n}}function _E(t,e){const n=t.chart.ctx,{body:s,footer:i,title:r}=t,{boxWidth:o,boxHeight:a}=e,c=Bt(e.bodyFont),l=Bt(e.titleFont),u=Bt(e.footerFont),h=r.length,d=i.length,f=s.length,p=dn(e.padding);let m=p.height,_=0,y=s.reduce((T,S)=>T+S.before.length+S.lines.length+S.after.length,0);if(y+=t.beforeBody.length+t.afterBody.length,h&&(m+=h*l.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),y){const T=e.displayColors?Math.max(a,c.lineHeight):c.lineHeight;m+=f*T+(y-f)*c.lineHeight+(y-1)*e.bodySpacing}d&&(m+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let b=0;const w=function(T){_=Math.max(_,n.measureText(T).width+b)};return n.save(),n.font=l.string,Ge(t.title,w),n.font=c.string,Ge(t.beforeBody.concat(t.afterBody),w),b=e.displayColors?o+2+e.boxPadding:0,Ge(s,T=>{Ge(T.before,w),Ge(T.lines,w),Ge(T.after,w)}),b=0,n.font=u.string,Ge(t.footer,w),n.restore(),_+=p.width,{width:_,height:m}}function JK(t,e){const{y:n,height:s}=e;return n<s/2?"top":n>t.height-s/2?"bottom":"center"}function ZK(t,e,n,s){const{x:i,width:r}=s,o=n.caretSize+n.caretPadding;if(t==="left"&&i+r+o>e.width||t==="right"&&i-r-o<0)return!0}function eY(t,e,n,s){const{x:i,width:r}=n,{width:o,chartArea:{left:a,right:c}}=t;let l="center";return s==="center"?l=i<=(a+c)/2?"left":"right":i<=r/2?l="left":i>=o-r/2&&(l="right"),ZK(l,t,e,n)&&(l="center"),l}function yE(t,e,n){const s=n.yAlign||e.yAlign||JK(t,n);return{xAlign:n.xAlign||e.xAlign||eY(t,e,n,s),yAlign:s}}function tY(t,e){let{x:n,width:s}=t;return e==="right"?n-=s:e==="center"&&(n-=s/2),n}function nY(t,e,n){let{y:s,height:i}=t;return e==="top"?s+=n:e==="bottom"?s-=i+n:s-=i/2,s}function bE(t,e,n,s){const{caretSize:i,caretPadding:r,cornerRadius:o}=t,{xAlign:a,yAlign:c}=n,l=i+r,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=Gr(o);let p=tY(e,a);const m=nY(e,c,l);return c==="center"?a==="left"?p+=l:a==="right"&&(p-=l):a==="left"?p-=Math.max(u,d)+i:a==="right"&&(p+=Math.max(h,f)+i),{x:zt(p,0,s.width-e.width),y:zt(m,0,s.height-e.height)}}function Au(t,e,n){const s=dn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-s.right:t.x+s.left}function vE(t){return ps([],Qs(t))}function sY(t,e,n){return fr(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function wE(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const $C={beforeTitle:Gs,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return n[e.dataIndex]}return""},afterTitle:Gs,beforeBody:Gs,beforeLabel:Gs,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return $e(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Gs,afterBody:Gs,beforeFooter:Gs,footer:Gs,afterFooter:Gs};function bn(t,e,n,s){const i=t[e].call(n,s);return typeof i>"u"?$C[e].call(n,s):i}class Zg extends yi{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,s=this.options.setContext(this.getContext()),i=s.enabled&&n.options.animation&&s.animations,r=new bC(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=sY(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:s}=n,i=bn(s,"beforeTitle",this,e),r=bn(s,"title",this,e),o=bn(s,"afterTitle",this,e);let a=[];return a=ps(a,Qs(i)),a=ps(a,Qs(r)),a=ps(a,Qs(o)),a}getBeforeBody(e,n){return vE(bn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:s}=n,i=[];return Ge(e,r=>{const o={before:[],lines:[],after:[]},a=wE(s,r);ps(o.before,Qs(bn(a,"beforeLabel",this,r))),ps(o.lines,bn(a,"label",this,r)),ps(o.after,Qs(bn(a,"afterLabel",this,r))),i.push(o)}),i}getAfterBody(e,n){return vE(bn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:s}=n,i=bn(s,"beforeFooter",this,e),r=bn(s,"footer",this,e),o=bn(s,"afterFooter",this,e);let a=[];return a=ps(a,Qs(i)),a=ps(a,Qs(r)),a=ps(a,Qs(o)),a}_createItems(e){const n=this._active,s=this.chart.data,i=[],r=[],o=[];let a=[],c,l;for(c=0,l=n.length;c<l;++c)a.push(XK(this.chart,n[c]));return e.filter&&(a=a.filter((u,h,d)=>e.filter(u,h,d,s))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,s))),Ge(a,u=>{const h=wE(e.callbacks,u);i.push(bn(h,"labelColor",this,u)),r.push(bn(h,"labelPointStyle",this,u)),o.push(bn(h,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const s=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(!i.length)this.opacity!==0&&(r={opacity:0});else{const a=nc[s.position].call(this,i,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const c=this._size=_E(this,s),l=Object.assign({},a,c),u=yE(this.chart,s,l),h=bE(s,l,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,s,i){const r=this.getCaretPosition(e,s,i);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(e,n,s){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:c,topRight:l,bottomLeft:u,bottomRight:h}=Gr(a),{x:d,y:f}=e,{width:p,height:m}=n;let _,y,b,w,T,S;return r==="center"?(T=f+m/2,i==="left"?(_=d,y=_-o,w=T+o,S=T-o):(_=d+p,y=_+o,w=T-o,S=T+o),b=_):(i==="left"?y=d+Math.max(c,u)+o:i==="right"?y=d+p-Math.max(l,h)-o:y=this.caretX,r==="top"?(w=f,T=w-o,_=y-o,b=y+o):(w=f+m,T=w+o,_=y+o,b=y-o),S=w),{x1:_,x2:y,x3:b,y1:w,y2:T,y3:S}}drawTitle(e,n,s){const i=this.title,r=i.length;let o,a,c;if(r){const l=Ko(s.rtl,this.x,this.width);for(e.x=Au(this,s.titleAlign,s),n.textAlign=l.textAlign(s.titleAlign),n.textBaseline="middle",o=Bt(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,c=0;c<r;++c)n.fillText(i[c],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,c+1===r&&(e.y+=s.titleMarginBottom-a)}}_drawColorBox(e,n,s,i,r){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:c,boxWidth:l}=r,u=Bt(r.bodyFont),h=Au(this,"left",r),d=i.x(h),f=c<u.lineHeight?(u.lineHeight-c)/2:0,p=n.y+f;if(r.usePointStyle){const m={radius:Math.min(l,c)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},_=i.leftForLtr(d,l)+l/2,y=p+c/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,qg(e,m,_,y),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,qg(e,m,_,y)}else{e.lineWidth=De(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const m=i.leftForLtr(d,l),_=i.leftForLtr(i.xPlus(d,1),l-2),y=Gr(o.borderRadius);Object.values(y).some(b=>b!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,sl(e,{x:m,y:p,w:l,h:c,radius:y}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),sl(e,{x:_,y:p+1,w:l-2,h:c-2,radius:y}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(m,p,l,c),e.strokeRect(m,p,l,c),e.fillStyle=o.backgroundColor,e.fillRect(_,p+1,l-2,c-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,n,s){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:c,boxWidth:l,boxPadding:u}=s,h=Bt(s.bodyFont);let d=h.lineHeight,f=0;const p=Ko(s.rtl,this.x,this.width),m=function(I){n.fillText(I,p.x(e.x+f),e.y+d/2),e.y+=d+r},_=p.textAlign(o);let y,b,w,T,S,x,R;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=Au(this,_,s),n.fillStyle=s.bodyColor,Ge(this.beforeBody,m),f=a&&_!=="right"?o==="center"?l/2+u:l+2+u:0,T=0,x=i.length;T<x;++T){for(y=i[T],b=this.labelTextColors[T],n.fillStyle=b,Ge(y.before,m),w=y.lines,a&&w.length&&(this._drawColorBox(n,e,T,p,s),d=Math.max(h.lineHeight,c)),S=0,R=w.length;S<R;++S)m(w[S]),d=h.lineHeight;Ge(y.after,m)}f=0,d=h.lineHeight,Ge(this.afterBody,m),e.y-=r}drawFooter(e,n,s){const i=this.footer,r=i.length;let o,a;if(r){const c=Ko(s.rtl,this.x,this.width);for(e.x=Au(this,s.footerAlign,s),e.y+=s.footerMarginTop,n.textAlign=c.textAlign(s.footerAlign),n.textBaseline="middle",o=Bt(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,a=0;a<r;++a)n.fillText(i[a],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s.footerSpacing}}drawBackground(e,n,s,i){const{xAlign:r,yAlign:o}=this,{x:a,y:c}=e,{width:l,height:u}=s,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:p}=Gr(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+h,c),o==="top"&&this.drawCaret(e,n,s,i),n.lineTo(a+l-d,c),n.quadraticCurveTo(a+l,c,a+l,c+d),o==="center"&&r==="right"&&this.drawCaret(e,n,s,i),n.lineTo(a+l,c+u-p),n.quadraticCurveTo(a+l,c+u,a+l-p,c+u),o==="bottom"&&this.drawCaret(e,n,s,i),n.lineTo(a+f,c+u),n.quadraticCurveTo(a,c+u,a,c+u-f),o==="center"&&r==="left"&&this.drawCaret(e,n,s,i),n.lineTo(a,c+h),n.quadraticCurveTo(a,c,a+h,c),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,s=this.$animations,i=s&&s.x,r=s&&s.y;if(i||r){const o=nc[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=_E(this,e),c=Object.assign({},o,this._size),l=yE(n,e,c),u=bE(e,c,l,n);(i._to!==u.x||r._to!==u.y)&&(this.xAlign=l.xAlign,this.yAlign=l.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=dn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=s,this.drawBackground(r,e,i,n),pC(e,n.textDirection),r.y+=o.top,this.drawTitle(r,e,n),this.drawBody(r,e,n),this.drawFooter(r,e,n),gC(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const s=this._active,i=e.map(({datasetIndex:a,index:c})=>{const l=this.chart.getDatasetMeta(a);if(!l)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:l.data[c],index:c}}),r=!Kh(s,i),o=this._positionChanged(i,n);(r||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(e,r,n,s),a=this._positionChanged(o,e),c=n||!Kh(o,r)||a;return c&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),c}_getActiveElements(e,n,s,i){const r=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,r.mode,r,s);return r.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:s,caretY:i,options:r}=this,o=nc[r.position].call(this,e,n);return o!==!1&&(s!==o.x||i!==o.y)}}C(Zg,"positioners",nc);var iY={id:"tooltip",_element:Zg,positioners:nc,afterInit(t,e,n){n&&(t.tooltip=new Zg({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:$C},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},rY=Object.freeze({__proto__:null,Colors:_K,Decimation:wK,Filler:$K,Legend:GK,SubTitle:QK,Title:YK,Tooltip:iY});const oY=(t,e,n,s)=>(typeof e=="string"?(n=t.push(e)-1,s.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function aY(t,e,n,s){const i=t.indexOf(e);if(i===-1)return oY(t,e,n,s);const r=t.lastIndexOf(e);return i!==r?n:i}const cY=(t,e)=>t===null?null:zt(Math.round(t),0,e);function EE(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class em extends wo{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:i,label:r}of n)s[i]===r&&s.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if($e(e))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===e?n:aY(s,e,Te(n,e),this._addedLabels),cY(n,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),n||(i=this.getLabels().length-1)),this.min=s,this.max=i}buildTicks(){const e=this.min,n=this.max,s=this.options.offset,i=[];let r=this.getLabels();r=e===0&&n===r.length-1?r:r.slice(e,n+1),this._valueRange=Math.max(r.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return EE.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}C(em,"id","category"),C(em,"defaults",{ticks:{callback:EE}});function lY(t,e){const n=[],{bounds:i,step:r,min:o,max:a,precision:c,count:l,maxTicks:u,maxDigits:h,includeBounds:d}=t,f=r||1,p=u-1,{min:m,max:_}=e,y=!$e(o),b=!$e(a),w=!$e(l),T=(_-m)/(h+1);let S=mw((_-m)/p/f)*f,x,R,I,P;if(S<1e-14&&!y&&!b)return[{value:m},{value:_}];P=Math.ceil(_/S)-Math.floor(m/S),P>p&&(S=mw(P*S/p/f)*f),$e(c)||(x=Math.pow(10,c),S=Math.ceil(S*x)/x),i==="ticks"?(R=Math.floor(m/S)*S,I=Math.ceil(_/S)*S):(R=m,I=_),y&&b&&r&&iq((a-o)/r,S/1e3)?(P=Math.round(Math.min((a-o)/S,u)),S=(a-o)/P,R=o,I=a):w?(R=y?o:R,I=b?a:I,P=l-1,S=(I-R)/P):(P=(I-R)/S,vc(P,Math.round(P),S/1e3)?P=Math.round(P):P=Math.ceil(P));const $=Math.max(_w(S),_w(R));x=Math.pow(10,$e(c)?$:c),R=Math.round(R*x)/x,I=Math.round(I*x)/x;let Q=0;for(y&&(d&&R!==o?(n.push({value:o}),R<o&&Q++,vc(Math.round((R+Q*S)*x)/x,o,TE(o,T,t))&&Q++):R<o&&Q++);Q<P;++Q){const F=Math.round((R+Q*S)*x)/x;if(b&&F>a)break;n.push({value:F})}return b&&d&&I!==a?n.length&&vc(n[n.length-1].value,a,TE(a,T,t))?n[n.length-1].value=a:n.push({value:a}):(!b||I===a)&&n.push({value:I}),n}function TE(t,e,{horizontal:n,minRotation:s}){const i=is(s),r=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/r,o)}class td extends wo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return $e(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:i,max:r}=this;const o=c=>i=n?i:c,a=c=>r=s?r:c;if(e){const c=Ns(i),l=Ns(r);c<0&&l<0?a(0):c>0&&l>0&&o(0)}if(i===r){let c=r===0?1:Math.abs(r*.05);a(r+c),e||o(i-c)}this.min=i,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=e,i;return s?(i=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const i={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},r=this._range||this,o=lY(i,r);return e.bounds==="ticks"&&Xx(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const i=(s-n)/Math.max(e.length-1,1)/2;n-=i,s+=i}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(e){return Wl(e,this.chart.options.locale,this.options.ticks.format)}}class tm extends td{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=bt(e)?e:0,this.max=bt(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,s=is(this.options.ticks.minRotation),i=(e?Math.sin(s):Math.cos(s))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,r.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}C(tm,"id","linear"),C(tm,"defaults",{ticks:{callback:xf.formatters.numeric}});const rl=t=>Math.floor(Hi(t)),Er=(t,e)=>Math.pow(10,rl(t)+e);function SE(t){return t/Math.pow(10,rl(t))===1}function IE(t,e,n){const s=Math.pow(10,n),i=Math.floor(t/s);return Math.ceil(e/s)-i}function uY(t,e){const n=e-t;let s=rl(n);for(;IE(t,e,s)>10;)s++;for(;IE(t,e,s)<10;)s--;return Math.min(s,rl(t))}function hY(t,{min:e,max:n}){e=kn(t.min,e);const s=[],i=rl(e);let r=uY(e,n),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),c=i>r?Math.pow(10,i):0,l=Math.round((e-c)*o)/o,u=Math.floor((e-c)/a/10)*a*10;let h=Math.floor((l-u)/Math.pow(10,r)),d=kn(t.min,Math.round((c+u+h*Math.pow(10,r))*o)/o);for(;d<n;)s.push({value:d,major:SE(d),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(r++,h=2,o=r>=0?1:o),d=Math.round((c+u+h*Math.pow(10,r))*o)/o;const f=kn(t.max,d);return s.push({value:f,major:SE(f),significand:h}),s}class nm extends wo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const s=td.prototype.parse.apply(this,[e,n]);if(s===0){this._zero=!0;return}return bt(s)&&s>0?s:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=bt(e)?Math.max(0,e):null,this.max=bt(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!bt(this._userMin)&&(this.min=e===Er(this.min,0)?Er(this.min,-1):Er(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let s=this.min,i=this.max;const r=a=>s=e?s:a,o=a=>i=n?i:a;s===i&&(s<=0?(r(1),o(10)):(r(Er(s,-1)),o(Er(i,1)))),s<=0&&r(Er(i,-1)),i<=0&&o(Er(s,1)),this.min=s,this.max=i}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},s=hY(n,this);return e.bounds==="ticks"&&Xx(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}getLabelForValue(e){return e===void 0?"0":Wl(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Hi(e),this._valueRange=Hi(this.max)-Hi(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Hi(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}C(nm,"id","logarithmic"),C(nm,"defaults",{ticks:{callback:xf.formatters.logarithmic,major:{enabled:!0}}});function sm(t){const e=t.ticks;if(e.display&&t.display){const n=dn(e.backdropPadding);return Te(e.font&&e.font.size,vt.font.size)+n.height}return 0}function dY(t,e,n){return n=ot(n)?n:[n],{w:wq(t,e.string,n),h:n.length*e.lineHeight}}function RE(t,e,n,s,i){return t===s||t===i?{start:e-n/2,end:e+n/2}:t<s||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function fY(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),s=[],i=[],r=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?ct/r:0;for(let c=0;c<r;c++){const l=o.setContext(t.getPointLabelContext(c));i[c]=l.padding;const u=t.getPointPosition(c,t.drawingArea+i[c],a),h=Bt(l.font),d=dY(t.ctx,h,t._pointLabels[c]);s[c]=d;const f=Pn(t.getIndexAngle(c)+a),p=Math.round(Ry(f)),m=RE(p,u.x,d.w,0,180),_=RE(p,u.y,d.h,90,270);pY(n,e,f,m,_)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=_Y(t,s,i)}function pY(t,e,n,s,i){const r=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,c=0;s.start<e.l?(a=(e.l-s.start)/r,t.l=Math.min(t.l,e.l-a)):s.end>e.r&&(a=(s.end-e.r)/r,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(c=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-c)):i.end>e.b&&(c=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+c))}function gY(t,e,n){const s=t.drawingArea,{extra:i,additionalAngle:r,padding:o,size:a}=n,c=t.getPointPosition(e,s+i+o,r),l=Math.round(Ry(Pn(c.angle+It))),u=vY(c.y,a.h,l),h=yY(l),d=bY(c.x,a.w,h);return{visible:!0,x:c.x,y:u,textAlign:h,left:d,top:u,right:d+a.w,bottom:u+a.h}}function mY(t,e){if(!e)return!0;const{left:n,top:s,right:i,bottom:r}=t;return!(si({x:n,y:s},e)||si({x:n,y:r},e)||si({x:i,y:s},e)||si({x:i,y:r},e))}function _Y(t,e,n){const s=[],i=t._pointLabels.length,r=t.options,{centerPointLabels:o,display:a}=r.pointLabels,c={extra:sm(r)/2,additionalAngle:o?ct/i:0};let l;for(let u=0;u<i;u++){c.padding=n[u],c.size=e[u];const h=gY(t,u,c);s.push(h),a==="auto"&&(h.visible=mY(h,l),h.visible&&(l=h))}return s}function yY(t){return t===0||t===180?"center":t<180?"left":"right"}function bY(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function vY(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function wY(t,e,n){const{left:s,top:i,right:r,bottom:o}=n,{backdropColor:a}=e;if(!$e(a)){const c=Gr(e.borderRadius),l=dn(e.backdropPadding);t.fillStyle=a;const u=s-l.left,h=i-l.top,d=r-s+l.width,f=o-i+l.height;Object.values(c).some(p=>p!==0)?(t.beginPath(),sl(t,{x:u,y:h,w:d,h:f,radius:c}),t.fill()):t.fillRect(u,h,d,f)}}function EY(t,e){const{ctx:n,options:{pointLabels:s}}=t;for(let i=e-1;i>=0;i--){const r=t._pointLabelItems[i];if(!r.visible)continue;const o=s.setContext(t.getPointLabelContext(i));wY(n,o,r);const a=Bt(o.font),{x:c,y:l,textAlign:u}=r;oo(n,t._pointLabels[i],c,l+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function HC(t,e,n,s){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,at);else{let r=t.getPointPosition(0,e);i.moveTo(r.x,r.y);for(let o=1;o<s;o++)r=t.getPointPosition(o,e),i.lineTo(r.x,r.y)}}function TY(t,e,n,s,i){const r=t.ctx,o=e.circular,{color:a,lineWidth:c}=e;!o&&!s||!a||!c||n<0||(r.save(),r.strokeStyle=a,r.lineWidth=c,r.setLineDash(i.dash),r.lineDashOffset=i.dashOffset,r.beginPath(),HC(t,n,o,s),r.closePath(),r.stroke(),r.restore())}function SY(t,e,n){return fr(t,{label:n,index:e,type:"pointLabel"})}class sc extends td{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=dn(sm(this.options)/2),n=this.width=this.maxWidth-e.width,s=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+s/2+e.top),this.drawingArea=Math.floor(Math.min(n,s)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=bt(e)&&!isNaN(e)?e:0,this.max=bt(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/sm(this.options))}generateTickLabels(e){td.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,s)=>{const i=Ze(this.options.pointLabels.callback,[n,s],this);return i||i===0?i:""}).filter((n,s)=>this.chart.getDataVisibility(s))}fit(){const e=this.options;e.display&&e.pointLabels.display?fY(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,s,i){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((s-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,s,i))}getIndexAngle(e){const n=at/(this._pointLabels.length||1),s=this.options.startAngle||0;return Pn(e*n+is(s))}getDistanceFromCenterForValue(e){if($e(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if($e(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const s=n[e];return SY(this.getContext(),e,s)}}getPointPosition(e,n,s=0){const i=this.getIndexAngle(e)-It+s;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:s,right:i,bottom:r}=this._pointLabelItems[e];return{left:n,top:s,right:i,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const s=this.ctx;s.save(),s.beginPath(),HC(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),s.closePath(),s.fillStyle=e,s.fill(),s.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:s,grid:i,border:r}=n,o=this._pointLabels.length;let a,c,l;if(n.pointLabels.display&&EY(this,o),i.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){c=this.getDistanceFromCenterForValue(u.value);const d=this.getContext(h),f=i.setContext(d),p=r.setContext(d);TY(this,f,c,o,p)}}),s.display){for(e.save(),a=o-1;a>=0;a--){const u=s.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:d}=u;!d||!h||(e.lineWidth=d,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),l=this.getPointPosition(a,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,s=n.ticks;if(!s.display)return;const i=this.getIndexAngle(0);let r,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,c)=>{if(c===0&&this.min>=0&&!n.reverse)return;const l=s.setContext(this.getContext(c)),u=Bt(l.font);if(r=this.getDistanceFromCenterForValue(this.ticks[c].value),l.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=l.backdropColor;const h=dn(l.backdropPadding);e.fillRect(-o/2-h.left,-r-u.size/2-h.top,o+h.width,u.size+h.height)}oo(e,a.label,0,-r,u,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}),e.restore()}drawTitle(){}}C(sc,"id","radialLinear"),C(sc,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:xf.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),C(sc,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),C(sc,"descriptors",{angleLines:{_fallback:"grid"}});const Pf={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Tn=Object.keys(Pf);function xE(t,e){return t-e}function CE(t,e){if($e(e))return null;const n=t._adapter,{parser:s,round:i,isoWeekday:r}=t._parseOpts;let o=e;return typeof s=="function"&&(o=s(o)),bt(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(fa(r)||r===!0)?n.startOf(o,"isoWeek",r):n.startOf(o,i)),+o)}function AE(t,e,n,s){const i=Tn.length;for(let r=Tn.indexOf(t);r<i-1;++r){const o=Pf[Tn[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=s)return Tn[r]}return Tn[i-1]}function IY(t,e,n,s,i){for(let r=Tn.length-1;r>=Tn.indexOf(n);r--){const o=Tn[r];if(Pf[o].common&&t._adapter.diff(i,s,o)>=e-1)return o}return Tn[n?Tn.indexOf(n):0]}function RY(t){for(let e=Tn.indexOf(t)+1,n=Tn.length;e<n;++e)if(Pf[Tn[e]].common)return Tn[e]}function kE(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:s,hi:i}=xy(n,e),r=n[s]>=e?n[s]:n[i];t[r]=!0}}function xY(t,e,n,s){const i=t._adapter,r=+i.startOf(e[0].value,s),o=e[e.length-1].value;let a,c;for(a=r;a<=o;a=+i.add(a,1,s))c=n[a],c>=0&&(e[c].major=!0);return e}function PE(t,e,n){const s=[],i={},r=e.length;let o,a;for(o=0;o<r;++o)a=e[o],i[a]=o,s.push({value:a,major:!1});return r===0||!n?s:xY(t,s,i,n)}class ol extends wo{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const s=e.time||(e.time={}),i=this._adapter=new EC._date(e.adapters.date);i.init(n),bc(s.displayFormats,i.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:CE(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,s=e.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function c(l){!o&&!isNaN(l.min)&&(i=Math.min(i,l.min)),!a&&!isNaN(l.max)&&(r=Math.max(r,l.max))}(!o||!a)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),i=bt(i)&&!isNaN(i)?i:+n.startOf(Date.now(),s),r=bt(r)&&!isNaN(r)?r:+n.endOf(Date.now(),s)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],s=e[e.length-1]),{min:n,max:s}}buildTicks(){const e=this.options,n=e.time,s=e.ticks,i=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=this.max,a=cq(i,r,o);return this._unit=n.unit||(s.autoSkip?AE(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):IY(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:RY(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),PE(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,s=0,i,r;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?s=r:s=(r-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=zt(n,0,o),s=zt(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const e=this._adapter,n=this.min,s=this.max,i=this.options,r=i.time,o=r.unit||AE(r.minUnit,n,s,this._getLabelCapacity(n)),a=Te(i.ticks.stepSize,1),c=o==="week"?r.isoWeekday:!1,l=fa(c)||c===!0,u={};let h=n,d,f;if(l&&(h=+e.startOf(h,"isoWeek",c)),h=+e.startOf(h,l?"day":o),e.diff(s,n,o)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+o);const p=i.ticks.source==="data"&&this.getDataTimestamps();for(d=h,f=0;d<s;d=+e.add(d,a,o),f++)kE(u,d,p);return(d===s||i.bounds==="ticks"||f===1)&&kE(u,d,p),Object.keys(u).sort(xE).map(m=>+m)}getLabelForValue(e){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(e,s.tooltipFormat):n.format(e,s.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,r=this._unit,o=n||i[r];return this._adapter.format(e,o)}_tickFormatFunction(e,n,s,i){const r=this.options,o=r.ticks.callback;if(o)return Ze(o,[e,n,s],this);const a=r.time.displayFormats,c=this._unit,l=this._majorUnit,u=c&&a[c],h=l&&a[l],d=s[n],f=l&&h&&d&&d.major;return this._adapter.format(e,i||(f?h:u))}generateTickLabels(e){let n,s,i;for(n=0,s=e.length;n<s;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,s=this.ctx.measureText(e).width,i=is(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:s*r+a*o,h:s*o+a*r}}_getLabelCapacity(e){const n=this.options.time,s=n.displayFormats,i=s[n.unit]||s.millisecond,r=this._tickFormatFunction(e,0,PE(this,[e],this._majorUnit),i),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,s;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,s=i.length;n<s;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,s;if(e.length)return e;const i=this.getLabels();for(n=0,s=i.length;n<s;++n)e.push(CE(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return eC(e.sort(xE))}}C(ol,"id","time"),C(ol,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function ku(t,e,n){let s=0,i=t.length-1,r,o,a,c;n?(e>=t[s].pos&&e<=t[i].pos&&({lo:s,hi:i}=ni(t,"pos",e)),{pos:r,time:a}=t[s],{pos:o,time:c}=t[i]):(e>=t[s].time&&e<=t[i].time&&({lo:s,hi:i}=ni(t,"time",e)),{time:r,pos:a}=t[s],{time:o,pos:c}=t[i]);const l=o-r;return l?a+(c-a)*(e-r)/l:a}class im extends ol{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=ku(n,this.min),this._tableRange=ku(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:s}=this,i=[],r=[];let o,a,c,l,u;for(o=0,a=e.length;o<a;++o)l=e[o],l>=n&&l<=s&&i.push(l);if(i.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],c=i[o-1],l=i[o],Math.round((u+c)/2)!==l&&r.push({time:l,pos:o/(a-1)});return r}_generate(){const e=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((i,r)=>i-r)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?e=this.normalize(n.concat(s)):e=n.length?n:s,e=this._cache.all=e,e}getDecimalForValue(e){return(ku(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return ku(this._table,s*this._tableRange+this._minPos,!0)}}C(im,"id","timeseries"),C(im,"defaults",ol.defaults);var CY=Object.freeze({__proto__:null,CategoryScale:em,LinearScale:tm,LogarithmicScale:nm,RadialLinearScale:sc,TimeScale:ol,TimeSeriesScale:im});const AY=[N7,hK,rY,CY];/*!
 * Chartkick.js v5.0.1
 * Create beautiful charts with one line of JavaScript
 * https://github.com/ankane/chartkick.js
 * MIT License
 */function Xi(t){return Object.prototype.toString.call(t)==="[object Array]"}function Uy(t){return t instanceof Function}function uh(t){return Object.prototype.toString.call(t)==="[object Object]"&&!Uy(t)&&t instanceof Object}function rm(t,e){for(var n in e)n!=="__proto__"&&(uh(e[n])||Xi(e[n])?(uh(e[n])&&!uh(t[n])&&(t[n]={}),Xi(e[n])&&!Xi(t[n])&&(t[n]=[]),rm(t[n],e[n])):e[n]!==void 0&&(t[n]=e[n]))}function mt(t,e){var n={};return rm(n,t),rm(n,e),n}var kY=/^(\d\d\d\d)(?:-)?(\d\d)(?:-)?(\d\d)$/i;function PY(t){for(var e=0;e<t.length;e++)for(var n=t[e].data,s=0;s<n.length;s++)if(n[s][1]<0)return!0;return!1}function di(t){return""+t}function Vs(t){return parseFloat(t)}function _s(t){if(t instanceof Date)return t;if(typeof t=="number")return new Date(t*1e3);var e=di(t),n=e.match(kY);if(n){var s=parseInt(n[1],10),i=parseInt(n[2],10)-1,r=parseInt(n[3],10);return new Date(s,i,r)}else{var o=e.replace(/ /,"T").replace(" ","").replace("UTC","Z");return new Date(Date.parse(o)||e)}}function $y(t){if(Xi(t))return t;var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push([n,t[n]]);return e}function Gl(t,e,n,s,i,r,o,a){return function(c,l,u){var h=c.data,d=mt({},t);return d=mt(d,u||{}),(c.singleSeriesFormat||"legend"in l)&&e(d,l.legend,c.singleSeriesFormat),l.title&&n(d,l.title),"min"in l?s(d,l.min):PY(h)||s(d,0),l.max&&i(d,l.max),"stacked"in l&&r(d,l.stacked),l.colors&&(d.colors=l.colors),l.xtitle&&o(d,l.xtitle),l.ytitle&&a(d,l.ytitle),d=mt(d,l.library||{}),d}}function DY(t,e){return t[0].getTime()-e[0].getTime()}function Hy(t,e){return t[0]-e[0]}function zC(t,e){return t-e}function Co(t,e){for(var n=0;n<t.length;n++)if(!e(t[n]))return!1;return!0}function OY(t){return t==="day"||t==="week"||t==="month"||t==="year"}function jC(t,e){if(e===void 0&&(e=!1),t.length===0)return null;var n=Co(t,function(l){return l.getMilliseconds()===0&&l.getSeconds()===0});if(!n)return null;var s=Co(t,function(l){return l.getMinutes()===0});if(!s)return"minute";var i=Co(t,function(l){return l.getHours()===0});if(!i)return"hour";if(e)return"day";var r=Co(t,function(l){return l.getDate()===1});if(!r){var o=t[0].getDay(),a=Co(t,function(l){return l.getDay()===o});return a?"week":"day"}var c=Co(t,function(l){return l.getMonth()===0});return c?"year":"month"}function Np(t){return!isNaN(_s(t))&&di(t).length>=6}function MY(t){return typeof t=="number"}var DE=["bytes","KB","MB","GB","TB","PB","EB"];function Zn(t,e,n,s){t=t||"",n.prefix&&(e<0&&(e=e*-1,t+="-"),t+=n.prefix);var i=n.suffix||"",r=n.precision,o=n.round;if(n.byteScale){var a=e>=0;a||(e*=-1);var c=s?n.byteScale:e,l;c>=1152921504606847e3?(e/=1152921504606847e3,l=6):c>=0x4000000000000?(e/=0x4000000000000,l=5):c>=1099511627776?(e/=1099511627776,l=4):c>=1073741824?(e/=1073741824,l=3):c>=1048576?(e/=1048576,l=2):c>=1024?(e/=1024,l=1):l=0,r===void 0&&o===void 0&&(e>=1023.5&&l<DE.length-1&&(e=1,l+=1),r=e>=1e3?4:3),i=" "+DE[l],a||(e*=-1)}if(r!==void 0&&o!==void 0)throw Error("Use either round or precision, not both");if(!s&&(r!==void 0&&(e=e.toPrecision(r),n.zeros||(e=parseFloat(e))),o!==void 0))if(o<0){var u=Math.pow(10,-1*o);e=parseInt((1*e/u).toFixed(0))*u}else e=e.toFixed(o),n.zeros||(e=parseFloat(e));if(n.thousands||n.decimal){e=di(e);var h=e.split(".");e=h[0],n.thousands&&(e=e.replace(/\B(?=(\d{3})+(?!\d))/g,n.thousands)),h.length>1&&(e+=(n.decimal||".")+h[1])}return t+e+i}function OE(t,e,n){return n in e?e[n]:n in t.options?t.options[n]:null}var zy={maintainAspectRatio:!1,animation:!1,plugins:{legend:{},tooltip:{displayColors:!1,callbacks:{}},title:{font:{size:20},color:"#333"}},interaction:{}},WC={scales:{y:{ticks:{maxTicksLimit:4},title:{font:{size:16},color:"#333"},grid:{}},x:{grid:{drawOnChartArea:!1},title:{font:{size:16},color:"#333"},time:{},ticks:{}}}},qC=["#3366CC","#DC3912","#FF9900","#109618","#990099","#3B3EAC","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC","#E67300","#8B0707","#329262","#5574A6","#651067"];function jy(t,e,n){e!==void 0?(t.plugins.legend.display=!!e,e&&e!==!0&&(t.plugins.legend.position=e)):n&&(t.plugins.legend.display=!1)}function Wy(t,e){t.plugins.title.display=!0,t.plugins.title.text=e}function LY(t,e){e!==null&&(t.scales.y.min=Vs(e))}function NY(t,e){t.scales.y.max=Vs(e)}function VY(t,e){e!==null&&(t.scales.x.min=Vs(e))}function FY(t,e){t.scales.x.max=Vs(e)}function GC(t,e){t.scales.x.stacked=!!e,t.scales.y.stacked=!!e}function KC(t,e){t.scales.x.title.display=!0,t.scales.x.title.text=e}function YC(t,e){t.scales.y.title.display=!0,t.scales.y.title.text=e}function ME(t,e){var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return n?"rgba("+parseInt(n[1],16)+", "+parseInt(n[2],16)+", "+parseInt(n[3],16)+", "+e+")":t}function Ii(t){return t!=null}function BY(t,e,n){var s=Math.ceil(t.element.offsetWidth/4/e.labels.length);s>25?s=25:s<10&&(s=10),n.scales.x.ticks.callback||(n.scales.x.ticks.callback=function(i){return i=di(this.getLabelForValue(i)),i.length>s?i.substring(0,s-2)+"...":i})}function UY(t){for(var e=1,n=$Y(t);n>=1024;)e*=1024,n/=1024;return e}function Df(t,e,n){var s={thousands:t.options.thousands,decimal:t.options.decimal},i=mt({prefix:t.options.prefix,suffix:t.options.suffix,precision:t.options.precision,round:t.options.round,zeros:t.options.zeros},s);if(t.options.bytes){var r=t.data;n==="pie"&&(r=[{data:r}]),i.byteScale=UY(r)}if(n!=="pie"){var o=e.scales.y;n==="bar"&&(o=e.scales.x),i.byteScale&&(o.ticks.stepSize||(o.ticks.stepSize=i.byteScale/2),o.ticks.maxTicksLimit||(o.ticks.maxTicksLimit=4)),o.ticks.callback||(o.ticks.callback=function(c){return Zn("",c,i,!0)}),(n==="scatter"||n==="bubble")&&!e.scales.x.ticks.callback&&(e.scales.x.ticks.callback=function(c){return Zn("",c,s,!0)})}if(!e.plugins.tooltip.callbacks.label)if(n==="scatter")e.plugins.tooltip.callbacks.label=function(c){var l=c.dataset.label||"";l&&(l+=": ");var u=c.parsed;return l+"("+Zn("",u.x,s)+", "+Zn("",u.y,i)+")"};else if(n==="bubble")e.plugins.tooltip.callbacks.label=function(c){var l=c.dataset.label||"";l&&(l+=": ");var u=c.raw;return l+"("+Zn("",u.x,s)+", "+Zn("",u.y,i)+", "+Zn("",u.v,s)+")"};else if(n==="pie")e.plugins.tooltip.callbacks.label=function(c){return Zn("",c.parsed,i)};else{var a=n==="bar"?"x":"y";e.plugins.tooltip.callbacks.label=function(c){if(c.parsed[a]!==null){var l=c.dataset.label||"";return l&&(l+=": "),Zn(l,c.parsed[a],i)}}}(n==="line"||n==="area")&&t.xtype==="number"&&(e.scales.x.ticks.callback||(e.scales.x.ticks.callback=function(c){return di(c)}),e.plugins.tooltip.callbacks.title||(e.plugins.tooltip.callbacks.title=function(c){return di(c[0].parsed.x)}))}function $Y(t){for(var e=0,n=0;n<t.length;n++)for(var s=t[n].data,i=0;i<s.length;i++){var r=Math.abs(s[i][1]);r>e&&(e=r)}return e}function HY(t){for(var e=0,n=0;n<t.length;n++)for(var s=t[n].data,i=0;i<s.length;i++){var r=s[i][2];r>e&&(e=r)}return e}var qy=Gl(mt(zy,WC),jy,Wy,LY,NY,GC,KC,YC);function zY(t){for(var e=t.data,n={},s=[],i=[],r=[],o=0;o<e.length;o++)for(var a=e[o].data,c=0;c<a.length;c++){var l=a[c],u=t.xtype==="datetime"?l[0].getTime():l[0];n[u]||(n[u]=new Array(e.length),s.push(u)),n[u][o]=l[1]}(t.xtype==="datetime"||t.xtype==="number")&&s.sort(zC);for(var h=0;h<e.length;h++)r.push([]);for(var d=0;d<s.length;d++){var f=s[d],p=t.xtype==="datetime"?new Date(f):f;i.push(p);for(var m=n[f],_=0;_<e.length;_++){var y=m[_];r[_].push(y===void 0?null:y)}}return{labels:i,values:r}}function jY(t){for(var e=t.data,n=[],s=HY(e),i=0;i<e.length;i++){for(var r=e[i].data,o=[],a=0;a<r.length;a++){var c=r[a];o.push({x:c[0],y:c[1],r:c[2]*20/s,v:c[2]})}n.push(o)}return{labels:[],values:n}}function WY(t){for(var e=t.data,n=[],s=0;s<e.length;s++){var i=e[s].data;i.sort(Hy);for(var r=[],o=0;o<i.length;o++){var a=i[o];r.push({x:a[0],y:a[1]})}n.push(r)}return{labels:[],values:n}}function qY(t,e){return e==="bubble"?jY(t):t.xtype==="number"&&e!=="bar"&&e!=="column"?WY(t):zY(t)}function Gy(t,e,n){for(var s=qY(t,n),i=s.labels,r=s.values,o=t.data,a=[],c=t.options.colors||qC,l=0;l<o.length;l++){var u=o[l],h=void 0,d=void 0;if(t.options.colors&&t.singleSeriesFormat&&(n==="bar"||n==="column")&&!u.color&&Xi(t.options.colors)&&!Xi(t.options.colors[0])){h=c,d=[];for(var f=0;f<c.length;f++)d[f]=ME(h[f],.5)}else h=u.color||c[l],d=n!=="line"?ME(h,.5):h;var p={label:u.name||"",data:r[l],fill:n==="area",borderColor:h,backgroundColor:d,borderWidth:2},m=n==="line"||n==="area"||n==="scatter"||n==="bubble";m&&(p.pointBackgroundColor=h,p.pointHoverBackgroundColor=h,p.pointHitRadius=50),n==="bubble"&&(p.pointBackgroundColor=d,p.pointHoverBackgroundColor=d,p.pointHoverBorderWidth=2),u.stack&&(p.stack=u.stack);var _=OE(t,u,"curve");_===!1?p.tension=0:m&&(p.tension=.4);var y=OE(t,u,"points");y===!1&&(p.pointRadius=0,p.pointHoverRadius=0),p=mt(p,t.options.dataset||{}),p=mt(p,u.library||{}),p=mt(p,u.dataset||{}),a.push(p)}var b=t.options.xmin,w=t.options.xmax;if(t.xtype==="datetime"?(Ii(b)&&(e.scales.x.min=_s(b).getTime()),Ii(w)&&(e.scales.x.max=_s(w).getTime())):t.xtype==="number"&&(Ii(b)&&(e.scales.x.min=b),Ii(w)&&(e.scales.x.max=w)),t.xtype==="datetime"){var T=jC(i);if(i.length===0&&(Ii(b)&&i.push(_s(b)),Ii(w)&&i.push(_s(w))),i.length>0){for(var S=(Ii(b)?_s(b):i[0]).getTime(),x=(Ii(w)?_s(w):i[0]).getTime(),R=1;R<i.length;R++){var I=i[R].getTime();I<S&&(S=I),I>x&&(x=I)}var P=(x-S)/(86400*1e3);if(!e.scales.x.time.unit){var $;if(T==="year"||P>365*10?(e.scales.x.time.unit="year",$=365):T==="month"||P>30*10?(e.scales.x.time.unit="month",$=30):T==="week"||T==="day"||P>10?(e.scales.x.time.unit="day",$=1):T==="hour"||P>.5?(e.scales.x.time.displayFormats={hour:"MMM d, h a"},e.scales.x.time.unit="hour",$=1/24):T==="minute"&&(e.scales.x.time.displayFormats={minute:"h:mm a"},e.scales.x.time.unit="minute",$=1/24/60),$&&P>0){var Q=t.element.offsetWidth;if(Q>0){var F=Math.ceil(P/$/(Q/100));T==="week"&&$===1&&(F=Math.ceil(F/7)*7),e.scales.x.ticks.stepSize=F}}}e.scales.x.time.tooltipFormat||(T==="year"?e.scales.x.time.tooltipFormat="yyyy":T==="month"?e.scales.x.time.tooltipFormat="MMM yyyy":T==="week"||T==="day"?e.scales.x.time.tooltipFormat="PP":T==="hour"?e.scales.x.time.tooltipFormat="MMM d, h a":T==="minute"&&(e.scales.x.time.tooltipFormat="h:mm a"))}}return{labels:i,datasets:a}}var Ws=function(e){this.name="chartjs",this.library=e};Ws.prototype.renderLineChart=function(e,n){n||(n="line");var s={},i=qy(e,mt(s,e.options));Df(e,i,n);var r=Gy(e,i,n);e.xtype==="number"?(i.scales.x.type=i.scales.x.type||"linear",i.scales.x.position=i.scales.x.position||"bottom"):i.scales.x.type=e.xtype==="string"?"category":"time",this.drawChart(e,"line",r,i)};Ws.prototype.renderPieChart=function(e){var n=mt({},zy);e.options.donut&&(n.cutout="50%"),"legend"in e.options&&jy(n,e.options.legend),e.options.title&&Wy(n,e.options.title),n=mt(n,e.options.library||{}),Df(e,n,"pie");for(var s=[],i=[],r=0;r<e.data.length;r++){var o=e.data[r];s.push(o[0]),i.push(o[1])}var a={data:i,backgroundColor:e.options.colors||qC};a=mt(a,e.options.dataset||{});var c={labels:s,datasets:[a]};this.drawChart(e,"pie",c,n)};Ws.prototype.renderColumnChart=function(e,n){var s;if(n==="bar"){var i=mt(zy,WC);i.indexAxis="y",i.scales.x.grid.drawOnChartArea=!0,i.scales.y.grid.drawOnChartArea=!1,delete i.scales.y.ticks.maxTicksLimit,s=Gl(i,jy,Wy,VY,FY,GC,KC,YC)(e,e.options)}else s=qy(e,e.options);Df(e,s,n);var r=Gy(e,s,"column");n!=="bar"&&BY(e,r,s),"mode"in s.interaction||(s.interaction.mode="index"),this.drawChart(e,"bar",r,s)};Ws.prototype.renderAreaChart=function(e){this.renderLineChart(e,"area")};Ws.prototype.renderBarChart=function(e){this.renderColumnChart(e,"bar")};Ws.prototype.renderScatterChart=function(e,n){n=n||"scatter";var s=qy(e,e.options);Df(e,s,n),"showLine"in s||(s.showLine=!1);var i=Gy(e,s,n);s.scales.x.type=s.scales.x.type||"linear",s.scales.x.position=s.scales.x.position||"bottom","mode"in s.interaction||(s.interaction.mode="nearest"),this.drawChart(e,n,i,s)};Ws.prototype.renderBubbleChart=function(e){this.renderScatterChart(e,"bubble")};Ws.prototype.destroy=function(e){e.chart&&e.chart.destroy()};Ws.prototype.drawChart=function(e,n,s,i){if(this.destroy(e),!e.destroyed){var r={type:n,data:s,options:i};e.options.code&&window.console.log("new Chart(ctx, "+JSON.stringify(r)+");"),e.element.innerHTML="<canvas></canvas>";var o=e.element.getElementsByTagName("CANVAS")[0];e.chart=new this.library(o,r)}};var QC={chart:{},xAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},yAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},title:{text:null},credits:{enabled:!1},legend:{borderWidth:0},tooltip:{style:{fontSize:"12px"}},plotOptions:{areaspline:{},area:{},series:{marker:{}}},time:{useUTC:!1}};function XC(t,e,n){e!==void 0?(t.legend.enabled=!!e,e&&e!==!0&&(e==="top"||e==="bottom"?t.legend.verticalAlign=e:(t.legend.layout="vertical",t.legend.verticalAlign="middle",t.legend.align=e))):n&&(t.legend.enabled=!1)}function JC(t,e){t.title.text=e}function GY(t,e){t.yAxis.min=e}function KY(t,e){t.yAxis.max=e}function YY(t,e){var n=e?e===!0?"normal":e:null;t.plotOptions.series.stacking=n,t.plotOptions.area.stacking=n,t.plotOptions.areaspline.stacking=n}function QY(t,e){t.xAxis.title.text=e}function XY(t,e){t.yAxis.title.text=e}var Ky=Gl(QC,XC,JC,GY,KY,YY,QY,XY);function Yy(t,e,n){var s={prefix:t.options.prefix,suffix:t.options.suffix,thousands:t.options.thousands,decimal:t.options.decimal,precision:t.options.precision,round:t.options.round,zeros:t.options.zeros};n!=="pie"&&!Xi(e.yAxis)&&!e.yAxis.labels.formatter&&(e.yAxis.labels.formatter=function(){return Zn("",this.value,s)}),!e.tooltip.pointFormatter&&!e.tooltip.pointFormat&&(e.tooltip.pointFormatter=function(){return'<span style="color:'+this.color+'">●</span> '+Zn(this.series.name+": <b>",this.y,s)+"</b><br/>"})}var bi=function(e){this.name="highcharts",this.library=e};bi.prototype.renderLineChart=function(e,n){n=n||"spline";var s={};n==="areaspline"&&(s={plotOptions:{areaspline:{stacking:"normal"},area:{stacking:"normal"},series:{marker:{enabled:!1}}}}),e.options.curve===!1&&(n==="areaspline"?n="area":n==="spline"&&(n="line"));var i=Ky(e,e.options,s);e.xtype==="number"?i.xAxis.type=i.xAxis.type||"linear":i.xAxis.type=e.xtype==="string"?"category":"datetime",i.chart.type||(i.chart.type=n),Yy(e,i,n);for(var r=e.data,o=0;o<r.length;o++){r[o].name=r[o].name||"Value";var a=r[o].data;if(e.xtype==="datetime")for(var c=0;c<a.length;c++)a[c][0]=a[c][0].getTime();else e.xtype==="number"&&a.sort(Hy);r[o].marker={symbol:"circle"},e.options.points===!1&&(r[o].marker.enabled=!1)}this.drawChart(e,r,i)};bi.prototype.renderScatterChart=function(e){var n=Ky(e,e.options,{});n.chart.type="scatter",this.drawChart(e,e.data,n)};bi.prototype.renderPieChart=function(e){var n=mt(QC,{});e.options.colors&&(n.colors=e.options.colors),e.options.donut&&(n.plotOptions={pie:{innerSize:"50%"}}),"legend"in e.options&&XC(n,e.options.legend),e.options.title&&JC(n,e.options.title);var s=mt(n,e.options.library||{});Yy(e,s,"pie");var i=[{type:"pie",name:e.options.label||"Value",data:e.data}];this.drawChart(e,i,s)};bi.prototype.renderColumnChart=function(e,n){n=n||"column";var s=e.data,i=Ky(e,e.options),r=[],o=[];i.chart.type=n,Yy(e,i,n);for(var a=0;a<s.length;a++)for(var c=s[a],l=0;l<c.data.length;l++){var u=c.data[l];r[u[0]]||(r[u[0]]=new Array(s.length),o.push(u[0])),r[u[0]][a]=u[1]}e.xtype==="number"&&o.sort(zC),i.xAxis.categories=o;for(var h=[],d=0;d<s.length;d++){for(var f=[],p=0;p<o.length;p++)f.push(r[o[p]][d]||0);var m={name:s[d].name||"Value",data:f};s[d].stack&&(m.stack=s[d].stack),h.push(m)}this.drawChart(e,h,i)};bi.prototype.renderBarChart=function(e){this.renderColumnChart(e,"bar")};bi.prototype.renderAreaChart=function(e){this.renderLineChart(e,"areaspline")};bi.prototype.destroy=function(e){e.chart&&e.chart.destroy()};bi.prototype.drawChart=function(e,n,s){this.destroy(e),!e.destroyed&&(s.chart.renderTo=e.element.id,s.series=n,e.options.code&&window.console.log("new Highcharts.Chart("+JSON.stringify(s)+");"),e.chart=new this.library.Chart(s))};var LE={},hh=[],Kl={chartArea:{},fontName:"'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif",pointSize:6,legend:{textStyle:{fontSize:12,color:"#444"},alignment:"center",position:"right"},curveType:"function",hAxis:{textStyle:{color:"#666",fontSize:12},titleTextStyle:{},gridlines:{color:"transparent"},baselineColor:"#ccc",viewWindow:{}},vAxis:{textStyle:{color:"#666",fontSize:12},titleTextStyle:{},baselineColor:"#ccc",viewWindow:{}},tooltip:{textStyle:{color:"#666",fontSize:12}}};function Qy(t,e,n){if(e!==void 0){var s;e?e===!0?s="right":s=e:s="none",t.legend.position=s}else n&&(t.legend.position="none")}function Xy(t,e){t.title=e,t.titleTextStyle={color:"#333",fontSize:"20px"}}function JY(t,e){t.vAxis.viewWindow.min=e}function ZY(t,e){t.vAxis.viewWindow.max=e}function eQ(t,e){t.hAxis.viewWindow.min=e}function tQ(t,e){t.hAxis.viewWindow.max=e}function ZC(t,e){t.isStacked=e||!1}function eA(t,e){t.hAxis.title=e,t.hAxis.titleTextStyle.italic=!1}function tA(t,e){t.vAxis.title=e,t.vAxis.titleTextStyle.italic=!1}var Of=Gl(Kl,Qy,Xy,JY,ZY,ZC,eA,tA);function nQ(t){window.attachEvent?window.attachEvent("onresize",t):window.addEventListener&&window.addEventListener("resize",t,!0),t()}var Cn=function(e){this.name="google",this.library=e};Cn.prototype.renderLineChart=function(e){var n=this;this.waitForLoaded(e,function(){var s={};e.options.curve===!1&&(s.curveType="none"),e.options.points===!1&&(s.pointSize=0);var i=Of(e,e.options,s),r=n.createDataTable(e.data,e.xtype);n.drawChart(e,"LineChart",r,i)})};Cn.prototype.renderPieChart=function(e){var n=this;this.waitForLoaded(e,function(){var s={chartArea:{top:"10%",height:"80%"},legend:{}};e.options.colors&&(s.colors=e.options.colors),e.options.donut&&(s.pieHole=.5),"legend"in e.options&&Qy(s,e.options.legend),e.options.title&&Xy(s,e.options.title);var i=mt(mt(Kl,s),e.options.library||{}),r=new n.library.visualization.DataTable;r.addColumn("string",""),r.addColumn("number","Value"),r.addRows(e.data),n.drawChart(e,"PieChart",r,i)})};Cn.prototype.renderColumnChart=function(e){var n=this;this.waitForLoaded(e,function(){var s=Of(e,e.options),i=n.createDataTable(e.data,e.xtype);n.drawChart(e,"ColumnChart",i,s)})};Cn.prototype.renderBarChart=function(e){var n=this;this.waitForLoaded(e,function(){var s={hAxis:{gridlines:{color:"#ccc"}}},i=Gl(Kl,Qy,Xy,eQ,tQ,ZC,eA,tA)(e,e.options,s),r=n.createDataTable(e.data,e.xtype);n.drawChart(e,"BarChart",r,i)})};Cn.prototype.renderAreaChart=function(e){var n=this;this.waitForLoaded(e,function(){var s={isStacked:!0,pointSize:0,areaOpacity:.5},i=Of(e,e.options,s),r=n.createDataTable(e.data,e.xtype);n.drawChart(e,"AreaChart",r,i)})};Cn.prototype.renderGeoChart=function(e){var n=this;this.waitForLoaded(e,"geochart",function(){var s={legend:"none",colorAxis:{colors:e.options.colors||["#f6c7b6","#ce502d"]}},i=mt(mt(Kl,s),e.options.library||{}),r=new n.library.visualization.DataTable;r.addColumn("string",""),r.addColumn("number",e.options.label||"Value"),r.addRows(e.data),n.drawChart(e,"GeoChart",r,i)})};Cn.prototype.renderScatterChart=function(e){var n=this;this.waitForLoaded(e,function(){for(var s={},i=Of(e,e.options,s),r=e.data,o=[],a=0;a<r.length;a++){r[a].name=r[a].name||"Value";for(var c=r[a].data,l=0;l<c.length;l++){var u=new Array(r.length+1);u[0]=c[l][0],u[a+1]=c[l][1],o.push(u)}}var h=new n.library.visualization.DataTable;h.addColumn("number","");for(var d=0;d<r.length;d++)h.addColumn("number",r[d].name);h.addRows(o),n.drawChart(e,"ScatterChart",h,i)})};Cn.prototype.renderTimeline=function(e){var n=this;this.waitForLoaded(e,"timeline",function(){var s={legend:"none"};e.options.colors&&(s.colors=e.options.colors);var i=mt(mt(Kl,s),e.options.library||{}),r=new n.library.visualization.DataTable;r.addColumn({type:"string",id:"Name"}),r.addColumn({type:"date",id:"Start"}),r.addColumn({type:"date",id:"End"}),r.addRows(e.data),e.element.style.lineHeight="normal",n.drawChart(e,"Timeline",r,i)})};Cn.prototype.destroy=function(e){e.chart&&e.chart.clearChart()};Cn.prototype.drawChart=function(e,n,s,i){this.destroy(e),!e.destroyed&&(e.options.code&&window.console.log("var data = new google.visualization.DataTable("+s.toJSON()+`);
var chart = new google.visualization.`+n+`(element);
chart.draw(data, `+JSON.stringify(i)+");"),e.chart=new this.library.visualization[n](e.element),nQ(function(){e.chart.draw(s,i)}))};Cn.prototype.waitForLoaded=function(e,n,s){var i=this;if(s||(s=n,n="corechart"),hh.push({pack:n,callback:s}),LE[n])this.runCallbacks();else{LE[n]=!0;var r={packages:[n],callback:function(){i.runCallbacks()}},o=e.__config();o.language&&(r.language=o.language),n==="geochart"&&o.mapsApiKey&&(r.mapsApiKey=o.mapsApiKey),this.library.charts.load("current",r)}};Cn.prototype.runCallbacks=function(){for(var e=0;e<hh.length;e++){var n=hh[e],s=this.library.visualization&&(n.pack==="corechart"&&this.library.visualization.LineChart||n.pack==="timeline"&&this.library.visualization.Timeline||n.pack==="geochart"&&this.library.visualization.GeoChart);s&&(n.callback(),hh.splice(e,1),e--)}};Cn.prototype.createDataTable=function(e,n){for(var s=[],i=[],r=0;r<e.length;r++){var o=e[r];e[r].name=e[r].name||"Value";for(var a=0;a<o.data.length;a++){var c=o.data[a],l=n==="datetime"?c[0].getTime():c[0];s[l]||(s[l]=new Array(e.length),i.push(l)),s[l][r]=c[1]}}for(var u=[],h=[],d=0;d<i.length;d++){var f=i[d],p=void 0;n==="datetime"?(p=new Date(f),h.push(p)):p=f,u.push([p].concat(s[f]))}var m=!0;if(n==="datetime"){u.sort(DY);var _=jC(h,!0);m=OY(_)}else if(n==="number"){u.sort(Hy);for(var y=0;y<u.length;y++)u[y][0]=di(u[y][0]);n="string"}var b=new this.library.visualization.DataTable;n=n==="datetime"&&m?"date":n,b.addColumn(n,"");for(var w=0;w<e.length;w++)b.addColumn("number",e[w].name);return b.addRows(u),b};var Yr=[];function sQ(t){if(t){if(t.product==="Highcharts")return bi;if(t.charts)return Cn;if(Uy(t))return Ws}throw new Error("Unknown adapter")}function Sc(t){for(var e=sQ(t),n=0;n<Yr.length;n++)if(Yr[n].library===t)return;Yr.push(new e(t))}function iQ(){"Chart"in window&&Sc(window.Chart),"Highcharts"in window&&Sc(window.Highcharts),window.google&&window.google.charts&&Sc(window.google)}function rQ(t,e){var n="render"+t,s=e.options.adapter;iQ();for(var i=0;i<Yr.length;i++){var r=Yr[i];if((!s||s===r.name)&&Uy(r[n]))return e.adapter=r.name,e.__adapterObject=r,r[n](e)}throw Yr.length>0?new Error("No charting library found for "+t):new Error("No charting libraries found - be sure to include one before your charts")}var ve={charts:{},configure:function(t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(ve.config[e]=t[e])},setDefaultOptions:function(t){ve.options=t},eachChart:function(t){for(var e in ve.charts)Object.prototype.hasOwnProperty.call(ve.charts,e)&&t(ve.charts[e])},destroyAll:function(){for(var t in ve.charts)Object.prototype.hasOwnProperty.call(ve.charts,t)&&(ve.charts[t].destroy(),delete ve.charts[t])},config:{},options:{},adapters:Yr,addAdapter:Sc,use:function(t){return Sc(t),ve}};function oQ(t){for(var e=[],n=0;n<t.length;n++)e.push([Vs(t[n][0]),Vs(t[n][1]),Vs(t[n][2])]);return e}function aQ(t,e){if(e==="bubble")return oQ(t);var n;e==="number"?n=Vs:e==="datetime"?n=_s:n=di;for(var s=[],i=0;i<t.length;i++)s.push([n(t[i][0]),Vs(t[i][1])]);return s}function cQ(t,e,n){return sA(t)?(n.xmin||n.xmax)&&(!n.xmin||Np(n.xmin))&&(!n.xmax||Np(n.xmax))?"datetime":"number":NE(t,MY)?"number":!e&&NE(t,Np)?"datetime":"string"}function NE(t,e){for(var n=0;n<t.length;n++)for(var s=$y(t[n].data),i=0;i<s.length;i++)if(!e(s[i][0]))return!1;return!0}function lQ(t){for(var e=[],n=0;n<t.length;n++){var s={};for(var i in t[n])Object.prototype.hasOwnProperty.call(t[n],i)&&(s[i]=t[n][i]);e.push(s)}return e}function Ia(t,e,n){var s=t.options,i=t.rawData;t.singleSeriesFormat=!Xi(i)||!uh(i[0]),t.singleSeriesFormat&&(i=[{name:s.label,data:i}]),i=lQ(i);for(var r=0;r<i.length;r++)i[r].data=$y(i[r].data);t.xtype=e||(s.discrete?"string":cQ(i,n,s));for(var o=0;o<i.length;o++)i[o].data=aQ(i[o].data,t.xtype);return i}function nA(t){for(var e=$y(t.rawData),n=0;n<e.length;n++)e[n]=[di(e[n][0]),Vs(e[n][1])];return e}function sA(t,e){if(e==="PieChart"||e==="GeoChart"||e==="Timeline")return t.length===0;for(var n=0;n<t.length;n++)if(t[n].data.length>0)return!1;return!0}function uQ(t){var e=t.options.download;e===!0?e={}:typeof e=="string"&&(e={filename:e});var n=document.createElement("a");n.download=e.filename||"chart.png",n.style.position="absolute",n.style.top="20px",n.style.right="20px",n.style.zIndex=1e3,n.style.lineHeight="20px",n.target="_blank";var s=document.createElement("img"),i='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path fill="#CCCCCC" d="M344 240h-56L287.1 152c0-13.25-10.75-24-24-24h-16C234.7 128 223.1 138.8 223.1 152L224 240h-56c-9.531 0-18.16 5.656-22 14.38C142.2 263.1 143.9 273.3 150.4 280.3l88.75 96C243.7 381.2 250.1 384 256.8 384c7.781-.3125 13.25-2.875 17.75-7.844l87.25-96c6.406-7.031 8.031-17.19 4.188-25.88S353.5 240 344 240zM256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM256 464c-114.7 0-208-93.31-208-208S141.3 48 256 48s208 93.31 208 208S370.7 464 256 464z"/></svg>';s.src="data:image/svg+xml;utf8,"+encodeURIComponent(i),s.alt="Download",s.style.width="20px",s.style.height="20px",s.style.border="none",n.appendChild(s);var r=t.element;r.style.position="relative",t.__downloadAttached=!0,t.__enterEvent=r.addEventListener("mouseover",function(o){var a=o.relatedTarget;(!a||a!==this&&!this.contains(a))&&t.options.download&&(n.href=t.toImage(e),r.appendChild(n))}),t.__leaveEvent=r.addEventListener("mouseout",function(o){var a=o.relatedTarget;(!a||a!==this&&!this.contains(a))&&n.parentNode&&n.parentNode.removeChild(n)})}var iA=[],om=0,hQ=4;function dQ(t,e,n){iA.push([t,e,n]),Jy()}function Jy(){if(om<hQ){var t=iA.shift();t&&(om++,pQ(t[0],t[1],t[2]),Jy())}}function fQ(){om--,Jy()}function pQ(t,e,n){var s=new XMLHttpRequest;s.open("GET",t,!0),s.setRequestHeader("Content-Type","application/json"),s.onload=function(){fQ(),s.status===200?e(JSON.parse(s.responseText)):n(s.statusText)},s.send()}function Zy(t,e){t.textContent=e}function dh(t,e,n){n||(e="Error Loading Chart: "+e),Zy(t,e),t.style.color="#ff0000"}function Vp(t){try{t.__render()}catch(e){throw dh(t.element,e.message),e}}function al(t,e,n){if(n&&t.options.loading&&(typeof e=="string"||typeof e=="function")&&Zy(t.element,t.options.loading),typeof e=="string")dQ(e,function(s){t.rawData=s,Vp(t)},function(s){dh(t.element,s)});else if(typeof e=="function")try{e(function(s){t.rawData=s,Vp(t)},function(s){dh(t.element,s,!0)})}catch(s){dh(t.element,s,!0)}else t.rawData=e,Vp(t)}function gQ(t,e){if(sA(e.data,t)){var n=e.options.empty||e.options.messages&&e.options.messages.empty||"No data";Zy(e.element,n)}else rQ(t,e),e.options.download&&!e.__downloadAttached&&e.adapter==="chartjs"&&uQ(e)}function mQ(t){if(typeof t=="string"){var e=t;if(t=document.getElementById(t),!t)throw new Error("No element with id "+e)}return t}var tt=function(e,n,s){this.element=mQ(e),this.options=mt(ve.options,s||{}),this.dataSource=n,this.element.id&&(ve.charts[this.element.id]=this),al(this,n,!0),this.options.refresh&&this.startRefresh()};tt.prototype.getElement=function(){return this.element};tt.prototype.getDataSource=function(){return this.dataSource};tt.prototype.getData=function(){return this.data};tt.prototype.getOptions=function(){return this.options};tt.prototype.getChartObject=function(){return this.chart};tt.prototype.getAdapter=function(){return this.adapter};tt.prototype.updateData=function(e,n){this.dataSource=e,n&&this.__updateOptions(n),al(this,e,!0)};tt.prototype.setOptions=function(e){this.__updateOptions(e),this.redraw()};tt.prototype.redraw=function(){al(this,this.rawData)};tt.prototype.refreshData=function(){if(typeof this.dataSource=="string"){var e=this.dataSource.indexOf("?")===-1?"?":"&",n=this.dataSource+e+"_="+new Date().getTime();al(this,n)}else typeof this.dataSource=="function"&&al(this,this.dataSource)};tt.prototype.startRefresh=function(){var e=this,n=this.options.refresh;if(n&&typeof this.dataSource!="string"&&typeof this.dataSource!="function")throw new Error("Data source must be a URL or callback for refresh");if(!this.intervalId)if(n)this.intervalId=setInterval(function(){e.refreshData()},n*1e3);else throw new Error("No refresh interval")};tt.prototype.stopRefresh=function(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)};tt.prototype.toImage=function(e){if(this.adapter==="chartjs")if(e&&e.background&&e.background!=="transparent"){var n=this.chart.canvas,s=this.chart.ctx,i=document.createElement("canvas"),r=i.getContext("2d");return i.width=s.canvas.width,i.height=s.canvas.height,r.fillStyle=e.background,r.fillRect(0,0,i.width,i.height),r.drawImage(n,0,0),i.toDataURL("image/png")}else return this.chart.toBase64Image();else throw new Error("Feature only available for Chart.js")};tt.prototype.destroy=function(){this.destroyed=!0,this.stopRefresh(),this.__adapterObject&&this.__adapterObject.destroy(this),this.__enterEvent&&this.element.removeEventListener("mouseover",this.__enterEvent),this.__leaveEvent&&this.element.removeEventListener("mouseout",this.__leaveEvent)};tt.prototype.__updateOptions=function(e){var n=e.refresh&&e.refresh!==this.options.refresh;this.options=mt(ve.options,e),n&&(this.stopRefresh(),this.startRefresh())};tt.prototype.__render=function(){this.data=this.__processData(),gQ(this.__chartName(),this)};tt.prototype.__config=function(){return ve.config};var _Q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return Ia(this)},e.prototype.__chartName=function(){return"LineChart"},e}(tt),yQ=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return nA(this)},e.prototype.__chartName=function(){return"PieChart"},e}(tt),bQ=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return Ia(this,null,!0)},e.prototype.__chartName=function(){return"ColumnChart"},e}(tt),vQ=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return Ia(this,null,!0)},e.prototype.__chartName=function(){return"BarChart"},e}(tt),wQ=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return Ia(this)},e.prototype.__chartName=function(){return"AreaChart"},e}(tt),EQ=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return nA(this)},e.prototype.__chartName=function(){return"GeoChart"},e}(tt),TQ=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return Ia(this,"number")},e.prototype.__chartName=function(){return"ScatterChart"},e}(tt),SQ=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return Ia(this,"bubble")},e.prototype.__chartName=function(){return"BubbleChart"},e}(tt),IQ=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){for(var s=this.rawData,i=0;i<s.length;i++)s[i][1]=_s(s[i][1]),s[i][2]=_s(s[i][2]);return s},e.prototype.__chartName=function(){return"Timeline"},e}(tt);ve.LineChart=_Q;ve.PieChart=yQ;ve.ColumnChart=bQ;ve.BarChart=vQ;ve.AreaChart=wQ;ve.GeoChart=EQ;ve.ScatterChart=TQ;ve.BubbleChart=SQ;ve.Timeline=IQ;typeof window<"u"&&!window.Chartkick&&(window.Chartkick=ve,document.addEventListener("turbolinks:before-render",function(){ve.config.autoDestroy!==!1&&ve.destroyAll()}),document.addEventListener("turbo:before-render",function(){ve.config.autoDestroy!==!1&&ve.destroyAll()}),setTimeout(function(){window.dispatchEvent(new Event("chartkick:load"))},0));ve.default=ve;Vy.register(...AY);function ce(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function st(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Mf(t,e){const n=ce(t);return isNaN(e)?st(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function eb(t,e){const n=ce(t);if(isNaN(e))return st(t,NaN);if(!e)return n;const s=n.getDate(),i=st(t,n.getTime());i.setMonth(n.getMonth()+e+1,0);const r=i.getDate();return s>=r?i:(n.setFullYear(i.getFullYear(),i.getMonth(),s),n)}function Lf(t,e){const n=+ce(t);return st(t,n+e)}const rA=6048e5,RQ=864e5,Yl=6e4,Ql=36e5,xQ=1e3;function CQ(t,e){return Lf(t,e*Ql)}let AQ={};function Eo(){return AQ}function $s(t,e){var a,c,l,u;const n=Eo(),s=(e==null?void 0:e.weekStartsOn)??((c=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((u=(l=n.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??0,i=ce(t),r=i.getDay(),o=(r<s?7:0)+r-s;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function ma(t){return $s(t,{weekStartsOn:1})}function oA(t){const e=ce(t),n=e.getFullYear(),s=st(t,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const i=ma(s),r=st(t,0);r.setFullYear(n,0,4),r.setHours(0,0,0,0);const o=ma(r);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function am(t){const e=ce(t);return e.setHours(0,0,0,0),e}function nd(t){const e=ce(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function aA(t,e){const n=am(t),s=am(e),i=+n-nd(n),r=+s-nd(s);return Math.round((i-r)/RQ)}function kQ(t){const e=oA(t),n=st(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),ma(n)}function PQ(t,e){return Lf(t,e*Yl)}function DQ(t,e){const n=e*3;return eb(t,n)}function OQ(t,e){return Lf(t,e*1e3)}function MQ(t,e){const n=e*7;return Mf(t,n)}function LQ(t,e){return eb(t,e*12)}function Ic(t,e){const n=ce(t),s=ce(e),i=n.getTime()-s.getTime();return i<0?-1:i>0?1:i}function NQ(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function cA(t){if(!NQ(t)&&typeof t!="number")return!1;const e=ce(t);return!isNaN(Number(e))}function VQ(t,e){const n=ce(t),s=ce(e),i=n.getFullYear()-s.getFullYear(),r=n.getMonth()-s.getMonth();return i*12+r}function FQ(t,e){const n=ce(t),s=ce(e);return n.getFullYear()-s.getFullYear()}function lA(t,e){const n=ce(t),s=ce(e),i=VE(n,s),r=Math.abs(aA(n,s));n.setDate(n.getDate()-i*r);const o=+(VE(n,s)===-i),a=i*(r-o);return a===0?0:a}function VE(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function Xl(t){return e=>{const s=(t?Math[t]:Math.trunc)(e);return s===0?0:s}}function Nf(t,e){return+ce(t)-+ce(e)}function BQ(t,e,n){const s=Nf(t,e)/Ql;return Xl(n==null?void 0:n.roundingMethod)(s)}function UQ(t,e,n){const s=Nf(t,e)/Yl;return Xl(n==null?void 0:n.roundingMethod)(s)}function uA(t){const e=ce(t);return e.setHours(23,59,59,999),e}function hA(t){const e=ce(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function $Q(t){const e=ce(t);return+uA(e)==+hA(e)}function dA(t,e){const n=ce(t),s=ce(e),i=Ic(n,s),r=Math.abs(VQ(n,s));let o;if(r<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*r);let a=Ic(n,s)===-i;$Q(ce(t))&&r===1&&Ic(t,s)===1&&(a=!1),o=i*(r-Number(a))}return o===0?0:o}function HQ(t,e,n){const s=dA(t,e)/3;return Xl(n==null?void 0:n.roundingMethod)(s)}function zQ(t,e,n){const s=Nf(t,e)/1e3;return Xl(n==null?void 0:n.roundingMethod)(s)}function jQ(t,e,n){const s=lA(t,e)/7;return Xl(n==null?void 0:n.roundingMethod)(s)}function WQ(t,e){const n=ce(t),s=ce(e),i=Ic(n,s),r=Math.abs(FQ(n,s));n.setFullYear(1584),s.setFullYear(1584);const o=Ic(n,s)===-i,a=i*(r-+o);return a===0?0:a}function qQ(t){const e=ce(t);return e.setSeconds(0,0),e}function GQ(t){const e=ce(t),n=e.getMonth(),s=n-n%3;return e.setMonth(s,1),e.setHours(0,0,0,0),e}function KQ(t){const e=ce(t);return e.setDate(1),e.setHours(0,0,0,0),e}function YQ(t){const e=ce(t),n=e.getFullYear();return e.setFullYear(n+1,0,0),e.setHours(23,59,59,999),e}function fA(t){const e=ce(t),n=st(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function QQ(t){const e=ce(t);return e.setMinutes(59,59,999),e}function XQ(t,e){var a,c,l,u;const n=Eo(),s=(e==null?void 0:e.weekStartsOn)??((c=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((u=(l=n.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??0,i=ce(t),r=i.getDay(),o=(r<s?-7:0)+6-(r-s);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function JQ(t){const e=ce(t);return e.setSeconds(59,999),e}function ZQ(t){const e=ce(t),n=e.getMonth(),s=n-n%3+3;return e.setMonth(s,0),e.setHours(23,59,59,999),e}function eX(t){const e=ce(t);return e.setMilliseconds(999),e}const tX={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},nX=(t,e,n)=>{let s;const i=tX[t];return typeof i=="string"?s=i:e===1?s=i.one:s=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function Fp(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const sX={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},iX={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},rX={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},oX={date:Fp({formats:sX,defaultWidth:"full"}),time:Fp({formats:iX,defaultWidth:"full"}),dateTime:Fp({formats:rX,defaultWidth:"full"})},aX={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},cX=(t,e,n,s)=>aX[t];function $a(t){return(e,n)=>{const s=n!=null&&n.context?String(n.context):"standalone";let i;if(s==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[o]}const r=t.argumentCallback?t.argumentCallback(e):e;return i[r]}}const lX={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},uX={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},hX={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dX={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},fX={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},pX={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},gX=(t,e)=>{const n=Number(t),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},mX={ordinalNumber:gX,era:$a({values:lX,defaultWidth:"wide"}),quarter:$a({values:uX,defaultWidth:"wide",argumentCallback:t=>t-1}),month:$a({values:hX,defaultWidth:"wide"}),day:$a({values:dX,defaultWidth:"wide"}),dayPeriod:$a({values:fX,defaultWidth:"wide",formattingValues:pX,defaultFormattingWidth:"wide"})};function Ha(t){return(e,n={})=>{const s=n.width,i=s&&t.matchPatterns[s]||t.matchPatterns[t.defaultMatchWidth],r=e.match(i);if(!r)return null;const o=r[0],a=s&&t.parsePatterns[s]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(a)?yX(a,h=>h.test(o)):_X(a,h=>h.test(o));let l;l=t.valueCallback?t.valueCallback(c):c,l=n.valueCallback?n.valueCallback(l):l;const u=e.slice(o.length);return{value:l,rest:u}}}function _X(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function yX(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function bX(t){return(e,n={})=>{const s=e.match(t.matchPattern);if(!s)return null;const i=s[0],r=e.match(t.parsePattern);if(!r)return null;let o=t.valueCallback?t.valueCallback(r[0]):r[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const vX=/^(\d+)(th|st|nd|rd)?/i,wX=/\d+/i,EX={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},TX={any:[/^b/i,/^(a|c)/i]},SX={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},IX={any:[/1/i,/2/i,/3/i,/4/i]},RX={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},xX={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},CX={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},AX={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},kX={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},PX={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},DX={ordinalNumber:bX({matchPattern:vX,parsePattern:wX,valueCallback:t=>parseInt(t,10)}),era:Ha({matchPatterns:EX,defaultMatchWidth:"wide",parsePatterns:TX,defaultParseWidth:"any"}),quarter:Ha({matchPatterns:SX,defaultMatchWidth:"wide",parsePatterns:IX,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ha({matchPatterns:RX,defaultMatchWidth:"wide",parsePatterns:xX,defaultParseWidth:"any"}),day:Ha({matchPatterns:CX,defaultMatchWidth:"wide",parsePatterns:AX,defaultParseWidth:"any"}),dayPeriod:Ha({matchPatterns:kX,defaultMatchWidth:"any",parsePatterns:PX,defaultParseWidth:"any"})},pA={code:"en-US",formatDistance:nX,formatLong:oX,formatRelative:cX,localize:mX,match:DX,options:{weekStartsOn:0,firstWeekContainsDate:1}};function OX(t){const e=ce(t);return aA(e,fA(e))+1}function gA(t){const e=ce(t),n=+ma(e)-+kQ(e);return Math.round(n/rA)+1}function tb(t,e){var u,h,d,f;const n=ce(t),s=n.getFullYear(),i=Eo(),r=(e==null?void 0:e.firstWeekContainsDate)??((h=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((f=(d=i.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,o=st(t,0);o.setFullYear(s+1,0,r),o.setHours(0,0,0,0);const a=$s(o,e),c=st(t,0);c.setFullYear(s,0,r),c.setHours(0,0,0,0);const l=$s(c,e);return n.getTime()>=a.getTime()?s+1:n.getTime()>=l.getTime()?s:s-1}function MX(t,e){var a,c,l,u;const n=Eo(),s=(e==null?void 0:e.firstWeekContainsDate)??((c=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(l=n.locale)==null?void 0:l.options)==null?void 0:u.firstWeekContainsDate)??1,i=tb(t,e),r=st(t,0);return r.setFullYear(i,0,s),r.setHours(0,0,0,0),$s(r,e)}function mA(t,e){const n=ce(t),s=+$s(n,e)-+MX(n,e);return Math.round(s/rA)+1}function We(t,e){const n=t<0?"-":"",s=Math.abs(t).toString().padStart(e,"0");return n+s}const Ri={y(t,e){const n=t.getFullYear(),s=n>0?n:1-n;return We(e==="yy"?s%100:s,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):We(n+1,2)},d(t,e){return We(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return We(t.getHours()%12||12,e.length)},H(t,e){return We(t.getHours(),e.length)},m(t,e){return We(t.getMinutes(),e.length)},s(t,e){return We(t.getSeconds(),e.length)},S(t,e){const n=e.length,s=t.getMilliseconds(),i=Math.trunc(s*Math.pow(10,n-3));return We(i,e.length)}},Ao={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},FE={G:function(t,e,n){const s=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const s=t.getFullYear(),i=s>0?s:1-s;return n.ordinalNumber(i,{unit:"year"})}return Ri.y(t,e)},Y:function(t,e,n,s){const i=tb(t,s),r=i>0?i:1-i;if(e==="YY"){const o=r%100;return We(o,2)}return e==="Yo"?n.ordinalNumber(r,{unit:"year"}):We(r,e.length)},R:function(t,e){const n=oA(t);return We(n,e.length)},u:function(t,e){const n=t.getFullYear();return We(n,e.length)},Q:function(t,e,n){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return We(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,e,n){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return We(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,e,n){const s=t.getMonth();switch(e){case"M":case"MM":return Ri.M(t,e);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(t,e,n){const s=t.getMonth();switch(e){case"L":return String(s+1);case"LL":return We(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(t,e,n,s){const i=mA(t,s);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):We(i,e.length)},I:function(t,e,n){const s=gA(t);return e==="Io"?n.ordinalNumber(s,{unit:"week"}):We(s,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Ri.d(t,e)},D:function(t,e,n){const s=OX(t);return e==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):We(s,e.length)},E:function(t,e,n){const s=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(t,e,n,s){const i=t.getDay(),r=(i-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(r);case"ee":return We(r,2);case"eo":return n.ordinalNumber(r,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,s){const i=t.getDay(),r=(i-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(r);case"cc":return We(r,e.length);case"co":return n.ordinalNumber(r,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const s=t.getDay(),i=s===0?7:s;switch(e){case"i":return String(i);case"ii":return We(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const s=t.getHours();let i;switch(s===12?i=Ao.noon:s===0?i=Ao.midnight:i=s/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const s=t.getHours();let i;switch(s>=17?i=Ao.evening:s>=12?i=Ao.afternoon:s>=4?i=Ao.morning:i=Ao.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let s=t.getHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return Ri.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Ri.H(t,e)},K:function(t,e,n){const s=t.getHours()%12;return e==="Ko"?n.ordinalNumber(s,{unit:"hour"}):We(s,e.length)},k:function(t,e,n){let s=t.getHours();return s===0&&(s=24),e==="ko"?n.ordinalNumber(s,{unit:"hour"}):We(s,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ri.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Ri.s(t,e)},S:function(t,e){return Ri.S(t,e)},X:function(t,e,n){const s=t.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return UE(s);case"XXXX":case"XX":return Rr(s);case"XXXXX":case"XXX":default:return Rr(s,":")}},x:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"x":return UE(s);case"xxxx":case"xx":return Rr(s);case"xxxxx":case"xxx":default:return Rr(s,":")}},O:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+BE(s,":");case"OOOO":default:return"GMT"+Rr(s,":")}},z:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+BE(s,":");case"zzzz":default:return"GMT"+Rr(s,":")}},t:function(t,e,n){const s=Math.trunc(t.getTime()/1e3);return We(s,e.length)},T:function(t,e,n){const s=t.getTime();return We(s,e.length)}};function BE(t,e=""){const n=t>0?"-":"+",s=Math.abs(t),i=Math.trunc(s/60),r=s%60;return r===0?n+String(i):n+String(i)+e+We(r,2)}function UE(t,e){return t%60===0?(t>0?"-":"+")+We(Math.abs(t)/60,2):Rr(t,e)}function Rr(t,e=""){const n=t>0?"-":"+",s=Math.abs(t),i=We(Math.trunc(s/60),2),r=We(s%60,2);return n+i+e+r}const $E=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},_A=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},LX=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],s=n[1],i=n[2];if(!i)return $E(t,e);let r;switch(s){case"P":r=e.dateTime({width:"short"});break;case"PP":r=e.dateTime({width:"medium"});break;case"PPP":r=e.dateTime({width:"long"});break;case"PPPP":default:r=e.dateTime({width:"full"});break}return r.replace("{{date}}",$E(s,e)).replace("{{time}}",_A(i,e))},cm={p:_A,P:LX},NX=/^D+$/,VX=/^Y+$/,FX=["D","DD","YY","YYYY"];function yA(t){return NX.test(t)}function bA(t){return VX.test(t)}function lm(t,e,n){const s=BX(t,e,n);if(console.warn(s),FX.includes(t))throw new RangeError(s)}function BX(t,e,n){const s=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const UX=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,$X=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,HX=/^'([^]*?)'?$/,zX=/''/g,jX=/[a-zA-Z]/;function WX(t,e,n){var u,h,d,f,p,m,_,y;const s=Eo(),i=(n==null?void 0:n.locale)??s.locale??pA,r=(n==null?void 0:n.firstWeekContainsDate)??((h=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((f=(d=s.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((m=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:m.weekStartsOn)??s.weekStartsOn??((y=(_=s.locale)==null?void 0:_.options)==null?void 0:y.weekStartsOn)??0,a=ce(t);if(!cA(a))throw new RangeError("Invalid time value");let c=e.match($X).map(b=>{const w=b[0];if(w==="p"||w==="P"){const T=cm[w];return T(b,i.formatLong)}return b}).join("").match(UX).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const w=b[0];if(w==="'")return{isToken:!1,value:qX(b)};if(FE[w])return{isToken:!0,value:b};if(w.match(jX))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:b}});i.localize.preprocessor&&(c=i.localize.preprocessor(a,c));const l={firstWeekContainsDate:r,weekStartsOn:o,locale:i};return c.map(b=>{if(!b.isToken)return b.value;const w=b.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&bA(w)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&yA(w))&&lm(w,e,String(t));const T=FE[w[0]];return T(a,w,i.localize,l)}).join("")}function qX(t){const e=t.match(HX);return e?e[1].replace(zX,"'"):t}function GX(){return Object.assign({},Eo())}function KX(t){let n=ce(t).getDay();return n===0&&(n=7),n}function YX(t,e){const n=e instanceof Date?st(e,0):new e(0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}const QX=10;class vA{constructor(){C(this,"subPriority",0)}validate(e,n){return!0}}class XX extends vA{constructor(e,n,s,i,r){super(),this.value=e,this.validateValue=n,this.setValue=s,this.priority=i,r&&(this.subPriority=r)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,s){return this.setValue(e,n,this.value,s)}}class JX extends vA{constructor(){super(...arguments);C(this,"priority",QX);C(this,"subPriority",-1)}set(n,s){return s.timestampIsSet?n:st(n,YX(n,Date))}}class ze{run(e,n,s,i){const r=this.parse(e,n,s,i);return r?{setter:new XX(r.value,this.validate,this.set,this.priority,this.subPriority),rest:r.rest}:null}validate(e,n,s){return!0}}class ZX extends ze{constructor(){super(...arguments);C(this,"priority",140);C(this,"incompatibleTokens",["R","u","t","T"])}parse(n,s,i){switch(s){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"});case"GGGGG":return i.era(n,{width:"narrow"});case"GGGG":default:return i.era(n,{width:"wide"})||i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"})}}set(n,s,i){return s.era=i,n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}const Rt={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},vs={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function xt(t,e){return t&&{value:e(t.value),rest:t.rest}}function gt(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function ws(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const s=n[1]==="+"?1:-1,i=n[2]?parseInt(n[2],10):0,r=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:s*(i*Ql+r*Yl+o*xQ),rest:e.slice(n[0].length)}}function wA(t){return gt(Rt.anyDigitsSigned,t)}function Et(t,e){switch(t){case 1:return gt(Rt.singleDigit,e);case 2:return gt(Rt.twoDigits,e);case 3:return gt(Rt.threeDigits,e);case 4:return gt(Rt.fourDigits,e);default:return gt(new RegExp("^\\d{1,"+t+"}"),e)}}function sd(t,e){switch(t){case 1:return gt(Rt.singleDigitSigned,e);case 2:return gt(Rt.twoDigitsSigned,e);case 3:return gt(Rt.threeDigitsSigned,e);case 4:return gt(Rt.fourDigitsSigned,e);default:return gt(new RegExp("^-?\\d{1,"+t+"}"),e)}}function nb(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function EA(t,e){const n=e>0,s=n?e:1-e;let i;if(s<=50)i=t||100;else{const r=s+50,o=Math.trunc(r/100)*100,a=t>=r%100;i=t+o-(a?100:0)}return n?i:1-i}function TA(t){return t%400===0||t%4===0&&t%100!==0}class eJ extends ze{constructor(){super(...arguments);C(this,"priority",130);C(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,s,i){const r=o=>({year:o,isTwoDigitYear:s==="yy"});switch(s){case"y":return xt(Et(4,n),r);case"yo":return xt(i.ordinalNumber(n,{unit:"year"}),r);default:return xt(Et(s.length,n),r)}}validate(n,s){return s.isTwoDigitYear||s.year>0}set(n,s,i){const r=n.getFullYear();if(i.isTwoDigitYear){const a=EA(i.year,r);return n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}const o=!("era"in s)||s.era===1?i.year:1-i.year;return n.setFullYear(o,0,1),n.setHours(0,0,0,0),n}}class tJ extends ze{constructor(){super(...arguments);C(this,"priority",130);C(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,s,i){const r=o=>({year:o,isTwoDigitYear:s==="YY"});switch(s){case"Y":return xt(Et(4,n),r);case"Yo":return xt(i.ordinalNumber(n,{unit:"year"}),r);default:return xt(Et(s.length,n),r)}}validate(n,s){return s.isTwoDigitYear||s.year>0}set(n,s,i,r){const o=tb(n,r);if(i.isTwoDigitYear){const c=EA(i.year,o);return n.setFullYear(c,0,r.firstWeekContainsDate),n.setHours(0,0,0,0),$s(n,r)}const a=!("era"in s)||s.era===1?i.year:1-i.year;return n.setFullYear(a,0,r.firstWeekContainsDate),n.setHours(0,0,0,0),$s(n,r)}}class nJ extends ze{constructor(){super(...arguments);C(this,"priority",130);C(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,s){return sd(s==="R"?4:s.length,n)}set(n,s,i){const r=st(n,0);return r.setFullYear(i,0,4),r.setHours(0,0,0,0),ma(r)}}class sJ extends ze{constructor(){super(...arguments);C(this,"priority",130);C(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,s){return sd(s==="u"?4:s.length,n)}set(n,s,i){return n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}class iJ extends ze{constructor(){super(...arguments);C(this,"priority",120);C(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,s,i){switch(s){case"Q":case"QQ":return Et(s.length,n);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(n,{width:"wide",context:"formatting"})||i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,s){return s>=1&&s<=4}set(n,s,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class rJ extends ze{constructor(){super(...arguments);C(this,"priority",120);C(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,s,i){switch(s){case"q":case"qq":return Et(s.length,n);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(n,{width:"wide",context:"standalone"})||i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,s){return s>=1&&s<=4}set(n,s,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class oJ extends ze{constructor(){super(...arguments);C(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);C(this,"priority",110)}parse(n,s,i){const r=o=>o-1;switch(s){case"M":return xt(gt(Rt.month,n),r);case"MM":return xt(Et(2,n),r);case"Mo":return xt(i.ordinalNumber(n,{unit:"month"}),r);case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(n,{width:"wide",context:"formatting"})||i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"})}}validate(n,s){return s>=0&&s<=11}set(n,s,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}class aJ extends ze{constructor(){super(...arguments);C(this,"priority",110);C(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,s,i){const r=o=>o-1;switch(s){case"L":return xt(gt(Rt.month,n),r);case"LL":return xt(Et(2,n),r);case"Lo":return xt(i.ordinalNumber(n,{unit:"month"}),r);case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(n,{width:"wide",context:"standalone"})||i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"})}}validate(n,s){return s>=0&&s<=11}set(n,s,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}function cJ(t,e,n){const s=ce(t),i=mA(s,n)-e;return s.setDate(s.getDate()-i*7),s}class lJ extends ze{constructor(){super(...arguments);C(this,"priority",100);C(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,s,i){switch(s){case"w":return gt(Rt.week,n);case"wo":return i.ordinalNumber(n,{unit:"week"});default:return Et(s.length,n)}}validate(n,s){return s>=1&&s<=53}set(n,s,i,r){return $s(cJ(n,i,r),r)}}function uJ(t,e){const n=ce(t),s=gA(n)-e;return n.setDate(n.getDate()-s*7),n}class hJ extends ze{constructor(){super(...arguments);C(this,"priority",100);C(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,s,i){switch(s){case"I":return gt(Rt.week,n);case"Io":return i.ordinalNumber(n,{unit:"week"});default:return Et(s.length,n)}}validate(n,s){return s>=1&&s<=53}set(n,s,i){return ma(uJ(n,i))}}const dJ=[31,28,31,30,31,30,31,31,30,31,30,31],fJ=[31,29,31,30,31,30,31,31,30,31,30,31];class pJ extends ze{constructor(){super(...arguments);C(this,"priority",90);C(this,"subPriority",1);C(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,s,i){switch(s){case"d":return gt(Rt.date,n);case"do":return i.ordinalNumber(n,{unit:"date"});default:return Et(s.length,n)}}validate(n,s){const i=n.getFullYear(),r=TA(i),o=n.getMonth();return r?s>=1&&s<=fJ[o]:s>=1&&s<=dJ[o]}set(n,s,i){return n.setDate(i),n.setHours(0,0,0,0),n}}class gJ extends ze{constructor(){super(...arguments);C(this,"priority",90);C(this,"subpriority",1);C(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,s,i){switch(s){case"D":case"DD":return gt(Rt.dayOfYear,n);case"Do":return i.ordinalNumber(n,{unit:"date"});default:return Et(s.length,n)}}validate(n,s){const i=n.getFullYear();return TA(i)?s>=1&&s<=366:s>=1&&s<=365}set(n,s,i){return n.setMonth(0,i),n.setHours(0,0,0,0),n}}function sb(t,e,n){var h,d,f,p;const s=Eo(),i=(n==null?void 0:n.weekStartsOn)??((d=(h=n==null?void 0:n.locale)==null?void 0:h.options)==null?void 0:d.weekStartsOn)??s.weekStartsOn??((p=(f=s.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,r=ce(t),o=r.getDay(),c=(e%7+7)%7,l=7-i,u=e<0||e>6?e-(o+l)%7:(c+l)%7-(o+l)%7;return Mf(r,u)}class mJ extends ze{constructor(){super(...arguments);C(this,"priority",90);C(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,s,i){switch(s){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,s){return s>=0&&s<=6}set(n,s,i,r){return n=sb(n,i,r),n.setHours(0,0,0,0),n}}class _J extends ze{constructor(){super(...arguments);C(this,"priority",90);C(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,s,i,r){const o=a=>{const c=Math.floor((a-1)/7)*7;return(a+r.weekStartsOn+6)%7+c};switch(s){case"e":case"ee":return xt(Et(s.length,n),o);case"eo":return xt(i.ordinalNumber(n,{unit:"day"}),o);case"eee":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeeee":return i.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,s){return s>=0&&s<=6}set(n,s,i,r){return n=sb(n,i,r),n.setHours(0,0,0,0),n}}class yJ extends ze{constructor(){super(...arguments);C(this,"priority",90);C(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,s,i,r){const o=a=>{const c=Math.floor((a-1)/7)*7;return(a+r.weekStartsOn+6)%7+c};switch(s){case"c":case"cc":return xt(Et(s.length,n),o);case"co":return xt(i.ordinalNumber(n,{unit:"day"}),o);case"ccc":return i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"ccccc":return i.day(n,{width:"narrow",context:"standalone"});case"cccccc":return i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(n,{width:"wide",context:"standalone"})||i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"})}}validate(n,s){return s>=0&&s<=6}set(n,s,i,r){return n=sb(n,i,r),n.setHours(0,0,0,0),n}}function bJ(t,e){const n=ce(t),s=KX(n),i=e-s;return Mf(n,i)}class vJ extends ze{constructor(){super(...arguments);C(this,"priority",90);C(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,s,i){const r=o=>o===0?7:o;switch(s){case"i":case"ii":return Et(s.length,n);case"io":return i.ordinalNumber(n,{unit:"day"});case"iii":return xt(i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),r);case"iiiii":return xt(i.day(n,{width:"narrow",context:"formatting"}),r);case"iiiiii":return xt(i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),r);case"iiii":default:return xt(i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),r)}}validate(n,s){return s>=1&&s<=7}set(n,s,i){return n=bJ(n,i),n.setHours(0,0,0,0),n}}class wJ extends ze{constructor(){super(...arguments);C(this,"priority",80);C(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,s,i){switch(s){case"a":case"aa":case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,s,i){return n.setHours(nb(i),0,0,0),n}}class EJ extends ze{constructor(){super(...arguments);C(this,"priority",80);C(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,s,i){switch(s){case"b":case"bb":case"bbb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,s,i){return n.setHours(nb(i),0,0,0),n}}class TJ extends ze{constructor(){super(...arguments);C(this,"priority",80);C(this,"incompatibleTokens",["a","b","t","T"])}parse(n,s,i){switch(s){case"B":case"BB":case"BBB":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,s,i){return n.setHours(nb(i),0,0,0),n}}class SJ extends ze{constructor(){super(...arguments);C(this,"priority",70);C(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,s,i){switch(s){case"h":return gt(Rt.hour12h,n);case"ho":return i.ordinalNumber(n,{unit:"hour"});default:return Et(s.length,n)}}validate(n,s){return s>=1&&s<=12}set(n,s,i){const r=n.getHours()>=12;return r&&i<12?n.setHours(i+12,0,0,0):!r&&i===12?n.setHours(0,0,0,0):n.setHours(i,0,0,0),n}}class IJ extends ze{constructor(){super(...arguments);C(this,"priority",70);C(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,s,i){switch(s){case"H":return gt(Rt.hour23h,n);case"Ho":return i.ordinalNumber(n,{unit:"hour"});default:return Et(s.length,n)}}validate(n,s){return s>=0&&s<=23}set(n,s,i){return n.setHours(i,0,0,0),n}}class RJ extends ze{constructor(){super(...arguments);C(this,"priority",70);C(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,s,i){switch(s){case"K":return gt(Rt.hour11h,n);case"Ko":return i.ordinalNumber(n,{unit:"hour"});default:return Et(s.length,n)}}validate(n,s){return s>=0&&s<=11}set(n,s,i){return n.getHours()>=12&&i<12?n.setHours(i+12,0,0,0):n.setHours(i,0,0,0),n}}class xJ extends ze{constructor(){super(...arguments);C(this,"priority",70);C(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,s,i){switch(s){case"k":return gt(Rt.hour24h,n);case"ko":return i.ordinalNumber(n,{unit:"hour"});default:return Et(s.length,n)}}validate(n,s){return s>=1&&s<=24}set(n,s,i){const r=i<=24?i%24:i;return n.setHours(r,0,0,0),n}}class CJ extends ze{constructor(){super(...arguments);C(this,"priority",60);C(this,"incompatibleTokens",["t","T"])}parse(n,s,i){switch(s){case"m":return gt(Rt.minute,n);case"mo":return i.ordinalNumber(n,{unit:"minute"});default:return Et(s.length,n)}}validate(n,s){return s>=0&&s<=59}set(n,s,i){return n.setMinutes(i,0,0),n}}class AJ extends ze{constructor(){super(...arguments);C(this,"priority",50);C(this,"incompatibleTokens",["t","T"])}parse(n,s,i){switch(s){case"s":return gt(Rt.second,n);case"so":return i.ordinalNumber(n,{unit:"second"});default:return Et(s.length,n)}}validate(n,s){return s>=0&&s<=59}set(n,s,i){return n.setSeconds(i,0),n}}class kJ extends ze{constructor(){super(...arguments);C(this,"priority",30);C(this,"incompatibleTokens",["t","T"])}parse(n,s){const i=r=>Math.trunc(r*Math.pow(10,-s.length+3));return xt(Et(s.length,n),i)}set(n,s,i){return n.setMilliseconds(i),n}}class PJ extends ze{constructor(){super(...arguments);C(this,"priority",10);C(this,"incompatibleTokens",["t","T","x"])}parse(n,s){switch(s){case"X":return ws(vs.basicOptionalMinutes,n);case"XX":return ws(vs.basic,n);case"XXXX":return ws(vs.basicOptionalSeconds,n);case"XXXXX":return ws(vs.extendedOptionalSeconds,n);case"XXX":default:return ws(vs.extended,n)}}set(n,s,i){return s.timestampIsSet?n:st(n,n.getTime()-nd(n)-i)}}class DJ extends ze{constructor(){super(...arguments);C(this,"priority",10);C(this,"incompatibleTokens",["t","T","X"])}parse(n,s){switch(s){case"x":return ws(vs.basicOptionalMinutes,n);case"xx":return ws(vs.basic,n);case"xxxx":return ws(vs.basicOptionalSeconds,n);case"xxxxx":return ws(vs.extendedOptionalSeconds,n);case"xxx":default:return ws(vs.extended,n)}}set(n,s,i){return s.timestampIsSet?n:st(n,n.getTime()-nd(n)-i)}}class OJ extends ze{constructor(){super(...arguments);C(this,"priority",40);C(this,"incompatibleTokens","*")}parse(n){return wA(n)}set(n,s,i){return[st(n,i*1e3),{timestampIsSet:!0}]}}class MJ extends ze{constructor(){super(...arguments);C(this,"priority",20);C(this,"incompatibleTokens","*")}parse(n){return wA(n)}set(n,s,i){return[st(n,i),{timestampIsSet:!0}]}}const LJ={G:new ZX,y:new eJ,Y:new tJ,R:new nJ,u:new sJ,Q:new iJ,q:new rJ,M:new oJ,L:new aJ,w:new lJ,I:new hJ,d:new pJ,D:new gJ,E:new mJ,e:new _J,c:new yJ,i:new vJ,a:new wJ,b:new EJ,B:new TJ,h:new SJ,H:new IJ,K:new RJ,k:new xJ,m:new CJ,s:new AJ,S:new kJ,X:new PJ,x:new DJ,t:new OJ,T:new MJ},NJ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,VJ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,FJ=/^'([^]*?)'?$/,BJ=/''/g,UJ=/\S/,$J=/[a-zA-Z]/;function HJ(t,e,n,s){var m,_,y,b,w,T,S,x;const i=GX(),r=(s==null?void 0:s.locale)??i.locale??pA,o=(s==null?void 0:s.firstWeekContainsDate)??((_=(m=s==null?void 0:s.locale)==null?void 0:m.options)==null?void 0:_.firstWeekContainsDate)??i.firstWeekContainsDate??((b=(y=i.locale)==null?void 0:y.options)==null?void 0:b.firstWeekContainsDate)??1,a=(s==null?void 0:s.weekStartsOn)??((T=(w=s==null?void 0:s.locale)==null?void 0:w.options)==null?void 0:T.weekStartsOn)??i.weekStartsOn??((x=(S=i.locale)==null?void 0:S.options)==null?void 0:x.weekStartsOn)??0;if(e==="")return t===""?ce(n):st(n,NaN);const c={firstWeekContainsDate:o,weekStartsOn:a,locale:r},l=[new JX],u=e.match(VJ).map(R=>{const I=R[0];if(I in cm){const P=cm[I];return P(R,r.formatLong)}return R}).join("").match(NJ),h=[];for(let R of u){!(s!=null&&s.useAdditionalWeekYearTokens)&&bA(R)&&lm(R,e,t),!(s!=null&&s.useAdditionalDayOfYearTokens)&&yA(R)&&lm(R,e,t);const I=R[0],P=LJ[I];if(P){const{incompatibleTokens:$}=P;if(Array.isArray($)){const F=h.find(oe=>$.includes(oe.token)||oe.token===I);if(F)throw new RangeError(`The format string mustn't contain \`${F.fullToken}\` and \`${R}\` at the same time`)}else if(P.incompatibleTokens==="*"&&h.length>0)throw new RangeError(`The format string mustn't contain \`${R}\` and any other token at the same time`);h.push({token:I,fullToken:R});const Q=P.run(t,R,r.match,c);if(!Q)return st(n,NaN);l.push(Q.setter),t=Q.rest}else{if(I.match($J))throw new RangeError("Format string contains an unescaped latin alphabet character `"+I+"`");if(R==="''"?R="'":I==="'"&&(R=zJ(R)),t.indexOf(R)===0)t=t.slice(R.length);else return st(n,NaN)}}if(t.length>0&&UJ.test(t))return st(n,NaN);const d=l.map(R=>R.priority).sort((R,I)=>I-R).filter((R,I,P)=>P.indexOf(R)===I).map(R=>l.filter(I=>I.priority===R).sort((I,P)=>P.subPriority-I.subPriority)).map(R=>R[0]);let f=ce(n);if(isNaN(f.getTime()))return st(n,NaN);const p={};for(const R of d){if(!R.validate(f,c))return st(n,NaN);const I=R.set(f,p,c);Array.isArray(I)?(f=I[0],Object.assign(p,I[1])):f=I}return st(n,f)}function zJ(t){return t.match(FJ)[1].replace(BJ,"'")}function jJ(t){const e=ce(t);return e.setMinutes(0,0,0),e}function WJ(t){const e=ce(t);return e.setMilliseconds(0),e}function qJ(t,e){const n=(e==null?void 0:e.additionalDigits)??2,s=QJ(t);let i;if(s.date){const c=XJ(s.date,n);i=JJ(c.restDateString,c.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const r=i.getTime();let o=0,a;if(s.time&&(o=ZJ(s.time),isNaN(o)))return new Date(NaN);if(s.timezone){if(a=eZ(s.timezone),isNaN(a))return new Date(NaN)}else{const c=new Date(r+o),l=new Date(0);return l.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),l.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),l}return new Date(r+o+a)}const Pu={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},GJ=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,KJ=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,YJ=/^([+-])(\d{2})(?::?(\d{2}))?$/;function QJ(t){const e={},n=t.split(Pu.dateTimeDelimiter);let s;if(n.length>2)return e;if(/:/.test(n[0])?s=n[0]:(e.date=n[0],s=n[1],Pu.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Pu.timeZoneDelimiter)[0],s=t.substr(e.date.length,t.length))),s){const i=Pu.timezone.exec(s);i?(e.time=s.replace(i[1],""),e.timezone=i[1]):e.time=s}return e}function XJ(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),s=t.match(n);if(!s)return{year:NaN,restDateString:""};const i=s[1]?parseInt(s[1]):null,r=s[2]?parseInt(s[2]):null;return{year:r===null?i:r*100,restDateString:t.slice((s[1]||s[2]).length)}}function JJ(t,e){if(e===null)return new Date(NaN);const n=t.match(GJ);if(!n)return new Date(NaN);const s=!!n[4],i=za(n[1]),r=za(n[2])-1,o=za(n[3]),a=za(n[4]),c=za(n[5])-1;if(s)return rZ(e,a,c)?tZ(e,a,c):new Date(NaN);{const l=new Date(0);return!sZ(e,r,o)||!iZ(e,i)?new Date(NaN):(l.setUTCFullYear(e,r,Math.max(i,o)),l)}}function za(t){return t?parseInt(t):1}function ZJ(t){const e=t.match(KJ);if(!e)return NaN;const n=Bp(e[1]),s=Bp(e[2]),i=Bp(e[3]);return oZ(n,s,i)?n*Ql+s*Yl+i*1e3:NaN}function Bp(t){return t&&parseFloat(t.replace(",","."))||0}function eZ(t){if(t==="Z")return 0;const e=t.match(YJ);if(!e)return 0;const n=e[1]==="+"?-1:1,s=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return aZ(s,i)?n*(s*Ql+i*Yl):NaN}function tZ(t,e,n){const s=new Date(0);s.setUTCFullYear(t,0,4);const i=s.getUTCDay()||7,r=(e-1)*7+n+1-i;return s.setUTCDate(s.getUTCDate()+r),s}const nZ=[31,null,31,30,31,30,31,31,30,31,30,31];function SA(t){return t%400===0||t%4===0&&t%100!==0}function sZ(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(nZ[e]||(SA(t)?29:28))}function iZ(t,e){return e>=1&&e<=(SA(t)?366:365)}function rZ(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function oZ(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function aZ(t,e){return e>=0&&e<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const cZ={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};EC._date.override({_id:"date-fns",formats:function(){return cZ},parse:function(t,e){if(t===null||typeof t>"u")return null;const n=typeof t;return n==="number"||t instanceof Date?t=ce(t):n==="string"&&(typeof e=="string"?t=HJ(t,e,new Date,this.options):t=qJ(t,this.options)),cA(t)?t.getTime():null},format:function(t,e){return WX(t,e,this.options)},add:function(t,e,n){switch(n){case"millisecond":return Lf(t,e);case"second":return OQ(t,e);case"minute":return PQ(t,e);case"hour":return CQ(t,e);case"day":return Mf(t,e);case"week":return MQ(t,e);case"month":return eb(t,e);case"quarter":return DQ(t,e);case"year":return LQ(t,e);default:return t}},diff:function(t,e,n){switch(n){case"millisecond":return Nf(t,e);case"second":return zQ(t,e);case"minute":return UQ(t,e);case"hour":return BQ(t,e);case"day":return lA(t,e);case"week":return jQ(t,e);case"month":return dA(t,e);case"quarter":return HQ(t,e);case"year":return WQ(t,e);default:return 0}},startOf:function(t,e,n){switch(e){case"second":return WJ(t);case"minute":return qQ(t);case"hour":return jJ(t);case"day":return am(t);case"week":return $s(t);case"isoWeek":return $s(t,{weekStartsOn:+n});case"month":return KQ(t);case"quarter":return GQ(t);case"year":return fA(t);default:return t}},endOf:function(t,e){switch(e){case"second":return eX(t);case"minute":return JQ(t);case"hour":return QQ(t);case"day":return uA(t);case"week":return XQ(t);case"month":return hA(t);case"quarter":return ZQ(t);case"year":return YQ(t);default:return t}}});ve.use(Vy);function fi(t){return Array.isArray?Array.isArray(t):xA(t)==="[object Array]"}const lZ=1/0;function uZ(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-lZ?"-0":e}function hZ(t){return t==null?"":uZ(t)}function Rs(t){return typeof t=="string"}function IA(t){return typeof t=="number"}function dZ(t){return t===!0||t===!1||fZ(t)&&xA(t)=="[object Boolean]"}function RA(t){return typeof t=="object"}function fZ(t){return RA(t)&&t!==null}function Dn(t){return t!=null}function Up(t){return!t.trim().length}function xA(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const pZ="Incorrect 'index' type",gZ=t=>`Invalid value for key ${t}`,mZ=t=>`Pattern length exceeds max of ${t}.`,_Z=t=>`Missing ${t} property in key`,yZ=t=>`Property 'weight' in key '${t}' must be a positive integer`,HE=Object.prototype.hasOwnProperty;class bZ{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(s=>{let i=CA(s);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(s=>{s.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function CA(t){let e=null,n=null,s=null,i=1,r=null;if(Rs(t)||fi(t))s=t,e=zE(t),n=um(t);else{if(!HE.call(t,"name"))throw new Error(_Z("name"));const o=t.name;if(s=o,HE.call(t,"weight")&&(i=t.weight,i<=0))throw new Error(yZ(o));e=zE(o),n=um(o),r=t.getFn}return{path:e,id:n,weight:i,src:s,getFn:r}}function zE(t){return fi(t)?t:t.split(".")}function um(t){return fi(t)?t.join("."):t}function vZ(t,e){let n=[],s=!1;const i=(r,o,a)=>{if(Dn(r))if(!o[a])n.push(r);else{let c=o[a];const l=r[c];if(!Dn(l))return;if(a===o.length-1&&(Rs(l)||IA(l)||dZ(l)))n.push(hZ(l));else if(fi(l)){s=!0;for(let u=0,h=l.length;u<h;u+=1)i(l[u],o,a+1)}else o.length&&i(l,o,a+1)}};return i(t,Rs(e)?e.split("."):e,0),s?n:n[0]}const wZ={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},EZ={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},TZ={location:0,threshold:.6,distance:100},SZ={useExtendedSearch:!1,getFn:vZ,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var fe={...EZ,...wZ,...TZ,...SZ};const IZ=/[^ ]+/g;function RZ(t=1,e=3){const n=new Map,s=Math.pow(10,e);return{get(i){const r=i.match(IZ).length;if(n.has(r))return n.get(r);const o=1/Math.pow(r,.5*t),a=parseFloat(Math.round(o*s)/s);return n.set(r,a),a},clear(){n.clear()}}}class ib{constructor({getFn:e=fe.getFn,fieldNormWeight:n=fe.fieldNormWeight}={}){this.norm=RZ(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,s)=>{this._keysMap[n.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Rs(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){const n=this.size();Rs(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,s=this.size();n<s;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!Dn(e)||Up(e))return;let s={v:e,i:n,n:this.norm.get(e)};this.records.push(s)}_addObject(e,n){let s={i:n,$:{}};this.keys.forEach((i,r)=>{let o=i.getFn?i.getFn(e):this.getFn(e,i.path);if(Dn(o)){if(fi(o)){let a=[];const c=[{nestedArrIndex:-1,value:o}];for(;c.length;){const{nestedArrIndex:l,value:u}=c.pop();if(Dn(u))if(Rs(u)&&!Up(u)){let h={v:u,i:l,n:this.norm.get(u)};a.push(h)}else fi(u)&&u.forEach((h,d)=>{c.push({nestedArrIndex:d,value:h})})}s.$[r]=a}else if(Rs(o)&&!Up(o)){let a={v:o,n:this.norm.get(o)};s.$[r]=a}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function AA(t,e,{getFn:n=fe.getFn,fieldNormWeight:s=fe.fieldNormWeight}={}){const i=new ib({getFn:n,fieldNormWeight:s});return i.setKeys(t.map(CA)),i.setSources(e),i.create(),i}function xZ(t,{getFn:e=fe.getFn,fieldNormWeight:n=fe.fieldNormWeight}={}){const{keys:s,records:i}=t,r=new ib({getFn:e,fieldNormWeight:n});return r.setKeys(s),r.setIndexRecords(i),r}function Du(t,{errors:e=0,currentLocation:n=0,expectedLocation:s=0,distance:i=fe.distance,ignoreLocation:r=fe.ignoreLocation}={}){const o=e/t.length;if(r)return o;const a=Math.abs(s-n);return i?o+a/i:a?1:o}function CZ(t=[],e=fe.minMatchCharLength){let n=[],s=-1,i=-1,r=0;for(let o=t.length;r<o;r+=1){let a=t[r];a&&s===-1?s=r:!a&&s!==-1&&(i=r-1,i-s+1>=e&&n.push([s,i]),s=-1)}return t[r-1]&&r-s>=e&&n.push([s,r-1]),n}const Pr=32;function AZ(t,e,n,{location:s=fe.location,distance:i=fe.distance,threshold:r=fe.threshold,findAllMatches:o=fe.findAllMatches,minMatchCharLength:a=fe.minMatchCharLength,includeMatches:c=fe.includeMatches,ignoreLocation:l=fe.ignoreLocation}={}){if(e.length>Pr)throw new Error(mZ(Pr));const u=e.length,h=t.length,d=Math.max(0,Math.min(s,h));let f=r,p=d;const m=a>1||c,_=m?Array(h):[];let y;for(;(y=t.indexOf(e,p))>-1;){let R=Du(e,{currentLocation:y,expectedLocation:d,distance:i,ignoreLocation:l});if(f=Math.min(R,f),p=y+u,m){let I=0;for(;I<u;)_[y+I]=1,I+=1}}p=-1;let b=[],w=1,T=u+h;const S=1<<u-1;for(let R=0;R<u;R+=1){let I=0,P=T;for(;I<P;)Du(e,{errors:R,currentLocation:d+P,expectedLocation:d,distance:i,ignoreLocation:l})<=f?I=P:T=P,P=Math.floor((T-I)/2+I);T=P;let $=Math.max(1,d-P+1),Q=o?h:Math.min(d+P,h)+u,F=Array(Q+2);F[Q+1]=(1<<R)-1;for(let Re=Q;Re>=$;Re-=1){let ye=Re-1,ue=n[t.charAt(ye)];if(m&&(_[ye]=+!!ue),F[Re]=(F[Re+1]<<1|1)&ue,R&&(F[Re]|=(b[Re+1]|b[Re])<<1|1|b[Re+1]),F[Re]&S&&(w=Du(e,{errors:R,currentLocation:ye,expectedLocation:d,distance:i,ignoreLocation:l}),w<=f)){if(f=w,p=ye,p<=d)break;$=Math.max(1,2*d-p)}}if(Du(e,{errors:R+1,currentLocation:d,expectedLocation:d,distance:i,ignoreLocation:l})>f)break;b=F}const x={isMatch:p>=0,score:Math.max(.001,w)};if(m){const R=CZ(_,a);R.length?c&&(x.indices=R):x.isMatch=!1}return x}function kZ(t){let e={};for(let n=0,s=t.length;n<s;n+=1){const i=t.charAt(n);e[i]=(e[i]||0)|1<<s-n-1}return e}class kA{constructor(e,{location:n=fe.location,threshold:s=fe.threshold,distance:i=fe.distance,includeMatches:r=fe.includeMatches,findAllMatches:o=fe.findAllMatches,minMatchCharLength:a=fe.minMatchCharLength,isCaseSensitive:c=fe.isCaseSensitive,ignoreLocation:l=fe.ignoreLocation}={}){if(this.options={location:n,threshold:s,distance:i,includeMatches:r,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:c,ignoreLocation:l},this.pattern=c?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const u=(d,f)=>{this.chunks.push({pattern:d,alphabet:kZ(d),startIndex:f})},h=this.pattern.length;if(h>Pr){let d=0;const f=h%Pr,p=h-f;for(;d<p;)u(this.pattern.substr(d,Pr),d),d+=Pr;if(f){const m=h-Pr;u(this.pattern.substr(m),m)}}else u(this.pattern,0)}searchIn(e){const{isCaseSensitive:n,includeMatches:s}=this.options;if(n||(e=e.toLowerCase()),this.pattern===e){let p={isMatch:!0,score:0};return s&&(p.indices=[[0,e.length-1]]),p}const{location:i,distance:r,threshold:o,findAllMatches:a,minMatchCharLength:c,ignoreLocation:l}=this.options;let u=[],h=0,d=!1;this.chunks.forEach(({pattern:p,alphabet:m,startIndex:_})=>{const{isMatch:y,score:b,indices:w}=AZ(e,p,m,{location:i+_,distance:r,threshold:o,findAllMatches:a,minMatchCharLength:c,includeMatches:s,ignoreLocation:l});y&&(d=!0),h+=b,y&&w&&(u=[...u,...w])});let f={isMatch:d,score:d?h/this.chunks.length:1};return d&&s&&(f.indices=u),f}}class pr{constructor(e){this.pattern=e}static isMultiMatch(e){return jE(e,this.multiRegex)}static isSingleMatch(e){return jE(e,this.singleRegex)}search(){}}function jE(t,e){const n=t.match(e);return n?n[1]:null}class PZ extends pr{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class DZ extends pr{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const s=e.indexOf(this.pattern)===-1;return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class OZ extends pr{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class MZ extends pr{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class LZ extends pr{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class NZ extends pr{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class PA extends pr{constructor(e,{location:n=fe.location,threshold:s=fe.threshold,distance:i=fe.distance,includeMatches:r=fe.includeMatches,findAllMatches:o=fe.findAllMatches,minMatchCharLength:a=fe.minMatchCharLength,isCaseSensitive:c=fe.isCaseSensitive,ignoreLocation:l=fe.ignoreLocation}={}){super(e),this._bitapSearch=new kA(e,{location:n,threshold:s,distance:i,includeMatches:r,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:c,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class DA extends pr{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,s;const i=[],r=this.pattern.length;for(;(s=e.indexOf(this.pattern,n))>-1;)n=s+r,i.push([s,n-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const hm=[PZ,DA,OZ,MZ,NZ,LZ,DZ,PA],WE=hm.length,VZ=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,FZ="|";function BZ(t,e={}){return t.split(FZ).map(n=>{let s=n.trim().split(VZ).filter(r=>r&&!!r.trim()),i=[];for(let r=0,o=s.length;r<o;r+=1){const a=s[r];let c=!1,l=-1;for(;!c&&++l<WE;){const u=hm[l];let h=u.isMultiMatch(a);h&&(i.push(new u(h,e)),c=!0)}if(!c)for(l=-1;++l<WE;){const u=hm[l];let h=u.isSingleMatch(a);if(h){i.push(new u(h,e));break}}}return i})}const UZ=new Set([PA.type,DA.type]);class $Z{constructor(e,{isCaseSensitive:n=fe.isCaseSensitive,includeMatches:s=fe.includeMatches,minMatchCharLength:i=fe.minMatchCharLength,ignoreLocation:r=fe.ignoreLocation,findAllMatches:o=fe.findAllMatches,location:a=fe.location,threshold:c=fe.threshold,distance:l=fe.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:s,minMatchCharLength:i,findAllMatches:o,ignoreLocation:r,location:a,threshold:c,distance:l},this.pattern=n?e:e.toLowerCase(),this.query=BZ(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:i}=this.options;e=i?e:e.toLowerCase();let r=0,o=[],a=0;for(let c=0,l=n.length;c<l;c+=1){const u=n[c];o.length=0,r=0;for(let h=0,d=u.length;h<d;h+=1){const f=u[h],{isMatch:p,indices:m,score:_}=f.search(e);if(p){if(r+=1,a+=_,s){const y=f.constructor.type;UZ.has(y)?o=[...o,...m]:o.push(m)}}else{a=0,r=0,o.length=0;break}}if(r){let h={isMatch:!0,score:a/r};return s&&(h.indices=o),h}}return{isMatch:!1,score:1}}}const dm=[];function HZ(...t){dm.push(...t)}function fm(t,e){for(let n=0,s=dm.length;n<s;n+=1){let i=dm[n];if(i.condition(t,e))return new i(t,e)}return new kA(t,e)}const id={AND:"$and",OR:"$or"},pm={PATH:"$path",PATTERN:"$val"},gm=t=>!!(t[id.AND]||t[id.OR]),zZ=t=>!!t[pm.PATH],jZ=t=>!fi(t)&&RA(t)&&!gm(t),qE=t=>({[id.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function OA(t,e,{auto:n=!0}={}){const s=i=>{let r=Object.keys(i);const o=zZ(i);if(!o&&r.length>1&&!gm(i))return s(qE(i));if(jZ(i)){const c=o?i[pm.PATH]:r[0],l=o?i[pm.PATTERN]:i[c];if(!Rs(l))throw new Error(gZ(c));const u={keyId:um(c),pattern:l};return n&&(u.searcher=fm(l,e)),u}let a={children:[],operator:r[0]};return r.forEach(c=>{const l=i[c];fi(l)&&l.forEach(u=>{a.children.push(s(u))})}),a};return gm(t)||(t=qE(t)),s(t)}function WZ(t,{ignoreFieldNorm:e=fe.ignoreFieldNorm}){t.forEach(n=>{let s=1;n.matches.forEach(({key:i,norm:r,score:o})=>{const a=i?i.weight:null;s*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(e?1:r))}),n.score=s})}function qZ(t,e){const n=t.matches;e.matches=[],Dn(n)&&n.forEach(s=>{if(!Dn(s.indices)||!s.indices.length)return;const{indices:i,value:r}=s;let o={indices:i,value:r};s.key&&(o.key=s.key.src),s.idx>-1&&(o.refIndex=s.idx),e.matches.push(o)})}function GZ(t,e){e.score=t.score}function KZ(t,e,{includeMatches:n=fe.includeMatches,includeScore:s=fe.includeScore}={}){const i=[];return n&&i.push(qZ),s&&i.push(GZ),t.map(r=>{const{idx:o}=r,a={item:e[o],refIndex:o};return i.length&&i.forEach(c=>{c(r,a)}),a})}class Ra{constructor(e,n={},s){this.options={...fe,...n},this.options.useExtendedSearch,this._keyStore=new bZ(this.options.keys),this.setCollection(e,s)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof ib))throw new Error(pZ);this._myIndex=n||AA(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Dn(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const n=[];for(let s=0,i=this._docs.length;s<i;s+=1){const r=this._docs[s];e(r,s)&&(this.removeAt(s),s-=1,i-=1,n.push(r))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){const{includeMatches:s,includeScore:i,shouldSort:r,sortFn:o,ignoreFieldNorm:a}=this.options;let c=Rs(e)?Rs(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return WZ(c,{ignoreFieldNorm:a}),r&&c.sort(o),IA(n)&&n>-1&&(c=c.slice(0,n)),KZ(c,this._docs,{includeMatches:s,includeScore:i})}_searchStringList(e){const n=fm(e,this.options),{records:s}=this._myIndex,i=[];return s.forEach(({v:r,i:o,n:a})=>{if(!Dn(r))return;const{isMatch:c,score:l,indices:u}=n.searchIn(r);c&&i.push({item:r,idx:o,matches:[{score:l,value:r,norm:a,indices:u}]})}),i}_searchLogical(e){const n=OA(e,this.options),s=(a,c,l)=>{if(!a.children){const{keyId:h,searcher:d}=a,f=this._findMatches({key:this._keyStore.get(h),value:this._myIndex.getValueForItemAtKeyId(c,h),searcher:d});return f&&f.length?[{idx:l,item:c,matches:f}]:[]}const u=[];for(let h=0,d=a.children.length;h<d;h+=1){const f=a.children[h],p=s(f,c,l);if(p.length)u.push(...p);else if(a.operator===id.AND)return[]}return u},i=this._myIndex.records,r={},o=[];return i.forEach(({$:a,i:c})=>{if(Dn(a)){let l=s(n,a,c);l.length&&(r[c]||(r[c]={idx:c,item:a,matches:[]},o.push(r[c])),l.forEach(({matches:u})=>{r[c].matches.push(...u)}))}}),o}_searchObjectList(e){const n=fm(e,this.options),{keys:s,records:i}=this._myIndex,r=[];return i.forEach(({$:o,i:a})=>{if(!Dn(o))return;let c=[];s.forEach((l,u)=>{c.push(...this._findMatches({key:l,value:o[u],searcher:n}))}),c.length&&r.push({idx:a,item:o,matches:c})}),r}_findMatches({key:e,value:n,searcher:s}){if(!Dn(n))return[];let i=[];if(fi(n))n.forEach(({v:r,i:o,n:a})=>{if(!Dn(r))return;const{isMatch:c,score:l,indices:u}=s.searchIn(r);c&&i.push({score:l,key:e,value:r,idx:o,norm:a,indices:u})});else{const{v:r,n:o}=n,{isMatch:a,score:c,indices:l}=s.searchIn(r);a&&i.push({score:c,key:e,value:r,norm:o,indices:l})}return i}}Ra.version="7.0.0";Ra.createIndex=AA;Ra.parseIndex=xZ;Ra.config=fe;Ra.parseQuery=OA;HZ($Z);const YZ={name:"UserProfileStats",props:{lastStatsUpdate:Number},data(){return{likedRecipes:{},categoryList:{},myCookbookCategoryList:{},userData:{},myCookbookRecipes:[],recipesCreatedData:null,leftoverPastMonth:null}},mounted(){this.fetchLikedRecipesData(),this.fetchMyCookbookData()},methods:{fetchRecipeFromFirebase(t){return Vt(Ce(Le,"all_recipes",t)).then(e=>{if(e.exists())return e.data();console.error("No such document")}).catch(e=>{throw console.error("Error fetching recipe:",e),e})},handleLastStatsUpdate(){console.log("nice"),this.fetchLikedRecipesData()},async fetchLikedRecipesData(){if(Ae.currentUser){const e=await Vt(Ce(Le,"users",Ae.currentUser.uid));this.userData=e.data(),this.fetchRecipesFromCookbook()}let t={Asian:0,Beverages:0,"Breakfast and Brunch":0,"Desserts and Snacks":0,"Fast Food":0,"Healthy Choices":0,"Late-night Eats":0,"Local Delights":0,Others:0,Specialty:0,Western:0};if(this.likedRecipes=this.userData.liked_recipes,this.userData.liked_recipes&&this.userData.liked_recipes.length>0){const e=this.likedRecipes.map(n=>this.fetchRecipeFromFirebase(n).then(s=>{s&&s.categories&&s.categories.forEach(i=>{i in t&&t[i]++})}).catch(s=>{console.error("Error fetching recipe from Firebase:",s)}));Promise.all(e).then(()=>{let n=Object.entries(t).filter(([i,r])=>r>0).sort((i,r)=>r[1]-i[1]).slice(0,5),s={};n.forEach(([i,r])=>{s[i]=r}),this.categoryList=s})}else this.categoryList={}},async fetchLikedRecipesData(){if(Ae.currentUser){const e=await Vt(Ce(Le,"users",Ae.currentUser.uid));this.userData=e.data(),this.fetchRecipesFromCookbook()}let t={Asian:0,Beverages:0,"Breakfast and Brunch":0,"Desserts and Snacks":0,"Fast Food":0,"Healthy Choices":0,"Late-night Eats":0,"Local Delights":0,Others:0,Specialty:0,Western:0};if(this.likedRecipes=this.userData.liked_recipes,this.userData.liked_recipes&&this.userData.liked_recipes.length>0){const e=this.likedRecipes.map(n=>this.fetchRecipeFromFirebase(n).then(s=>{s&&s.categories&&s.categories.forEach(i=>{i in t&&t[i]++})}).catch(s=>{console.error("Error fetching recipe from Firebase:",s)}));Promise.all(e).then(()=>{let n=Object.entries(t).filter(([i,r])=>r>0).sort((i,r)=>r[1]-i[1]).slice(0,5),s={};n.forEach(([i,r])=>{s[i]=r}),this.categoryList=s})}else this.categoryList={}},async fetchMyCookbookData(){if(Ae.currentUser){const e=await Vt(Ce(Le,"users",Ae.currentUser.uid));this.userData=e.data(),this.fetchRecipesFromCookbook()}let t={Asian:0,Beverages:0,"Breakfast and Brunch":0,"Desserts and Snacks":0,"Fast Food":0,"Healthy Choices":0,"Late-night Eats":0,"Local Delights":0,Others:0,Specialty:0,Western:0};if(this.my_cookbook=this.userData.my_cookbook,this.userData.my_cookbook&&this.userData.my_cookbook.length>0){const e=this.my_cookbook.map(n=>this.fetchRecipeFromFirebase(n).then(s=>{s&&s.categories&&s.categories.forEach(i=>{i in t&&t[i]++})}).catch(s=>{console.error("Error fetching recipe from Firebase:",s)}));Promise.all(e).then(()=>{let n=Object.entries(t).filter(([i,r])=>r>0).sort((i,r)=>r[1]-i[1]).slice(0,5),s={};n.forEach(([i,r])=>{s[i]=r}),this.myCookbookCategoryList=s})}else this.categoryList={}},async fetchRecipesFromCookbook(){const t=[];for(const e of this.userData.my_cookbook)try{const n=await Vt(Ce(Le,"all_recipes",e));if(n.exists()){const s=n.data();t.push(s)}}catch(n){console.error("Error fetching recipe from Firebase:",n)}this.myCookbookRecipes=t,this.fetchRecipeCreationData(),this.fetchLeftoverPastMonth()},async fetchRecipeCreationData(){const t=new Date,e=t.getFullYear(),n=t.getMonth(),s=[],i={};for(let o=5;o>=0;o--){const c=new Date(e,n-o,1).toLocaleString("default",{month:"short"});s.push(c),i[c]=0}for(const o of this.myCookbookRecipes)if(o&&o.created_date){const a=new Date(o.created_date.seconds*1e3),c=a.getFullYear(),l=a.getMonth();if(c===e&&l>=n-5&&l<=n){const u=a.toLocaleString("default",{month:"short"});i[u]++}}const r=s.map(o=>[o,i[o]]);this.recipesCreatedData=r,console.log(r)},async fetchLeftoverPastMonth(){const t=new Date,e=new Date(t.setMonth(t.getMonth()-1)),n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=this.myCookbookRecipes.filter(l=>new Date(l.created_date.seconds*1e3)>=n).filter(l=>l.leftovers).map(l=>l.leftovers).flat(),r=i.filter((l,u,h)=>h.indexOf(l)===u),o=new Ra(r,{threshold:.1}),a={};i.forEach(l=>{const u=o.search(l);if(u.length>0){u.sort((f,p)=>f.score-p.score);const d=u[0].item;d in a?a[d]++:a[d]=1}else l in a?a[l]++:a[l]=1});const c=Object.entries(a).sort((l,u)=>u[1]-l[1]).slice(0,10).reduce((l,[u,h])=>(l[u]=h,l),{});this.leftoverPastMonth=c,console.log(c)}}},gr=t=>(Lt("data-v-e0f2783d"),t=t(),Nt(),t),QZ={class:"user-profile-stats"},XZ={class:"favourite-category"},JZ=gr(()=>g("h2",null,"Favourite Categories",-1)),ZZ=gr(()=>g("p",null,"(Liked Recipes)",-1)),eee={key:0,class:"category-charts"},tee={class:"category-liked"},nee={key:1},see=gr(()=>g("p",null,"No recipes liked",-1)),iee=[see],ree={class:"favourite-category"},oee=gr(()=>g("h2",null,"Favourite Categories",-1)),aee=gr(()=>g("p",null,"(My Cookbook)",-1)),cee={key:0,class:"category-charts"},lee={class:"category-liked"},uee={key:1},hee=gr(()=>g("p",null,"No recipes liked",-1)),dee=[hee],fee={class:"numberOfRecipesCreated"},pee=gr(()=>g("h2",null,"Number of recipes created",-1)),gee={class:"category-liked"},mee={class:"pastMonthLeftovers"},_ee=gr(()=>g("h2",null,"Leftovers for the Past Month",-1)),yee={class:"category-liked"};function bee(t,e,n,s,i,r){const o=te("pie-chart"),a=te("column-chart"),c=te("bar-chart");return A(),M("div",QZ,[g("div",XZ,[JZ,ZZ,Object.keys(i.categoryList).length>0?(A(),M("div",eee,[g("div",tee,[W(o,{class:"pie-category-liked",data:i.categoryList,colors:["#596639","#CBDF99","#8AB3A5","#BAD7BC","#DCAA83","#BD6B16","#406344","#2F4858"]},null,8,["data"])])])):(A(),M("div",nee,iee))]),g("div",ree,[oee,aee,Object.keys(i.myCookbookCategoryList).length>0?(A(),M("div",cee,[g("div",lee,[W(o,{class:"pie-category-liked",data:i.myCookbookCategoryList,colors:["#596639","#CBDF99","#8AB3A5","#BAD7BC","#DCAA83","#BD6B16","#406344","#2F4858"]},null,8,["data"])])])):(A(),M("div",uee,dee))]),g("div",fee,[pee,g("div",gee,[W(a,{data:i.recipesCreatedData,xtitle:"Month",ytitle:"Number of Recipes Created",colors:["#BD6B16"]},null,8,["data"])])]),g("div",mee,[_ee,g("div",yee,[W(c,{data:i.leftoverPastMonth,xtitle:"Counts",ytitle:"Leftovers",colors:["#596639"],loading:"Loading...",xstep:"1"},null,8,["data"])])])])}const vee=Be(YZ,[["render",bee],["__scopeId","data-v-e0f2783d"]]),wee={name:"ProfileSettings",components:{TopBar:Sa,UserProfileSidebar:vW,UserProfileEdit:jW,UserProfileLikedRecipes:c8,UserProfileMyCookbook:I8,UserProfileStats:vee},data(){return{selected:"settings",userData:{},lastStatsUpdate:Date.now(),refreshKey:0}},mounted(){this.fetchUserData()},methods:{fetchUserStats(){this.lastStatsUpdate=Date.now(),this.refreshKey++},changeSelected(t){this.selected=t},async fetchUserData(){if(Ae.currentUser){const t=await Vt(Ce(Le,"users",Ae.currentUser.uid));this.userData=t.data()}},handleUserDataUpdate(t){this.userData={...this.userData,username:t.username}},refreshProfilePic(t){this.userData={...this.userData,profile_img_url:t},this.refreshKey++}}},Eee={class:"settings"},Tee={class:"content-container"},See={key:0,class:"view-container"},Iee={key:3,class:"stats-container"};function Ree(t,e,n,s,i,r){const o=te("TopBar"),a=te("UserProfileSidebar"),c=te("UserProfileEdit"),l=te("UserProfileLikedRecipes"),u=te("UserProfileMyCookbook"),h=te("UserProfileStats");return A(),M("div",Eee,[(A(),Oe(o,{whichPage:"none",key:i.refreshKey})),g("div",Tee,[W(a,{selected:i.selected,onSelected:e[0]||(e[0]=d=>r.changeSelected(d)),userData:i.userData,onRefreshProfilePic:r.refreshProfilePic},null,8,["selected","userData","onRefreshProfilePic"]),i.selected==="settings"?(A(),M("div",See,[i.selected==="settings"&&Object.keys(i.userData).length!==0?(A(),Oe(c,{key:0,userData:i.userData,onUserData:r.handleUserDataUpdate},null,8,["userData","onUserData"])):we("",!0)])):we("",!0),i.selected==="likedRecipes"?(A(),Oe(l,{key:1,userData:i.userData,onUpdateLiked:r.fetchUserStats},null,8,["userData","onUpdateLiked"])):we("",!0),i.selected==="myCookbook"?(A(),Oe(u,{key:2,userData:i.userData,onUpdateLiked:r.fetchUserStats},null,8,["userData","onUpdateLiked"])):we("",!0),i.selected==="stats"?(A(),M("div",Iee,[i.selected==="stats"?(A(),Oe(h,{userData:i.userData,lastStatsUpdate:i.lastStatsUpdate,key:i.refreshKey},null,8,["userData","lastStatsUpdate"])):we("",!0)])):we("",!0)])])}const xee=Be(wee,[["render",Ree],["__scopeId","data-v-d6fcf9f1"]]),Cee={components:{Multiselect:$l,TopBar:Sa,SaveRecipeButton:If,CircleButton:Ul},setup(){return{toast:bo()}},data(){return{recipeData:{imageSrc:"https://i0.wp.com/sunrisedaycamp.org/wp-content/uploads/2020/10/placeholder.png?ssl=1",publish_to_community:!1,recipe_name:"",serving_size:"",description:"",allergen_info:"",allergens:[],cook_time_hours:"",cook_time_minutes:"",categories:[],category:[],ingredients:[""],directions:[{stepNumber:1,text:""}]}}},async created(){this.recipeData.categories=await _f()},methods:{chooseFile(){this.$refs.fileInput.click()},async handleImageUpload(t){const e=t.target.files[0];if(!e||e.type!=="image/jpeg"&&e.type!=="image/png"){this.imageNotValid();return}try{console.log("Converting file to blob...");const n=await this.convertFileToBlob(e);console.log("Uploading image to Firebase...");const s=await this.uploadImageToFirebase(n,e.name);console.log("Image uploaded, URL: ",s),this.recipeData.imageSrc=s}catch(n){console.error("Failed to upload image",n)}},async uploadImageToFirebase(t,e){return new Promise((n,s)=>{const i=gf(mf,`recipeImg/${e}`),r=ff(i,t);r.on("state_changed",o=>{const a=o.bytesTransferred/o.totalBytes*100;console.log("Upload is "+a+"% done")},o=>{console.error("Upload failed",o),s(o)},()=>{pf(r.snapshot.ref).then(o=>{console.log("File available at",o),n(o)}).catch(o=>{console.error("Failed to get download URL",o),s(o)})})})},convertFileToBlob(t){return new Promise((e,n)=>{const s=new FileReader;s.onloadend=()=>{const i=new Blob([new Uint8Array(s.result)],{type:t.type});e(i)},s.onerror=n,s.readAsArrayBuffer(t)})},addIngredient(){this.recipeData.ingredients.push("")},removeIngredient(t){this.recipeData.ingredients.splice(t,1)},addDirection(){const t=this.recipeData.directions.length+1;this.recipeData.directions.push({stepNumber:t,text:""})},removeDirection(t){this.recipeData.directions.splice(t,1);for(let e=t;e<this.recipeData.directions.length;e++)this.recipeData.directions[e].stepNumber--},onlyNumberInput(t,e){const n=t.keyCode||t.which;n>31&&(n<48||n>57)&&n!==46||n===46&&this.recipeData[e].includes(".")?t.preventDefault():this.recipeData[e]=t.target.value},close(){window.history.length>1?this.$router.go(-1):this.$router.push("/")},validateForm(){const t=[];return this.recipeData.recipe_name||t.push("Title"),this.recipeData.description||t.push("Description"),!this.recipeData.cook_time_hours&&!this.recipeData.cook_time_minutes&&t.push("Cook Time"),this.recipeData.category.length||t.push("Category"),this.recipeData.serving_size||t.push("Serving Size"),this.recipeData.ingredients.every(e=>e.trim()!=="")||t.push("Ingredients"),this.recipeData.directions.every(e=>e.text.trim()!=="")||t.push("Directions"),t},imageNotValid(){this.toast.error("Please select a JPG or PNG image file.",{position:"top-center",hideProgressBar:!0})},fillAllFields(t){const e=`Please fill in the following fields: ${t.join(", ")}.`;this.toast.error(e,{position:"top-center",hideProgressBar:!0})},cannotSaveRecipe(){this.toast.error("Recipe could not be saved.",{position:"top-center",hideProgressBar:!0})},recipeSavedSuccess(){this.toast.success("Recipe was successfully created!",{timeout:2e3,position:"top-center",hideProgressBar:!0})},async submitRecipe(){const t=this.validateForm();if(t.length>0){this.fillAllFields(t);return}const e=Ae.currentUser,n=e?e.uid:"",s=zx().toString();this.recipeData.imageSrc||(this.recipeData.imageSrc="https://i0.wp.com/sunrisedaycamp.org/wp-content/uploads/2020/10/placeholder.png?ssl=1");const i=this.recipeData.cook_time_hours||"0",r=this.recipeData.cook_time_minutes||"0",o={allergens:this.recipeData.allergen_info.split(",").map(c=>c.trim()),categories:this.recipeData.category,community:this.recipeData.publish_to_community,cookTime:parseInt(i)*60+parseInt(r),created_date:new Date,description:this.recipeData.description,directions:this.recipeData.directions.map(c=>c.text),ingredients:this.recipeData.ingredients,like_count:0,recipe_id:s,recipe_img_url:this.recipeData.imageSrc,recipe_name:this.recipeData.recipe_name,serving_size:parseInt(this.recipeData.serving_size),user_id:n},a=ua(rr);Ms(a,"all_recipes");try{const c=await Vr(Ce(a,"all_recipes",s),o);o.categories.forEach(l=>In(Ce(a,"categories",l),{recipes:Qc(o.recipe_id)})),await In(Ce(a,"users",o.user_id),{my_cookbook:Qc(o.recipe_id)}),console.log("Document updated successfully."),this.$router.push("/community-page"),this.recipeSavedSuccess()}catch(c){console.error("Error adding document:",c),this.cannotSaveRecipe()}}}},Yn=t=>(Lt("data-v-ac33ff9e"),t=t(),Nt(),t),Aee={class:"create-recipe-modal"},kee={class:"recipe-form"},Pee={class:"recipe-form-content"},Dee={class:"createRecipeRow"},Oee={class:"first1"},Mee=["src"],Lee={class:"img-button-container"},Nee={class:"switch-container"},Vee={class:"switch"},Fee=Yn(()=>g("span",{class:"slider"},null,-1)),Bee=Yn(()=>g("label",{for:"publishToCommunity"},"Publish to Community",-1)),Uee={class:"first2"},$ee=Yn(()=>g("label",{for:"recipeName"},"Title:",-1)),Hee=Yn(()=>g("label",{for:"recipeDescription"},"Description:",-1)),zee=Yn(()=>g("label",{for:"allergenInfo"},"Allergen Information:",-1)),jee={class:"additional-info"},Wee={class:"input-group"},qee=Yn(()=>g("label",{for:"cookTime"},"Cook Time:",-1)),Gee={class:"time-input-group"},Kee=Yn(()=>g("span",null,"hours",-1)),Yee=Yn(()=>g("span",null,"mins",-1)),Qee={class:"input-group"},Xee=Yn(()=>g("label",{for:"category"},"Category:",-1)),Jee={class:"input-group"},Zee=Yn(()=>g("label",{for:"servingSize"},"Serving Size:",-1)),ete={class:"createRecipeRow"},tte={class:"second1"},nte={class:"recipe-section"},ste=Yn(()=>g("label",{for:"ingredients"},"Ingredients:",-1)),ite={class:"ingredients-container"},rte=["onUpdate:modelValue"],ote=["onClick"],ate={class:"button-group"},cte={class:"second2"},lte={class:"recipe-section"},ute=Yn(()=>g("label",{for:"directions"},"Directions:",-1)),hte={class:"directions-container"},dte=["for"],fte={class:"direction-input"},pte=["id","onUpdate:modelValue"],gte=["onClick"],mte={class:"button-group"},_te={class:"button-container"};function yte(t,e,n,s,i,r){const o=te("TopBar"),a=te("CircleButton"),c=te("multiselect"),l=te("SaveRecipeButton");return A(),M(_e,null,[W(o,{whichPage:"feed"}),g("div",Aee,[g("div",kee,[g("div",Pee,[g("div",Dee,[g("div",Oee,[g("input",{type:"file",id:"recipeImage",ref:"fileInput",style:{display:"none"},onChange:e[0]||(e[0]=(...u)=>r.handleImageUpload&&r.handleImageUpload(...u))},null,544),g("div",{class:"plus-icon-container",onClick:e[1]||(e[1]=(...u)=>r.chooseFile&&r.chooseFile(...u))},[g("img",{src:i.recipeData.imageSrc,class:"uploaded-image",alt:"Image Upload"},null,8,Mee),g("div",Lee,[W(a,{logo:"./plus-icon.png",class:"circle-button"})])]),g("div",Nee,[g("label",Vee,[ie(g("input",{type:"checkbox",id:"publishToCommunity","onUpdate:modelValue":e[2]||(e[2]=u=>i.recipeData.publish_to_community=u)},null,512),[[Dc,i.recipeData.publish_to_community]]),Fee]),Bee])]),g("div",Uee,[$ee,ie(g("input",{type:"text",id:"recipeName","onUpdate:modelValue":e[3]||(e[3]=u=>i.recipeData.recipe_name=u),maxlength:"50"},null,512),[[Ee,i.recipeData.recipe_name]]),Hee,ie(g("textarea",{type:"text",id:"recipeDescription","onUpdate:modelValue":e[4]||(e[4]=u=>i.recipeData.description=u),class:"input-text"},null,512),[[Ee,i.recipeData.description]]),zee,ie(g("textarea",{type:"text",id:"allergenInfo","onUpdate:modelValue":e[5]||(e[5]=u=>i.recipeData.allergen_info=u),class:"input-text"},null,512),[[Ee,i.recipeData.allergen_info]]),g("div",jee,[g("div",Wee,[qee,g("div",Gee,[ie(g("input",{type:"number",id:"cookTimeHours","onUpdate:modelValue":e[6]||(e[6]=u=>i.recipeData.cook_time_hours=u),min:"0",onKeydown:e[7]||(e[7]=u=>r.onlyNumberInput(u,"cook_time_hours"))},null,544),[[Ee,i.recipeData.cook_time_hours]]),Kee,ie(g("input",{type:"number",id:"cookTimeMins","onUpdate:modelValue":e[8]||(e[8]=u=>i.recipeData.cook_time_minutes=u),min:"0",onKeydown:e[9]||(e[9]=u=>r.onlyNumberInput(u,"cook_time_minutes"))},null,544),[[Ee,i.recipeData.cook_time_minutes]]),Yee])]),g("div",Qee,[Xee,W(c,{modelValue:i.recipeData.category,"onUpdate:modelValue":e[10]||(e[10]=u=>i.recipeData.category=u),options:i.recipeData.categories,multiple:!0,"close-on-select":!1,max:3},null,8,["modelValue","options"])]),g("div",Jee,[Zee,ie(g("input",{type:"number",id:"servingSize","onUpdate:modelValue":e[11]||(e[11]=u=>i.recipeData.serving_size=u),min:"0",onKeydown:e[12]||(e[12]=u=>r.onlyNumberInput(u,"serving_size"))},null,544),[[Ee,i.recipeData.serving_size]])])])])]),g("div",ete,[g("div",tte,[g("div",nte,[ste,g("div",ite,[(A(!0),M(_e,null,pt(i.recipeData.ingredients,(u,h)=>(A(),M("div",{key:h,class:"ingredient-input"},[ie(g("input",{type:"text","onUpdate:modelValue":d=>i.recipeData.ingredients[h]=d,placeholder:"e.g. 10g Apple",maxlength:"30"},null,8,rte),[[Ee,i.recipeData.ingredients[h]]]),g("button",{class:"remove-button",onClick:d=>r.removeIngredient(h)}," x ",8,ote)]))),128)),g("div",ate,[g("button",{class:"add-more-button",onClick:e[13]||(e[13]=(...u)=>r.addIngredient&&r.addIngredient(...u))}," + ADD MORE ")])])])]),g("div",cte,[g("div",lte,[ute,g("div",hte,[(A(!0),M(_e,null,pt(i.recipeData.directions,(u,h)=>(A(),M("div",{key:h,class:"direction-step"},[g("label",{for:"direction"+u.stepNumber},"Step "+xe(u.stepNumber),9,dte),g("div",fte,[ie(g("textarea",{type:"text",id:"direction"+u.stepNumber,"onUpdate:modelValue":d=>u.text=d,class:"input-text"},null,8,pte),[[Ee,u.text]]),g("button",{class:"remove-button",onClick:d=>r.removeDirection(h)}," x ",8,gte)])]))),128)),g("div",mte,[g("button",{class:"add-more-button",onClick:e[14]||(e[14]=(...u)=>r.addDirection&&r.addDirection(...u))}," + ADD MORE ")])])])])])]),g("div",_te,[g("button",{class:"cancel-button",onClick:e[15]||(e[15]=(...u)=>r.close&&r.close(...u))},"Cancel"),W(l,{onSaveRecipe:r.submitRecipe},null,8,["onSaveRecipe"])])])])],64)}const bte=Be(Cee,[["render",yte],["__scopeId","data-v-ac33ff9e"]]),vte={components:{Multiselect:$l,TopBar:Sa,SaveRecipeButton:If,CircleButton:Ul},props:{id:String},setup(){return{toast:bo()}},data(){return{selectedRecipe:null,recipeData:{imageSrc:"https://i0.wp.com/sunrisedaycamp.org/wp-content/uploads/2020/10/placeholder.png?ssl=1",publish_to_community:!1,recipe_name:"",serving_size:"",description:"",allergen_info:"",allergens:[],cook_time_hours:"",cook_time_minutes:"",categories:[],category:[],ingredients:[""],directions:[{stepNumber:1,text:""}]}}},async created(){this.recipeData.categories=await _f(),this.fetchRecipeDetails()},methods:{async fetchRecipeDetails(){const t=await Vt(Ce(Le,"all_recipes",this.id));this.selectedRecipe=t.data(),this.recipeData.imageSrc=this.selectedRecipe.recipe_img_url,this.recipeData.publish_to_community=this.selectedRecipe.community,this.recipeData.recipe_name=this.selectedRecipe.recipe_name,this.recipeData.serving_size=this.selectedRecipe.serving_size,this.recipeData.description=this.selectedRecipe.description,this.recipeData.allergen_info=this.selectedRecipe.allergens.join(", "),this.recipeData.cook_time_hours=Math.floor(this.selectedRecipe.cook_time/60),this.recipeData.cook_time_minutes=this.selectedRecipe.cook_time%60,this.recipeData.category=this.selectedRecipe.categories,this.recipeData.ingredients=this.selectedRecipe.ingredients,this.recipeData.directions=this.selectedRecipe.directions.map((e,n)=>({stepNumber:n+1,text:e}))},chooseFile(){this.$refs.fileInput.click()},async handleImageUpload(t){const e=t.target.files[0];if(!e||e.type!=="image/jpeg"&&e.type!=="image/png"){this.imageNotValid();return}try{const n=await this.convertFileToBlob(e),s=await this.uploadImageToFirebase(n,e.name);this.recipeData.imageSrc=s}catch(n){console.error("Failed to upload image",n)}},async uploadImageToFirebase(t,e){return new Promise((n,s)=>{const i=gf(mf,`recipeImg/${e}`),r=ff(i,t);r.on("state_changed",o=>{const a=o.bytesTransferred/o.totalBytes*100;console.log("Upload is "+a+"% done")},o=>{console.error("Upload failed",o),s(o)},()=>{pf(r.snapshot.ref).then(o=>{console.log("File available at",o),n(o)}).catch(o=>{console.error("Failed to get download URL",o),s(o)})})})},convertFileToBlob(t){return new Promise((e,n)=>{const s=new FileReader;s.onloadend=()=>{const i=new Blob([new Uint8Array(s.result)],{type:t.type});e(i)},s.onerror=n,s.readAsArrayBuffer(t)})},addIngredient(){this.recipeData.ingredients.push("")},removeIngredient(t){this.recipeData.ingredients.splice(t,1)},addDirection(){const t=this.recipeData.directions.length+1;this.recipeData.directions.push({stepNumber:t,text:""})},removeDirection(t){this.recipeData.directions.splice(t,1);for(let e=t;e<this.recipeData.directions.length;e++)this.recipeData.directions[e].stepNumber--},onlyNumberInput(t,e){const n=t.keyCode||t.which;n>31&&(n<48||n>57)&&n!==46||n===46&&this.recipeData[e].includes(".")?t.preventDefault():this.recipeData[e]=t.target.value},close(){this.$router.push({name:"RecipeDetailsPage",params:{id:this.selectedRecipe.recipe_id}})},validateForm(){const t=[];return this.recipeData.recipe_name||t.push("Title"),this.recipeData.description||t.push("Description"),!this.recipeData.cook_time_hours&&!this.recipeData.cook_time_minutes&&t.push("Cook Time"),this.recipeData.category.length||t.push("Category"),this.recipeData.serving_size||t.push("Serving Size"),this.recipeData.ingredients.every(e=>e.trim()!=="")||t.push("Ingredients"),this.recipeData.directions.every(e=>e.text.trim()!=="")||t.push("Directions"),t},imageNotValid(){this.toast.error("Please select a JPG or PNG image file.",{position:"top-center",hideProgressBar:!0})},fillAllFields(t){const e=`Please fill in the following fields: ${t.join(", ")}.`;this.toast.error(e,{position:"top-center",hideProgressBar:!0})},cannotSaveRecipe(){this.toast.error("Recipe could not be saved.",{position:"top-center",hideProgressBar:!0})},recipeSavedSuccess(){this.toast.success("Recipe was successfully created!",{timeout:2e3,position:"top-center",hideProgressBar:!0})},async removeRecipeFromCategories(){const t=ua(rr);(await Wr(Ms(t,"categories"))).forEach(n=>{const s=n.data();this.recipeData.category.includes(s.category_name)||In(n.ref,{recipes:Qu(this.selectedRecipe.recipe_id)})})},async submitRecipe(){const t=this.validateForm();if(t.length>0){this.fillAllFields(t);return}const e=Ae.currentUser,n=e?e.uid:"",s=this.selectedRecipe.recipe_id;this.recipeData.imageSrc||(this.recipeData.imageSrc="https://i0.wp.com/sunrisedaycamp.org/wp-content/uploads/2020/10/placeholder.png?ssl=1");const i=this.recipeData.cook_time_hours||"0",r=this.recipeData.cook_time_minutes||"0",o={allergens:this.recipeData.allergen_info.split(",").map(c=>c.trim()),categories:this.recipeData.category,community:this.recipeData.publish_to_community,cook_time:parseInt(i)*60+parseInt(r),created_date:new Date,description:this.recipeData.description,directions:this.recipeData.directions.map(c=>c.text),ingredients:this.recipeData.ingredients,like_count:this.selectedRecipe.like_count,recipe_id:s,recipe_img_url:this.recipeData.imageSrc,recipe_name:this.recipeData.recipe_name,serving_size:parseInt(this.recipeData.serving_size),user_id:n,editted:!0},a=ua(rr);Ms(a,"all_recipes");try{const c=await In(Ce(a,"all_recipes",s),o);this.removeRecipeFromCategories(),o.categories.forEach(l=>In(Ce(a,"categories",l),{recipes:Qc(o.recipe_id)})),console.log("Document updated successfully."),this.$router.push({name:"RecipeDetailsPage",params:{id:this.selectedRecipe.recipe_id}}),this.recipeSavedSuccess()}catch(c){console.error("Error adding document:",c),this.cannotSaveRecipe()}}}},Qn=t=>(Lt("data-v-17ed82dc"),t=t(),Nt(),t),wte={class:"create-recipe-modal"},Ete={class:"recipe-form"},Tte={class:"recipe-form-content"},Ste={class:"createRecipeRow"},Ite={class:"first1"},Rte=["src"],xte={class:"img-button-container"},Cte={class:"switch-container"},Ate={class:"switch"},kte=Qn(()=>g("span",{class:"slider"},null,-1)),Pte=Qn(()=>g("label",{for:"publishToCommunity"},"Publish to Community",-1)),Dte={class:"first2"},Ote=Qn(()=>g("label",{for:"recipeName"},"Title:",-1)),Mte=Qn(()=>g("label",{for:"recipeDescription"},"Description:",-1)),Lte=Qn(()=>g("label",{for:"allergenInfo"},"Allergen Information:",-1)),Nte={class:"additional-info"},Vte={class:"input-group"},Fte=Qn(()=>g("label",{for:"cookTime"},"Cook Time:",-1)),Bte={class:"time-input-group"},Ute=Qn(()=>g("span",null,"hours",-1)),$te=Qn(()=>g("span",null,"mins",-1)),Hte={class:"input-group"},zte=Qn(()=>g("label",{for:"category"},"Category:",-1)),jte={class:"input-group"},Wte=Qn(()=>g("label",{for:"servingSize"},"Serving Size:",-1)),qte={class:"createRecipeRow"},Gte={class:"second1"},Kte={class:"recipe-section"},Yte=Qn(()=>g("label",{for:"ingredients"},"Ingredients:",-1)),Qte={class:"ingredients-container"},Xte=["onUpdate:modelValue"],Jte=["onClick"],Zte={class:"button-group"},ene={class:"second2"},tne={class:"recipe-section"},nne=Qn(()=>g("label",{for:"directions"},"Directions:",-1)),sne={class:"directions-container"},ine=["for"],rne={class:"direction-input"},one=["id","onUpdate:modelValue"],ane=["onClick"],cne={class:"button-group"},lne={class:"button-container"};function une(t,e,n,s,i,r){const o=te("TopBar"),a=te("CircleButton"),c=te("multiselect"),l=te("save-recipe-button");return A(),M(_e,null,[W(o,{ifFeed:!0}),g("div",wte,[g("div",Ete,[g("div",Tte,[g("div",Ste,[g("div",Ite,[g("input",{type:"file",id:"recipeImage",ref:"fileInput",style:{display:"none"},onChange:e[0]||(e[0]=(...u)=>r.handleImageUpload&&r.handleImageUpload(...u))},null,544),g("div",{class:"plus-icon-container",onClick:e[1]||(e[1]=(...u)=>r.chooseFile&&r.chooseFile(...u))},[g("img",{src:i.recipeData.imageSrc,class:"uploaded-image",alt:"Image Upload"},null,8,Rte),g("div",xte,[W(a,{logo:"../plus-icon.png",class:"circle-button"})])]),g("div",Cte,[g("label",Ate,[ie(g("input",{type:"checkbox",id:"publishToCommunity","onUpdate:modelValue":e[2]||(e[2]=u=>i.recipeData.publish_to_community=u)},null,512),[[Dc,i.recipeData.publish_to_community]]),kte]),Pte])]),g("div",Dte,[Ote,ie(g("input",{type:"text",id:"recipeName","onUpdate:modelValue":e[3]||(e[3]=u=>i.recipeData.recipe_name=u),maxlength:"50"},null,512),[[Ee,i.recipeData.recipe_name]]),Mte,ie(g("textarea",{type:"text",id:"recipeDescription","onUpdate:modelValue":e[4]||(e[4]=u=>i.recipeData.description=u),class:"input-text"},null,512),[[Ee,i.recipeData.description]]),Lte,ie(g("textarea",{type:"text",id:"allergenInfo","onUpdate:modelValue":e[5]||(e[5]=u=>i.recipeData.allergen_info=u),class:"input-text"},null,512),[[Ee,i.recipeData.allergen_info]]),g("div",Nte,[g("div",Vte,[Fte,g("div",Bte,[ie(g("input",{type:"number",id:"cookTimeHours","onUpdate:modelValue":e[6]||(e[6]=u=>i.recipeData.cook_time_hours=u),min:"0",onKeydown:e[7]||(e[7]=u=>r.onlyNumberInput(u,"cook_time_hours"))},null,544),[[Ee,i.recipeData.cook_time_hours]]),Ute,ie(g("input",{type:"number",id:"cookTimeMins","onUpdate:modelValue":e[8]||(e[8]=u=>i.recipeData.cook_time_minutes=u),min:"0",onKeydown:e[9]||(e[9]=u=>r.onlyNumberInput(u,"cook_time_minutes"))},null,544),[[Ee,i.recipeData.cook_time_minutes]]),$te])]),g("div",Hte,[zte,W(c,{modelValue:i.recipeData.category,"onUpdate:modelValue":e[10]||(e[10]=u=>i.recipeData.category=u),options:i.recipeData.categories,multiple:!0,"close-on-select":!1,max:3},null,8,["modelValue","options"])]),g("div",jte,[Wte,ie(g("input",{type:"number",id:"servingSize","onUpdate:modelValue":e[11]||(e[11]=u=>i.recipeData.serving_size=u),min:"0",onKeydown:e[12]||(e[12]=u=>r.onlyNumberInput(u,"serving_size"))},null,544),[[Ee,i.recipeData.serving_size]])])])])]),g("div",qte,[g("div",Gte,[g("div",Kte,[Yte,g("div",Qte,[(A(!0),M(_e,null,pt(i.recipeData.ingredients,(u,h)=>(A(),M("div",{key:h,class:"ingredient-input"},[ie(g("input",{type:"text","onUpdate:modelValue":d=>i.recipeData.ingredients[h]=d,placeholder:"e.g. 10g Apple",maxlength:"30"},null,8,Xte),[[Ee,i.recipeData.ingredients[h]]]),g("button",{class:"remove-button",onClick:d=>r.removeIngredient(h)}," x ",8,Jte)]))),128)),g("div",Zte,[g("button",{class:"add-more-button",onClick:e[13]||(e[13]=(...u)=>r.addIngredient&&r.addIngredient(...u))}," + ADD MORE ")])])])]),g("div",ene,[g("div",tne,[nne,g("div",sne,[(A(!0),M(_e,null,pt(i.recipeData.directions,(u,h)=>(A(),M("div",{key:h,class:"direction-step"},[g("label",{for:"direction"+u.stepNumber},"Step "+xe(u.stepNumber),9,ine),g("div",rne,[ie(g("textarea",{type:"text",id:"direction"+u.stepNumber,"onUpdate:modelValue":d=>u.text=d,class:"input-text"},null,8,one),[[Ee,u.text]]),g("button",{class:"remove-button",onClick:d=>r.removeDirection(h)}," x ",8,ane)])]))),128)),g("div",cne,[g("button",{class:"add-more-button",onClick:e[14]||(e[14]=(...u)=>r.addDirection&&r.addDirection(...u))}," + ADD MORE ")])])])])])]),g("div",lne,[g("button",{class:"cancel-button",onClick:e[15]||(e[15]=(...u)=>r.close&&r.close(...u))},"Cancel"),W(l,{onSaveRecipe:r.submitRecipe},null,8,["onSaveRecipe"])])])])],64)}const hne=Be(vte,[["render",une],["__scopeId","data-v-17ed82dc"]]),dne=[{path:"/",name:"Landing",component:L4},{path:"/signup",name:"Sign Up",component:e5},{path:"/login",name:"Login",component:g5},{path:"/recipe-generator",name:"Recipe Generator",component:YH,meta:{requiresAuth:!0}},{path:"/community-page",name:"Community Page",component:Cj,meta:{requiresAuth:!0}},{path:"/community-page/:id",name:"RecipeDetailsPage",component:Fj,meta:{requiresAuth:!0},props:!0},{path:"/:catchAll(.*)",name:"NotFound",component:Gj},{path:"/profile",name:"Profile",component:xee,meta:{requiresAuth:!0}},{path:"/create-recipe",name:"RecipeCreate",component:bte,meta:{requiresAuth:!0}},{path:"/edit-recipe/:id",name:"RecipeEdit",component:hne,meta:{requiresAuth:!0},props:!0}],rb=pO({history:zD(),routes:dne});rb.beforeEach((t,e,n)=>{const s=t.matched.some(i=>i.meta&&i.meta.requiresAuth);J2(Ae,i=>{console.log(i),s&&!i?n({path:"/",query:{redirected:"true"}}):n()})});/*!
 * Vue Chartkick
 * Create beautiful JavaScript charts with one line of Vue
 * https://github.com/ankane/vue-chartkick
 * v1.1.0
 * MIT License
 */var fne=1,xi=function(t,e,n){var s=["adapter","bytes","code","colors","curve","dataset","decimal","discrete","donut","download","empty","label","legend","library","loading","max","messages","min","points","precision","prefix","refresh","round","stacked","suffix","thousands","title","xmax","xmin","xtitle","ytitle","zeros"];t.component(e,{props:["data","id","width","height"].concat(s),render:function(){var i=this.chartOptions.loading!==void 0?this.chartOptions.loading:"Loading...";if(typeof i!="string")throw new Error("loading must be a string");return Ed("div",{id:this.chartId,style:this.chartStyle},[i])},data:function(){return{chartId:null}},computed:{chartStyle:function(){return this.data,this.chartOptions,{height:this.height||"300px",lineHeight:this.height||"300px",width:this.width||"100%",textAlign:"center",color:"#999",fontSize:"14px",fontFamily:"'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif"}},chartOptions:function(){for(var i={},r=s,o=0;o<r.length;o++){var a=r[o];this[a]!==void 0&&(i[a]=this[a])}return i}},created:function(){this.chartId=this.chartId||this.id||"chart-"+fne++},mounted:function(){this.updateChart()},updated:function(){this.updateChart()},beforeUnmount:function(){this.chart&&this.chart.destroy()},methods:{updateChart:function(){this.data!==null?this.chart?this.chart.updateData(this.data,this.chartOptions):this.chart=new n(this.chartId,this.data,this.chartOptions):this.chart&&(this.chart.destroy(),this.chart=null,this.$el.innerText="Loading...")}}})};ve.install=function(t,e){e&&e.adapter&&ve.addAdapter(e.adapter),xi(t,"line-chart",ve.LineChart),xi(t,"pie-chart",ve.PieChart),xi(t,"column-chart",ve.ColumnChart),xi(t,"bar-chart",ve.BarChart),xi(t,"area-chart",ve.AreaChart),xi(t,"scatter-chart",ve.ScatterChart),xi(t,"geo-chart",ve.GeoChart),xi(t,"timeline",ve.Timeline)};r1(dD).use(rb).use(I4).use(ve).mount("#app");
