function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
var sk=Object.defineProperty;var ik=(t,e,n)=>e in t?sk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var x=(t,e,n)=>(ik(t,typeof e!="symbol"?e+"":e,n),n);import rk from"https://cdn.jsdelivr.net/npm/fuse.js@7.0.0/dist/fuse.mjs";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function em(t,e){const n=new Set(t.split(","));return e?s=>n.has(s.toLowerCase()):s=>n.has(s)}const tt={},Do=[],Un=()=>{},ok=()=>!1,Qh=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),tm=t=>t.startsWith("onUpdate:"),Ot=Object.assign,nm=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},ak=Object.prototype.hasOwnProperty,Fe=(t,e)=>ak.call(t,e),re=Array.isArray,Oo=t=>tl(t)==="[object Map]",Xh=t=>tl(t)==="[object Set]",qy=t=>tl(t)==="[object Date]",Ee=t=>typeof t=="function",xt=t=>typeof t=="string",Ki=t=>typeof t=="symbol",Qe=t=>t!==null&&typeof t=="object",RE=t=>(Qe(t)||Ee(t))&&Ee(t.then)&&Ee(t.catch),IE=Object.prototype.toString,tl=t=>IE.call(t),ck=t=>tl(t).slice(8,-1),xE=t=>tl(t)==="[object Object]",sm=t=>xt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Xa=em(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Jh=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},lk=/-(\w)/g,Ls=Jh(t=>t.replace(lk,(e,n)=>n?n.toUpperCase():"")),uk=/\B([A-Z])/g,to=Jh(t=>t.replace(uk,"-$1").toLowerCase()),Zh=Jh(t=>t.charAt(0).toUpperCase()+t.slice(1)),Iu=Jh(t=>t?`on${Zh(t)}`:""),Yi=(t,e)=>!Object.is(t,e),xu=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},rh=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Pp=t=>{const e=parseFloat(t);return isNaN(e)?t:e},hk=t=>{const e=xt(t)?Number(t):NaN;return isNaN(e)?t:e};let Gy;const CE=()=>Gy||(Gy=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function nl(t){if(re(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],i=xt(s)?gk(s):nl(s);if(i)for(const r in i)e[r]=i[r]}return e}else if(xt(t)||Qe(t))return t}const dk=/;(?![^(]*\))/g,fk=/:([^]+)/,pk=/\/\*[^]*?\*\//g;function gk(t){const e={};return t.replace(pk,"").split(dk).forEach(n=>{if(n){const s=n.split(fk);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Tt(t){let e="";if(xt(t))e=t;else if(re(t))for(let n=0;n<t.length;n++){const s=Tt(t[n]);s&&(e+=s+" ")}else if(Qe(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const mk="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",_k=em(mk);function kE(t){return!!t||t===""}function yk(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=ed(t[s],e[s]);return n}function ed(t,e){if(t===e)return!0;let n=qy(t),s=qy(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=Ki(t),s=Ki(e),n||s)return t===e;if(n=re(t),s=re(e),n||s)return n&&s?yk(t,e):!1;if(n=Qe(t),s=Qe(e),n||s){if(!n||!s)return!1;const i=Object.keys(t).length,r=Object.keys(e).length;if(i!==r)return!1;for(const o in t){const a=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(a&&!c||!a&&c||!ed(t[o],e[o]))return!1}}return String(t)===String(e)}function AE(t,e){return t.findIndex(n=>ed(n,e))}const Se=t=>xt(t)?t:t==null?"":re(t)||Qe(t)&&(t.toString===IE||!Ee(t.toString))?JSON.stringify(t,PE,2):String(t),PE=(t,e)=>e&&e.__v_isRef?PE(t,e.value):Oo(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,i],r)=>(n[Cf(s,r)+" =>"]=i,n),{})}:Xh(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Cf(n))}:Ki(e)?Cf(e):Qe(e)&&!re(e)&&!xE(e)?String(e):e,Cf=(t,e="")=>{var n;return Ki(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Qn;class bk{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Qn,!e&&Qn&&(this.index=(Qn.scopes||(Qn.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=Qn;try{return Qn=this,e()}finally{Qn=n}}}on(){Qn=this}off(){Qn=this.parent}stop(e){if(this._active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function vk(t,e=Qn){e&&e.active&&e.effects.push(t)}function wk(){return Qn}let Mr;class im{constructor(e,n,s,i){this.fn=e,this.trigger=n,this.scheduler=s,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,vk(this,i)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,no();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(Ek(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),so()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=$i,n=Mr;try{return $i=!0,Mr=this,this._runnings++,Ky(this),this.fn()}finally{Yy(this),this._runnings--,Mr=n,$i=e}}stop(){var e;this.active&&(Ky(this),Yy(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function Ek(t){return t.value}function Ky(t){t._trackId++,t._depsLength=0}function Yy(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)DE(t.deps[e],t);t.deps.length=t._depsLength}}function DE(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let $i=!0,Dp=0;const OE=[];function no(){OE.push($i),$i=!1}function so(){const t=OE.pop();$i=t===void 0?!0:t}function rm(){Dp++}function om(){for(Dp--;!Dp&&Op.length;)Op.shift()()}function ME(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const s=t.deps[t._depsLength];s!==e?(s&&DE(s,t),t.deps[t._depsLength++]=e):t._depsLength++}}const Op=[];function LE(t,e,n){rm();for(const s of t.keys()){let i;s._dirtyLevel<e&&(i??(i=t.get(s)===s._trackId))&&(s._shouldSchedule||(s._shouldSchedule=s._dirtyLevel===0),s._dirtyLevel=e),s._shouldSchedule&&(i??(i=t.get(s)===s._trackId))&&(s.trigger(),(!s._runnings||s.allowRecurse)&&s._dirtyLevel!==2&&(s._shouldSchedule=!1,s.scheduler&&Op.push(s.scheduler)))}om()}const NE=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},Mp=new WeakMap,Lr=Symbol(""),Lp=Symbol("");function Rn(t,e,n){if($i&&Mr){let s=Mp.get(t);s||Mp.set(t,s=new Map);let i=s.get(n);i||s.set(n,i=NE(()=>s.delete(n))),ME(Mr,i)}}function ti(t,e,n,s,i,r){const o=Mp.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&re(t)){const c=Number(s);o.forEach((l,u)=>{(u==="length"||!Ki(u)&&u>=c)&&a.push(l)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":re(t)?sm(n)&&a.push(o.get("length")):(a.push(o.get(Lr)),Oo(t)&&a.push(o.get(Lp)));break;case"delete":re(t)||(a.push(o.get(Lr)),Oo(t)&&a.push(o.get(Lp)));break;case"set":Oo(t)&&a.push(o.get(Lr));break}rm();for(const c of a)c&&LE(c,4);om()}const Tk=em("__proto__,__v_isRef,__isVue"),VE=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Ki)),Qy=Sk();function Sk(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const s=Ne(this);for(let r=0,o=this.length;r<o;r++)Rn(s,"get",r+"");const i=s[e](...n);return i===-1||i===!1?s[e](...n.map(Ne)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){no(),rm();const s=Ne(this)[e].apply(this,n);return om(),so(),s}}),t}function Rk(t){const e=Ne(this);return Rn(e,"has",t),e.hasOwnProperty(t)}class FE{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){const i=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return r;if(n==="__v_raw")return s===(i?r?Fk:HE:r?$E:UE).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=re(e);if(!i){if(o&&Fe(Qy,n))return Reflect.get(Qy,n,s);if(n==="hasOwnProperty")return Rk}const a=Reflect.get(e,n,s);return(Ki(n)?VE.has(n):Tk(n))||(i||Rn(e,"get",n),r)?a:In(a)?o&&sm(n)?a:a.value:Qe(a)?i?jE(a):nd(a):a}}class BE extends FE{constructor(e=!1){super(!1,e)}set(e,n,s,i){let r=e[n];if(!this._isShallow){const c=zo(r);if(!oh(s)&&!zo(s)&&(r=Ne(r),s=Ne(s)),!re(e)&&In(r)&&!In(s))return c?!1:(r.value=s,!0)}const o=re(e)&&sm(n)?Number(n)<e.length:Fe(e,n),a=Reflect.set(e,n,s,i);return e===Ne(i)&&(o?Yi(s,r)&&ti(e,"set",n,s):ti(e,"add",n,s)),a}deleteProperty(e,n){const s=Fe(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&s&&ti(e,"delete",n,void 0),i}has(e,n){const s=Reflect.has(e,n);return(!Ki(n)||!VE.has(n))&&Rn(e,"has",n),s}ownKeys(e){return Rn(e,"iterate",re(e)?"length":Lr),Reflect.ownKeys(e)}}class Ik extends FE{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const xk=new BE,Ck=new Ik,kk=new BE(!0),am=t=>t,td=t=>Reflect.getPrototypeOf(t);function Wl(t,e,n=!1,s=!1){t=t.__v_raw;const i=Ne(t),r=Ne(e);n||(Yi(e,r)&&Rn(i,"get",e),Rn(i,"get",r));const{has:o}=td(i),a=s?am:n?um:bc;if(o.call(i,e))return a(t.get(e));if(o.call(i,r))return a(t.get(r));t!==i&&t.get(e)}function ql(t,e=!1){const n=this.__v_raw,s=Ne(n),i=Ne(t);return e||(Yi(t,i)&&Rn(s,"has",t),Rn(s,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function Gl(t,e=!1){return t=t.__v_raw,!e&&Rn(Ne(t),"iterate",Lr),Reflect.get(t,"size",t)}function Xy(t){t=Ne(t);const e=Ne(this);return td(e).has.call(e,t)||(e.add(t),ti(e,"add",t,t)),this}function Jy(t,e){e=Ne(e);const n=Ne(this),{has:s,get:i}=td(n);let r=s.call(n,t);r||(t=Ne(t),r=s.call(n,t));const o=i.call(n,t);return n.set(t,e),r?Yi(e,o)&&ti(n,"set",t,e):ti(n,"add",t,e),this}function Zy(t){const e=Ne(this),{has:n,get:s}=td(e);let i=n.call(e,t);i||(t=Ne(t),i=n.call(e,t)),s&&s.call(e,t);const r=e.delete(t);return i&&ti(e,"delete",t,void 0),r}function eb(){const t=Ne(this),e=t.size!==0,n=t.clear();return e&&ti(t,"clear",void 0,void 0),n}function Kl(t,e){return function(s,i){const r=this,o=r.__v_raw,a=Ne(o),c=e?am:t?um:bc;return!t&&Rn(a,"iterate",Lr),o.forEach((l,u)=>s.call(i,c(l),c(u),r))}}function Yl(t,e,n){return function(...s){const i=this.__v_raw,r=Ne(i),o=Oo(r),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,l=i[t](...s),u=n?am:e?um:bc;return!e&&Rn(r,"iterate",c?Lp:Lr),{next(){const{value:h,done:d}=l.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function mi(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Ak(){const t={get(r){return Wl(this,r)},get size(){return Gl(this)},has:ql,add:Xy,set:Jy,delete:Zy,clear:eb,forEach:Kl(!1,!1)},e={get(r){return Wl(this,r,!1,!0)},get size(){return Gl(this)},has:ql,add:Xy,set:Jy,delete:Zy,clear:eb,forEach:Kl(!1,!0)},n={get(r){return Wl(this,r,!0)},get size(){return Gl(this,!0)},has(r){return ql.call(this,r,!0)},add:mi("add"),set:mi("set"),delete:mi("delete"),clear:mi("clear"),forEach:Kl(!0,!1)},s={get(r){return Wl(this,r,!0,!0)},get size(){return Gl(this,!0)},has(r){return ql.call(this,r,!0)},add:mi("add"),set:mi("set"),delete:mi("delete"),clear:mi("clear"),forEach:Kl(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{t[r]=Yl(r,!1,!1),n[r]=Yl(r,!0,!1),e[r]=Yl(r,!1,!0),s[r]=Yl(r,!0,!0)}),[t,n,e,s]}const[Pk,Dk,Ok,Mk]=Ak();function cm(t,e){const n=e?t?Mk:Ok:t?Dk:Pk;return(s,i,r)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?s:Reflect.get(Fe(n,i)&&i in s?n:s,i,r)}const Lk={get:cm(!1,!1)},Nk={get:cm(!1,!0)},Vk={get:cm(!0,!1)},UE=new WeakMap,$E=new WeakMap,HE=new WeakMap,Fk=new WeakMap;function Bk(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Uk(t){return t.__v_skip||!Object.isExtensible(t)?0:Bk(ck(t))}function nd(t){return zo(t)?t:lm(t,!1,xk,Lk,UE)}function zE(t){return lm(t,!1,kk,Nk,$E)}function jE(t){return lm(t,!0,Ck,Vk,HE)}function lm(t,e,n,s,i){if(!Qe(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=i.get(t);if(r)return r;const o=Uk(t);if(o===0)return t;const a=new Proxy(t,o===2?s:n);return i.set(t,a),a}function Mo(t){return zo(t)?Mo(t.__v_raw):!!(t&&t.__v_isReactive)}function zo(t){return!!(t&&t.__v_isReadonly)}function oh(t){return!!(t&&t.__v_isShallow)}function WE(t){return Mo(t)||zo(t)}function Ne(t){const e=t&&t.__v_raw;return e?Ne(e):t}function qE(t){return Object.isExtensible(t)&&rh(t,"__v_skip",!0),t}const bc=t=>Qe(t)?nd(t):t,um=t=>Qe(t)?jE(t):t;class GE{constructor(e,n,s,i){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new im(()=>e(this._value),()=>Cu(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=s}get value(){const e=Ne(this);return(!e._cacheable||e.effect.dirty)&&Yi(e._value,e._value=e.effect.run())&&Cu(e,4),KE(e),e.effect._dirtyLevel>=2&&Cu(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function $k(t,e,n=!1){let s,i;const r=Ee(t);return r?(s=t,i=Un):(s=t.get,i=t.set),new GE(s,i,r||!i,n)}function KE(t){var e;$i&&Mr&&(t=Ne(t),ME(Mr,(e=t.dep)!=null?e:t.dep=NE(()=>t.dep=void 0,t instanceof GE?t:void 0)))}function Cu(t,e=4,n){t=Ne(t);const s=t.dep;s&&LE(s,e)}function In(t){return!!(t&&t.__v_isRef===!0)}function Hk(t){return YE(t,!1)}function zk(t){return YE(t,!0)}function YE(t,e){return In(t)?t:new jk(t,e)}class jk{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Ne(e),this._value=n?e:bc(e)}get value(){return KE(this),this._value}set value(e){const n=this.__v_isShallow||oh(e)||zo(e);e=n?e:Ne(e),Yi(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:bc(e),Cu(this,4))}}function Nr(t){return In(t)?t.value:t}const Wk={get:(t,e,n)=>Nr(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const i=t[e];return In(i)&&!In(n)?(i.value=n,!0):Reflect.set(t,e,n,s)}};function QE(t){return Mo(t)?t:new Proxy(t,Wk)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Hi(t,e,n,s){try{return s?t(...s):t()}catch(i){sd(i,e,n)}}function $n(t,e,n,s){if(Ee(t)){const r=Hi(t,e,n,s);return r&&RE(r)&&r.catch(o=>{sd(o,e,n)}),r}const i=[];for(let r=0;r<t.length;r++)i.push($n(t[r],e,n,s));return i}function sd(t,e,n,s=!0){const i=e?e.vnode:null;if(e){let r=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;r;){const l=r.ec;if(l){for(let u=0;u<l.length;u++)if(l[u](t,o,a)===!1)return}r=r.parent}const c=e.appContext.config.errorHandler;if(c){Hi(c,null,10,[t,o,a]);return}}qk(t,n,i,s)}function qk(t,e,n,s=!0){console.error(t)}let vc=!1,Np=!1;const sn=[];let ms=0;const Lo=[];let Ii=null,Er=0;const XE=Promise.resolve();let hm=null;function dm(t){const e=hm||XE;return t?e.then(this?t.bind(this):t):e}function Gk(t){let e=ms+1,n=sn.length;for(;e<n;){const s=e+n>>>1,i=sn[s],r=wc(i);r<t||r===t&&i.pre?e=s+1:n=s}return e}function fm(t){(!sn.length||!sn.includes(t,vc&&t.allowRecurse?ms+1:ms))&&(t.id==null?sn.push(t):sn.splice(Gk(t.id),0,t),JE())}function JE(){!vc&&!Np&&(Np=!0,hm=XE.then(eT))}function Kk(t){const e=sn.indexOf(t);e>ms&&sn.splice(e,1)}function Yk(t){re(t)?Lo.push(...t):(!Ii||!Ii.includes(t,t.allowRecurse?Er+1:Er))&&Lo.push(t),JE()}function tb(t,e,n=vc?ms+1:0){for(;n<sn.length;n++){const s=sn[n];if(s&&s.pre){if(t&&s.id!==t.uid)continue;sn.splice(n,1),n--,s()}}}function ZE(t){if(Lo.length){const e=[...new Set(Lo)].sort((n,s)=>wc(n)-wc(s));if(Lo.length=0,Ii){Ii.push(...e);return}for(Ii=e,Er=0;Er<Ii.length;Er++)Ii[Er]();Ii=null,Er=0}}const wc=t=>t.id==null?1/0:t.id,Qk=(t,e)=>{const n=wc(t)-wc(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function eT(t){Np=!1,vc=!0,sn.sort(Qk);try{for(ms=0;ms<sn.length;ms++){const e=sn[ms];e&&e.active!==!1&&Hi(e,null,14)}}finally{ms=0,sn.length=0,ZE(),vc=!1,hm=null,(sn.length||Lo.length)&&eT()}}function Xk(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||tt;let i=n;const r=e.startsWith("update:"),o=r&&e.slice(7);if(o&&o in s){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=s[u]||tt;d&&(i=n.map(f=>xt(f)?f.trim():f)),h&&(i=n.map(Pp))}let a,c=s[a=Iu(e)]||s[a=Iu(Ls(e))];!c&&r&&(c=s[a=Iu(to(e))]),c&&$n(c,t,6,i);const l=s[a+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,$n(l,t,6,i)}}function tT(t,e,n=!1){const s=e.emitsCache,i=s.get(t);if(i!==void 0)return i;const r=t.emits;let o={},a=!1;if(!Ee(t)){const c=l=>{const u=tT(l,e,!0);u&&(a=!0,Ot(o,u))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!r&&!a?(Qe(t)&&s.set(t,null),null):(re(r)?r.forEach(c=>o[c]=null):Ot(o,r),Qe(t)&&s.set(t,o),o)}function id(t,e){return!t||!Qh(e)?!1:(e=e.slice(2).replace(/Once$/,""),Fe(t,e[0].toLowerCase()+e.slice(1))||Fe(t,to(e))||Fe(t,e))}let Vt=null,rd=null;function ah(t){const e=Vt;return Vt=t,rd=t&&t.type.__scopeId||null,e}function Lt(t){rd=t}function Nt(){rd=null}function jr(t,e=Vt,n){if(!e||t._n)return t;const s=(...i)=>{s._d&&fb(-1);const r=ah(e);let o;try{o=t(...i)}finally{ah(r),s._d&&fb(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function kf(t){const{type:e,vnode:n,proxy:s,withProxy:i,props:r,propsOptions:[o],slots:a,attrs:c,emit:l,render:u,renderCache:h,data:d,setupState:f,ctx:g,inheritAttrs:m}=t;let _,y;const v=ah(t);try{if(n.shapeFlag&4){const T=i||s,S=T;_=ps(u.call(S,T,h,r,f,d,g)),y=c}else{const T=e;_=ps(T.length>1?T(r,{attrs:c,slots:a,emit:l}):T(r,null)),y=e.props?c:Jk(c)}}catch(T){tc.length=0,sd(T,t,1),_=W(Hn)}let E=_;if(y&&m!==!1){const T=Object.keys(y),{shapeFlag:S}=E;T.length&&S&7&&(o&&T.some(tm)&&(y=Zk(y,o)),E=Qi(E,y))}return n.dirs&&(E=Qi(E),E.dirs=E.dirs?E.dirs.concat(n.dirs):n.dirs),n.transition&&(E.transition=n.transition),_=E,ah(v),_}const Jk=t=>{let e;for(const n in t)(n==="class"||n==="style"||Qh(n))&&((e||(e={}))[n]=t[n]);return e},Zk=(t,e)=>{const n={};for(const s in t)(!tm(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function eA(t,e,n){const{props:s,children:i,component:r}=t,{props:o,children:a,patchFlag:c}=e,l=r.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?nb(s,o,l):!!o;if(c&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==s[d]&&!id(l,d))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?nb(s,o,l):!0:!!o;return!1}function nb(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(e[r]!==t[r]&&!id(n,r))return!0}return!1}function tA({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const pm="components";function te(t,e){return sT(pm,t,!0,e)||t}const nT=Symbol.for("v-ndc");function gm(t){return xt(t)?sT(pm,t,!1)||t:t||nT}function sT(t,e,n=!0,s=!1){const i=Vt||Kt;if(i){const r=i.type;if(t===pm){const a=KA(r,!1);if(a&&(a===e||a===Ls(e)||a===Zh(Ls(e))))return r}const o=sb(i[t]||r[t],e)||sb(i.appContext[t],e);return!o&&s?r:o}}function sb(t,e){return t&&(t[e]||t[Ls(e)]||t[Zh(Ls(e))])}const nA=t=>t.__isSuspense;function sA(t,e){e&&e.pendingBranch?re(t)?e.effects.push(...t):e.effects.push(t):Yk(t)}const iA=Symbol.for("v-scx"),rA=()=>Ss(iA),Ql={};function ku(t,e,n){return iT(t,e,n)}function iT(t,e,{immediate:n,deep:s,flush:i,once:r,onTrack:o,onTrigger:a}=tt){if(e&&r){const I=e;e=(...k)=>{I(...k),S()}}const c=Kt,l=I=>s===!0?I:Ir(I,s===!1?1:void 0);let u,h=!1,d=!1;if(In(t)?(u=()=>t.value,h=oh(t)):Mo(t)?(u=()=>l(t),h=!0):re(t)?(d=!0,h=t.some(I=>Mo(I)||oh(I)),u=()=>t.map(I=>{if(In(I))return I.value;if(Mo(I))return l(I);if(Ee(I))return Hi(I,c,2)})):Ee(t)?e?u=()=>Hi(t,c,2):u=()=>(f&&f(),$n(t,c,3,[g])):u=Un,e&&s){const I=u;u=()=>Ir(I())}let f,g=I=>{f=E.onStop=()=>{Hi(I,c,4),f=E.onStop=void 0}},m;if(hd)if(g=Un,e?n&&$n(e,c,3,[u(),d?[]:void 0,g]):u(),i==="sync"){const I=rA();m=I.__watcherHandles||(I.__watcherHandles=[])}else return Un;let _=d?new Array(t.length).fill(Ql):Ql;const y=()=>{if(!(!E.active||!E.dirty))if(e){const I=E.run();(s||h||(d?I.some((k,R)=>Yi(k,_[R])):Yi(I,_)))&&(f&&f(),$n(e,c,3,[I,_===Ql?void 0:d&&_[0]===Ql?[]:_,g]),_=I)}else E.run()};y.allowRecurse=!!e;let v;i==="sync"?v=y:i==="post"?v=()=>bn(y,c&&c.suspense):(y.pre=!0,c&&(y.id=c.uid),v=()=>fm(y));const E=new im(u,Un,v),T=wk(),S=()=>{E.stop(),T&&nm(T.effects,E)};return e?n?y():_=E.run():i==="post"?bn(E.run.bind(E),c&&c.suspense):E.run(),m&&m.push(S),S}function oA(t,e,n){const s=this.proxy,i=xt(t)?t.includes(".")?rT(s,t):()=>s[t]:t.bind(s,s);let r;Ee(e)?r=e:(r=e.handler,n=e);const o=sl(this),a=iT(i,r.bind(s),n);return o(),a}function rT(t,e){const n=e.split(".");return()=>{let s=t;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}function Ir(t,e,n=0,s){if(!Qe(t)||t.__v_skip)return t;if(e&&e>0){if(n>=e)return t;n++}if(s=s||new Set,s.has(t))return t;if(s.add(t),In(t))Ir(t.value,e,n,s);else if(re(t))for(let i=0;i<t.length;i++)Ir(t[i],e,n,s);else if(Xh(t)||Oo(t))t.forEach(i=>{Ir(i,e,n,s)});else if(xE(t))for(const i in t)Ir(t[i],e,n,s);return t}function ie(t,e){if(Vt===null)return t;const n=dd(Vt)||Vt.proxy,s=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[r,o,a,c=tt]=e[i];r&&(Ee(r)&&(r={mounted:r,updated:r}),r.deep&&Ir(o),s.push({dir:r,instance:n,value:o,oldValue:void 0,arg:a,modifiers:c}))}return t}function hr(t,e,n,s){const i=t.dirs,r=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let c=a.dir[s];c&&(no(),$n(c,n,8,[t.el,a,t,e]),so())}}const xi=Symbol("_leaveCb"),Xl=Symbol("_enterCb");function oT(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return uT(()=>{t.isMounted=!0}),dT(()=>{t.isUnmounting=!0}),t}const Vn=[Function,Array],aT={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Vn,onEnter:Vn,onAfterEnter:Vn,onEnterCancelled:Vn,onBeforeLeave:Vn,onLeave:Vn,onAfterLeave:Vn,onLeaveCancelled:Vn,onBeforeAppear:Vn,onAppear:Vn,onAfterAppear:Vn,onAppearCancelled:Vn},aA={name:"BaseTransition",props:aT,setup(t,{slots:e}){const n=vm(),s=oT();return()=>{const i=e.default&&mm(e.default(),!0);if(!i||!i.length)return;let r=i[0];if(i.length>1){for(const d of i)if(d.type!==Hn){r=d;break}}const o=Ne(t),{mode:a}=o;if(s.isLeaving)return Af(r);const c=ib(r);if(!c)return Af(r);const l=Ec(c,o,s,n);Tc(c,l);const u=n.subTree,h=u&&ib(u);if(h&&h.type!==Hn&&!Tr(c,h)){const d=Ec(h,o,s,n);if(Tc(h,d),a==="out-in")return s.isLeaving=!0,d.afterLeave=()=>{s.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},Af(r);a==="in-out"&&c.type!==Hn&&(d.delayLeave=(f,g,m)=>{const _=cT(s,h);_[String(h.key)]=h,f[xi]=()=>{g(),f[xi]=void 0,delete l.delayedLeave},l.delayedLeave=m})}return r}}},cA=aA;function cT(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function Ec(t,e,n,s){const{appear:i,mode:r,persisted:o=!1,onBeforeEnter:a,onEnter:c,onAfterEnter:l,onEnterCancelled:u,onBeforeLeave:h,onLeave:d,onAfterLeave:f,onLeaveCancelled:g,onBeforeAppear:m,onAppear:_,onAfterAppear:y,onAppearCancelled:v}=e,E=String(t.key),T=cT(n,t),S=(R,N)=>{R&&$n(R,s,9,N)},I=(R,N)=>{const $=N[1];S(R,N),re(R)?R.every(X=>X.length<=1)&&$():R.length<=1&&$()},k={mode:r,persisted:o,beforeEnter(R){let N=a;if(!n.isMounted)if(i)N=m||a;else return;R[xi]&&R[xi](!0);const $=T[E];$&&Tr(t,$)&&$.el[xi]&&$.el[xi](),S(N,[R])},enter(R){let N=c,$=l,X=u;if(!n.isMounted)if(i)N=_||c,$=y||l,X=v||u;else return;let B=!1;const ce=R[Xl]=ze=>{B||(B=!0,ze?S(X,[R]):S($,[R]),k.delayedLeave&&k.delayedLeave(),R[Xl]=void 0)};N?I(N,[R,ce]):ce()},leave(R,N){const $=String(t.key);if(R[Xl]&&R[Xl](!0),n.isUnmounting)return N();S(h,[R]);let X=!1;const B=R[xi]=ce=>{X||(X=!0,N(),ce?S(g,[R]):S(f,[R]),R[xi]=void 0,T[$]===t&&delete T[$])};T[$]=t,d?I(d,[R,B]):B()},clone(R){return Ec(R,e,n,s)}};return k}function Af(t){if(od(t))return t=Qi(t),t.children=null,t}function ib(t){return od(t)?t.children?t.children[0]:void 0:t}function Tc(t,e){t.shapeFlag&6&&t.component?Tc(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function mm(t,e=!1,n){let s=[],i=0;for(let r=0;r<t.length;r++){let o=t[r];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:r);o.type===me?(o.patchFlag&128&&i++,s=s.concat(mm(o.children,e,a))):(e||o.type!==Hn)&&s.push(a!=null?Qi(o,{key:a}):o)}if(i>1)for(let r=0;r<s.length;r++)s[r].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function ui(t,e){return Ee(t)?Ot({name:t.name},e,{setup:t}):t}const Ja=t=>!!t.type.__asyncLoader,od=t=>t.type.__isKeepAlive;function lA(t,e){lT(t,"a",e)}function uA(t,e){lT(t,"da",e)}function lT(t,e,n=Kt){const s=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(ad(e,s,n),n){let i=n.parent;for(;i&&i.parent;)od(i.parent.vnode)&&hA(s,e,n,i),i=i.parent}}function hA(t,e,n,s){const i=ad(e,t,s,!0);fT(()=>{nm(s[e],i)},n)}function ad(t,e,n=Kt,s=!1){if(n){const i=n[t]||(n[t]=[]),r=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;no();const a=sl(n),c=$n(e,n,t,o);return a(),so(),c});return s?i.unshift(r):i.push(r),r}}const hi=t=>(e,n=Kt)=>(!hd||t==="sp")&&ad(t,(...s)=>e(...s),n),dA=hi("bm"),uT=hi("m"),fA=hi("bu"),hT=hi("u"),dT=hi("bum"),fT=hi("um"),pA=hi("sp"),gA=hi("rtg"),mA=hi("rtc");function _A(t,e=Kt){ad("ec",t,e)}function ft(t,e,n,s){let i;const r=n&&n[s];if(re(t)||xt(t)){i=new Array(t.length);for(let o=0,a=t.length;o<a;o++)i[o]=e(t[o],o,void 0,r&&r[o])}else if(typeof t=="number"){i=new Array(t);for(let o=0;o<t;o++)i[o]=e(o+1,o,void 0,r&&r[o])}else if(Qe(t))if(t[Symbol.iterator])i=Array.from(t,(o,a)=>e(o,a,void 0,r&&r[a]));else{const o=Object.keys(t);i=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const l=o[a];i[a]=e(t[l],l,a,r&&r[a])}}else i=[];return n&&(n[s]=i),i}function Zt(t,e,n={},s,i){if(Vt.isCE||Vt.parent&&Ja(Vt.parent)&&Vt.parent.isCE)return e!=="default"&&(n.name=e),W("slot",n,s&&s());let r=t[e];r&&r._c&&(r._d=!1),C();const o=r&&pT(r(n)),a=De(me,{key:n.key||o&&o.key||`_${e}`},o||(s?s():[]),o&&t._===1?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),r&&r._c&&(r._d=!0),a}function pT(t){return t.some(e=>lh(e)?!(e.type===Hn||e.type===me&&!pT(e.children)):!0)?t:null}function yA(t,e){const n={};for(const s in t)n[e&&/[A-Z]/.test(s)?`on:${s}`:Iu(s)]=t[s];return n}const Vp=t=>t?IT(t)?dd(t)||t.proxy:Vp(t.parent):null,Za=Ot(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Vp(t.parent),$root:t=>Vp(t.root),$emit:t=>t.emit,$options:t=>_m(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,fm(t.update)}),$nextTick:t=>t.n||(t.n=dm.bind(t.proxy)),$watch:t=>oA.bind(t)}),Pf=(t,e)=>t!==tt&&!t.__isScriptSetup&&Fe(t,e),bA={get({_:t},e){const{ctx:n,setupState:s,data:i,props:r,accessCache:o,type:a,appContext:c}=t;let l;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return s[e];case 2:return i[e];case 4:return n[e];case 3:return r[e]}else{if(Pf(s,e))return o[e]=1,s[e];if(i!==tt&&Fe(i,e))return o[e]=2,i[e];if((l=t.propsOptions[0])&&Fe(l,e))return o[e]=3,r[e];if(n!==tt&&Fe(n,e))return o[e]=4,n[e];Fp&&(o[e]=0)}}const u=Za[e];let h,d;if(u)return e==="$attrs"&&Rn(t,"get",e),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==tt&&Fe(n,e))return o[e]=4,n[e];if(d=c.config.globalProperties,Fe(d,e))return d[e]},set({_:t},e,n){const{data:s,setupState:i,ctx:r}=t;return Pf(i,e)?(i[e]=n,!0):s!==tt&&Fe(s,e)?(s[e]=n,!0):Fe(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:i,propsOptions:r}},o){let a;return!!n[o]||t!==tt&&Fe(t,o)||Pf(e,o)||(a=r[0])&&Fe(a,o)||Fe(s,o)||Fe(Za,o)||Fe(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Fe(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function rb(t){return re(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Fp=!0;function vA(t){const e=_m(t),n=t.proxy,s=t.ctx;Fp=!1,e.beforeCreate&&ob(e.beforeCreate,t,"bc");const{data:i,computed:r,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:g,activated:m,deactivated:_,beforeDestroy:y,beforeUnmount:v,destroyed:E,unmounted:T,render:S,renderTracked:I,renderTriggered:k,errorCaptured:R,serverPrefetch:N,expose:$,inheritAttrs:X,components:B,directives:ce,filters:ze}=e;if(l&&wA(l,s,null),o)for(const le in o){const ye=o[le];Ee(ye)&&(s[le]=ye.bind(n))}if(i){const le=i.call(n,n);Qe(le)&&(t.data=nd(le))}if(Fp=!0,r)for(const le in r){const ye=r[le],Xe=Ee(ye)?ye.bind(n,n):Ee(ye.get)?ye.get.bind(n,n):Un,dn=!Ee(ye)&&Ee(ye.set)?ye.set.bind(n):Un,fn=Zn({get:Xe,set:dn});Object.defineProperty(s,le,{enumerable:!0,configurable:!0,get:()=>fn.value,set:Et=>fn.value=Et})}if(a)for(const le in a)gT(a[le],s,n,le);if(c){const le=Ee(c)?c.call(n):c;Reflect.ownKeys(le).forEach(ye=>{Au(ye,le[ye])})}u&&ob(u,t,"c");function ue(le,ye){re(ye)?ye.forEach(Xe=>le(Xe.bind(n))):ye&&le(ye.bind(n))}if(ue(dA,h),ue(uT,d),ue(fA,f),ue(hT,g),ue(lA,m),ue(uA,_),ue(_A,R),ue(mA,I),ue(gA,k),ue(dT,v),ue(fT,T),ue(pA,N),re($))if($.length){const le=t.exposed||(t.exposed={});$.forEach(ye=>{Object.defineProperty(le,ye,{get:()=>n[ye],set:Xe=>n[ye]=Xe})})}else t.exposed||(t.exposed={});S&&t.render===Un&&(t.render=S),X!=null&&(t.inheritAttrs=X),B&&(t.components=B),ce&&(t.directives=ce)}function wA(t,e,n=Un){re(t)&&(t=Bp(t));for(const s in t){const i=t[s];let r;Qe(i)?"default"in i?r=Ss(i.from||s,i.default,!0):r=Ss(i.from||s):r=Ss(i),In(r)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[s]=r}}function ob(t,e,n){$n(re(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function gT(t,e,n,s){const i=s.includes(".")?rT(n,s):()=>n[s];if(xt(t)){const r=e[t];Ee(r)&&ku(i,r)}else if(Ee(t))ku(i,t.bind(n));else if(Qe(t))if(re(t))t.forEach(r=>gT(r,e,n,s));else{const r=Ee(t.handler)?t.handler.bind(n):e[t.handler];Ee(r)&&ku(i,r,t)}}function _m(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,a=r.get(e);let c;return a?c=a:!i.length&&!n&&!s?c=e:(c={},i.length&&i.forEach(l=>ch(c,l,o,!0)),ch(c,e,o)),Qe(e)&&r.set(e,c),c}function ch(t,e,n,s=!1){const{mixins:i,extends:r}=e;r&&ch(t,r,n,!0),i&&i.forEach(o=>ch(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=EA[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const EA={data:ab,props:cb,emits:cb,methods:Va,computed:Va,beforeCreate:gn,created:gn,beforeMount:gn,mounted:gn,beforeUpdate:gn,updated:gn,beforeDestroy:gn,beforeUnmount:gn,destroyed:gn,unmounted:gn,activated:gn,deactivated:gn,errorCaptured:gn,serverPrefetch:gn,components:Va,directives:Va,watch:SA,provide:ab,inject:TA};function ab(t,e){return e?t?function(){return Ot(Ee(t)?t.call(this,this):t,Ee(e)?e.call(this,this):e)}:e:t}function TA(t,e){return Va(Bp(t),Bp(e))}function Bp(t){if(re(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function gn(t,e){return t?[...new Set([].concat(t,e))]:e}function Va(t,e){return t?Ot(Object.create(null),t,e):e}function cb(t,e){return t?re(t)&&re(e)?[...new Set([...t,...e])]:Ot(Object.create(null),rb(t),rb(e??{})):e}function SA(t,e){if(!t)return e;if(!e)return t;const n=Ot(Object.create(null),t);for(const s in e)n[s]=gn(t[s],e[s]);return n}function mT(){return{app:null,config:{isNativeTag:ok,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let RA=0;function IA(t,e){return function(s,i=null){Ee(s)||(s=Ot({},s)),i!=null&&!Qe(i)&&(i=null);const r=mT(),o=new WeakSet;let a=!1;const c=r.app={_uid:RA++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:QA,get config(){return r.config},set config(l){},use(l,...u){return o.has(l)||(l&&Ee(l.install)?(o.add(l),l.install(c,...u)):Ee(l)&&(o.add(l),l(c,...u))),c},mixin(l){return r.mixins.includes(l)||r.mixins.push(l),c},component(l,u){return u?(r.components[l]=u,c):r.components[l]},directive(l,u){return u?(r.directives[l]=u,c):r.directives[l]},mount(l,u,h){if(!a){const d=W(s,i);return d.appContext=r,h===!0?h="svg":h===!1&&(h=void 0),u&&e?e(d,l):t(d,l,h),a=!0,c._container=l,l.__vue_app__=c,dd(d.component)||d.component.proxy}},unmount(){a&&(t(null,c._container),delete c._container.__vue_app__)},provide(l,u){return r.provides[l]=u,c},runWithContext(l){const u=ec;ec=c;try{return l()}finally{ec=u}}};return c}}let ec=null;function Au(t,e){if(Kt){let n=Kt.provides;const s=Kt.parent&&Kt.parent.provides;s===n&&(n=Kt.provides=Object.create(s)),n[t]=e}}function Ss(t,e,n=!1){const s=Kt||Vt;if(s||ec){const i=s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:ec._context.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Ee(e)?e.call(s&&s.proxy):e}}function xA(t,e,n,s=!1){const i={},r={};rh(r,ld,1),t.propsDefaults=Object.create(null),_T(t,e,i,r);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=s?i:zE(i):t.type.props?t.props=i:t.props=r,t.attrs=r}function CA(t,e,n,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=t,a=Ne(i),[c]=t.propsOptions;let l=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(id(t.emitsOptions,d))continue;const f=e[d];if(c)if(Fe(r,d))f!==r[d]&&(r[d]=f,l=!0);else{const g=Ls(d);i[g]=Up(c,a,g,f,t,!1)}else f!==r[d]&&(r[d]=f,l=!0)}}}else{_T(t,e,i,r)&&(l=!0);let u;for(const h in a)(!e||!Fe(e,h)&&((u=to(h))===h||!Fe(e,u)))&&(c?n&&(n[h]!==void 0||n[u]!==void 0)&&(i[h]=Up(c,a,h,void 0,t,!0)):delete i[h]);if(r!==a)for(const h in r)(!e||!Fe(e,h))&&(delete r[h],l=!0)}l&&ti(t,"set","$attrs")}function _T(t,e,n,s){const[i,r]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(Xa(c))continue;const l=e[c];let u;i&&Fe(i,u=Ls(c))?!r||!r.includes(u)?n[u]=l:(a||(a={}))[u]=l:id(t.emitsOptions,c)||(!(c in s)||l!==s[c])&&(s[c]=l,o=!0)}if(r){const c=Ne(n),l=a||tt;for(let u=0;u<r.length;u++){const h=r[u];n[h]=Up(i,c,h,l[h],t,!Fe(l,h))}}return o}function Up(t,e,n,s,i,r){const o=t[n];if(o!=null){const a=Fe(o,"default");if(a&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Ee(c)){const{propsDefaults:l}=i;if(n in l)s=l[n];else{const u=sl(i);s=l[n]=c.call(null,e),u()}}else s=c}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===to(n))&&(s=!0))}return s}function yT(t,e,n=!1){const s=e.propsCache,i=s.get(t);if(i)return i;const r=t.props,o={},a=[];let c=!1;if(!Ee(t)){const u=h=>{c=!0;const[d,f]=yT(h,e,!0);Ot(o,d),f&&a.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!r&&!c)return Qe(t)&&s.set(t,Do),Do;if(re(r))for(let u=0;u<r.length;u++){const h=Ls(r[u]);lb(h)&&(o[h]=tt)}else if(r)for(const u in r){const h=Ls(u);if(lb(h)){const d=r[u],f=o[h]=re(d)||Ee(d)?{type:d}:Ot({},d);if(f){const g=db(Boolean,f.type),m=db(String,f.type);f[0]=g>-1,f[1]=m<0||g<m,(g>-1||Fe(f,"default"))&&a.push(h)}}}const l=[o,a];return Qe(t)&&s.set(t,l),l}function lb(t){return t[0]!=="$"&&!Xa(t)}function ub(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function hb(t,e){return ub(t)===ub(e)}function db(t,e){return re(e)?e.findIndex(n=>hb(n,t)):Ee(e)&&hb(e,t)?0:-1}const bT=t=>t[0]==="_"||t==="$stable",ym=t=>re(t)?t.map(ps):[ps(t)],kA=(t,e,n)=>{if(e._n)return e;const s=jr((...i)=>ym(e(...i)),n);return s._c=!1,s},vT=(t,e,n)=>{const s=t._ctx;for(const i in t){if(bT(i))continue;const r=t[i];if(Ee(r))e[i]=kA(i,r,s);else if(r!=null){const o=ym(r);e[i]=()=>o}}},wT=(t,e)=>{const n=ym(e);t.slots.default=()=>n},AA=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Ne(e),rh(e,"_",n)):vT(e,t.slots={})}else t.slots={},e&&wT(t,e);rh(t.slots,ld,1)},PA=(t,e,n)=>{const{vnode:s,slots:i}=t;let r=!0,o=tt;if(s.shapeFlag&32){const a=e._;a?n&&a===1?r=!1:(Ot(i,e),!n&&a===1&&delete i._):(r=!e.$stable,vT(e,i)),o=e}else e&&(wT(t,e),o={default:1});if(r)for(const a in i)!bT(a)&&o[a]==null&&delete i[a]};function $p(t,e,n,s,i=!1){if(re(t)){t.forEach((d,f)=>$p(d,e&&(re(e)?e[f]:e),n,s,i));return}if(Ja(s)&&!i)return;const r=s.shapeFlag&4?dd(s.component)||s.component.proxy:s.el,o=i?null:r,{i:a,r:c}=t,l=e&&e.r,u=a.refs===tt?a.refs={}:a.refs,h=a.setupState;if(l!=null&&l!==c&&(xt(l)?(u[l]=null,Fe(h,l)&&(h[l]=null)):In(l)&&(l.value=null)),Ee(c))Hi(c,a,12,[o,u]);else{const d=xt(c),f=In(c);if(d||f){const g=()=>{if(t.f){const m=d?Fe(h,c)?h[c]:u[c]:c.value;i?re(m)&&nm(m,r):re(m)?m.includes(r)||m.push(r):d?(u[c]=[r],Fe(h,c)&&(h[c]=u[c])):(c.value=[r],t.k&&(u[t.k]=c.value))}else d?(u[c]=o,Fe(h,c)&&(h[c]=o)):f&&(c.value=o,t.k&&(u[t.k]=o))};o?(g.id=-1,bn(g,n)):g()}}}const bn=sA;function DA(t){return OA(t)}function OA(t,e){const n=CE();n.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:h,nextSibling:d,setScopeId:f=Un,insertStaticContent:g}=t,m=(b,w,A,V=null,P=null,z=null,Y=void 0,H=null,j=!!w.dynamicChildren)=>{if(b===w)return;b&&!Tr(b,w)&&(V=M(b),Et(b,P,z,!0),b=null),w.patchFlag===-2&&(j=!1,w.dynamicChildren=null);const{type:U,ref:Z,shapeFlag:oe}=w;switch(U){case cd:_(b,w,A,V);break;case Hn:y(b,w,A,V);break;case Pu:b==null&&v(w,A,V,Y);break;case me:B(b,w,A,V,P,z,Y,H,j);break;default:oe&1?S(b,w,A,V,P,z,Y,H,j):oe&6?ce(b,w,A,V,P,z,Y,H,j):(oe&64||oe&128)&&U.process(b,w,A,V,P,z,Y,H,j,ee)}Z!=null&&P&&$p(Z,b&&b.ref,z,w||b,!w)},_=(b,w,A,V)=>{if(b==null)s(w.el=a(w.children),A,V);else{const P=w.el=b.el;w.children!==b.children&&l(P,w.children)}},y=(b,w,A,V)=>{b==null?s(w.el=c(w.children||""),A,V):w.el=b.el},v=(b,w,A,V)=>{[b.el,b.anchor]=g(b.children,w,A,V,b.el,b.anchor)},E=({el:b,anchor:w},A,V)=>{let P;for(;b&&b!==w;)P=d(b),s(b,A,V),b=P;s(w,A,V)},T=({el:b,anchor:w})=>{let A;for(;b&&b!==w;)A=d(b),i(b),b=A;i(w)},S=(b,w,A,V,P,z,Y,H,j)=>{w.type==="svg"?Y="svg":w.type==="math"&&(Y="mathml"),b==null?I(w,A,V,P,z,Y,H,j):N(b,w,P,z,Y,H,j)},I=(b,w,A,V,P,z,Y,H)=>{let j,U;const{props:Z,shapeFlag:oe,transition:ne,dirs:pe}=b;if(j=b.el=o(b.type,z,Z&&Z.is,Z),oe&8?u(j,b.children):oe&16&&R(b.children,j,null,V,P,Df(b,z),Y,H),pe&&hr(b,null,V,"created"),k(j,b,b.scopeId,Y,V),Z){for(const Ke in Z)Ke!=="value"&&!Xa(Ke)&&r(j,Ke,null,Z[Ke],z,b.children,V,P,ut);"value"in Z&&r(j,"value",null,Z.value,z),(U=Z.onVnodeBeforeMount)&&us(U,V,b)}pe&&hr(b,null,V,"beforeMount");const Ce=MA(P,ne);Ce&&ne.beforeEnter(j),s(j,w,A),((U=Z&&Z.onVnodeMounted)||Ce||pe)&&bn(()=>{U&&us(U,V,b),Ce&&ne.enter(j),pe&&hr(b,null,V,"mounted")},P)},k=(b,w,A,V,P)=>{if(A&&f(b,A),V)for(let z=0;z<V.length;z++)f(b,V[z]);if(P){let z=P.subTree;if(w===z){const Y=P.vnode;k(b,Y,Y.scopeId,Y.slotScopeIds,P.parent)}}},R=(b,w,A,V,P,z,Y,H,j=0)=>{for(let U=j;U<b.length;U++){const Z=b[U]=H?Ci(b[U]):ps(b[U]);m(null,Z,w,A,V,P,z,Y,H)}},N=(b,w,A,V,P,z,Y)=>{const H=w.el=b.el;let{patchFlag:j,dynamicChildren:U,dirs:Z}=w;j|=b.patchFlag&16;const oe=b.props||tt,ne=w.props||tt;let pe;if(A&&dr(A,!1),(pe=ne.onVnodeBeforeUpdate)&&us(pe,A,w,b),Z&&hr(w,b,A,"beforeUpdate"),A&&dr(A,!0),U?$(b.dynamicChildren,U,H,A,V,Df(w,P),z):Y||ye(b,w,H,null,A,V,Df(w,P),z,!1),j>0){if(j&16)X(H,w,oe,ne,A,V,P);else if(j&2&&oe.class!==ne.class&&r(H,"class",null,ne.class,P),j&4&&r(H,"style",oe.style,ne.style,P),j&8){const Ce=w.dynamicProps;for(let Ke=0;Ke<Ce.length;Ke++){const dt=Ce[Ke],Ut=oe[dt],Yn=ne[dt];(Yn!==Ut||dt==="value")&&r(H,dt,Ut,Yn,P,b.children,A,V,ut)}}j&1&&b.children!==w.children&&u(H,w.children)}else!Y&&U==null&&X(H,w,oe,ne,A,V,P);((pe=ne.onVnodeUpdated)||Z)&&bn(()=>{pe&&us(pe,A,w,b),Z&&hr(w,b,A,"updated")},V)},$=(b,w,A,V,P,z,Y)=>{for(let H=0;H<w.length;H++){const j=b[H],U=w[H],Z=j.el&&(j.type===me||!Tr(j,U)||j.shapeFlag&70)?h(j.el):A;m(j,U,Z,null,V,P,z,Y,!0)}},X=(b,w,A,V,P,z,Y)=>{if(A!==V){if(A!==tt)for(const H in A)!Xa(H)&&!(H in V)&&r(b,H,A[H],null,Y,w.children,P,z,ut);for(const H in V){if(Xa(H))continue;const j=V[H],U=A[H];j!==U&&H!=="value"&&r(b,H,U,j,Y,w.children,P,z,ut)}"value"in V&&r(b,"value",A.value,V.value,Y)}},B=(b,w,A,V,P,z,Y,H,j)=>{const U=w.el=b?b.el:a(""),Z=w.anchor=b?b.anchor:a("");let{patchFlag:oe,dynamicChildren:ne,slotScopeIds:pe}=w;pe&&(H=H?H.concat(pe):pe),b==null?(s(U,A,V),s(Z,A,V),R(w.children||[],A,Z,P,z,Y,H,j)):oe>0&&oe&64&&ne&&b.dynamicChildren?($(b.dynamicChildren,ne,A,P,z,Y,H),(w.key!=null||P&&w===P.subTree)&&ET(b,w,!0)):ye(b,w,A,Z,P,z,Y,H,j)},ce=(b,w,A,V,P,z,Y,H,j)=>{w.slotScopeIds=H,b==null?w.shapeFlag&512?P.ctx.activate(w,A,V,Y,j):ze(w,A,V,P,z,Y,j):xe(b,w,j)},ze=(b,w,A,V,P,z,Y)=>{const H=b.component=zA(b,V,P);if(od(b)&&(H.ctx.renderer=ee),jA(H),H.asyncDep){if(P&&P.registerDep(H,ue),!b.el){const j=H.subTree=W(Hn);y(null,j,w,A)}}else ue(H,b,w,A,P,z,Y)},xe=(b,w,A)=>{const V=w.component=b.component;if(eA(b,w,A))if(V.asyncDep&&!V.asyncResolved){le(V,w,A);return}else V.next=w,Kk(V.update),V.effect.dirty=!0,V.update();else w.el=b.el,V.vnode=w},ue=(b,w,A,V,P,z,Y)=>{const H=()=>{if(b.isMounted){let{next:Z,bu:oe,u:ne,parent:pe,vnode:Ce}=b;{const _o=TT(b);if(_o){Z&&(Z.el=Ce.el,le(b,Z,Y)),_o.asyncDep.then(()=>{b.isUnmounted||H()});return}}let Ke=Z,dt;dr(b,!1),Z?(Z.el=Ce.el,le(b,Z,Y)):Z=Ce,oe&&xu(oe),(dt=Z.props&&Z.props.onVnodeBeforeUpdate)&&us(dt,pe,Z,Ce),dr(b,!0);const Ut=kf(b),Yn=b.subTree;b.subTree=Ut,m(Yn,Ut,h(Yn.el),M(Yn),b,P,z),Z.el=Ut.el,Ke===null&&tA(b,Ut.el),ne&&bn(ne,P),(dt=Z.props&&Z.props.onVnodeUpdated)&&bn(()=>us(dt,pe,Z,Ce),P)}else{let Z;const{el:oe,props:ne}=w,{bm:pe,m:Ce,parent:Ke}=b,dt=Ja(w);if(dr(b,!1),pe&&xu(pe),!dt&&(Z=ne&&ne.onVnodeBeforeMount)&&us(Z,Ke,w),dr(b,!0),oe&&ht){const Ut=()=>{b.subTree=kf(b),ht(oe,b.subTree,b,P,null)};dt?w.type.__asyncLoader().then(()=>!b.isUnmounted&&Ut()):Ut()}else{const Ut=b.subTree=kf(b);m(null,Ut,A,V,b,P,z),w.el=Ut.el}if(Ce&&bn(Ce,P),!dt&&(Z=ne&&ne.onVnodeMounted)){const Ut=w;bn(()=>us(Z,Ke,Ut),P)}(w.shapeFlag&256||Ke&&Ja(Ke.vnode)&&Ke.vnode.shapeFlag&256)&&b.a&&bn(b.a,P),b.isMounted=!0,w=A=V=null}},j=b.effect=new im(H,Un,()=>fm(U),b.scope),U=b.update=()=>{j.dirty&&j.run()};U.id=b.uid,dr(b,!0),U()},le=(b,w,A)=>{w.component=b;const V=b.vnode.props;b.vnode=w,b.next=null,CA(b,w.props,V,A),PA(b,w.children,A),no(),tb(b),so()},ye=(b,w,A,V,P,z,Y,H,j=!1)=>{const U=b&&b.children,Z=b?b.shapeFlag:0,oe=w.children,{patchFlag:ne,shapeFlag:pe}=w;if(ne>0){if(ne&128){dn(U,oe,A,V,P,z,Y,H,j);return}else if(ne&256){Xe(U,oe,A,V,P,z,Y,H,j);return}}pe&8?(Z&16&&ut(U,P,z),oe!==U&&u(A,oe)):Z&16?pe&16?dn(U,oe,A,V,P,z,Y,H,j):ut(U,P,z,!0):(Z&8&&u(A,""),pe&16&&R(oe,A,V,P,z,Y,H,j))},Xe=(b,w,A,V,P,z,Y,H,j)=>{b=b||Do,w=w||Do;const U=b.length,Z=w.length,oe=Math.min(U,Z);let ne;for(ne=0;ne<oe;ne++){const pe=w[ne]=j?Ci(w[ne]):ps(w[ne]);m(b[ne],pe,A,null,P,z,Y,H,j)}U>Z?ut(b,P,z,!0,!1,oe):R(w,A,V,P,z,Y,H,j,oe)},dn=(b,w,A,V,P,z,Y,H,j)=>{let U=0;const Z=w.length;let oe=b.length-1,ne=Z-1;for(;U<=oe&&U<=ne;){const pe=b[U],Ce=w[U]=j?Ci(w[U]):ps(w[U]);if(Tr(pe,Ce))m(pe,Ce,A,null,P,z,Y,H,j);else break;U++}for(;U<=oe&&U<=ne;){const pe=b[oe],Ce=w[ne]=j?Ci(w[ne]):ps(w[ne]);if(Tr(pe,Ce))m(pe,Ce,A,null,P,z,Y,H,j);else break;oe--,ne--}if(U>oe){if(U<=ne){const pe=ne+1,Ce=pe<Z?w[pe].el:V;for(;U<=ne;)m(null,w[U]=j?Ci(w[U]):ps(w[U]),A,Ce,P,z,Y,H,j),U++}}else if(U>ne)for(;U<=oe;)Et(b[U],P,z,!0),U++;else{const pe=U,Ce=U,Ke=new Map;for(U=Ce;U<=ne;U++){const Cn=w[U]=j?Ci(w[U]):ps(w[U]);Cn.key!=null&&Ke.set(Cn.key,U)}let dt,Ut=0;const Yn=ne-Ce+1;let _o=!1,zy=0;const va=new Array(Yn);for(U=0;U<Yn;U++)va[U]=0;for(U=pe;U<=oe;U++){const Cn=b[U];if(Ut>=Yn){Et(Cn,P,z,!0);continue}let ls;if(Cn.key!=null)ls=Ke.get(Cn.key);else for(dt=Ce;dt<=ne;dt++)if(va[dt-Ce]===0&&Tr(Cn,w[dt])){ls=dt;break}ls===void 0?Et(Cn,P,z,!0):(va[ls-Ce]=U+1,ls>=zy?zy=ls:_o=!0,m(Cn,w[ls],A,null,P,z,Y,H,j),Ut++)}const jy=_o?LA(va):Do;for(dt=jy.length-1,U=Yn-1;U>=0;U--){const Cn=Ce+U,ls=w[Cn],Wy=Cn+1<Z?w[Cn+1].el:V;va[U]===0?m(null,ls,A,Wy,P,z,Y,H,j):_o&&(dt<0||U!==jy[dt]?fn(ls,A,Wy,2):dt--)}}},fn=(b,w,A,V,P=null)=>{const{el:z,type:Y,transition:H,children:j,shapeFlag:U}=b;if(U&6){fn(b.component.subTree,w,A,V);return}if(U&128){b.suspense.move(w,A,V);return}if(U&64){Y.move(b,w,A,ee);return}if(Y===me){s(z,w,A);for(let oe=0;oe<j.length;oe++)fn(j[oe],w,A,V);s(b.anchor,w,A);return}if(Y===Pu){E(b,w,A);return}if(V!==2&&U&1&&H)if(V===0)H.beforeEnter(z),s(z,w,A),bn(()=>H.enter(z),P);else{const{leave:oe,delayLeave:ne,afterLeave:pe}=H,Ce=()=>s(z,w,A),Ke=()=>{oe(z,()=>{Ce(),pe&&pe()})};ne?ne(z,Ce,Ke):Ke()}else s(z,w,A)},Et=(b,w,A,V=!1,P=!1)=>{const{type:z,props:Y,ref:H,children:j,dynamicChildren:U,shapeFlag:Z,patchFlag:oe,dirs:ne}=b;if(H!=null&&$p(H,null,A,b,!0),Z&256){w.ctx.deactivate(b);return}const pe=Z&1&&ne,Ce=!Ja(b);let Ke;if(Ce&&(Ke=Y&&Y.onVnodeBeforeUnmount)&&us(Ke,w,b),Z&6)cs(b.component,A,V);else{if(Z&128){b.suspense.unmount(A,V);return}pe&&hr(b,null,w,"beforeUnmount"),Z&64?b.type.remove(b,w,A,P,ee,V):U&&(z!==me||oe>0&&oe&64)?ut(U,w,A,!1,!0):(z===me&&oe&384||!P&&Z&16)&&ut(j,w,A),V&&Nn(b)}(Ce&&(Ke=Y&&Y.onVnodeUnmounted)||pe)&&bn(()=>{Ke&&us(Ke,w,b),pe&&hr(b,null,w,"unmounted")},A)},Nn=b=>{const{type:w,el:A,anchor:V,transition:P}=b;if(w===me){_n(A,V);return}if(w===Pu){T(b);return}const z=()=>{i(A),P&&!P.persisted&&P.afterLeave&&P.afterLeave()};if(b.shapeFlag&1&&P&&!P.persisted){const{leave:Y,delayLeave:H}=P,j=()=>Y(A,z);H?H(b.el,z,j):j()}else z()},_n=(b,w)=>{let A;for(;b!==w;)A=d(b),i(b),b=A;i(w)},cs=(b,w,A)=>{const{bum:V,scope:P,update:z,subTree:Y,um:H}=b;V&&xu(V),P.stop(),z&&(z.active=!1,Et(Y,b,w,A)),H&&bn(H,w),bn(()=>{b.isUnmounted=!0},w),w&&w.pendingBranch&&!w.isUnmounted&&b.asyncDep&&!b.asyncResolved&&b.suspenseId===w.pendingId&&(w.deps--,w.deps===0&&w.resolve())},ut=(b,w,A,V=!1,P=!1,z=0)=>{for(let Y=z;Y<b.length;Y++)Et(b[Y],w,A,V,P)},M=b=>b.shapeFlag&6?M(b.component.subTree):b.shapeFlag&128?b.suspense.next():d(b.anchor||b.el);let J=!1;const K=(b,w,A)=>{b==null?w._vnode&&Et(w._vnode,null,null,!0):m(w._vnode||null,b,w,null,null,null,A),J||(J=!0,tb(),ZE(),J=!1),w._vnode=b},ee={p:m,um:Et,m:fn,r:Nn,mt:ze,mc:R,pc:ye,pbc:$,n:M,o:t};let He,ht;return e&&([He,ht]=e(ee)),{render:K,hydrate:He,createApp:IA(K,He)}}function Df({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function dr({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function MA(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function ET(t,e,n=!1){const s=t.children,i=e.children;if(re(s)&&re(i))for(let r=0;r<s.length;r++){const o=s[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=Ci(i[r]),a.el=o.el),n||ET(o,a)),a.type===cd&&(a.el=o.el)}}function LA(t){const e=t.slice(),n=[0];let s,i,r,o,a;const c=t.length;for(s=0;s<c;s++){const l=t[s];if(l!==0){if(i=n[n.length-1],t[i]<l){e[s]=i,n.push(s);continue}for(r=0,o=n.length-1;r<o;)a=r+o>>1,t[n[a]]<l?r=a+1:o=a;l<t[n[r]]&&(r>0&&(e[s]=n[r-1]),n[r]=s)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=e[o];return n}function TT(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:TT(e)}const NA=t=>t.__isTeleport,me=Symbol.for("v-fgt"),cd=Symbol.for("v-txt"),Hn=Symbol.for("v-cmt"),Pu=Symbol.for("v-stc"),tc=[];let es=null;function C(t=!1){tc.push(es=t?null:[])}function VA(){tc.pop(),es=tc[tc.length-1]||null}let Sc=1;function fb(t){Sc+=t}function ST(t){return t.dynamicChildren=Sc>0?es||Do:null,VA(),Sc>0&&es&&es.push(t),t}function O(t,e,n,s,i,r){return ST(p(t,e,n,s,i,r,!0))}function De(t,e,n,s,i){return ST(W(t,e,n,s,i,!0))}function lh(t){return t?t.__v_isVNode===!0:!1}function Tr(t,e){return t.type===e.type&&t.key===e.key}const ld="__vInternal",RT=({key:t})=>t??null,Du=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?xt(t)||In(t)||Ee(t)?{i:Vt,r:t,k:e,f:!!n}:t:null);function p(t,e=null,n=null,s=0,i=null,r=t===me?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&RT(e),ref:e&&Du(e),scopeId:rd,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Vt};return a?(bm(c,n),r&128&&t.normalize(c)):n&&(c.shapeFlag|=xt(n)?8:16),Sc>0&&!o&&es&&(c.patchFlag>0||r&6)&&c.patchFlag!==32&&es.push(c),c}const W=FA;function FA(t,e=null,n=null,s=0,i=null,r=!1){if((!t||t===nT)&&(t=Hn),lh(t)){const a=Qi(t,e,!0);return n&&bm(a,n),Sc>0&&!r&&es&&(a.shapeFlag&6?es[es.indexOf(t)]=a:es.push(a)),a.patchFlag|=-2,a}if(YA(t)&&(t=t.__vccOpts),e){e=BA(e);let{class:a,style:c}=e;a&&!xt(a)&&(e.class=Tt(a)),Qe(c)&&(WE(c)&&!re(c)&&(c=Ot({},c)),e.style=nl(c))}const o=xt(t)?1:nA(t)?128:NA(t)?64:Qe(t)?4:Ee(t)?2:0;return p(t,e,n,s,i,o,r,!0)}function BA(t){return t?WE(t)||ld in t?Ot({},t):t:null}function Qi(t,e,n=!1){const{props:s,ref:i,patchFlag:r,children:o}=t,a=e?ud(s||{},e):s;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&RT(a),ref:e&&e.ref?n&&i?re(i)?i.concat(Du(e)):[i,Du(e)]:Du(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==me?r===-1?16:r|16:r,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Qi(t.ssContent),ssFallback:t.ssFallback&&Qi(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function on(t=" ",e=0){return W(cd,null,t,e)}function UA(t,e){const n=W(Pu,null,t);return n.staticCount=e,n}function be(t="",e=!1){return e?(C(),De(Hn,null,t)):W(Hn,null,t)}function ps(t){return t==null||typeof t=="boolean"?W(Hn):re(t)?W(me,null,t.slice()):typeof t=="object"?Ci(t):W(cd,null,String(t))}function Ci(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Qi(t)}function bm(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(re(e))n=16;else if(typeof e=="object")if(s&65){const i=e.default;i&&(i._c&&(i._d=!1),bm(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(ld in e)?e._ctx=Vt:i===3&&Vt&&(Vt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ee(e)?(e={default:e,_ctx:Vt},n=32):(e=String(e),s&64?(n=16,e=[on(e)]):n=8);t.children=e,t.shapeFlag|=n}function ud(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const i in s)if(i==="class")e.class!==s.class&&(e.class=Tt([e.class,s.class]));else if(i==="style")e.style=nl([e.style,s.style]);else if(Qh(i)){const r=e[i],o=s[i];o&&r!==o&&!(re(r)&&r.includes(o))&&(e[i]=r?[].concat(r,o):o)}else i!==""&&(e[i]=s[i])}return e}function us(t,e,n,s=null){$n(t,e,7,[n,s])}const $A=mT();let HA=0;function zA(t,e,n){const s=t.type,i=(e?e.appContext:t.appContext)||$A,r={uid:HA++,vnode:t,type:s,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new bk(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:yT(s,i),emitsOptions:tT(s,i),emit:null,emitted:null,propsDefaults:tt,inheritAttrs:s.inheritAttrs,ctx:tt,data:tt,props:tt,attrs:tt,slots:tt,refs:tt,setupState:tt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=Xk.bind(null,r),t.ce&&t.ce(r),r}let Kt=null;const vm=()=>Kt||Vt;let uh,Hp;{const t=CE(),e=(n,s)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(s),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};uh=e("__VUE_INSTANCE_SETTERS__",n=>Kt=n),Hp=e("__VUE_SSR_SETTERS__",n=>hd=n)}const sl=t=>{const e=Kt;return uh(t),t.scope.on(),()=>{t.scope.off(),uh(e)}},pb=()=>{Kt&&Kt.scope.off(),uh(null)};function IT(t){return t.vnode.shapeFlag&4}let hd=!1;function jA(t,e=!1){e&&Hp(e);const{props:n,children:s}=t.vnode,i=IT(t);xA(t,n,i,e),AA(t,s);const r=i?WA(t,e):void 0;return e&&Hp(!1),r}function WA(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=qE(new Proxy(t.ctx,bA));const{setup:s}=n;if(s){const i=t.setupContext=s.length>1?GA(t):null,r=sl(t);no();const o=Hi(s,t,0,[t.props,i]);if(so(),r(),RE(o)){if(o.then(pb,pb),e)return o.then(a=>{gb(t,a,e)}).catch(a=>{sd(a,t,0)});t.asyncDep=o}else gb(t,o,e)}else xT(t,e)}function gb(t,e,n){Ee(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Qe(e)&&(t.setupState=QE(e)),xT(t,n)}let mb;function xT(t,e,n){const s=t.type;if(!t.render){if(!e&&mb&&!s.render){const i=s.template||_m(t).template;if(i){const{isCustomElement:r,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:c}=s,l=Ot(Ot({isCustomElement:r,delimiters:a},o),c);s.render=mb(i,l)}}t.render=s.render||Un}{const i=sl(t);no();try{vA(t)}finally{so(),i()}}}function qA(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return Rn(t,"get","$attrs"),e[n]}}))}function GA(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return qA(t)},slots:t.slots,emit:t.emit,expose:e}}function dd(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(QE(qE(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Za)return Za[n](t)},has(e,n){return n in e||n in Za}}))}function KA(t,e=!0){return Ee(t)?t.displayName||t.name:t.name||e&&t.__name}function YA(t){return Ee(t)&&"__vccOpts"in t}const Zn=(t,e)=>$k(t,e,hd);function fd(t,e,n){const s=arguments.length;return s===2?Qe(e)&&!re(e)?lh(e)?W(t,null,[e]):W(t,e):W(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&lh(n)&&(n=[n]),W(t,e,n))}const QA="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const XA="http://www.w3.org/2000/svg",JA="http://www.w3.org/1998/Math/MathML",ki=typeof document<"u"?document:null,_b=ki&&ki.createElement("template"),ZA={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const i=e==="svg"?ki.createElementNS(XA,t):e==="mathml"?ki.createElementNS(JA,t):ki.createElement(t,n?{is:n}:void 0);return t==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:t=>ki.createTextNode(t),createComment:t=>ki.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ki.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,i,r){const o=n?n.previousSibling:e.lastChild;if(i&&(i===r||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===r||!(i=i.nextSibling)););else{_b.innerHTML=s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t;const a=_b.content;if(s==="svg"||s==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},_i="transition",wa="animation",jo=Symbol("_vtc"),hh=(t,{slots:e})=>fd(cA,kT(t),e);hh.displayName="Transition";const CT={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},eP=hh.props=Ot({},aT,CT),fr=(t,e=[])=>{re(t)?t.forEach(n=>n(...e)):t&&t(...e)},yb=t=>t?re(t)?t.some(e=>e.length>1):t.length>1:!1;function kT(t){const e={};for(const B in t)B in CT||(e[B]=t[B]);if(t.css===!1)return e;const{name:n="v",type:s,duration:i,enterFromClass:r=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:c=r,appearActiveClass:l=o,appearToClass:u=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,g=tP(i),m=g&&g[0],_=g&&g[1],{onBeforeEnter:y,onEnter:v,onEnterCancelled:E,onLeave:T,onLeaveCancelled:S,onBeforeAppear:I=y,onAppear:k=v,onAppearCancelled:R=E}=e,N=(B,ce,ze)=>{Ri(B,ce?u:a),Ri(B,ce?l:o),ze&&ze()},$=(B,ce)=>{B._isLeaving=!1,Ri(B,h),Ri(B,f),Ri(B,d),ce&&ce()},X=B=>(ce,ze)=>{const xe=B?k:v,ue=()=>N(ce,B,ze);fr(xe,[ce,ue]),bb(()=>{Ri(ce,B?c:r),Ws(ce,B?u:a),yb(xe)||vb(ce,s,m,ue)})};return Ot(e,{onBeforeEnter(B){fr(y,[B]),Ws(B,r),Ws(B,o)},onBeforeAppear(B){fr(I,[B]),Ws(B,c),Ws(B,l)},onEnter:X(!1),onAppear:X(!0),onLeave(B,ce){B._isLeaving=!0;const ze=()=>$(B,ce);Ws(B,h),PT(),Ws(B,d),bb(()=>{B._isLeaving&&(Ri(B,h),Ws(B,f),yb(T)||vb(B,s,_,ze))}),fr(T,[B,ze])},onEnterCancelled(B){N(B,!1),fr(E,[B])},onAppearCancelled(B){N(B,!0),fr(R,[B])},onLeaveCancelled(B){$(B),fr(S,[B])}})}function tP(t){if(t==null)return null;if(Qe(t))return[Of(t.enter),Of(t.leave)];{const e=Of(t);return[e,e]}}function Of(t){return hk(t)}function Ws(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[jo]||(t[jo]=new Set)).add(e)}function Ri(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[jo];n&&(n.delete(e),n.size||(t[jo]=void 0))}function bb(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let nP=0;function vb(t,e,n,s){const i=t._endId=++nP,r=()=>{i===t._endId&&s()};if(n)return setTimeout(r,n);const{type:o,timeout:a,propCount:c}=AT(t,e);if(!o)return s();const l=o+"end";let u=0;const h=()=>{t.removeEventListener(l,d),r()},d=f=>{f.target===t&&++u>=c&&h()};setTimeout(()=>{u<c&&h()},a+1),t.addEventListener(l,d)}function AT(t,e){const n=window.getComputedStyle(t),s=g=>(n[g]||"").split(", "),i=s(`${_i}Delay`),r=s(`${_i}Duration`),o=wb(i,r),a=s(`${wa}Delay`),c=s(`${wa}Duration`),l=wb(a,c);let u=null,h=0,d=0;e===_i?o>0&&(u=_i,h=o,d=r.length):e===wa?l>0&&(u=wa,h=l,d=c.length):(h=Math.max(o,l),u=h>0?o>l?_i:wa:null,d=u?u===_i?r.length:c.length:0);const f=u===_i&&/\b(transform|all)(,|$)/.test(s(`${_i}Property`).toString());return{type:u,timeout:h,propCount:d,hasTransform:f}}function wb(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>Eb(n)+Eb(t[s])))}function Eb(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function PT(){return document.body.offsetHeight}function sP(t,e,n){const s=t[jo];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const dh=Symbol("_vod"),DT=Symbol("_vsh"),So={beforeMount(t,{value:e},{transition:n}){t[dh]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Ea(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:s}){!e!=!n&&(s?e?(s.beforeEnter(t),Ea(t,!0),s.enter(t)):s.leave(t,()=>{Ea(t,!1)}):Ea(t,e))},beforeUnmount(t,{value:e}){Ea(t,e)}};function Ea(t,e){t.style.display=e?t[dh]:"none",t[DT]=!e}const iP=Symbol(""),rP=/(^|;)\s*display\s*:/;function oP(t,e,n){const s=t.style,i=xt(n);let r=!1;if(n&&!i){if(e)if(xt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Ou(s,a,"")}else for(const o in e)n[o]==null&&Ou(s,o,"");for(const o in n)o==="display"&&(r=!0),Ou(s,o,n[o])}else if(i){if(e!==n){const o=s[iP];o&&(n+=";"+o),s.cssText=n,r=rP.test(n)}}else e&&t.removeAttribute("style");dh in t&&(t[dh]=r?s.display:"",t[DT]&&(s.display="none"))}const Tb=/\s*!important$/;function Ou(t,e,n){if(re(n))n.forEach(s=>Ou(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=aP(t,e);Tb.test(n)?t.setProperty(to(s),n.replace(Tb,""),"important"):t[s]=n}}const Sb=["Webkit","Moz","ms"],Mf={};function aP(t,e){const n=Mf[e];if(n)return n;let s=Ls(e);if(s!=="filter"&&s in t)return Mf[e]=s;s=Zh(s);for(let i=0;i<Sb.length;i++){const r=Sb[i]+s;if(r in t)return Mf[e]=r}return e}const Rb="http://www.w3.org/1999/xlink";function cP(t,e,n,s,i){if(s&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(Rb,e.slice(6,e.length)):t.setAttributeNS(Rb,e,n);else{const r=_k(e);n==null||r&&!kE(n)?t.removeAttribute(e):t.setAttribute(e,r?"":n)}}function lP(t,e,n,s,i,r,o){if(e==="innerHTML"||e==="textContent"){s&&o(s,i,r),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const l=a==="OPTION"?t.getAttribute("value")||"":t.value,u=n??"";(l!==u||!("_value"in t))&&(t.value=u),n==null&&t.removeAttribute(e),t._value=n;return}let c=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=kE(n):n==null&&l==="string"?(n="",c=!0):l==="number"&&(n=0,c=!0)}try{t[e]=n}catch{}c&&t.removeAttribute(e)}function Sr(t,e,n,s){t.addEventListener(e,n,s)}function uP(t,e,n,s){t.removeEventListener(e,n,s)}const Ib=Symbol("_vei");function hP(t,e,n,s,i=null){const r=t[Ib]||(t[Ib]={}),o=r[e];if(s&&o)o.value=s;else{const[a,c]=dP(e);if(s){const l=r[e]=gP(s,i);Sr(t,a,l,c)}else o&&(uP(t,a,o,c),r[e]=void 0)}}const xb=/(?:Once|Passive|Capture)$/;function dP(t){let e;if(xb.test(t)){e={};let s;for(;s=t.match(xb);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):to(t.slice(2)),e]}let Lf=0;const fP=Promise.resolve(),pP=()=>Lf||(fP.then(()=>Lf=0),Lf=Date.now());function gP(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;$n(mP(s,n.value),e,5,[s])};return n.value=t,n.attached=pP(),n}function mP(t,e){if(re(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>i=>!i._stopped&&s&&s(i))}else return e}const Cb=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,_P=(t,e,n,s,i,r,o,a,c)=>{const l=i==="svg";e==="class"?sP(t,s,l):e==="style"?oP(t,n,s):Qh(e)?tm(e)||hP(t,e,n,s,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):yP(t,e,s,l))?lP(t,e,s,r,o,a,c):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),cP(t,e,s,l))};function yP(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&Cb(e)&&Ee(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Cb(e)&&xt(n)?!1:e in t}const OT=new WeakMap,MT=new WeakMap,fh=Symbol("_moveCb"),kb=Symbol("_enterCb"),LT={name:"TransitionGroup",props:Ot({},eP,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=vm(),s=oT();let i,r;return hT(()=>{if(!i.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!SP(i[0].el,n.vnode.el,o))return;i.forEach(wP),i.forEach(EP);const a=i.filter(TP);PT(),a.forEach(c=>{const l=c.el,u=l.style;Ws(l,o),u.transform=u.webkitTransform=u.transitionDuration="";const h=l[fh]=d=>{d&&d.target!==l||(!d||/transform$/.test(d.propertyName))&&(l.removeEventListener("transitionend",h),l[fh]=null,Ri(l,o))};l.addEventListener("transitionend",h)})}),()=>{const o=Ne(t),a=kT(o);let c=o.tag||me;i=r,r=e.default?mm(e.default()):[];for(let l=0;l<r.length;l++){const u=r[l];u.key!=null&&Tc(u,Ec(u,a,s,n))}if(i)for(let l=0;l<i.length;l++){const u=i[l];Tc(u,Ec(u,a,s,n)),OT.set(u,u.el.getBoundingClientRect())}return W(c,null,r)}}},bP=t=>delete t.mode;LT.props;const vP=LT;function wP(t){const e=t.el;e[fh]&&e[fh](),e[kb]&&e[kb]()}function EP(t){MT.set(t,t.el.getBoundingClientRect())}function TP(t){const e=OT.get(t),n=MT.get(t),s=e.left-n.left,i=e.top-n.top;if(s||i){const r=t.el.style;return r.transform=r.webkitTransform=`translate(${s}px,${i}px)`,r.transitionDuration="0s",t}}function SP(t,e,n){const s=t.cloneNode(),i=t[jo];i&&i.forEach(a=>{a.split(/\s+/).forEach(c=>c&&s.classList.remove(c))}),n.split(/\s+/).forEach(a=>a&&s.classList.add(a)),s.style.display="none";const r=e.nodeType===1?e:e.parentNode;r.appendChild(s);const{hasTransform:o}=AT(s);return r.removeChild(s),o}const ph=t=>{const e=t.props["onUpdate:modelValue"]||!1;return re(e)?n=>xu(e,n):e};function RP(t){t.target.composing=!0}function Ab(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const No=Symbol("_assign"),ve={created(t,{modifiers:{lazy:e,trim:n,number:s}},i){t[No]=ph(i);const r=s||i.props&&i.props.type==="number";Sr(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),r&&(a=Pp(a)),t[No](a)}),n&&Sr(t,"change",()=>{t.value=t.value.trim()}),e||(Sr(t,"compositionstart",RP),Sr(t,"compositionend",Ab),Sr(t,"change",Ab))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:s,number:i}},r){if(t[No]=ph(r),t.composing)return;const o=i||t.type==="number"?Pp(t.value):t.value,a=e??"";o!==a&&(document.activeElement===t&&t.type!=="range"&&(n||s&&t.value.trim()===a)||(t.value=a))}},Rc={deep:!0,created(t,e,n){t[No]=ph(n),Sr(t,"change",()=>{const s=t._modelValue,i=IP(t),r=t.checked,o=t[No];if(re(s)){const a=AE(s,i),c=a!==-1;if(r&&!c)o(s.concat(i));else if(!r&&c){const l=[...s];l.splice(a,1),o(l)}}else if(Xh(s)){const a=new Set(s);r?a.add(i):a.delete(i),o(a)}else o(NT(t,r))})},mounted:Pb,beforeUpdate(t,e,n){t[No]=ph(n),Pb(t,e,n)}};function Pb(t,{value:e,oldValue:n},s){t._modelValue=e,re(e)?t.checked=AE(e,s.props.value)>-1:Xh(e)?t.checked=e.has(s.props.value):e!==n&&(t.checked=ed(e,NT(t,!0)))}function IP(t){return"_value"in t?t._value:t.value}function NT(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const xP=["ctrl","shift","alt","meta"],CP={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>xP.some(n=>t[`${n}Key`]&&!e.includes(n))},Ye=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(i,...r)=>{for(let o=0;o<e.length;o++){const a=CP[e[o]];if(a&&a(i,e))return}return t(i,...r)})},kP={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},hs=(t,e)=>{const n=t._withKeys||(t._withKeys={}),s=e.join(".");return n[s]||(n[s]=i=>{if(!("key"in i))return;const r=to(i.key);if(e.some(o=>o===r||kP[o]===r))return t(i)})},AP=Ot({patchProp:_P},ZA);let Db;function PP(){return Db||(Db=DA(AP))}const VT=(...t)=>{const e=PP().createApp(...t),{mount:n}=e;return e.mount=s=>{const i=OP(s);if(!i)return;const r=e._component;!Ee(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,DP(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function DP(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function OP(t){return xt(t)?document.querySelector(t):t}const Ve=(t,e)=>{const n=t.__vccOpts||t;for(const[s,i]of e)n[s]=i;return n},MP={name:"App"};function LP(t,e,n,s,i,r){const o=te("router-view");return C(),De(o)}const NP=Ve(MP,[["render",LP]]);/*!
  * vue-router v4.3.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Ro=typeof document<"u";function VP(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const We=Object.assign;function Nf(t,e){const n={};for(const s in e){const i=e[s];n[s]=is(i)?i.map(t):t(i)}return n}const nc=()=>{},is=Array.isArray,FT=/#/g,FP=/&/g,BP=/\//g,UP=/=/g,$P=/\?/g,BT=/\+/g,HP=/%5B/g,zP=/%5D/g,UT=/%5E/g,jP=/%60/g,$T=/%7B/g,WP=/%7C/g,HT=/%7D/g,qP=/%20/g;function wm(t){return encodeURI(""+t).replace(WP,"|").replace(HP,"[").replace(zP,"]")}function GP(t){return wm(t).replace($T,"{").replace(HT,"}").replace(UT,"^")}function zp(t){return wm(t).replace(BT,"%2B").replace(qP,"+").replace(FT,"%23").replace(FP,"%26").replace(jP,"`").replace($T,"{").replace(HT,"}").replace(UT,"^")}function KP(t){return zp(t).replace(UP,"%3D")}function YP(t){return wm(t).replace(FT,"%23").replace($P,"%3F")}function QP(t){return t==null?"":YP(t).replace(BP,"%2F")}function Ic(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const XP=/\/$/,JP=t=>t.replace(XP,"");function Vf(t,e,n="/"){let s,i={},r="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(s=e.slice(0,c),r=e.slice(c+1,a>-1?a:e.length),i=t(r)),a>-1&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=nD(s??e,n),{fullPath:s+(r&&"?")+r+o,path:s,query:i,hash:Ic(o)}}function ZP(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Ob(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function eD(t,e,n){const s=e.matched.length-1,i=n.matched.length-1;return s>-1&&s===i&&Wo(e.matched[s],n.matched[i])&&zT(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Wo(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function zT(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!tD(t[n],e[n]))return!1;return!0}function tD(t,e){return is(t)?Mb(t,e):is(e)?Mb(e,t):t===e}function Mb(t,e){return is(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function nD(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let r=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+s.slice(o).join("/")}var xc;(function(t){t.pop="pop",t.push="push"})(xc||(xc={}));var sc;(function(t){t.back="back",t.forward="forward",t.unknown=""})(sc||(sc={}));function sD(t){if(!t)if(Ro){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),JP(t)}const iD=/^[^#]+#/;function rD(t,e){return t.replace(iD,"#")+e}function oD(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const pd=()=>({left:window.scrollX,top:window.scrollY});function aD(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=oD(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Lb(t,e){return(history.state?history.state.position-e:-1)+t}const jp=new Map;function cD(t,e){jp.set(t,e)}function lD(t){const e=jp.get(t);return jp.delete(t),e}let uD=()=>location.protocol+"//"+location.host;function jT(t,e){const{pathname:n,search:s,hash:i}=e,r=t.indexOf("#");if(r>-1){let a=i.includes(t.slice(r))?t.slice(r).length:1,c=i.slice(a);return c[0]!=="/"&&(c="/"+c),Ob(c,"")}return Ob(n,t)+s+i}function hD(t,e,n,s){let i=[],r=[],o=null;const a=({state:d})=>{const f=jT(t,location),g=n.value,m=e.value;let _=0;if(d){if(n.value=f,e.value=d,o&&o===g){o=null;return}_=m?d.position-m.position:0}else s(f);i.forEach(y=>{y(n.value,g,{delta:_,type:xc.pop,direction:_?_>0?sc.forward:sc.back:sc.unknown})})};function c(){o=n.value}function l(d){i.push(d);const f=()=>{const g=i.indexOf(d);g>-1&&i.splice(g,1)};return r.push(f),f}function u(){const{history:d}=window;d.state&&d.replaceState(We({},d.state,{scroll:pd()}),"")}function h(){for(const d of r)d();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:l,destroy:h}}function Nb(t,e,n,s=!1,i=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:i?pd():null}}function dD(t){const{history:e,location:n}=window,s={value:jT(t,n)},i={value:e.state};i.value||r(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(c,l,u){const h=t.indexOf("#"),d=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+c:uD()+t+c;try{e[u?"replaceState":"pushState"](l,"",d),i.value=l}catch(f){console.error(f),n[u?"replace":"assign"](d)}}function o(c,l){const u=We({},e.state,Nb(i.value.back,c,i.value.forward,!0),l,{position:i.value.position});r(c,u,!0),s.value=c}function a(c,l){const u=We({},i.value,e.state,{forward:c,scroll:pd()});r(u.current,u,!0);const h=We({},Nb(s.value,c,null),{position:u.position+1},l);r(c,h,!1),s.value=c}return{location:s,state:i,push:a,replace:o}}function fD(t){t=sD(t);const e=dD(t),n=hD(t,e.state,e.location,e.replace);function s(r,o=!0){o||n.pauseListeners(),history.go(r)}const i=We({location:"",base:t,go:s,createHref:rD.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function pD(t){return typeof t=="string"||t&&typeof t=="object"}function WT(t){return typeof t=="string"||typeof t=="symbol"}const yi={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},qT=Symbol("");var Vb;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Vb||(Vb={}));function qo(t,e){return We(new Error,{type:t,[qT]:!0},e)}function zs(t,e){return t instanceof Error&&qT in t&&(e==null||!!(t.type&e))}const Fb="[^/]+?",gD={sensitive:!1,strict:!1,start:!0,end:!0},mD=/[.+*?^${}()[\]/\\]/g;function _D(t,e){const n=We({},gD,e),s=[];let i=n.start?"^":"";const r=[];for(const l of t){const u=l.length?[]:[90];n.strict&&!l.length&&(i+="/");for(let h=0;h<l.length;h++){const d=l[h];let f=40+(n.sensitive?.25:0);if(d.type===0)h||(i+="/"),i+=d.value.replace(mD,"\\$&"),f+=40;else if(d.type===1){const{value:g,repeatable:m,optional:_,regexp:y}=d;r.push({name:g,repeatable:m,optional:_});const v=y||Fb;if(v!==Fb){f+=10;try{new RegExp(`(${v})`)}catch(T){throw new Error(`Invalid custom RegExp for param "${g}" (${v}): `+T.message)}}let E=m?`((?:${v})(?:/(?:${v}))*)`:`(${v})`;h||(E=_&&l.length<2?`(?:/${E})`:"/"+E),_&&(E+="?"),i+=E,f+=20,_&&(f+=-8),m&&(f+=-20),v===".*"&&(f+=-50)}u.push(f)}s.push(u)}if(n.strict&&n.end){const l=s.length-1;s[l][s[l].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(l){const u=l.match(o),h={};if(!u)return null;for(let d=1;d<u.length;d++){const f=u[d]||"",g=r[d-1];h[g.name]=f&&g.repeatable?f.split("/"):f}return h}function c(l){let u="",h=!1;for(const d of t){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const f of d)if(f.type===0)u+=f.value;else if(f.type===1){const{value:g,repeatable:m,optional:_}=f,y=g in l?l[g]:"";if(is(y)&&!m)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const v=is(y)?y.join("/"):y;if(!v)if(_)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${g}"`);u+=v}}return u||"/"}return{re:o,score:s,keys:r,parse:a,stringify:c}}function yD(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function bD(t,e){let n=0;const s=t.score,i=e.score;for(;n<s.length&&n<i.length;){const r=yD(s[n],i[n]);if(r)return r;n++}if(Math.abs(i.length-s.length)===1){if(Bb(s))return 1;if(Bb(i))return-1}return i.length-s.length}function Bb(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const vD={type:0,value:""},wD=/[a-zA-Z0-9_]/;function ED(t){if(!t)return[[]];if(t==="/")return[[vD]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${n})/"${l}": ${f}`)}let n=0,s=n;const i=[];let r;function o(){r&&i.push(r),r=[]}let a=0,c,l="",u="";function h(){l&&(n===0?r.push({type:0,value:l}):n===1||n===2||n===3?(r.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:l,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),l="")}function d(){l+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:c==="/"?(l&&h(),o()):c===":"?(h(),n=1):d();break;case 4:d(),n=s;break;case 1:c==="("?n=2:wD.test(c)?d():(h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:n=3:u+=c;break;case 3:h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${l}"`),h(),o(),i}function TD(t,e,n){const s=_D(ED(t.path),n),i=We(s,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function SD(t,e){const n=[],s=new Map;e=Hb({strict:!1,end:!0,sensitive:!1},e);function i(u){return s.get(u)}function r(u,h,d){const f=!d,g=RD(u);g.aliasOf=d&&d.record;const m=Hb(e,u),_=[g];if("alias"in u){const E=typeof u.alias=="string"?[u.alias]:u.alias;for(const T of E)_.push(We({},g,{components:d?d.record.components:g.components,path:T,aliasOf:d?d.record:g}))}let y,v;for(const E of _){const{path:T}=E;if(h&&T[0]!=="/"){const S=h.record.path,I=S[S.length-1]==="/"?"":"/";E.path=h.record.path+(T&&I+T)}if(y=TD(E,h,m),d?d.alias.push(y):(v=v||y,v!==y&&v.alias.push(y),f&&u.name&&!$b(y)&&o(u.name)),g.children){const S=g.children;for(let I=0;I<S.length;I++)r(S[I],y,d&&d.children[I])}d=d||y,(y.record.components&&Object.keys(y.record.components).length||y.record.name||y.record.redirect)&&c(y)}return v?()=>{o(v)}:nc}function o(u){if(WT(u)){const h=s.get(u);h&&(s.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&s.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function c(u){let h=0;for(;h<n.length&&bD(u,n[h])>=0&&(u.record.path!==n[h].record.path||!GT(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!$b(u)&&s.set(u.record.name,u)}function l(u,h){let d,f={},g,m;if("name"in u&&u.name){if(d=s.get(u.name),!d)throw qo(1,{location:u});m=d.record.name,f=We(Ub(h.params,d.keys.filter(v=>!v.optional).concat(d.parent?d.parent.keys.filter(v=>v.optional):[]).map(v=>v.name)),u.params&&Ub(u.params,d.keys.map(v=>v.name))),g=d.stringify(f)}else if(u.path!=null)g=u.path,d=n.find(v=>v.re.test(g)),d&&(f=d.parse(g),m=d.record.name);else{if(d=h.name?s.get(h.name):n.find(v=>v.re.test(h.path)),!d)throw qo(1,{location:u,currentLocation:h});m=d.record.name,f=We({},h.params,u.params),g=d.stringify(f)}const _=[];let y=d;for(;y;)_.unshift(y.record),y=y.parent;return{name:m,path:g,params:f,matched:_,meta:xD(_)}}return t.forEach(u=>r(u)),{addRoute:r,resolve:l,removeRoute:o,getRoutes:a,getRecordMatcher:i}}function Ub(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function RD(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:ID(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function ID(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function $b(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function xD(t){return t.reduce((e,n)=>We(e,n.meta),{})}function Hb(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}function GT(t,e){return e.children.some(n=>n===t||GT(t,n))}function CD(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<s.length;++i){const r=s[i].replace(BT," "),o=r.indexOf("="),a=Ic(o<0?r:r.slice(0,o)),c=o<0?null:Ic(r.slice(o+1));if(a in e){let l=e[a];is(l)||(l=e[a]=[l]),l.push(c)}else e[a]=c}return e}function zb(t){let e="";for(let n in t){const s=t[n];if(n=KP(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(is(s)?s.map(r=>r&&zp(r)):[s&&zp(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function kD(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=is(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return e}const AD=Symbol(""),jb=Symbol(""),Em=Symbol(""),KT=Symbol(""),Wp=Symbol("");function Ta(){let t=[];function e(s){return t.push(s),()=>{const i=t.indexOf(s);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Ai(t,e,n,s,i,r=o=>o()){const o=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((a,c)=>{const l=d=>{d===!1?c(qo(4,{from:n,to:e})):d instanceof Error?c(d):pD(d)?c(qo(2,{from:e,to:d})):(o&&s.enterCallbacks[i]===o&&typeof d=="function"&&o.push(d),a())},u=r(()=>t.call(s&&s.instances[i],e,n,l));let h=Promise.resolve(u);t.length<3&&(h=h.then(l)),h.catch(d=>c(d))})}function Ff(t,e,n,s,i=r=>r()){const r=[];for(const o of t)for(const a in o.components){let c=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(PD(c)){const u=(c.__vccOpts||c)[e];u&&r.push(Ai(u,n,s,o,a,i))}else{let l=c();r.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const h=VP(u)?u.default:u;o.components[a]=h;const f=(h.__vccOpts||h)[e];return f&&Ai(f,n,s,o,a,i)()}))}}return r}function PD(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Wb(t){const e=Ss(Em),n=Ss(KT),s=Zn(()=>e.resolve(Nr(t.to))),i=Zn(()=>{const{matched:c}=s.value,{length:l}=c,u=c[l-1],h=n.matched;if(!u||!h.length)return-1;const d=h.findIndex(Wo.bind(null,u));if(d>-1)return d;const f=qb(c[l-2]);return l>1&&qb(u)===f&&h[h.length-1].path!==f?h.findIndex(Wo.bind(null,c[l-2])):d}),r=Zn(()=>i.value>-1&&LD(n.params,s.value.params)),o=Zn(()=>i.value>-1&&i.value===n.matched.length-1&&zT(n.params,s.value.params));function a(c={}){return MD(c)?e[Nr(t.replace)?"replace":"push"](Nr(t.to)).catch(nc):Promise.resolve()}return{route:s,href:Zn(()=>s.value.href),isActive:r,isExactActive:o,navigate:a}}const DD=ui({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Wb,setup(t,{slots:e}){const n=nd(Wb(t)),{options:s}=Ss(Em),i=Zn(()=>({[Gb(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Gb(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=e.default&&e.default(n);return t.custom?r:fd("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}}),OD=DD;function MD(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function LD(t,e){for(const n in e){const s=e[n],i=t[n];if(typeof s=="string"){if(s!==i)return!1}else if(!is(i)||i.length!==s.length||s.some((r,o)=>r!==i[o]))return!1}return!0}function qb(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Gb=(t,e,n)=>t??e??n,ND=ui({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=Ss(Wp),i=Zn(()=>t.route||s.value),r=Ss(jb,0),o=Zn(()=>{let l=Nr(r);const{matched:u}=i.value;let h;for(;(h=u[l])&&!h.components;)l++;return l}),a=Zn(()=>i.value.matched[o.value]);Au(jb,Zn(()=>o.value+1)),Au(AD,a),Au(Wp,i);const c=Hk();return ku(()=>[c.value,a.value,t.name],([l,u,h],[d,f,g])=>{u&&(u.instances[h]=l,f&&f!==u&&l&&l===d&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),l&&u&&(!f||!Wo(u,f)||!d)&&(u.enterCallbacks[h]||[]).forEach(m=>m(l))},{flush:"post"}),()=>{const l=i.value,u=t.name,h=a.value,d=h&&h.components[u];if(!d)return Kb(n.default,{Component:d,route:l});const f=h.props[u],g=f?f===!0?l.params:typeof f=="function"?f(l):f:null,_=fd(d,We({},g,e,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(h.instances[u]=null)},ref:c}));return Kb(n.default,{Component:_,route:l})||_}}});function Kb(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const VD=ND;function FD(t){const e=SD(t.routes,t),n=t.parseQuery||CD,s=t.stringifyQuery||zb,i=t.history,r=Ta(),o=Ta(),a=Ta(),c=zk(yi);let l=yi;Ro&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Nf.bind(null,M=>""+M),h=Nf.bind(null,QP),d=Nf.bind(null,Ic);function f(M,J){let K,ee;return WT(M)?(K=e.getRecordMatcher(M),ee=J):ee=M,e.addRoute(ee,K)}function g(M){const J=e.getRecordMatcher(M);J&&e.removeRoute(J)}function m(){return e.getRoutes().map(M=>M.record)}function _(M){return!!e.getRecordMatcher(M)}function y(M,J){if(J=We({},J||c.value),typeof M=="string"){const w=Vf(n,M,J.path),A=e.resolve({path:w.path},J),V=i.createHref(w.fullPath);return We(w,A,{params:d(A.params),hash:Ic(w.hash),redirectedFrom:void 0,href:V})}let K;if(M.path!=null)K=We({},M,{path:Vf(n,M.path,J.path).path});else{const w=We({},M.params);for(const A in w)w[A]==null&&delete w[A];K=We({},M,{params:h(w)}),J.params=h(J.params)}const ee=e.resolve(K,J),He=M.hash||"";ee.params=u(d(ee.params));const ht=ZP(s,We({},M,{hash:GP(He),path:ee.path})),b=i.createHref(ht);return We({fullPath:ht,hash:He,query:s===zb?kD(M.query):M.query||{}},ee,{redirectedFrom:void 0,href:b})}function v(M){return typeof M=="string"?Vf(n,M,c.value.path):We({},M)}function E(M,J){if(l!==M)return qo(8,{from:J,to:M})}function T(M){return k(M)}function S(M){return T(We(v(M),{replace:!0}))}function I(M){const J=M.matched[M.matched.length-1];if(J&&J.redirect){const{redirect:K}=J;let ee=typeof K=="function"?K(M):K;return typeof ee=="string"&&(ee=ee.includes("?")||ee.includes("#")?ee=v(ee):{path:ee},ee.params={}),We({query:M.query,hash:M.hash,params:ee.path!=null?{}:M.params},ee)}}function k(M,J){const K=l=y(M),ee=c.value,He=M.state,ht=M.force,b=M.replace===!0,w=I(K);if(w)return k(We(v(w),{state:typeof w=="object"?We({},He,w.state):He,force:ht,replace:b}),J||K);const A=K;A.redirectedFrom=J;let V;return!ht&&eD(s,ee,K)&&(V=qo(16,{to:A,from:ee}),fn(ee,ee,!0,!1)),(V?Promise.resolve(V):$(A,ee)).catch(P=>zs(P)?zs(P,2)?P:dn(P):ye(P,A,ee)).then(P=>{if(P){if(zs(P,2))return k(We({replace:b},v(P.to),{state:typeof P.to=="object"?We({},He,P.to.state):He,force:ht}),J||A)}else P=B(A,ee,!0,b,He);return X(A,ee,P),P})}function R(M,J){const K=E(M,J);return K?Promise.reject(K):Promise.resolve()}function N(M){const J=_n.values().next().value;return J&&typeof J.runWithContext=="function"?J.runWithContext(M):M()}function $(M,J){let K;const[ee,He,ht]=BD(M,J);K=Ff(ee.reverse(),"beforeRouteLeave",M,J);for(const w of ee)w.leaveGuards.forEach(A=>{K.push(Ai(A,M,J))});const b=R.bind(null,M,J);return K.push(b),ut(K).then(()=>{K=[];for(const w of r.list())K.push(Ai(w,M,J));return K.push(b),ut(K)}).then(()=>{K=Ff(He,"beforeRouteUpdate",M,J);for(const w of He)w.updateGuards.forEach(A=>{K.push(Ai(A,M,J))});return K.push(b),ut(K)}).then(()=>{K=[];for(const w of ht)if(w.beforeEnter)if(is(w.beforeEnter))for(const A of w.beforeEnter)K.push(Ai(A,M,J));else K.push(Ai(w.beforeEnter,M,J));return K.push(b),ut(K)}).then(()=>(M.matched.forEach(w=>w.enterCallbacks={}),K=Ff(ht,"beforeRouteEnter",M,J,N),K.push(b),ut(K))).then(()=>{K=[];for(const w of o.list())K.push(Ai(w,M,J));return K.push(b),ut(K)}).catch(w=>zs(w,8)?w:Promise.reject(w))}function X(M,J,K){a.list().forEach(ee=>N(()=>ee(M,J,K)))}function B(M,J,K,ee,He){const ht=E(M,J);if(ht)return ht;const b=J===yi,w=Ro?history.state:{};K&&(ee||b?i.replace(M.fullPath,We({scroll:b&&w&&w.scroll},He)):i.push(M.fullPath,He)),c.value=M,fn(M,J,K,b),dn()}let ce;function ze(){ce||(ce=i.listen((M,J,K)=>{if(!cs.listening)return;const ee=y(M),He=I(ee);if(He){k(We(He,{replace:!0}),ee).catch(nc);return}l=ee;const ht=c.value;Ro&&cD(Lb(ht.fullPath,K.delta),pd()),$(ee,ht).catch(b=>zs(b,12)?b:zs(b,2)?(k(b.to,ee).then(w=>{zs(w,20)&&!K.delta&&K.type===xc.pop&&i.go(-1,!1)}).catch(nc),Promise.reject()):(K.delta&&i.go(-K.delta,!1),ye(b,ee,ht))).then(b=>{b=b||B(ee,ht,!1),b&&(K.delta&&!zs(b,8)?i.go(-K.delta,!1):K.type===xc.pop&&zs(b,20)&&i.go(-1,!1)),X(ee,ht,b)}).catch(nc)}))}let xe=Ta(),ue=Ta(),le;function ye(M,J,K){dn(M);const ee=ue.list();return ee.length?ee.forEach(He=>He(M,J,K)):console.error(M),Promise.reject(M)}function Xe(){return le&&c.value!==yi?Promise.resolve():new Promise((M,J)=>{xe.add([M,J])})}function dn(M){return le||(le=!M,ze(),xe.list().forEach(([J,K])=>M?K(M):J()),xe.reset()),M}function fn(M,J,K,ee){const{scrollBehavior:He}=t;if(!Ro||!He)return Promise.resolve();const ht=!K&&lD(Lb(M.fullPath,0))||(ee||!K)&&history.state&&history.state.scroll||null;return dm().then(()=>He(M,J,ht)).then(b=>b&&aD(b)).catch(b=>ye(b,M,J))}const Et=M=>i.go(M);let Nn;const _n=new Set,cs={currentRoute:c,listening:!0,addRoute:f,removeRoute:g,hasRoute:_,getRoutes:m,resolve:y,options:t,push:T,replace:S,go:Et,back:()=>Et(-1),forward:()=>Et(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:ue.add,isReady:Xe,install(M){const J=this;M.component("RouterLink",OD),M.component("RouterView",VD),M.config.globalProperties.$router=J,Object.defineProperty(M.config.globalProperties,"$route",{enumerable:!0,get:()=>Nr(c)}),Ro&&!Nn&&c.value===yi&&(Nn=!0,T(i.location).catch(He=>{}));const K={};for(const He in yi)Object.defineProperty(K,He,{get:()=>c.value[He],enumerable:!0});M.provide(Em,J),M.provide(KT,zE(K)),M.provide(Wp,c);const ee=M.unmount;_n.add(M),M.unmount=function(){_n.delete(M),_n.size<1&&(l=yi,ce&&ce(),ce=null,c.value=yi,Nn=!1,le=!1),ee()}}};function ut(M){return M.reduce((J,K)=>J.then(()=>N(K)),Promise.resolve())}return cs}function BD(t,e){const n=[],s=[],i=[],r=Math.max(e.matched.length,t.matched.length);for(let o=0;o<r;o++){const a=e.matched[o];a&&(t.matched.find(l=>Wo(l,a))?s.push(a):n.push(a));const c=t.matched[o];c&&(e.matched.find(l=>Wo(l,c))||i.push(c))}return[n,s,i]}var Yb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},UD=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const i=t[n++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=t[n++];e[s++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const r=t[n++],o=t[n++];e[s++]=String.fromCharCode((i&15)<<12|(r&63)<<6|o&63)}}return e.join("")},QT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<t.length;i+=3){const r=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=r>>2,h=(r&3)<<4|a>>4;let d=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(d=64)),s.push(n[u],n[h],n[d],n[f])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(YT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):UD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<t.length;){const r=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const l=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,r==null||a==null||l==null||h==null)throw new $D;const d=r<<2|a>>4;if(s.push(d),l!==64){const f=a<<4&240|l>>2;if(s.push(f),h!==64){const g=l<<6&192|h;s.push(g)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class $D extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HD=function(t){const e=YT(t);return QT.encodeByteArray(e,!0)},gh=function(t){return HD(t).replace(/\./g,"")},XT=function(t){try{return QT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD=()=>zD().__FIREBASE_DEFAULTS__,WD=()=>{if(typeof process>"u"||typeof Yb>"u")return;const t=Yb.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},qD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&XT(t[1]);return e&&JSON.parse(e)},gd=()=>{try{return jD()||WD()||qD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},JT=t=>{var e,n;return(n=(e=gd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ZT=t=>{const e=JT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},e1=()=>{var t;return(t=gd())===null||t===void 0?void 0:t.config},t1=t=>{var e;return(e=gd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[gh(JSON.stringify(n)),gh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mt())}function YD(){var t;const e=(t=gd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function XD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JD(){const t=Mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ZD(){return!YD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function s1(){try{return typeof indexedDB=="object"}catch{return!1}}function eO(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var r;e(((r=i.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO="FirebaseError";class Bs extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=tO,Object.setPrototypeOf(this,Bs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,il.prototype.create)}}class il{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},i=`${this.service}/${e}`,r=this.errors[e],o=r?nO(r,s):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Bs(i,a,s)}}function nO(t,e){return t.replace(sO,(n,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const sO=/\{\$([^}]+)}/g;function iO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Go(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const i of n){if(!s.includes(i))return!1;const r=t[i],o=e[i];if(Qb(r)&&Qb(o)){if(!Go(r,o))return!1}else if(r!==o)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function Qb(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Fa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,r]=s.split("=");e[decodeURIComponent(i)]=decodeURIComponent(r)}}),e}function Ba(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function rO(t,e){const n=new oO(t,e);return n.subscribe.bind(n)}class oO{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let i;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");aO(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:s},i.next===void 0&&(i.next=Bf),i.error===void 0&&(i.error=Bf),i.complete===void 0&&(i.complete=Bf);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aO(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Bf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(t){return t&&t._delegate?t._delegate:t}class Xi{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new GD;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uO(e))try{this.getOrInitializeService({instanceIdentifier:yr})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:i});s.resolve(r)}catch{}}}}clearInstance(e=yr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=yr){return this.instances.has(e)}getOptions(e=yr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);s===a&&o.resolve(i)}return i}onInit(e,n){var s;const i=this.normalizeInstanceIdentifier(n),r=(s=this.onInitCallbacks.get(i))!==null&&s!==void 0?s:new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:lO(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=yr){return this.component?this.component.multipleInstances?e:yr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lO(t){return t===yr?void 0:t}function uO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new cO(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Oe||(Oe={}));const dO={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},fO=Oe.INFO,pO={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},gO=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),i=pO[e];if(i)console[i](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Tm{constructor(e){this.name=e,this._logLevel=fO,this._logHandler=gO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const mO=(t,e)=>e.some(n=>t instanceof n);let Xb,Jb;function _O(){return Xb||(Xb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yO(){return Jb||(Jb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const i1=new WeakMap,qp=new WeakMap,r1=new WeakMap,Uf=new WeakMap,Sm=new WeakMap;function bO(t){const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",o)},r=()=>{n(zi(t.result)),i()},o=()=>{s(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&i1.set(n,t)}).catch(()=>{}),Sm.set(e,t),e}function vO(t){if(qp.has(t))return;const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",o),t.removeEventListener("abort",o)},r=()=>{n(),i()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",o),t.addEventListener("abort",o)});qp.set(t,e)}let Gp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return qp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||r1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function wO(t){Gp=t(Gp)}function EO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call($f(this),e,...n);return r1.set(s,e.sort?e.sort():[e]),zi(s)}:yO().includes(t)?function(...e){return t.apply($f(this),e),zi(i1.get(this))}:function(...e){return zi(t.apply($f(this),e))}}function TO(t){return typeof t=="function"?EO(t):(t instanceof IDBTransaction&&vO(t),mO(t,_O())?new Proxy(t,Gp):t)}function zi(t){if(t instanceof IDBRequest)return bO(t);if(Uf.has(t))return Uf.get(t);const e=TO(t);return e!==t&&(Uf.set(t,e),Sm.set(e,t)),e}const $f=t=>Sm.get(t);function SO(t,e,{blocked:n,upgrade:s,blocking:i,terminated:r}={}){const o=indexedDB.open(t,e),a=zi(o);return s&&o.addEventListener("upgradeneeded",c=>{s(zi(o.result),c.oldVersion,c.newVersion,zi(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{r&&c.addEventListener("close",()=>r()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const RO=["get","getKey","getAll","getAllKeys","count"],IO=["put","add","delete","clear"],Hf=new Map;function Zb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Hf.get(e))return Hf.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,i=IO.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||RO.includes(n)))return;const r=async function(o,...a){const c=this.transaction(o,i?"readwrite":"readonly");let l=c.store;return s&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&c.done]))[0]};return Hf.set(e,r),r}wO(t=>({...t,get:(e,n,s)=>Zb(e,n)||t.get(e,n,s),has:(e,n)=>!!Zb(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(CO(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function CO(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Kp="@firebase/app",ev="0.9.28";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr=new Tm("@firebase/app"),kO="@firebase/app-compat",AO="@firebase/analytics-compat",PO="@firebase/analytics",DO="@firebase/app-check-compat",OO="@firebase/app-check",MO="@firebase/auth",LO="@firebase/auth-compat",NO="@firebase/database",VO="@firebase/database-compat",FO="@firebase/functions",BO="@firebase/functions-compat",UO="@firebase/installations",$O="@firebase/installations-compat",HO="@firebase/messaging",zO="@firebase/messaging-compat",jO="@firebase/performance",WO="@firebase/performance-compat",qO="@firebase/remote-config",GO="@firebase/remote-config-compat",KO="@firebase/storage",YO="@firebase/storage-compat",QO="@firebase/firestore",XO="@firebase/firestore-compat",JO="firebase",ZO="10.8.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yp="[DEFAULT]",eM={[Kp]:"fire-core",[kO]:"fire-core-compat",[PO]:"fire-analytics",[AO]:"fire-analytics-compat",[OO]:"fire-app-check",[DO]:"fire-app-check-compat",[MO]:"fire-auth",[LO]:"fire-auth-compat",[NO]:"fire-rtdb",[VO]:"fire-rtdb-compat",[FO]:"fire-fn",[BO]:"fire-fn-compat",[UO]:"fire-iid",[$O]:"fire-iid-compat",[HO]:"fire-fcm",[zO]:"fire-fcm-compat",[jO]:"fire-perf",[WO]:"fire-perf-compat",[qO]:"fire-rc",[GO]:"fire-rc-compat",[KO]:"fire-gcs",[YO]:"fire-gcs-compat",[QO]:"fire-fst",[XO]:"fire-fst-compat","fire-js":"fire-js",[JO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh=new Map,Qp=new Map;function tM(t,e){try{t.container.addComponent(e)}catch(n){Wr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qr(t){const e=t.name;if(Qp.has(e))return Wr.debug(`There were multiple attempts to register component ${e}.`),!1;Qp.set(e,t);for(const n of mh.values())tM(n,t);return!0}function md(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ji=new il("app","Firebase",nM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Xi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ji.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=ZO;function o1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Yp,automaticDataCollectionEnabled:!1},e),i=s.name;if(typeof i!="string"||!i)throw ji.create("bad-app-name",{appName:String(i)});if(n||(n=e1()),!n)throw ji.create("no-options");const r=mh.get(i);if(r){if(Go(n,r.options)&&Go(s,r.config))return r;throw ji.create("duplicate-app",{appName:i})}const o=new hO(i);for(const c of Qp.values())o.addComponent(c);const a=new sM(n,s,o);return mh.set(i,a),a}function Rm(t=Yp){const e=mh.get(t);if(!e&&t===Yp&&e1())return o1();if(!e)throw ji.create("no-app",{appName:t});return e}function Rs(t,e,n){var s;let i=(s=eM[t])!==null&&s!==void 0?s:t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wr.warn(a.join(" "));return}qr(new Xi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM="firebase-heartbeat-database",rM=1,Cc="firebase-heartbeat-store";let zf=null;function a1(){return zf||(zf=SO(iM,rM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Cc)}catch(n){console.warn(n)}}}}).catch(t=>{throw ji.create("idb-open",{originalErrorMessage:t.message})})),zf}async function oM(t){try{const n=(await a1()).transaction(Cc),s=await n.objectStore(Cc).get(c1(t));return await n.done,s}catch(e){if(e instanceof Bs)Wr.warn(e.message);else{const n=ji.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Wr.warn(n.message)}}}async function tv(t,e){try{const s=(await a1()).transaction(Cc,"readwrite");await s.objectStore(Cc).put(e,c1(t)),await s.done}catch(n){if(n instanceof Bs)Wr.warn(n.message);else{const s=ji.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Wr.warn(s.message)}}}function c1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM=1024,cM=30*24*60*60*1e3;class lM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new hM(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=nv();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=cM}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=nv(),{heartbeatsToSend:s,unsentEntries:i}=uM(this._heartbeatsCache.heartbeats),r=gh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function nv(){return new Date().toISOString().substring(0,10)}function uM(t,e=aM){const n=[];let s=t.slice();for(const i of t){const r=n.find(o=>o.agent===i.agent);if(r){if(r.dates.push(i.date),sv(n)>e){r.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),sv(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class hM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return s1()?eO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await oM(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return tv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return tv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function sv(t){return gh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dM(t){qr(new Xi("platform-logger",e=>new xO(e),"PRIVATE")),qr(new Xi("heartbeat",e=>new lM(e),"PRIVATE")),Rs(Kp,ev,t),Rs(Kp,ev,"esm2017"),Rs("fire-js","")}dM("");var fM="firebase",pM="10.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rs(fM,pM,"app");function Im(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(n[s[i]]=t[s[i]]);return n}function l1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gM=l1,u1=new il("auth","Firebase",l1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h=new Tm("@firebase/auth");function mM(t,...e){_h.logLevel<=Oe.WARN&&_h.warn(`Auth (${io}): ${t}`,...e)}function Mu(t,...e){_h.logLevel<=Oe.ERROR&&_h.error(`Auth (${io}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(t,...e){throw xm(t,...e)}function Is(t,...e){return xm(t,...e)}function _M(t,e,n){const s=Object.assign(Object.assign({},gM()),{[e]:n});return new il("auth","Firebase",s).create(e,{appName:t.name})}function xm(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return u1.create(t,...e)}function he(t,e,...n){if(!t)throw xm(e,...n)}function Ys(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Mu(e),new Error(e)}function ri(t,e){t||Ys(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function yM(){return iv()==="http:"||iv()==="https:"}function iv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yM()||QD()||"connection"in navigator)?navigator.onLine:!0}function vM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,n){this.shortDelay=e,this.longDelay=n,ri(n>e,"Short delay should be less than long delay!"),this.isMobile=KD()||XD()}get(){return bM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(t,e){ri(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ys("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ys("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ys("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM=new ol(3e4,6e4);function ir(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function di(t,e,n,s,i={}){return d1(t,i,async()=>{let r={},o={};s&&(e==="GET"?o=s:r={body:JSON.stringify(s)});const a=rl(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),h1.fetch()(f1(t,t.config.apiHost,n,a),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},r))})}async function d1(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},wM),e);try{const i=new SM(t),r=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw Jl(t,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jl(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Jl(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Jl(t,"user-disabled",o);const u=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw _M(t,u,l);rs(t,u)}}catch(i){if(i instanceof Bs)throw i;rs(t,"network-request-failed",{message:String(i)})}}async function al(t,e,n,s,i={}){const r=await di(t,e,n,s,i);return"mfaPendingCredential"in r&&rs(t,"multi-factor-auth-required",{_serverResponse:r}),r}function f1(t,e,n,s){const i=`${e}${n}?${s}`;return t.config.emulator?Cm(t.config,i):`${t.config.apiScheme}://${i}`}function TM(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class SM{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Is(this.auth,"network-request-failed")),EM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Jl(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const i=Is(t,e,s);return i.customData._tokenResponse=n,i}function rv(t){return t!==void 0&&t.enterprise!==void 0}class RM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return TM(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function IM(t,e){return di(t,"GET","/v2/recaptchaConfig",ir(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xM(t,e){return di(t,"POST","/v1/accounts:delete",e)}async function CM(t,e){return di(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ic(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function kM(t,e=!1){const n=ct(t),s=await n.getIdToken(e),i=km(s);he(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const r=typeof i.firebase=="object"?i.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:i,token:s,authTime:ic(jf(i.auth_time)),issuedAtTime:ic(jf(i.iat)),expirationTime:ic(jf(i.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function jf(t){return Number(t)*1e3}function km(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Mu("JWT malformed, contained fewer than 3 sections"),null;try{const i=XT(n);return i?JSON.parse(i):(Mu("Failed to decode base64 JWT payload"),null)}catch(i){return Mu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function AM(t){const e=km(t);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ko(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Bs&&PM(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function PM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ic(this.lastLoginAt),this.creationTime=ic(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yh(t){var e;const n=t.auth,s=await t.getIdToken(),i=await Ko(t,CM(n,{idToken:s}));he(i==null?void 0:i.users.length,n,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const o=!((e=r.providerUserInfo)===null||e===void 0)&&e.length?LM(r.providerUserInfo):[],a=MM(t.providerData,o),c=t.isAnonymous,l=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),u=c?l:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new p1(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function OM(t){const e=ct(t);await yh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function MM(t,e){return[...t.filter(s=>!e.some(i=>i.providerId===s.providerId)),...e]}function LM(t){return t.map(e=>{var{providerId:n}=e,s=Im(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NM(t,e){const n=await d1(t,{},async()=>{const s=rl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:r}=t.config,o=f1(t,i,"/v1/token",`key=${r}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",h1.fetch()(o,{method:"POST",headers:a,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function VM(t,e){return di(t,"POST","/v2/accounts:revokeToken",ir(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):AM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return he(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:i,expiresIn:r}=await NM(e,n);this.updateTokensAndExpiration(s,i,Number(r))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:i,expirationTime:r}=n,o=new kc;return s&&(he(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),i&&(he(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),r&&(he(typeof r=="number","internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new kc,this.toJSON())}_performRefresh(){return Ys("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(t,e){he(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Vr{constructor(e){var{uid:n,auth:s,stsTokenManager:i}=e,r=Im(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new DM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new p1(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Ko(this,this.stsTokenManager.getToken(this.auth,e));return he(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return kM(this,e)}reload(){return OM(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Vr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await yh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Ko(this,xM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,i,r,o,a,c,l,u;const h=(s=n.displayName)!==null&&s!==void 0?s:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,f=(r=n.phoneNumber)!==null&&r!==void 0?r:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:E,emailVerified:T,isAnonymous:S,providerData:I,stsTokenManager:k}=n;he(E&&k,e,"internal-error");const R=kc.fromJSON(this.name,k);he(typeof E=="string",e,"internal-error"),bi(h,e.name),bi(d,e.name),he(typeof T=="boolean",e,"internal-error"),he(typeof S=="boolean",e,"internal-error"),bi(f,e.name),bi(g,e.name),bi(m,e.name),bi(_,e.name),bi(y,e.name),bi(v,e.name);const N=new Vr({uid:E,auth:e,email:d,emailVerified:T,displayName:h,isAnonymous:S,photoURL:g,phoneNumber:f,tenantId:m,stsTokenManager:R,createdAt:y,lastLoginAt:v});return I&&Array.isArray(I)&&(N.providerData=I.map($=>Object.assign({},$))),_&&(N._redirectEventId=_),N}static async _fromIdTokenResponse(e,n,s=!1){const i=new kc;i.updateFromServerResponse(n);const r=new Vr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:s});return await yh(r),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov=new Map;function Qs(t){ri(t instanceof Function,"Expected a class definition");let e=ov.get(t);return e?(ri(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ov.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}g1.type="NONE";const av=g1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(t,e,n){return`firebase:${t}:${e}:${n}`}class Vo{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:i,name:r}=this.auth;this.fullUserKey=Lu(this.userKey,i.apiKey,r),this.fullPersistenceKey=Lu("persistence",i.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Vr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Vo(Qs(av),e,s);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let r=i[0]||Qs(av);const o=Lu(s,e.config.apiKey,e.name);let a=null;for(const l of n)try{const u=await l._get(o);if(u){const h=Vr._fromJSON(e,u);l!==r&&(a=h),r=l;break}}catch{}const c=i.filter(l=>l._shouldAllowMigration);return!r._shouldAllowMigration||!c.length?new Vo(r,e,s):(r=c[0],a&&await r._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==r)try{await l._remove(o)}catch{}})),new Vo(r,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(y1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(m1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(v1(e))return"Blackberry";if(w1(e))return"Webos";if(Am(e))return"Safari";if((e.includes("chrome/")||_1(e))&&!e.includes("edge/"))return"Chrome";if(b1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function m1(t=Mt()){return/firefox\//i.test(t)}function Am(t=Mt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _1(t=Mt()){return/crios\//i.test(t)}function y1(t=Mt()){return/iemobile/i.test(t)}function b1(t=Mt()){return/android/i.test(t)}function v1(t=Mt()){return/blackberry/i.test(t)}function w1(t=Mt()){return/webos/i.test(t)}function _d(t=Mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function FM(t=Mt()){var e;return _d(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function BM(){return JD()&&document.documentMode===10}function E1(t=Mt()){return _d(t)||b1(t)||w1(t)||v1(t)||/windows phone/i.test(t)||y1(t)}function UM(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(t,e=[]){let n;switch(t){case"Browser":n=cv(Mt());break;case"Worker":n=`${cv(Mt())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${io}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=r=>new Promise((o,a)=>{try{const c=e(r);o(c)}catch(c){a(c)}});s.onAbort=n,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HM(t,e={}){return di(t,"GET","/v2/passwordPolicy",ir(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM=6;class jM{constructor(e){var n,s,i,r;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:zM,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(r=e.forceUpgradeOnSignin)!==null&&r!==void 0?r:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,i,r,o,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(s=c.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(r=c.containsUppercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let i=0;i<e.length;i++)s=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,i,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e,n,s,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lv(this),this.idTokenSubscription=new lv(this),this.beforeStateQueue=new $M(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=u1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Qs(n)),this._initializationPromise=this.queue(async()=>{var s,i;if(!this._deleted&&(this.persistenceManager=await Vo.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const s=await this.assertedPersistence.getCurrentUser();let i=s,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(i=c.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await yh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?ct(e):null;return n&&he(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Qs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await HM(this),n=new jM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new il("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await VM(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Qs(e)||this._popupRedirectResolver;he(n,this,"argument-error"),this.redirectPersistenceManager=await Vo.create(this,[Qs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,i){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,i);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=T1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&mM(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ro(t){return ct(t)}class lv{constructor(e){this.auth=e,this.observer=null,this.addObserver=rO(n=>this.observer=n)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qM(t){yd=t}function S1(t){return yd.loadJS(t)}function GM(){return yd.recaptchaEnterpriseScript}function KM(){return yd.gapiScript}function YM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const QM="recaptcha-enterprise",XM="NO_RECAPTCHA";class JM{constructor(e){this.type=QM,this.auth=ro(e)}async verify(e="verify",n=!1){async function s(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,a)=>{IM(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const l=new RM(c);return r.tenantId==null?r._agentRecaptchaConfig=l:r._tenantRecaptchaConfigs[r.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})})}function i(r,o,a){const c=window.grecaptcha;rv(c)?c.enterprise.ready(()=>{c.enterprise.execute(r,{action:e}).then(l=>{o(l)}).catch(()=>{o(XM)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((r,o)=>{s(this.auth).then(a=>{if(!n&&rv(window.grecaptcha))i(a,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=GM();c.length!==0&&(c+=a),S1(c).then(()=>{i(a,r,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}}async function uv(t,e,n,s=!1){const i=new JM(t);let r;try{r=await i.verify(n)}catch{r=await i.verify(n,!0)}const o=Object.assign({},e);return s?Object.assign(o,{captchaResp:r}):Object.assign(o,{captchaResponse:r}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Jp(t,e,n,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await uv(t,e,n,n==="getOobCode");return s(t,r)}else return s(t,e).catch(async r=>{if(r.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await uv(t,e,n,n==="getOobCode");return s(t,o)}else return Promise.reject(r)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZM(t,e){const n=md(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),r=n.getOptions();if(Go(r,e??{}))return i;rs(i,"already-initialized")}return n.initialize({options:e})}function e2(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Qs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function t2(t,e,n){const s=ro(t);he(s._canInitEmulator,s,"emulator-config-failed"),he(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),r=R1(e),{host:o,port:a}=n2(e),c=a===null?"":`:${a}`;s.config.emulator={url:`${r}//${o}${c}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||s2()}function R1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function n2(t){const e=R1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const r=i[1];return{host:r,port:hv(s.substr(r.length+1))}}else{const[r,o]=s.split(":");return{host:r,port:hv(o)}}}function hv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function s2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ys("not implemented")}_getIdTokenResponse(e){return Ys("not implemented")}_linkToIdToken(e,n){return Ys("not implemented")}_getReauthenticationResolver(e){return Ys("not implemented")}}async function i2(t,e){return di(t,"POST","/v1/accounts:update",e)}async function r2(t,e){return di(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o2(t,e){return al(t,"POST","/v1/accounts:signInWithPassword",ir(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a2(t,e){return al(t,"POST","/v1/accounts:signInWithEmailLink",ir(t,e))}async function c2(t,e){return al(t,"POST","/v1/accounts:signInWithEmailLink",ir(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac extends Pm{constructor(e,n,s,i=null){super("password",s),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Ac(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Ac(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jp(e,n,"signInWithPassword",o2);case"emailLink":return a2(e,{email:this._email,oobCode:this._password});default:rs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jp(e,s,"signUpPassword",r2);case"emailLink":return c2(e,{idToken:n,email:this._email,oobCode:this._password});default:rs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fo(t,e){return al(t,"POST","/v1/accounts:signInWithIdp",ir(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2="http://localhost";class Gr extends Pm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Gr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):rs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:i}=n,r=Im(n,["providerId","signInMethod"]);if(!s||!i)return null;const o=new Gr(s,i);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Fo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Fo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Fo(e,n)}buildRequest(){const e={requestUri:l2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=rl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u2(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function h2(t){const e=Fa(Ba(t)).link,n=e?Fa(Ba(e)).deep_link_id:null,s=Fa(Ba(t)).deep_link_id;return(s?Fa(Ba(s)).link:null)||s||n||e||t}class Dm{constructor(e){var n,s,i,r,o,a;const c=Fa(Ba(e)),l=(n=c.apiKey)!==null&&n!==void 0?n:null,u=(s=c.oobCode)!==null&&s!==void 0?s:null,h=u2((i=c.mode)!==null&&i!==void 0?i:null);he(l&&u&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=u,this.continueUrl=(r=c.continueUrl)!==null&&r!==void 0?r:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=h2(e);try{return new Dm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(){this.providerId=oo.PROVIDER_ID}static credential(e,n){return Ac._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Dm.parseLink(n);return he(s,"argument-error"),Ac._fromEmailAndCode(e,s.code,s.tenantId)}}oo.PROVIDER_ID="password";oo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";oo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl extends I1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends cl{constructor(){super("facebook.com")}static credential(e){return Gr._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pi.credentialFromTaggedObject(e)}static credentialFromError(e){return Pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pi.credential(e.oauthAccessToken)}catch{return null}}}Pi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Pi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di extends cl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Gr._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Di.credentialFromTaggedObject(e)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Di.credential(n,s)}catch{return null}}}Di.GOOGLE_SIGN_IN_METHOD="google.com";Di.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi extends cl{constructor(){super("github.com")}static credential(e){return Gr._fromParams({providerId:Oi.PROVIDER_ID,signInMethod:Oi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oi.credentialFromTaggedObject(e)}static credentialFromError(e){return Oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Oi.credential(e.oauthAccessToken)}catch{return null}}}Oi.GITHUB_SIGN_IN_METHOD="github.com";Oi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends cl{constructor(){super("twitter.com")}static credential(e,n){return Gr._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Mi.credentialFromTaggedObject(e)}static credentialFromError(e){return Mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Mi.credential(n,s)}catch{return null}}}Mi.TWITTER_SIGN_IN_METHOD="twitter.com";Mi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d2(t,e){return al(t,"POST","/v1/accounts:signUp",ir(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,i=!1){const r=await Vr._fromIdTokenResponse(e,s,i),o=dv(s);return new Kr({user:r,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const i=dv(s);return new Kr({user:e,providerId:i,_tokenResponse:s,operationType:n})}}function dv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh extends Bs{constructor(e,n,s,i){var r;super(n.code,n.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,bh.prototype),this.customData={appName:e.name,tenantId:(r=e.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,i){return new bh(e,n,s,i)}}function x1(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?bh._fromErrorAndOperation(t,r,e,s):r})}async function f2(t,e,n=!1){const s=await Ko(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Kr._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C1(t,e,n=!1){const{auth:s}=t,i="reauthenticate";try{const r=await Ko(t,x1(s,i,e,t),n);he(r.idToken,s,"internal-error");const o=km(r.idToken);he(o,s,"internal-error");const{sub:a}=o;return he(t.uid===a,s,"user-mismatch"),Kr._forOperation(t,i,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&rs(s,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k1(t,e,n=!1){const s="signIn",i=await x1(t,s,e),r=await Kr._fromIdTokenResponse(t,s,i);return n||await t._updateCurrentUser(r.user),r}async function p2(t,e){return k1(ro(t),e)}async function g2(t,e){return C1(ct(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A1(t){const e=ro(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function m2(t,e,n){const s=ro(t),o=await Jp(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",d2).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&A1(t),c}),a=await Kr._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(a.user),a}function _2(t,e,n){return p2(ct(t),oo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&A1(t),s})}function y2(t,e){return b2(ct(t),null,e)}async function b2(t,e,n){const{auth:s}=t,r={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(r.email=e),n&&(r.password=n);const o=await Ko(t,i2(s,r));await t._updateTokensIfNecessary(o,!0)}function v2(t,e,n,s){return ct(t).onIdTokenChanged(e,n,s)}function w2(t,e,n){return ct(t).beforeAuthStateChanged(e,n)}function E2(t,e,n,s){return ct(t).onAuthStateChanged(e,n,s)}function T2(t){return ct(t).signOut()}const vh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(vh,"1"),this.storage.removeItem(vh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(){const t=Mt();return Am(t)||_d(t)}const R2=1e3,I2=10;class D1 extends P1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=S2()&&UM(),this.fallbackToPolling=E1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),i=this.localCache[n];s!==i&&e(n,i,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const s=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(s);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(s,e.newValue):this.storage.removeItem(s);else if(this.localCache[s]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},r=this.storage.getItem(s);BM()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,I2):i()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},R2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}D1.type="LOCAL";const x2=D1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1 extends P1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}O1.type="SESSION";const M1=O1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const s=new bd(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:i,data:r}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,r)),c=await C2(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,o;return new Promise((a,c)=>{const l=Om("",20);i.port1.start();const u=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:i,onMessage(h){const d=h;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(u),r=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(d.data.response);break;default:clearTimeout(u),clearTimeout(r),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(){return window}function A2(t){xs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(){return typeof xs().WorkerGlobalScope<"u"&&typeof xs().importScripts=="function"}async function P2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function D2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function O2(){return L1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1="firebaseLocalStorageDb",M2=1,wh="firebaseLocalStorage",V1="fbase_key";class ll{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function vd(t,e){return t.transaction([wh],e?"readwrite":"readonly").objectStore(wh)}function L2(){const t=indexedDB.deleteDatabase(N1);return new ll(t).toPromise()}function Zp(){const t=indexedDB.open(N1,M2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(wh,{keyPath:V1})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(wh)?e(s):(s.close(),await L2(),e(await Zp()))})})}async function fv(t,e,n){const s=vd(t,!0).put({[V1]:e,value:n});return new ll(s).toPromise()}async function N2(t,e){const n=vd(t,!1).get(e),s=await new ll(n).toPromise();return s===void 0?null:s.value}function pv(t,e){const n=vd(t,!0).delete(e);return new ll(n).toPromise()}const V2=800,F2=3;class F1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>F2)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return L1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bd._getInstance(O2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await P2(),!this.activeServiceWorker)return;this.sender=new k2(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||D2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zp();return await fv(e,vh,"1"),await pv(e,vh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>fv(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>N2(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>pv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const r=vd(i,!1).getAll();return new ll(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:i,value:r}of e)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),V2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}F1.type="LOCAL";const B2=F1;new ol(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(t,e){return e?Qs(e):(he(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm extends Pm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Fo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Fo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function $2(t){return k1(t.auth,new Mm(t),t.bypassAuthState)}function H2(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),C1(n,new Mm(t),t.bypassAuthState)}async function z2(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),f2(n,new Mm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e,n,s,i,r=!1){this.auth=e,this.resolver=s,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:i,tenantId:r,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $2;case"linkViaPopup":case"linkViaRedirect":return z2;case"reauthViaPopup":case"reauthViaRedirect":return H2;default:rs(this.auth,"internal-error")}}resolve(e){ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2=new ol(2e3,1e4);class Ao extends B1{constructor(e,n,s,i,r){super(e,n,i,r),this.provider=s,this.authWindow=null,this.pollId=null,Ao.currentPopupAction&&Ao.currentPopupAction.cancel(),Ao.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){ri(this.filter.length===1,"Popup operations only handle one event");const e=Om();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Is(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Is(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ao.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Is(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,j2.get())};e()}}Ao.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2="pendingRedirect",Nu=new Map;class q2 extends B1{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Nu.get(this.auth._key());if(!e){try{const s=await G2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Nu.set(this.auth._key(),e)}return this.bypassAuthState||Nu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function G2(t,e){const n=Q2(e),s=Y2(t);if(!await s._isAvailable())return!1;const i=await s._get(n)==="true";return await s._remove(n),i}function K2(t,e){Nu.set(t._key(),e)}function Y2(t){return Qs(t._redirectPersistence)}function Q2(t){return Lu(W2,t.config.apiKey,t.name)}async function X2(t,e,n=!1){const s=ro(t),i=U2(s,e),o=await new q2(s,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=10*60*1e3;class Z2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!U1(e)){const i=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Is(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=J2&&this.cachedEventUids.clear(),this.cachedEventUids.has(gv(e))}saveEventToCache(e){this.cachedEventUids.add(gv(e)),this.lastProcessedEventTime=Date.now()}}function gv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function U1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function eL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return U1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tL(t,e={}){return di(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sL=/^https?/;async function iL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await tL(t);for(const n of e)try{if(rL(n))return}catch{}rs(t,"unauthorized-domain")}function rL(t){const e=Xp(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!sL.test(n))return!1;if(nL.test(t))return s===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL=new ol(3e4,6e4);function mv(){const t=xs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function aL(t){return new Promise((e,n)=>{var s,i,r;function o(){mv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mv(),n(Is(t,"network-request-failed"))},timeout:oL.get()})}if(!((i=(s=xs().gapi)===null||s===void 0?void 0:s.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((r=xs().gapi)===null||r===void 0)&&r.load)o();else{const a=YM("iframefcb");return xs()[a]=()=>{gapi.load?o():n(Is(t,"network-request-failed"))},S1(`${KM()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Vu=null,e})}let Vu=null;function cL(t){return Vu=Vu||aL(t),Vu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL=new ol(5e3,15e3),uL="__/auth/iframe",hL="emulator/auth/iframe",dL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pL(t){const e=t.config;he(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Cm(e,hL):`https://${t.config.authDomain}/${uL}`,s={apiKey:e.apiKey,appName:t.name,v:io},i=fL.get(t.config.apiHost);i&&(s.eid=i);const r=t._getFrameworks();return r.length&&(s.fw=r.join(",")),`${n}?${rl(s).slice(1)}`}async function gL(t){const e=await cL(t),n=xs().gapi;return he(n,t,"internal-error"),e.open({where:document.body,url:pL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dL,dontclear:!0},s=>new Promise(async(i,r)=>{await s.restyle({setHideOnLeave:!1});const o=Is(t,"network-request-failed"),a=xs().setTimeout(()=>{r(o)},lL.get());function c(){xs().clearTimeout(a),i(s)}s.ping(c).then(c,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_L=500,yL=600,bL="_blank",vL="http://localhost";class _v{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wL(t,e,n,s=_L,i=yL){const r=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const c=Object.assign(Object.assign({},mL),{width:s.toString(),height:i.toString(),top:r,left:o}),l=Mt().toLowerCase();n&&(a=_1(l)?bL:n),m1(l)&&(e=e||vL,c.scrollbars="yes");const u=Object.entries(c).reduce((d,[f,g])=>`${d}${f}=${g},`,"");if(FM(l)&&a!=="_self")return EL(e||"",a),new _v(null);const h=window.open(e||"",a,u);he(h,t,"popup-blocked");try{h.focus()}catch{}return new _v(h)}function EL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL="__/auth/handler",SL="emulator/auth/handler",RL=encodeURIComponent("fac");async function yv(t,e,n,s,i,r){he(t.config.authDomain,t,"auth-domain-config-required"),he(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:io,eventId:i};if(e instanceof I1){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",iO(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries(r||{}))o[u]=h}if(e instanceof cl){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const c=await t._getAppCheckToken(),l=c?`#${RL}=${encodeURIComponent(c)}`:"";return`${IL(t)}?${rl(a).slice(1)}${l}`}function IL({config:t}){return t.emulator?Cm(t,SL):`https://${t.authDomain}/${TL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf="webStorageSupport";class xL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=M1,this._completeRedirectFn=X2,this._overrideRedirectResult=K2}async _openPopup(e,n,s,i){var r;ri((r=this.eventManagers[e._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const o=await yv(e,n,s,Xp(),i);return wL(e,o,Om())}async _openRedirect(e,n,s,i){await this._originValidation(e);const r=await yv(e,n,s,Xp(),i);return A2(r),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:r}=this.eventManagers[n];return i?Promise.resolve(i):(ri(r,"If manager is not set, promise should be"),r)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await gL(e),s=new Z2(e);return n.register("authEvent",i=>(he(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Wf,{type:Wf},i=>{var r;const o=(r=i==null?void 0:i[0])===null||r===void 0?void 0:r[Wf];o!==void 0&&n(!!o),rs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=iL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return E1()||Am()||_d()}}const CL=xL;var bv="@firebase/auth",vv="1.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PL(t){qr(new Xi("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;he(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:T1(t)},l=new WM(s,i,r,c);return e2(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),qr(new Xi("auth-internal",e=>{const n=ro(e.getProvider("auth").getImmediate());return(s=>new kL(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rs(bv,vv,AL(t)),Rs(bv,vv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL=5*60,OL=t1("authIdTokenMaxAge")||DL;let wv=null;const ML=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>OL)return;const i=n==null?void 0:n.token;wv!==i&&(wv=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function LL(t=Rm()){const e=md(t,"auth");if(e.isInitialized())return e.getImmediate();const n=ZM(t,{popupRedirectResolver:CL,persistence:[B2,x2,M1]}),s=t1("authTokenSyncURL");if(s){const r=ML(s);w2(n,r,()=>r(n.currentUser)),v2(n,o=>r(o))}const i=JT("auth");return i&&t2(n,`http://${i}`),n}function NL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}qM({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=i=>{const r=Is("internal-error");r.customData=i,n(r)},s.type="text/javascript",s.charset="UTF-8",NL().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PL("Browser");var VL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},G,Lm=Lm||{},fe=VL||self;function wd(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function ul(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function FL(t){return Object.prototype.hasOwnProperty.call(t,qf)&&t[qf]||(t[qf]=++BL)}var qf="closure_uid_"+(1e9*Math.random()>>>0),BL=0;function UL(t,e,n){return t.call.apply(t.bind,arguments)}function $L(t,e,n){if(!t)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,s),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function an(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?an=UL:an=$L,an.apply(null,arguments)}function Zl(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var s=n.slice();return s.push.apply(s,arguments),t.apply(this,s)}}function jt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(s,i,r){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(s,o)}}function rr(){this.s=this.s,this.o=this.o}var HL=0;rr.prototype.s=!1;rr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),HL!=0)&&FL(this)};rr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const $1=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Nm(t){const e=t.length;if(0<e){const n=Array(e);for(let s=0;s<e;s++)n[s]=t[s];return n}return[]}function Ev(t,e){for(let n=1;n<arguments.length;n++){const s=arguments[n];if(wd(s)){const i=t.length||0,r=s.length||0;t.length=i+r;for(let o=0;o<r;o++)t[i+o]=s[o]}else t.push(s)}}function cn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}cn.prototype.h=function(){this.defaultPrevented=!0};var zL=function(){if(!fe.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};fe.addEventListener("test",n,e),fe.removeEventListener("test",n,e)}catch{}return t}();function Pc(t){return/^[\s\xa0]*$/.test(t)}function Ed(){var t=fe.navigator;return t&&(t=t.userAgent)?t:""}function _s(t){return Ed().indexOf(t)!=-1}function Vm(t){return Vm[" "](t),t}Vm[" "]=function(){};function jL(t,e){var n=NN;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var WL=_s("Opera"),Yo=_s("Trident")||_s("MSIE"),H1=_s("Edge"),eg=H1||Yo,z1=_s("Gecko")&&!(Ed().toLowerCase().indexOf("webkit")!=-1&&!_s("Edge"))&&!(_s("Trident")||_s("MSIE"))&&!_s("Edge"),qL=Ed().toLowerCase().indexOf("webkit")!=-1&&!_s("Edge");function j1(){var t=fe.document;return t?t.documentMode:void 0}var tg;e:{var Gf="",Kf=function(){var t=Ed();if(z1)return/rv:([^\);]+)(\)|;)/.exec(t);if(H1)return/Edge\/([\d\.]+)/.exec(t);if(Yo)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(qL)return/WebKit\/(\S+)/.exec(t);if(WL)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Kf&&(Gf=Kf?Kf[1]:""),Yo){var Yf=j1();if(Yf!=null&&Yf>parseFloat(Gf)){tg=String(Yf);break e}}tg=Gf}var ng;if(fe.document&&Yo){var Tv=j1();ng=Tv||parseInt(tg,10)||void 0}else ng=void 0;var GL=ng;function Dc(t,e){if(cn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,s=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(z1){e:{try{Vm(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,s?(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:KL[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Dc.$.h.call(this)}}jt(Dc,cn);var KL={2:"touch",3:"pen",4:"mouse"};Dc.prototype.h=function(){Dc.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var hl="closure_listenable_"+(1e6*Math.random()|0),YL=0;function QL(t,e,n,s,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!s,this.la=i,this.key=++YL,this.fa=this.ia=!1}function Td(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Fm(t,e,n){for(const s in t)e.call(n,t[s],s,t)}function XL(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function W1(t){const e={};for(const n in t)e[n]=t[n];return e}const Sv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function q1(t,e){let n,s;for(let i=1;i<arguments.length;i++){s=arguments[i];for(n in s)t[n]=s[n];for(let r=0;r<Sv.length;r++)n=Sv[r],Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}}function Sd(t){this.src=t,this.g={},this.h=0}Sd.prototype.add=function(t,e,n,s,i){var r=t.toString();t=this.g[r],t||(t=this.g[r]=[],this.h++);var o=ig(t,e,s,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new QL(e,this.src,r,!!s,i),e.ia=n,t.push(e)),e};function sg(t,e){var n=e.type;if(n in t.g){var s=t.g[n],i=$1(s,e),r;(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(Td(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function ig(t,e,n,s){for(var i=0;i<t.length;++i){var r=t[i];if(!r.fa&&r.listener==e&&r.capture==!!n&&r.la==s)return i}return-1}var Bm="closure_lm_"+(1e6*Math.random()|0),Qf={};function G1(t,e,n,s,i){if(s&&s.once)return Y1(t,e,n,s,i);if(Array.isArray(e)){for(var r=0;r<e.length;r++)G1(t,e[r],n,s,i);return null}return n=Hm(n),t&&t[hl]?t.O(e,n,ul(s)?!!s.capture:!!s,i):K1(t,e,n,!1,s,i)}function K1(t,e,n,s,i,r){if(!e)throw Error("Invalid event type");var o=ul(i)?!!i.capture:!!i,a=$m(t);if(a||(t[Bm]=a=new Sd(t)),n=a.add(e,n,s,o,r),n.proxy)return n;if(s=JL(),n.proxy=s,s.src=t,s.listener=n,t.addEventListener)zL||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),s,i);else if(t.attachEvent)t.attachEvent(X1(e.toString()),s);else if(t.addListener&&t.removeListener)t.addListener(s);else throw Error("addEventListener and attachEvent are unavailable.");return n}function JL(){function t(n){return e.call(t.src,t.listener,n)}const e=ZL;return t}function Y1(t,e,n,s,i){if(Array.isArray(e)){for(var r=0;r<e.length;r++)Y1(t,e[r],n,s,i);return null}return n=Hm(n),t&&t[hl]?t.P(e,n,ul(s)?!!s.capture:!!s,i):K1(t,e,n,!0,s,i)}function Q1(t,e,n,s,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)Q1(t,e[r],n,s,i);else s=ul(s)?!!s.capture:!!s,n=Hm(n),t&&t[hl]?(t=t.i,e=String(e).toString(),e in t.g&&(r=t.g[e],n=ig(r,n,s,i),-1<n&&(Td(r[n]),Array.prototype.splice.call(r,n,1),r.length==0&&(delete t.g[e],t.h--)))):t&&(t=$m(t))&&(e=t.g[e.toString()],t=-1,e&&(t=ig(e,n,s,i)),(n=-1<t?e[t]:null)&&Um(n))}function Um(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[hl])sg(e.i,t);else{var n=t.type,s=t.proxy;e.removeEventListener?e.removeEventListener(n,s,t.capture):e.detachEvent?e.detachEvent(X1(n),s):e.addListener&&e.removeListener&&e.removeListener(s),(n=$m(e))?(sg(n,t),n.h==0&&(n.src=null,e[Bm]=null)):Td(t)}}}function X1(t){return t in Qf?Qf[t]:Qf[t]="on"+t}function ZL(t,e){if(t.fa)t=!0;else{e=new Dc(e,this);var n=t.listener,s=t.la||t.src;t.ia&&Um(t),t=n.call(s,e)}return t}function $m(t){return t=t[Bm],t instanceof Sd?t:null}var Xf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hm(t){return typeof t=="function"?t:(t[Xf]||(t[Xf]=function(e){return t.handleEvent(e)}),t[Xf])}function zt(){rr.call(this),this.i=new Sd(this),this.S=this,this.J=null}jt(zt,rr);zt.prototype[hl]=!0;zt.prototype.removeEventListener=function(t,e,n,s){Q1(this,t,e,n,s)};function Qt(t,e){var n,s=t.J;if(s)for(n=[];s;s=s.J)n.push(s);if(t=t.S,s=e.type||e,typeof e=="string")e=new cn(e,t);else if(e instanceof cn)e.target=e.target||t;else{var i=e;e=new cn(s,t),q1(e,i)}if(i=!0,n)for(var r=n.length-1;0<=r;r--){var o=e.g=n[r];i=eu(o,s,!0,e)&&i}if(o=e.g=t,i=eu(o,s,!0,e)&&i,i=eu(o,s,!1,e)&&i,n)for(r=0;r<n.length;r++)o=e.g=n[r],i=eu(o,s,!1,e)&&i}zt.prototype.N=function(){if(zt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],s=0;s<n.length;s++)Td(n[s]);delete t.g[e],t.h--}}this.J=null};zt.prototype.O=function(t,e,n,s){return this.i.add(String(t),e,!1,n,s)};zt.prototype.P=function(t,e,n,s){return this.i.add(String(t),e,!0,n,s)};function eu(t,e,n,s){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,r=0;r<e.length;++r){var o=e[r];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&sg(t.i,o),i=a.call(c,s)!==!1&&i}}return i&&!s.defaultPrevented}var zm=fe.JSON.stringify;class eN{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function tN(){var t=jm;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class nN{constructor(){this.h=this.g=null}add(e,n){const s=J1.get();s.set(e,n),this.h?this.h.next=s:this.g=s,this.h=s}}var J1=new eN(()=>new sN,t=>t.reset());class sN{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function iN(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function rN(t){fe.setTimeout(()=>{throw t},0)}let Oc,Mc=!1,jm=new nN,Z1=()=>{const t=fe.Promise.resolve(void 0);Oc=()=>{t.then(oN)}};var oN=()=>{for(var t;t=tN();){try{t.h.call(t.g)}catch(n){rN(n)}var e=J1;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Mc=!1};function Rd(t,e){zt.call(this),this.h=t||1,this.g=e||fe,this.j=an(this.qb,this),this.l=Date.now()}jt(Rd,zt);G=Rd.prototype;G.ga=!1;G.T=null;G.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Qt(this,"tick"),this.ga&&(Wm(this),this.start()))}};G.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Wm(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}G.N=function(){Rd.$.N.call(this),Wm(this),delete this.g};function qm(t,e,n){if(typeof t=="function")n&&(t=an(t,n));else if(t&&typeof t.handleEvent=="function")t=an(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:fe.setTimeout(t,e||0)}function eS(t){t.g=qm(()=>{t.g=null,t.i&&(t.i=!1,eS(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class aN extends rr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:eS(this)}N(){super.N(),this.g&&(fe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Lc(t){rr.call(this),this.h=t,this.g={}}jt(Lc,rr);var Rv=[];function tS(t,e,n,s){Array.isArray(n)||(n&&(Rv[0]=n.toString()),n=Rv);for(var i=0;i<n.length;i++){var r=G1(e,n[i],s||t.handleEvent,!1,t.h||t);if(!r)break;t.g[r.key]=r}}function nS(t){Fm(t.g,function(e,n){this.g.hasOwnProperty(n)&&Um(e)},t),t.g={}}Lc.prototype.N=function(){Lc.$.N.call(this),nS(this)};Lc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Id(){this.g=!0}Id.prototype.Ea=function(){this.g=!1};function cN(t,e,n,s,i,r){t.info(function(){if(t.g)if(r)for(var o="",a=r.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+l+"&"):o+(u+"=redacted&")}}else o=null;else o=r;return"XMLHTTP REQ ("+s+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function lN(t,e,n,s,i,r,o){t.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+i+"]: "+e+`
`+n+`
`+r+" "+o})}function Po(t,e,n,s){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+hN(t,n)+(s?" "+s:"")})}function uN(t,e){t.info(function(){return"TIMEOUT: "+e})}Id.prototype.info=function(){};function hN(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var s=n[t];if(!(2>s.length)){var i=s[1];if(Array.isArray(i)&&!(1>i.length)){var r=i[0];if(r!="noop"&&r!="stop"&&r!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return zm(n)}catch{return e}}var ao={},Iv=null;function xd(){return Iv=Iv||new zt}ao.Ta="serverreachability";function sS(t){cn.call(this,ao.Ta,t)}jt(sS,cn);function Nc(t){const e=xd();Qt(e,new sS(e))}ao.STAT_EVENT="statevent";function iS(t,e){cn.call(this,ao.STAT_EVENT,t),this.stat=e}jt(iS,cn);function mn(t){const e=xd();Qt(e,new iS(e,t))}ao.Ua="timingevent";function rS(t,e){cn.call(this,ao.Ua,t),this.size=e}jt(rS,cn);function dl(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return fe.setTimeout(function(){t()},e)}var Cd={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},oS={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Gm(){}Gm.prototype.h=null;function xv(t){return t.h||(t.h=t.i())}function aS(){}var fl={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Km(){cn.call(this,"d")}jt(Km,cn);function Ym(){cn.call(this,"c")}jt(Ym,cn);var rg;function kd(){}jt(kd,Gm);kd.prototype.g=function(){return new XMLHttpRequest};kd.prototype.i=function(){return{}};rg=new kd;function pl(t,e,n,s){this.l=t,this.j=e,this.m=n,this.W=s||1,this.U=new Lc(this),this.P=dN,t=eg?125:void 0,this.V=new Rd(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new cS}function cS(){this.i=null,this.g="",this.h=!1}var dN=45e3,lS={},og={};G=pl.prototype;G.setTimeout=function(t){this.P=t};function ag(t,e,n){t.L=1,t.A=Pd(oi(e)),t.u=n,t.S=!0,uS(t,null)}function uS(t,e){t.G=Date.now(),gl(t),t.B=oi(t.A);var n=t.B,s=t.W;Array.isArray(s)||(s=[String(s)]),yS(n.i,"t",s),t.o=0,n=t.l.J,t.h=new cS,t.g=BS(t.l,n?e:null,!t.u),0<t.O&&(t.M=new aN(an(t.Pa,t,t.g),t.O)),tS(t.U,t.g,"readystatechange",t.nb),e=t.I?W1(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Nc(),cN(t.j,t.v,t.B,t.m,t.W,t.u)}G.nb=function(t){t=t.target;const e=this.M;e&&vs(t)==3?e.l():this.Pa(t)};G.Pa=function(t){try{if(t==this.g)e:{const u=vs(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||eg||this.g&&(this.h.h||this.g.ja()||Pv(this.g)))){this.J||u!=4||e==7||(e==8||0>=h?Nc(3):Nc(2)),Ad(this);var n=this.g.da();this.ca=n;t:if(hS(this)){var s=Pv(this.g);t="";var i=s.length,r=vs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){xr(this),rc(this);var o="";break t}this.h.i=new fe.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(s[e],{stream:r&&e==i-1});s.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,lN(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Pc(a)){var l=a;break t}}l=null}if(n=l)Po(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cg(this,n);else{this.i=!1,this.s=3,mn(12),xr(this),rc(this);break e}}this.S?(dS(this,u,o),eg&&this.i&&u==3&&(tS(this.U,this.V,"tick",this.mb),this.V.start())):(Po(this.j,this.m,o,null),cg(this,o)),u==4&&xr(this),this.i&&!this.J&&(u==4?LS(this.l,this):(this.i=!1,gl(this)))}else ON(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,mn(12)):(this.s=0,mn(13)),xr(this),rc(this)}}}catch{}finally{}};function hS(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function dS(t,e,n){let s=!0,i;for(;!t.J&&t.o<n.length;)if(i=fN(t,n),i==og){e==4&&(t.s=4,mn(14),s=!1),Po(t.j,t.m,null,"[Incomplete Response]");break}else if(i==lS){t.s=4,mn(15),Po(t.j,t.m,n,"[Invalid Chunk]"),s=!1;break}else Po(t.j,t.m,i,null),cg(t,i);hS(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,mn(16),s=!1),t.i=t.i&&s,s?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),t_(e),e.M=!0,mn(11))):(Po(t.j,t.m,n,"[Invalid Chunked Response]"),xr(t),rc(t))}G.mb=function(){if(this.g){var t=vs(this.g),e=this.g.ja();this.o<e.length&&(Ad(this),dS(this,t,e),this.i&&t!=4&&gl(this))}};function fN(t,e){var n=t.o,s=e.indexOf(`
`,n);return s==-1?og:(n=Number(e.substring(n,s)),isNaN(n)?lS:(s+=1,s+n>e.length?og:(e=e.slice(s,s+n),t.o=s+n,e)))}G.cancel=function(){this.J=!0,xr(this)};function gl(t){t.Y=Date.now()+t.P,fS(t,t.P)}function fS(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=dl(an(t.lb,t),e)}function Ad(t){t.C&&(fe.clearTimeout(t.C),t.C=null)}G.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(uN(this.j,this.B),this.L!=2&&(Nc(),mn(17)),xr(this),this.s=2,rc(this)):fS(this,this.Y-t)};function rc(t){t.l.H==0||t.J||LS(t.l,t)}function xr(t){Ad(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Wm(t.V),nS(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function cg(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||lg(n.i,t))){if(!t.K&&lg(n.i,t)&&n.H==3){try{var s=n.Ja.g.parse(e)}catch{s=null}if(Array.isArray(s)&&s.length==3){var i=s;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Sh(n),Ld(n);else break e;e_(n),mn(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=dl(an(n.ib,n),6e3));if(1>=wS(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Cr(n,11)}else if((t.K||n.g==t)&&Sh(n),!Pc(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];const u=l[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=l[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=l[5];d!=null&&typeof d=="number"&&0<d&&(s=1.5*d,n.L=s,n.l.info("backChannelRequestTimeoutMs_="+s)),s=n;const f=t.g;if(f){const g=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var r=s.i;r.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(r.j=r.l,r.g=new Set,r.h&&(Qm(r,r.h),r.h=null))}if(s.F){const m=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;m&&(s.Da=m,st(s.I,s.F,m))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),s=n;var o=t;if(s.wa=FS(s,s.J?s.pa:null,s.Y),o.K){ES(s.i,o);var a=o,c=s.L;c&&a.setTimeout(c),a.C&&(Ad(a),gl(a)),s.g=o}else OS(s);0<n.j.length&&Nd(n)}else l[0]!="stop"&&l[0]!="close"||Cr(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?Cr(n,7):Zm(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}Nc(4)}catch{}}function pN(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(wd(t)){for(var e=[],n=t.length,s=0;s<n;s++)e.push(t[s]);return e}e=[],n=0;for(s in t)e[n++]=t[s];return e}function gN(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(wd(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const s in t)e[n++]=s;return e}}}function pS(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(wd(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=gN(t),s=pN(t),i=s.length,r=0;r<i;r++)e.call(void 0,s[r],n&&n[r],t)}var gS=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mN(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var s=t[n].indexOf("="),i=null;if(0<=s){var r=t[n].substring(0,s);i=t[n].substring(s+1)}else r=t[n];e(r,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Fr(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Fr){this.h=t.h,Eh(this,t.j),this.s=t.s,this.g=t.g,Th(this,t.m),this.l=t.l;var e=t.i,n=new Vc;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Cv(this,n),this.o=t.o}else t&&(e=String(t).match(gS))?(this.h=!1,Eh(this,e[1]||"",!0),this.s=Ua(e[2]||""),this.g=Ua(e[3]||"",!0),Th(this,e[4]),this.l=Ua(e[5]||"",!0),Cv(this,e[6]||"",!0),this.o=Ua(e[7]||"")):(this.h=!1,this.i=new Vc(null,this.h))}Fr.prototype.toString=function(){var t=[],e=this.j;e&&t.push($a(e,kv,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push($a(e,kv,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push($a(n,n.charAt(0)=="/"?bN:yN,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",$a(n,wN)),t.join("")};function oi(t){return new Fr(t)}function Eh(t,e,n){t.j=n?Ua(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Th(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Cv(t,e,n){e instanceof Vc?(t.i=e,EN(t.i,t.h)):(n||(e=$a(e,vN)),t.i=new Vc(e,t.h))}function st(t,e,n){t.i.set(e,n)}function Pd(t){return st(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ua(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function $a(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,_N),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function _N(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var kv=/[#\/\?@]/g,yN=/[#\?:]/g,bN=/[#\?]/g,vN=/[#\?@]/g,wN=/#/g;function Vc(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function or(t){t.g||(t.g=new Map,t.h=0,t.i&&mN(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}G=Vc.prototype;G.add=function(t,e){or(this),this.i=null,t=ha(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function mS(t,e){or(t),e=ha(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function _S(t,e){return or(t),e=ha(t,e),t.g.has(e)}G.forEach=function(t,e){or(this),this.g.forEach(function(n,s){n.forEach(function(i){t.call(e,i,s,this)},this)},this)};G.ta=function(){or(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let s=0;s<e.length;s++){const i=t[s];for(let r=0;r<i.length;r++)n.push(e[s])}return n};G.Z=function(t){or(this);let e=[];if(typeof t=="string")_S(this,t)&&(e=e.concat(this.g.get(ha(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};G.set=function(t,e){return or(this),this.i=null,t=ha(this,t),_S(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};G.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function yS(t,e,n){mS(t,e),0<n.length&&(t.i=null,t.g.set(ha(t,e),Nm(n)),t.h+=n.length)}G.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var s=e[n];const r=encodeURIComponent(String(s)),o=this.Z(s);for(s=0;s<o.length;s++){var i=r;o[s]!==""&&(i+="="+encodeURIComponent(String(o[s]))),t.push(i)}}return this.i=t.join("&")};function ha(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function EN(t,e){e&&!t.j&&(or(t),t.i=null,t.g.forEach(function(n,s){var i=s.toLowerCase();s!=i&&(mS(this,s),yS(this,i,n))},t)),t.j=e}var TN=class{constructor(t,e){this.g=t,this.map=e}};function bS(t){this.l=t||SN,fe.PerformanceNavigationTiming?(t=fe.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(fe.g&&fe.g.Ka&&fe.g.Ka()&&fe.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var SN=10;function vS(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function wS(t){return t.h?1:t.g?t.g.size:0}function lg(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Qm(t,e){t.g?t.g.add(e):t.h=e}function ES(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}bS.prototype.cancel=function(){if(this.i=TS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function TS(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Nm(t.i)}var RN=class{stringify(t){return fe.JSON.stringify(t,void 0)}parse(t){return fe.JSON.parse(t,void 0)}};function IN(){this.g=new RN}function xN(t,e,n){const s=n||"";try{pS(t,function(i,r){let o=i;ul(i)&&(o=zm(i)),e.push(s+r+"="+encodeURIComponent(o))})}catch(i){throw e.push(s+"type="+encodeURIComponent("_badmap")),i}}function CN(t,e){const n=new Id;if(fe.Image){const s=new Image;s.onload=Zl(tu,n,s,"TestLoadImage: loaded",!0,e),s.onerror=Zl(tu,n,s,"TestLoadImage: error",!1,e),s.onabort=Zl(tu,n,s,"TestLoadImage: abort",!1,e),s.ontimeout=Zl(tu,n,s,"TestLoadImage: timeout",!1,e),fe.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=t}else e(!1)}function tu(t,e,n,s,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(s)}catch{}}function Dd(t){this.l=t.ec||null,this.j=t.ob||!1}jt(Dd,Gm);Dd.prototype.g=function(){return new Od(this.l,this.j)};Dd.prototype.i=function(t){return function(){return t}}({});function Od(t,e){zt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Xm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}jt(Od,zt);var Xm=0;G=Od.prototype;G.open=function(t,e){if(this.readyState!=Xm)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Fc(this)};G.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||fe).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};G.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ml(this)),this.readyState=Xm};G.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Fc(this)),this.g&&(this.readyState=3,Fc(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof fe.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;SS(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function SS(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}G.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ml(this):Fc(this),this.readyState==3&&SS(this)}};G.Za=function(t){this.g&&(this.response=this.responseText=t,ml(this))};G.Ya=function(t){this.g&&(this.response=t,ml(this))};G.ka=function(){this.g&&ml(this)};function ml(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Fc(t)}G.setRequestHeader=function(t,e){this.v.append(t,e)};G.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};G.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Fc(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Od.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var kN=fe.JSON.parse;function vt(t){zt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=RS,this.L=this.M=!1}jt(vt,zt);var RS="",AN=/^https?$/i,PN=["POST","PUT"];G=vt.prototype;G.Oa=function(t){this.M=t};G.ha=function(t,e,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():rg.g(),this.C=this.u?xv(this.u):xv(rg),this.g.onreadystatechange=an(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(r){Av(this,r);return}if(t=n||"",n=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var i in s)n.set(i,s[i]);else if(typeof s.keys=="function"&&typeof s.get=="function")for(const r of s.keys())n.set(r,s.get(r));else throw Error("Unknown input type for opt_headers: "+String(s));s=Array.from(n.keys()).find(r=>r.toLowerCase()=="content-type"),i=fe.FormData&&t instanceof fe.FormData,!(0<=$1(PN,e))||s||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[r,o]of n)this.g.setRequestHeader(r,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{CS(this),0<this.B&&((this.L=DN(this.g))?(this.g.timeout=this.B,this.g.ontimeout=an(this.ua,this)):this.A=qm(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(r){Av(this,r)}};function DN(t){return Yo&&typeof t.timeout=="number"&&t.ontimeout!==void 0}G.ua=function(){typeof Lm<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Qt(this,"timeout"),this.abort(8))};function Av(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,IS(t),Md(t)}function IS(t){t.F||(t.F=!0,Qt(t,"complete"),Qt(t,"error"))}G.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Qt(this,"complete"),Qt(this,"abort"),Md(this))};G.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Md(this,!0)),vt.$.N.call(this)};G.La=function(){this.s||(this.G||this.v||this.l?xS(this):this.kb())};G.kb=function(){xS(this)};function xS(t){if(t.h&&typeof Lm<"u"&&(!t.C[1]||vs(t)!=4||t.da()!=2)){if(t.v&&vs(t)==4)qm(t.La,0,t);else if(Qt(t,"readystatechange"),vs(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var s;if(s=o===0){var i=String(t.I).match(gS)[1]||null;!i&&fe.self&&fe.self.location&&(i=fe.self.location.protocol.slice(0,-1)),s=!AN.test(i?i.toLowerCase():"")}n=s}if(n)Qt(t,"complete"),Qt(t,"success");else{t.m=6;try{var r=2<vs(t)?t.g.statusText:""}catch{r=""}t.j=r+" ["+t.da()+"]",IS(t)}}finally{Md(t)}}}}function Md(t,e){if(t.g){CS(t);const n=t.g,s=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Qt(t,"ready");try{n.onreadystatechange=s}catch{}}}function CS(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(fe.clearTimeout(t.A),t.A=null)}G.isActive=function(){return!!this.g};function vs(t){return t.g?t.g.readyState:0}G.da=function(){try{return 2<vs(this)?this.g.status:-1}catch{return-1}};G.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};G.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),kN(e)}};function Pv(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case RS:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function ON(t){const e={};t=(t.g&&2<=vs(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let s=0;s<t.length;s++){if(Pc(t[s]))continue;var n=iN(t[s]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const r=e[i]||[];e[i]=r,r.push(n)}XL(e,function(s){return s.join(", ")})}G.Ia=function(){return this.m};G.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function kS(t){let e="";return Fm(t,function(n,s){e+=s,e+=":",e+=n,e+=`\r
`}),e}function Jm(t,e,n){e:{for(s in n){var s=!1;break e}s=!0}s||(n=kS(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):st(t,e,n))}function Sa(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function AS(t){this.Ga=0,this.j=[],this.l=new Id,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Sa("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Sa("baseRetryDelayMs",5e3,t),this.hb=Sa("retryDelaySeedMs",1e4,t),this.eb=Sa("forwardChannelMaxRetries",2,t),this.xa=Sa("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new bS(t&&t.concurrentRequestLimit),this.Ja=new IN,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}G=AS.prototype;G.ra=8;G.H=1;function Zm(t){if(PS(t),t.H==3){var e=t.W++,n=oi(t.I);if(st(n,"SID",t.K),st(n,"RID",e),st(n,"TYPE","terminate"),_l(t,n),e=new pl(t,t.l,e),e.L=2,e.A=Pd(oi(n)),n=!1,fe.navigator&&fe.navigator.sendBeacon)try{n=fe.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&fe.Image&&(new Image().src=e.A,n=!0),n||(e.g=BS(e.l,null),e.g.ha(e.A)),e.G=Date.now(),gl(e)}VS(t)}function Ld(t){t.g&&(t_(t),t.g.cancel(),t.g=null)}function PS(t){Ld(t),t.u&&(fe.clearTimeout(t.u),t.u=null),Sh(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&fe.clearTimeout(t.m),t.m=null)}function Nd(t){if(!vS(t.i)&&!t.m){t.m=!0;var e=t.Na;Oc||Z1(),Mc||(Oc(),Mc=!0),jm.add(e,t),t.C=0}}function MN(t,e){return wS(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=dl(an(t.Na,t,e),NS(t,t.C)),t.C++,!0)}G.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new pl(this,this.l,t);let r=this.s;if(this.U&&(r?(r=W1(r),q1(r,this.U)):r=this.U),this.o!==null||this.O||(i.I=r,r=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var s=this.j[n];if("__data__"in s.map&&(s=s.map.__data__,typeof s=="string")){s=s.length;break t}s=void 0}if(s===void 0)break;if(e+=s,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=DS(this,i,e),n=oi(this.I),st(n,"RID",t),st(n,"CVER",22),this.F&&st(n,"X-HTTP-Session-Id",this.F),_l(this,n),r&&(this.O?e="headers="+encodeURIComponent(String(kS(r)))+"&"+e:this.o&&Jm(n,this.o,r)),Qm(this.i,i),this.bb&&st(n,"TYPE","init"),this.P?(st(n,"$req",e),st(n,"SID","null"),i.aa=!0,ag(i,n,null)):ag(i,n,e),this.H=2}}else this.H==3&&(t?Dv(this,t):this.j.length==0||vS(this.i)||Dv(this))};function Dv(t,e){var n;e?n=e.m:n=t.W++;const s=oi(t.I);st(s,"SID",t.K),st(s,"RID",n),st(s,"AID",t.V),_l(t,s),t.o&&t.s&&Jm(s,t.o,t.s),n=new pl(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=DS(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Qm(t.i,n),ag(n,s,e)}function _l(t,e){t.na&&Fm(t.na,function(n,s){st(e,s,n)}),t.h&&pS({},function(n,s){st(e,s,n)})}function DS(t,e,n){n=Math.min(t.j.length,n);var s=t.h?an(t.h.Va,t.h,t):null;e:{var i=t.j;let r=-1;for(;;){const o=["count="+n];r==-1?0<n?(r=i[0].g,o.push("ofs="+r)):r=0:o.push("ofs="+r);let a=!0;for(let c=0;c<n;c++){let l=i[c].g;const u=i[c].map;if(l-=r,0>l)r=Math.max(0,i[c].g-100),a=!1;else try{xN(u,o,"req"+l+"_")}catch{s&&s(u)}}if(a){s=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,s}function OS(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Oc||Z1(),Mc||(Oc(),Mc=!0),jm.add(e,t),t.A=0}}function e_(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=dl(an(t.Ma,t),NS(t,t.A)),t.A++,!0)}G.Ma=function(){if(this.u=null,MS(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=dl(an(this.jb,this),t)}};G.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,mn(10),Ld(this),MS(this))};function t_(t){t.B!=null&&(fe.clearTimeout(t.B),t.B=null)}function MS(t){t.g=new pl(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=oi(t.wa);st(e,"RID","rpc"),st(e,"SID",t.K),st(e,"AID",t.V),st(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&st(e,"TO",t.qa),st(e,"TYPE","xmlhttp"),_l(t,e),t.o&&t.s&&Jm(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Pd(oi(e)),n.u=null,n.S=!0,uS(n,t)}G.ib=function(){this.v!=null&&(this.v=null,Ld(this),e_(this),mn(19))};function Sh(t){t.v!=null&&(fe.clearTimeout(t.v),t.v=null)}function LS(t,e){var n=null;if(t.g==e){Sh(t),t_(t),t.g=null;var s=2}else if(lg(t.i,e))n=e.F,ES(t.i,e),s=1;else return;if(t.H!=0){if(e.i)if(s==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;s=xd(),Qt(s,new rS(s,n)),Nd(t)}else OS(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(s==1&&MN(t,e)||s==2&&e_(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Cr(t,5);break;case 4:Cr(t,10);break;case 3:Cr(t,6);break;default:Cr(t,2)}}}function NS(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Cr(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var s=an(t.pb,t);n||(n=new Fr("//www.google.com/images/cleardot.gif"),fe.location&&fe.location.protocol=="http"||Eh(n,"https"),Pd(n)),CN(n.toString(),s)}else mn(2);t.H=0,t.h&&t.h.za(e),VS(t),PS(t)}G.pb=function(t){t?(this.l.info("Successfully pinged google.com"),mn(2)):(this.l.info("Failed to ping google.com"),mn(1))};function VS(t){if(t.H=0,t.ma=[],t.h){const e=TS(t.i);(e.length!=0||t.j.length!=0)&&(Ev(t.ma,e),Ev(t.ma,t.j),t.i.i.length=0,Nm(t.j),t.j.length=0),t.h.ya()}}function FS(t,e,n){var s=n instanceof Fr?oi(n):new Fr(n);if(s.g!="")e&&(s.g=e+"."+s.g),Th(s,s.m);else{var i=fe.location;s=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var r=new Fr(null);s&&Eh(r,s),e&&(r.g=e),i&&Th(r,i),n&&(r.l=n),s=r}return n=t.F,e=t.Da,n&&e&&st(s,n,e),st(s,"VER",t.ra),_l(t,s),s}function BS(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new vt(new Dd({ob:n})):new vt(t.va),e.Oa(t.J),e}G.isActive=function(){return!!this.h&&this.h.isActive(this)};function US(){}G=US.prototype;G.Ba=function(){};G.Aa=function(){};G.za=function(){};G.ya=function(){};G.isActive=function(){return!0};G.Va=function(){};function Rh(){if(Yo&&!(10<=Number(GL)))throw Error("Environmental error: no available transport.")}Rh.prototype.g=function(t,e){return new Ln(t,e)};function Ln(t,e){zt.call(this),this.g=new AS(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Pc(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Pc(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new da(this)}jt(Ln,zt);Ln.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;mn(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=FS(t,null,t.Y),Nd(t)};Ln.prototype.close=function(){Zm(this.g)};Ln.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=zm(t),t=n);e.j.push(new TN(e.fb++,t)),e.H==3&&Nd(e)};Ln.prototype.N=function(){this.g.h=null,delete this.j,Zm(this.g),delete this.g,Ln.$.N.call(this)};function $S(t){Km.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}jt($S,Km);function HS(){Ym.call(this),this.status=1}jt(HS,Ym);function da(t){this.g=t}jt(da,US);da.prototype.Ba=function(){Qt(this.g,"a")};da.prototype.Aa=function(t){Qt(this.g,new $S(t))};da.prototype.za=function(t){Qt(this.g,new HS)};da.prototype.ya=function(){Qt(this.g,"b")};function LN(){this.blockSize=-1}function os(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}jt(os,LN);os.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Jf(t,e,n){n||(n=0);var s=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)s[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)s[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var r=t.g[3],o=e+(r^n&(i^r))+s[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=r+(i^e&(n^i))+s[1]+3905402710&4294967295,r=e+(o<<12&4294967295|o>>>20),o=i+(n^r&(e^n))+s[2]+606105819&4294967295,i=r+(o<<17&4294967295|o>>>15),o=n+(e^i&(r^e))+s[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(r^n&(i^r))+s[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=r+(i^e&(n^i))+s[5]+1200080426&4294967295,r=e+(o<<12&4294967295|o>>>20),o=i+(n^r&(e^n))+s[6]+2821735955&4294967295,i=r+(o<<17&4294967295|o>>>15),o=n+(e^i&(r^e))+s[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(r^n&(i^r))+s[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=r+(i^e&(n^i))+s[9]+2336552879&4294967295,r=e+(o<<12&4294967295|o>>>20),o=i+(n^r&(e^n))+s[10]+4294925233&4294967295,i=r+(o<<17&4294967295|o>>>15),o=n+(e^i&(r^e))+s[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(r^n&(i^r))+s[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=r+(i^e&(n^i))+s[13]+4254626195&4294967295,r=e+(o<<12&4294967295|o>>>20),o=i+(n^r&(e^n))+s[14]+2792965006&4294967295,i=r+(o<<17&4294967295|o>>>15),o=n+(e^i&(r^e))+s[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^r&(n^i))+s[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=r+(n^i&(e^n))+s[6]+3225465664&4294967295,r=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(r^e))+s[11]+643717713&4294967295,i=r+(o<<14&4294967295|o>>>18),o=n+(r^e&(i^r))+s[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^r&(n^i))+s[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=r+(n^i&(e^n))+s[10]+38016083&4294967295,r=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(r^e))+s[15]+3634488961&4294967295,i=r+(o<<14&4294967295|o>>>18),o=n+(r^e&(i^r))+s[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^r&(n^i))+s[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=r+(n^i&(e^n))+s[14]+3275163606&4294967295,r=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(r^e))+s[3]+4107603335&4294967295,i=r+(o<<14&4294967295|o>>>18),o=n+(r^e&(i^r))+s[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^r&(n^i))+s[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=r+(n^i&(e^n))+s[2]+4243563512&4294967295,r=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(r^e))+s[7]+1735328473&4294967295,i=r+(o<<14&4294967295|o>>>18),o=n+(r^e&(i^r))+s[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^r)+s[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=r+(e^n^i)+s[8]+2272392833&4294967295,r=e+(o<<11&4294967295|o>>>21),o=i+(r^e^n)+s[11]+1839030562&4294967295,i=r+(o<<16&4294967295|o>>>16),o=n+(i^r^e)+s[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^r)+s[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=r+(e^n^i)+s[4]+1272893353&4294967295,r=e+(o<<11&4294967295|o>>>21),o=i+(r^e^n)+s[7]+4139469664&4294967295,i=r+(o<<16&4294967295|o>>>16),o=n+(i^r^e)+s[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^r)+s[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=r+(e^n^i)+s[0]+3936430074&4294967295,r=e+(o<<11&4294967295|o>>>21),o=i+(r^e^n)+s[3]+3572445317&4294967295,i=r+(o<<16&4294967295|o>>>16),o=n+(i^r^e)+s[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^r)+s[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=r+(e^n^i)+s[12]+3873151461&4294967295,r=e+(o<<11&4294967295|o>>>21),o=i+(r^e^n)+s[15]+530742520&4294967295,i=r+(o<<16&4294967295|o>>>16),o=n+(i^r^e)+s[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~r))+s[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=r+(n^(e|~i))+s[7]+1126891415&4294967295,r=e+(o<<10&4294967295|o>>>22),o=i+(e^(r|~n))+s[14]+2878612391&4294967295,i=r+(o<<15&4294967295|o>>>17),o=n+(r^(i|~e))+s[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~r))+s[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=r+(n^(e|~i))+s[3]+2399980690&4294967295,r=e+(o<<10&4294967295|o>>>22),o=i+(e^(r|~n))+s[10]+4293915773&4294967295,i=r+(o<<15&4294967295|o>>>17),o=n+(r^(i|~e))+s[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~r))+s[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=r+(n^(e|~i))+s[15]+4264355552&4294967295,r=e+(o<<10&4294967295|o>>>22),o=i+(e^(r|~n))+s[6]+2734768916&4294967295,i=r+(o<<15&4294967295|o>>>17),o=n+(r^(i|~e))+s[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~r))+s[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=r+(n^(e|~i))+s[11]+3174756917&4294967295,r=e+(o<<10&4294967295|o>>>22),o=i+(e^(r|~n))+s[2]+718787259&4294967295,i=r+(o<<15&4294967295|o>>>17),o=n+(r^(i|~e))+s[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+r&4294967295}os.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,s=this.m,i=this.h,r=0;r<e;){if(i==0)for(;r<=n;)Jf(this,t,r),r+=this.blockSize;if(typeof t=="string"){for(;r<e;)if(s[i++]=t.charCodeAt(r++),i==this.blockSize){Jf(this,s),i=0;break}}else for(;r<e;)if(s[i++]=t[r++],i==this.blockSize){Jf(this,s),i=0;break}}this.h=i,this.i+=e};os.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var s=0;32>s;s+=8)t[n++]=this.g[e]>>>s&255;return t};function Ge(t,e){this.h=e;for(var n=[],s=!0,i=t.length-1;0<=i;i--){var r=t[i]|0;s&&r==e||(n[i]=r,s=!1)}this.g=n}var NN={};function n_(t){return-128<=t&&128>t?jL(t,function(e){return new Ge([e|0],0>e?-1:0)}):new Ge([t|0],0>t?-1:0)}function ws(t){if(isNaN(t)||!isFinite(t))return Bo;if(0>t)return Gt(ws(-t));for(var e=[],n=1,s=0;t>=n;s++)e[s]=t/n|0,n*=ug;return new Ge(e,0)}function zS(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Gt(zS(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=ws(Math.pow(e,8)),s=Bo,i=0;i<t.length;i+=8){var r=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+r),e);8>r?(r=ws(Math.pow(e,r)),s=s.R(r).add(ws(o))):(s=s.R(n),s=s.add(ws(o)))}return s}var ug=4294967296,Bo=n_(0),hg=n_(1),Ov=n_(16777216);G=Ge.prototype;G.ea=function(){if(Bn(this))return-Gt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var s=this.D(n);t+=(0<=s?s:ug+s)*e,e*=ug}return t};G.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Xs(this))return"0";if(Bn(this))return"-"+Gt(this).toString(t);for(var e=ws(Math.pow(t,6)),n=this,s="";;){var i=xh(n,e).g;n=Ih(n,i.R(e));var r=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Xs(n))return r+s;for(;6>r.length;)r="0"+r;s=r+s}};G.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Xs(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Bn(t){return t.h==-1}G.X=function(t){return t=Ih(this,t),Bn(t)?-1:Xs(t)?0:1};function Gt(t){for(var e=t.g.length,n=[],s=0;s<e;s++)n[s]=~t.g[s];return new Ge(n,~t.h).add(hg)}G.abs=function(){return Bn(this)?Gt(this):this};G.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0,i=0;i<=e;i++){var r=s+(this.D(i)&65535)+(t.D(i)&65535),o=(r>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);s=o>>>16,r&=65535,o&=65535,n[i]=o<<16|r}return new Ge(n,n[n.length-1]&-2147483648?-1:0)};function Ih(t,e){return t.add(Gt(e))}G.R=function(t){if(Xs(this)||Xs(t))return Bo;if(Bn(this))return Bn(t)?Gt(this).R(Gt(t)):Gt(Gt(this).R(t));if(Bn(t))return Gt(this.R(Gt(t)));if(0>this.X(Ov)&&0>t.X(Ov))return ws(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],s=0;s<2*e;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var i=0;i<t.g.length;i++){var r=this.D(s)>>>16,o=this.D(s)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*s+2*i]+=o*c,nu(n,2*s+2*i),n[2*s+2*i+1]+=r*c,nu(n,2*s+2*i+1),n[2*s+2*i+1]+=o*a,nu(n,2*s+2*i+1),n[2*s+2*i+2]+=r*a,nu(n,2*s+2*i+2)}for(s=0;s<e;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=e;s<2*e;s++)n[s]=0;return new Ge(n,0)};function nu(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Ra(t,e){this.g=t,this.h=e}function xh(t,e){if(Xs(e))throw Error("division by zero");if(Xs(t))return new Ra(Bo,Bo);if(Bn(t))return e=xh(Gt(t),e),new Ra(Gt(e.g),Gt(e.h));if(Bn(e))return e=xh(t,Gt(e)),new Ra(Gt(e.g),e.h);if(30<t.g.length){if(Bn(t)||Bn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=hg,s=e;0>=s.X(t);)n=Mv(n),s=Mv(s);var i=yo(n,1),r=yo(s,1);for(s=yo(s,2),n=yo(n,2);!Xs(s);){var o=r.add(s);0>=o.X(t)&&(i=i.add(n),r=o),s=yo(s,1),n=yo(n,1)}return e=Ih(t,i.R(e)),new Ra(i,e)}for(i=Bo;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),s=Math.ceil(Math.log(n)/Math.LN2),s=48>=s?1:Math.pow(2,s-48),r=ws(n),o=r.R(e);Bn(o)||0<o.X(t);)n-=s,r=ws(n),o=r.R(e);Xs(r)&&(r=hg),i=i.add(r),t=Ih(t,o)}return new Ra(i,t)}G.gb=function(t){return xh(this,t).h};G.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)&t.D(s);return new Ge(n,this.h&t.h)};G.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)|t.D(s);return new Ge(n,this.h|t.h)};G.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)^t.D(s);return new Ge(n,this.h^t.h)};function Mv(t){for(var e=t.g.length+1,n=[],s=0;s<e;s++)n[s]=t.D(s)<<1|t.D(s-1)>>>31;return new Ge(n,t.h)}function yo(t,e){var n=e>>5;e%=32;for(var s=t.g.length-n,i=[],r=0;r<s;r++)i[r]=0<e?t.D(r+n)>>>e|t.D(r+n+1)<<32-e:t.D(r+n);return new Ge(i,t.h)}Rh.prototype.createWebChannel=Rh.prototype.g;Ln.prototype.send=Ln.prototype.u;Ln.prototype.open=Ln.prototype.m;Ln.prototype.close=Ln.prototype.close;Cd.NO_ERROR=0;Cd.TIMEOUT=8;Cd.HTTP_ERROR=6;oS.COMPLETE="complete";aS.EventType=fl;fl.OPEN="a";fl.CLOSE="b";fl.ERROR="c";fl.MESSAGE="d";zt.prototype.listen=zt.prototype.O;vt.prototype.listenOnce=vt.prototype.P;vt.prototype.getLastError=vt.prototype.Sa;vt.prototype.getLastErrorCode=vt.prototype.Ia;vt.prototype.getStatus=vt.prototype.da;vt.prototype.getResponseJson=vt.prototype.Wa;vt.prototype.getResponseText=vt.prototype.ja;vt.prototype.send=vt.prototype.ha;vt.prototype.setWithCredentials=vt.prototype.Oa;os.prototype.digest=os.prototype.l;os.prototype.reset=os.prototype.reset;os.prototype.update=os.prototype.j;Ge.prototype.add=Ge.prototype.add;Ge.prototype.multiply=Ge.prototype.R;Ge.prototype.modulo=Ge.prototype.gb;Ge.prototype.compare=Ge.prototype.X;Ge.prototype.toNumber=Ge.prototype.ea;Ge.prototype.toString=Ge.prototype.toString;Ge.prototype.getBits=Ge.prototype.D;Ge.fromNumber=ws;Ge.fromString=zS;var VN=function(){return new Rh},FN=function(){return xd()},Zf=Cd,BN=oS,UN=ao,Lv={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},su=aS,$N=vt,HN=os,Uo=Ge;const Nv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fa="10.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr=new Tm("@firebase/firestore");function Ia(){return Yr.logLevel}function q(t,...e){if(Yr.logLevel<=Oe.DEBUG){const n=e.map(s_);Yr.debug(`Firestore (${fa}): ${t}`,...n)}}function Ns(t,...e){if(Yr.logLevel<=Oe.ERROR){const n=e.map(s_);Yr.error(`Firestore (${fa}): ${t}`,...n)}}function Qo(t,...e){if(Yr.logLevel<=Oe.WARN){const n=e.map(s_);Yr.warn(`Firestore (${fa}): ${t}`,...n)}}function s_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function de(t="Unexpected state"){const e=`FIRESTORE (${fa}) INTERNAL ASSERTION FAILED: `+t;throw Ns(e),new Error(e)}function Ze(t,e){t||de()}function Te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends Bs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(tn.UNAUTHENTICATED))}shutdown(){}}class jN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class WN{constructor(e){this.t=e,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let s=this.i;const i=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let r=new Cs;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Cs,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=r;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Cs)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ze(typeof s.accessToken=="string"),new jS(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string"),new tn(e)}}class qN{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class GN{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new qN(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(tn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class KN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YN{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const s=r=>{r.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.R;return this.R=r.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>s(r))};const i=r=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.appCheck.addTokenListener(this.o)};this.A.onInit(r=>i(r)),setTimeout(()=>{if(!this.appCheck){const r=this.A.getImmediate({optional:!0});r?i(r):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ze(typeof n.token=="string"),this.R=n.token,new KN(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const i=QN(40);for(let r=0;r<i.length;++r)s.length<20&&i[r]<n&&(s+=e.charAt(i[r]%e.length))}return s}}function Ue(t,e){return t<e?-1:t>e?1:0}function Xo(t,e,n){return t.length===e.length&&t.every((s,i)=>n(s,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Q(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Bt.fromMillis(Date.now())}static fromDate(e){return Bt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new Bt(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ge(e)}static min(){return new ge(new Bt(0,0))}static max(){return new ge(new Bt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,n,s){n===void 0?n=0:n>e.length&&de(),s===void 0?s=e.length-n:s>e.length-n&&de(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Bc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Bc?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let i=0;i<s;i++){const r=e.get(i),o=n.get(i);if(r<o)return-1;if(r>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class it extends Bc{construct(e,n,s){return new it(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Q(L.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(i=>i.length>0))}return new it(n)}static emptyPath(){return new it([])}}const XN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yt extends Bc{construct(e,n,s){return new Yt(e,n,s)}static isValidIdentifier(e){return XN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Yt(["__name__"])}static fromServerFormat(e){const n=[];let s="",i=0;const r=()=>{if(s.length===0)throw new Q(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Q(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Q(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(s+=a,i++):(r(),i++)}if(r(),o)throw new Q(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yt(n)}static emptyPath(){return new Yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.path=e}static fromPath(e){return new se(it.fromString(e))}static fromName(e){return new se(it.fromString(e).popFirst(5))}static empty(){return new se(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&it.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return it.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new it(e.slice()))}}function JN(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,i=ge.fromTimestamp(s===1e9?new Bt(n+1,0):new Bt(n,s));return new Ji(i,se.empty(),e)}function ZN(t){return new Ji(t.readTime,t.key,-1)}class Ji{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Ji(ge.min(),se.empty(),-1)}static max(){return new Ji(ge.max(),se.empty(),-1)}}function eV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=se.comparator(t.documentKey,e.documentKey),n!==0?n:Ue(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yl(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==tV)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&de(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((s,i)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(s,i)},this.catchCallback=r=>{this.wrapFailure(n,r).next(s,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,s)=>{n(e)})}static reject(e){return new F((n,s)=>{s(e)})}static waitFor(e){return new F((n,s)=>{let i=0,r=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++r,o&&r===i&&n()},c=>s(c))}),o=!0,r===i&&n()})}static or(e){let n=F.resolve(!1);for(const s of e)n=n.next(i=>i?F.resolve(i):s());return n}static forEach(e,n){const s=[];return e.forEach((i,r)=>{s.push(n.call(this,i,r))}),this.waitFor(s)}static mapArray(e,n){return new F((s,i)=>{const r=e.length,o=new Array(r);let a=0;for(let c=0;c<r;c++){const l=c;n(e[l]).next(u=>{o[l]=u,++a,a===r&&s(o)},u=>i(u))}})}static doWhile(e,n){return new F((s,i)=>{const r=()=>{e()===!0?n().next(()=>{r()},i):s()};r()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Cs,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new oc(e,n.error)):this.V.resolve()},this.transaction.onerror=s=>{const i=r_(s.target.error);this.V.reject(new oc(e,i))}}static open(e,n,s,i){try{return new i_(n,e.transaction(i,s))}catch(r){throw new oc(n,r)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(q("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new iV(n)}}class kr{constructor(e,n,s){this.name=e,this.version=n,this.p=s,kr.S(Mt())===12.2&&Ns("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return q("SimpleDb","Removing database:",e),Rr(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!s1())return!1;if(kr.C())return!0;const e=Mt(),n=kr.S(e),s=0<n&&n<10,i=kr.v(e),r=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||r)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static v(e){const n=e.match(/Android ([\d.]+)/i),s=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(s)}async O(e){return this.db||(q("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,s)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=r=>{const o=r.target.result;n(o)},i.onblocked=()=>{s(new oc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=r=>{const o=r.target.error;o.name==="VersionError"?s(new Q(L.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?s(new Q(L.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):s(new oc(e,o))},i.onupgradeneeded=r=>{q("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',r.oldVersion);const o=r.target.result;this.p.N(o,i.transaction,r.oldVersion,this.version).next(()=>{q("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,s,i){const r=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(e);const a=i_.open(this.db,e,r?"readonly":"readwrite",s),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),F.reject(l))).toPromise();return c.catch(()=>{}),await a.m,c}catch(a){const c=a,l=c.name!=="FirebaseError"&&o<3;if(q("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}class sV{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Rr(this.k.delete())}}class oc extends Q{constructor(e,n){super(L.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function bl(t){return t.name==="IndexedDbTransactionError"}class iV{constructor(e){this.store=e}put(e,n){let s;return n!==void 0?(q("SimpleDb","PUT",this.store.name,e,n),s=this.store.put(n,e)):(q("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Rr(s)}add(e){return q("SimpleDb","ADD",this.store.name,e,e),Rr(this.store.add(e))}get(e){return Rr(this.store.get(e)).next(n=>(n===void 0&&(n=null),q("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return q("SimpleDb","DELETE",this.store.name,e),Rr(this.store.delete(e))}count(){return q("SimpleDb","COUNT",this.store.name),Rr(this.store.count())}W(e,n){const s=this.options(e,n),i=s.index?this.store.index(s.index):this.store;if(typeof i.getAll=="function"){const r=i.getAll(s.range);return new F((o,a)=>{r.onerror=c=>{a(c.target.error)},r.onsuccess=c=>{o(c.target.result)}})}{const r=this.cursor(s),o=[];return this.G(r,(a,c)=>{o.push(c)}).next(()=>o)}}j(e,n){const s=this.store.getAll(e,n===null?void 0:n);return new F((i,r)=>{s.onerror=o=>{r(o.target.error)},s.onsuccess=o=>{i(o.target.result)}})}H(e,n){q("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,n);s.J=!1;const i=this.cursor(s);return this.G(i,(r,o,a)=>a.delete())}Y(e,n){let s;n?s=e:(s={},n=e);const i=this.cursor(s);return this.G(i,n)}Z(e){const n=this.cursor({});return new F((s,i)=>{n.onerror=r=>{const o=r_(r.target.error);i(o)},n.onsuccess=r=>{const o=r.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():s()}):s()}})}G(e,n){const s=[];return new F((i,r)=>{e.onerror=o=>{r(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const c=new sV(a),l=n(a.primaryKey,a.value,c);if(l instanceof F){const u=l.catch(h=>(c.done(),F.reject(h)));s.push(u)}c.isDone?i():c.$===null?a.continue():a.continue(c.$)}}).next(()=>F.waitFor(s))}options(e,n){let s;return e!==void 0&&(typeof e=="string"?s=e:n=e),{index:s,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const s=this.store.index(e.index);return e.J?s.openKeyCursor(e.range,n):s.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Rr(t){return new F((e,n)=>{t.onsuccess=s=>{const i=s.target.result;e(i)},t.onerror=s=>{const i=r_(s.target.error);n(i)}})}let Vv=!1;function r_(t){const e=kr.S(Mt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const s=new Q("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Vv||(Vv=!0,setTimeout(()=>{throw s},0)),s}}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.se(s),this.oe=s=>n.writeSequenceNumber(s))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}o_._e=-1;function Vd(t){return t==null}function Ch(t){return t===0&&1/t==-1/0}function rV(t){return typeof t=="number"&&Number.isInteger(t)&&!Ch(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function co(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n){this.comparator=e,this.root=n||qt.EMPTY}insert(e,n){return new mt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,qt.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return n+s.left.size;i<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new iu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new iu(this.root,e,this.comparator,!1)}getReverseIterator(){return new iu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new iu(this.root,e,this.comparator,!0)}}class iu{constructor(e,n,s,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=n?s(e.key,n):1,n&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qt{constructor(e,n,s,i,r){this.key=e,this.value=n,this.color=s??qt.RED,this.left=i??qt.EMPTY,this.right=r??qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,i,r){return new qt(e??this.key,n??this.value,s??this.color,i??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let i=this;const r=s(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,n,s),null):r===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return qt.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw de();const e=this.left.check();if(e!==this.right.check())throw de();return e+(this.isRed()?0:1)}}qt.EMPTY=null,qt.RED=!0,qt.BLACK=!1;qt.EMPTY=new class{constructor(){this.size=0}get key(){throw de()}get value(){throw de()}get color(){throw de()}get left(){throw de()}get right(){throw de()}copy(e,n,s,i,r){return this}insert(e,n,s){return new qt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Bv(this.data.getIterator())}getIteratorFrom(e){return new Bv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Xt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(this.comparator(i,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Xt(this.comparator);return n.data=e,n}}class Bv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.fields=e,e.sort(Yt.comparator)}static empty(){return new On([])}unionWith(e){let n=new Xt(Yt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new On(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xo(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new GS("Invalid base64 string: "+r):r}}(e);return new un(n)}static fromUint8Array(e){const n=function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r}(e);return new un(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}un.EMPTY_BYTE_STRING=new un("");const oV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zi(t){if(Ze(!!t),typeof t=="string"){let e=0;const n=oV.exec(t);if(Ze(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:At(t.seconds),nanos:At(t.nanos)}}function At(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qr(t){return typeof t=="string"?un.fromBase64String(t):un.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a_(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function c_(t){const e=t.mapValue.fields.__previous_value__;return a_(e)?c_(e):e}function Uc(t){const e=Zi(t.mapValue.fields.__local_write_time__.timestampValue);return new Bt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e,n,s,i,r,o,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=i,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}}class $c{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new $c("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof $c&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Xr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?a_(t)?4:cV(t)?9007199254740991:10:de()}function Vs(t,e){if(t===e)return!0;const n=Xr(t);if(n!==Xr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Uc(t).isEqual(Uc(e));case 3:return function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const o=Zi(i.timestampValue),a=Zi(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,r){return Qr(i.bytesValue).isEqual(Qr(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,r){return At(i.geoPointValue.latitude)===At(r.geoPointValue.latitude)&&At(i.geoPointValue.longitude)===At(r.geoPointValue.longitude)}(t,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return At(i.integerValue)===At(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const o=At(i.doubleValue),a=At(r.doubleValue);return o===a?Ch(o)===Ch(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Xo(t.arrayValue.values||[],e.arrayValue.values||[],Vs);case 10:return function(i,r){const o=i.mapValue.fields||{},a=r.mapValue.fields||{};if(Fv(o)!==Fv(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Vs(o[c],a[c])))return!1;return!0}(t,e);default:return de()}}function Hc(t,e){return(t.values||[]).find(n=>Vs(n,e))!==void 0}function Jo(t,e){if(t===e)return 0;const n=Xr(t),s=Xr(e);if(n!==s)return Ue(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ue(t.booleanValue,e.booleanValue);case 2:return function(r,o){const a=At(r.integerValue||r.doubleValue),c=At(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return Uv(t.timestampValue,e.timestampValue);case 4:return Uv(Uc(t),Uc(e));case 5:return Ue(t.stringValue,e.stringValue);case 6:return function(r,o){const a=Qr(r),c=Qr(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(r,o){const a=r.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){const u=Ue(a[l],c[l]);if(u!==0)return u}return Ue(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,o){const a=Ue(At(r.latitude),At(o.latitude));return a!==0?a:Ue(At(r.longitude),At(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(r,o){const a=r.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){const u=Jo(a[l],c[l]);if(u)return u}return Ue(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(r,o){if(r===ru.mapValue&&o===ru.mapValue)return 0;if(r===ru.mapValue)return 1;if(o===ru.mapValue)return-1;const a=r.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let h=0;h<c.length&&h<u.length;++h){const d=Ue(c[h],u[h]);if(d!==0)return d;const f=Jo(a[c[h]],l[u[h]]);if(f!==0)return f}return Ue(c.length,u.length)}(t.mapValue,e.mapValue);default:throw de()}}function Uv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ue(t,e);const n=Zi(t),s=Zi(e),i=Ue(n.seconds,s.seconds);return i!==0?i:Ue(n.nanos,s.nanos)}function Zo(t){return dg(t)}function dg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=Zi(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Qr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",i=!0;for(const r of n.values||[])i?i=!1:s+=",",s+=dg(r);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let i="{",r=!0;for(const o of s)r?r=!1:i+=",",i+=`${o}:${dg(n.fields[o])}`;return i+"}"}(t.mapValue):de()}function $v(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function fg(t){return!!t&&"integerValue"in t}function l_(t){return!!t&&"arrayValue"in t}function Hv(t){return!!t&&"nullValue"in t}function zv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fu(t){return!!t&&"mapValue"in t}function ac(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return co(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=ac(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ac(t.arrayValue.values[n]);return e}return Object.assign({},t)}function cV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Fu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ac(n)}setAll(e){let n=Yt.emptyPath(),s={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,s,i),s={},i=[],n=a.popLast()}o?s[a.lastSegment()]=ac(o):i.push(a.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,s,i)}delete(e){const n=this.field(e.popLast());Fu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Vs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let i=n.mapValue.fields[e.get(s)];Fu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,s){co(n,(i,r)=>e[i]=r);for(const i of s)delete e[i]}clone(){return new wn(ac(this.value))}}function KS(t){const e=[];return co(t.fields,(n,s)=>{const i=new Yt([n]);if(Fu(s)){const r=KS(s.mapValue).fields;if(r.length===0)e.push(i);else for(const o of r)e.push(i.child(o))}else e.push(i)}),new On(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,n,s,i,r,o,a){this.key=e,this.documentType=n,this.version=s,this.readTime=i,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(e){return new nn(e,0,ge.min(),ge.min(),ge.min(),wn.empty(),0)}static newFoundDocument(e,n,s,i){return new nn(e,1,n,ge.min(),s,i,0)}static newNoDocument(e,n){return new nn(e,2,n,ge.min(),ge.min(),wn.empty(),0)}static newUnknownDocument(e,n){return new nn(e,3,n,ge.min(),ge.min(),wn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,n){this.position=e,this.inclusive=n}}function jv(t,e,n){let s=0;for(let i=0;i<t.position.length;i++){const r=e[i],o=t.position[i];if(r.field.isKeyField()?s=se.comparator(se.fromName(o.referenceValue),n.key):s=Jo(o,n.data.field(r.field)),r.dir==="desc"&&(s*=-1),s!==0)break}return s}function Wv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Vs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,n="asc"){this.field=e,this.dir=n}}function lV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{}class Pt extends YS{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new hV(e,n,s):n==="array-contains"?new pV(e,s):n==="in"?new gV(e,s):n==="not-in"?new mV(e,s):n==="array-contains-any"?new _V(e,s):new Pt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new dV(e,s):new fV(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Jo(n,this.value)):n!==null&&Xr(this.value)===Xr(n)&&this.matchesComparison(Jo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return de()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class as extends YS{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new as(e,n)}matches(e){return QS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function QS(t){return t.op==="and"}function XS(t){return uV(t)&&QS(t)}function uV(t){for(const e of t.filters)if(e instanceof as)return!1;return!0}function pg(t){if(t instanceof Pt)return t.field.canonicalString()+t.op.toString()+Zo(t.value);if(XS(t))return t.filters.map(e=>pg(e)).join(",");{const e=t.filters.map(n=>pg(n)).join(",");return`${t.op}(${e})`}}function JS(t,e){return t instanceof Pt?function(s,i){return i instanceof Pt&&s.op===i.op&&s.field.isEqual(i.field)&&Vs(s.value,i.value)}(t,e):t instanceof as?function(s,i){return i instanceof as&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce((r,o,a)=>r&&JS(o,i.filters[a]),!0):!1}(t,e):void de()}function ZS(t){return t instanceof Pt?function(n){return`${n.field.canonicalString()} ${n.op} ${Zo(n.value)}`}(t):t instanceof as?function(n){return n.op.toString()+" {"+n.getFilters().map(ZS).join(" ,")+"}"}(t):"Filter"}class hV extends Pt{constructor(e,n,s){super(e,n,s),this.key=se.fromName(s.referenceValue)}matches(e){const n=se.comparator(e.key,this.key);return this.matchesComparison(n)}}class dV extends Pt{constructor(e,n){super(e,"in",n),this.keys=eR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class fV extends Pt{constructor(e,n){super(e,"not-in",n),this.keys=eR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function eR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>se.fromName(s.referenceValue))}class pV extends Pt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return l_(n)&&Hc(n.arrayValue,this.value)}}class gV extends Pt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Hc(this.value.arrayValue,n)}}class mV extends Pt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Hc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Hc(this.value.arrayValue,n)}}class _V extends Pt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!l_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Hc(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e,n=null,s=[],i=[],r=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=i,this.limit=r,this.startAt=o,this.endAt=a,this.ce=null}}function qv(t,e=null,n=[],s=[],i=null,r=null,o=null){return new yV(t,e,n,s,i,r,o)}function u_(t){const e=Te(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>pg(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),Vd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Zo(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Zo(s)).join(",")),e.ce=n}return e.ce}function h_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!lV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!JS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Wv(t.startAt,e.startAt)&&Wv(t.endAt,e.endAt)}function gg(t){return se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,n=null,s=[],i=[],r=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=i,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function bV(t,e,n,s,i,r,o,a){return new vl(t,e,n,s,i,r,o,a)}function Fd(t){return new vl(t)}function Gv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function tR(t){return t.collectionGroup!==null}function cc(t){const e=Te(t);if(e.le===null){e.le=[];const n=new Set;for(const r of e.explicitOrderBy)e.le.push(r),n.add(r.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Xt(Yt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||e.le.push(new Ah(r,s))}),n.has(Yt.keyField().canonicalString())||e.le.push(new Ah(Yt.keyField(),s))}return e.le}function ks(t){const e=Te(t);return e.he||(e.he=vV(e,cc(t))),e.he}function vV(t,e){if(t.limitType==="F")return qv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const r=i.dir==="desc"?"asc":"desc";return new Ah(i.field,r)});const n=t.endAt?new kh(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new kh(t.startAt.position,t.startAt.inclusive):null;return qv(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function mg(t,e){const n=t.filters.concat([e]);return new vl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function _g(t,e,n){return new vl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Bd(t,e){return h_(ks(t),ks(e))&&t.limitType===e.limitType}function nR(t){return`${u_(ks(t))}|lt:${t.limitType}`}function Io(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(i=>ZS(i)).join(", ")}]`),Vd(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(i=>Zo(i)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(i=>Zo(i)).join(",")),`Target(${s})`}(ks(t))}; limitType=${t.limitType})`}function Ud(t,e){return e.isFoundDocument()&&function(s,i){const r=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(r):se.isDocumentKey(s.path)?s.path.isEqual(r):s.path.isImmediateParentOf(r)}(t,e)&&function(s,i){for(const r of cc(s))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0}(t,e)&&function(s,i){for(const r of s.filters)if(!r.matches(i))return!1;return!0}(t,e)&&function(s,i){return!(s.startAt&&!function(o,a,c){const l=jv(o,a,c);return o.inclusive?l<=0:l<0}(s.startAt,cc(s),i)||s.endAt&&!function(o,a,c){const l=jv(o,a,c);return o.inclusive?l>=0:l>0}(s.endAt,cc(s),i))}(t,e)}function wV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function sR(t){return(e,n)=>{let s=!1;for(const i of cc(t)){const r=EV(i,e,n);if(r!==0)return r;s=s||i.field.isKeyField()}return 0}}function EV(t,e,n){const s=t.field.isKeyField()?se.comparator(e.key,n.key):function(r,o,a){const c=o.data.field(r),l=a.data.field(r);return c!==null&&l!==null?Jo(c,l):de()}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return de()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[i,r]of s)if(this.equalsFn(i,e))return r}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return void(i[r]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return s.length===1?delete this.inner[n]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(e){co(this.inner,(n,s)=>{for(const[i,r]of s)e(i,r)})}isEmpty(){return qS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV=new mt(se.comparator);function ai(){return TV}const iR=new mt(se.comparator);function Ha(...t){let e=iR;for(const n of t)e=e.insert(n.key,n);return e}function rR(t){let e=iR;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Ar(){return lc()}function oR(){return lc()}function lc(){return new pa(t=>t.toString(),(t,e)=>t.isEqual(e))}const SV=new mt(se.comparator),RV=new Xt(se.comparator);function ke(...t){let e=RV;for(const n of t)e=e.add(n);return e}const IV=new Xt(Ue);function xV(){return IV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ch(e)?"-0":e}}function cR(t){return{integerValue:""+t}}function CV(t,e){return rV(e)?cR(e):aR(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(){this._=void 0}}function kV(t,e,n){return t instanceof Ph?function(i,r){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&a_(r)&&(r=c_(r)),r&&(o.fields.__previous_value__=r),{mapValue:o}}(n,e):t instanceof ea?uR(t,e):t instanceof ta?hR(t,e):function(i,r){const o=lR(i,r),a=Kv(o)+Kv(i.Ie);return fg(o)&&fg(i.Ie)?cR(a):aR(i.serializer,a)}(t,e)}function AV(t,e,n){return t instanceof ea?uR(t,e):t instanceof ta?hR(t,e):n}function lR(t,e){return t instanceof Dh?function(s){return fg(s)||function(r){return!!r&&"doubleValue"in r}(s)}(e)?e:{integerValue:0}:null}class Ph extends $d{}class ea extends $d{constructor(e){super(),this.elements=e}}function uR(t,e){const n=dR(e);for(const s of t.elements)n.some(i=>Vs(i,s))||n.push(s);return{arrayValue:{values:n}}}class ta extends $d{constructor(e){super(),this.elements=e}}function hR(t,e){let n=dR(e);for(const s of t.elements)n=n.filter(i=>!Vs(i,s));return{arrayValue:{values:n}}}class Dh extends $d{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function Kv(t){return At(t.integerValue||t.doubleValue)}function dR(t){return l_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,n){this.field=e,this.transform=n}}function PV(t,e){return t.field.isEqual(e.field)&&function(s,i){return s instanceof ea&&i instanceof ea||s instanceof ta&&i instanceof ta?Xo(s.elements,i.elements,Vs):s instanceof Dh&&i instanceof Dh?Vs(s.Ie,i.Ie):s instanceof Ph&&i instanceof Ph}(t.transform,e.transform)}class DV{constructor(e,n){this.version=e,this.transformResults=n}}class zn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new zn}static exists(e){return new zn(void 0,e)}static updateTime(e){return new zn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Hd{}function pR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new d_(t.key,zn.none()):new wl(t.key,t.data,zn.none());{const n=t.data,s=wn.empty();let i=new Xt(Yt.comparator);for(let r of e.fields)if(!i.has(r)){let o=n.field(r);o===null&&r.length>1&&(r=r.popLast(),o=n.field(r)),o===null?s.delete(r):s.set(r,o),i=i.add(r)}return new ar(t.key,s,new On(i.toArray()),zn.none())}}function OV(t,e,n){t instanceof wl?function(i,r,o){const a=i.value.clone(),c=Qv(i.fieldTransforms,r,o.transformResults);a.setAll(c),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ar?function(i,r,o){if(!Bu(i.precondition,r))return void r.convertToUnknownDocument(o.version);const a=Qv(i.fieldTransforms,r,o.transformResults),c=r.data;c.setAll(gR(i)),c.setAll(a),r.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function uc(t,e,n,s){return t instanceof wl?function(r,o,a,c){if(!Bu(r.precondition,o))return a;const l=r.value.clone(),u=Xv(r.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,s):t instanceof ar?function(r,o,a,c){if(!Bu(r.precondition,o))return a;const l=Xv(r.fieldTransforms,c,o),u=o.data;return u.setAll(gR(r)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(h=>h.field))}(t,e,n,s):function(r,o,a){return Bu(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function MV(t,e){let n=null;for(const s of t.fieldTransforms){const i=e.data.field(s.field),r=lR(s.transform,i||null);r!=null&&(n===null&&(n=wn.empty()),n.set(s.field,r))}return n||null}function Yv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&Xo(s,i,(r,o)=>PV(r,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class wl extends Hd{constructor(e,n,s,i=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ar extends Hd{constructor(e,n,s,i,r=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function gR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function Qv(t,e,n){const s=new Map;Ze(t.length===n.length);for(let i=0;i<n.length;i++){const r=t[i],o=r.transform,a=e.data.field(r.field);s.set(r.field,AV(o,a,n[i]))}return s}function Xv(t,e,n){const s=new Map;for(const i of t){const r=i.transform,o=n.data.field(i.field);s.set(i.field,kV(r,o,e))}return s}class d_ extends Hd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LV extends Hd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e,n,s,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const r=this.mutations[i];r.key.isEqual(e.key)&&OV(r,e,s[i])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=uc(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=uc(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=oR();return this.mutations.forEach(i=>{const r=e.get(i.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=n.has(i.key)?null:a;const c=pR(o,a);c!==null&&s.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ge.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ke())}isEqual(e){return this.batchId===e.batchId&&Xo(this.mutations,e.mutations,(n,s)=>Yv(n,s))&&Xo(this.baseMutations,e.baseMutations,(n,s)=>Yv(n,s))}}class f_{constructor(e,n,s,i){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=i}static from(e,n,s){Ze(e.mutations.length===s.length);let i=function(){return SV}();const r=e.mutations;for(let o=0;o<r.length;o++)i=i.insert(r[o].key,s[o].version);return new f_(e,n,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,Me;function BV(t){switch(t){default:return de();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function mR(t){if(t===void 0)return Ns("GRPC error has no .code"),L.UNKNOWN;switch(t){case kt.OK:return L.OK;case kt.CANCELLED:return L.CANCELLED;case kt.UNKNOWN:return L.UNKNOWN;case kt.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case kt.INTERNAL:return L.INTERNAL;case kt.UNAVAILABLE:return L.UNAVAILABLE;case kt.UNAUTHENTICATED:return L.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case kt.NOT_FOUND:return L.NOT_FOUND;case kt.ALREADY_EXISTS:return L.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return L.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case kt.ABORTED:return L.ABORTED;case kt.OUT_OF_RANGE:return L.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return L.UNIMPLEMENTED;case kt.DATA_LOSS:return L.DATA_LOSS;default:return de()}}(Me=kt||(kt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $V=new Uo([4294967295,4294967295],0);function Jv(t){const e=UV().encode(t),n=new HN;return n.update(e),new Uint8Array(n.digest())}function Zv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),i=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new Uo([n,s],0),new Uo([i,r],0)]}class p_{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new za(`Invalid padding: ${n}`);if(s<0)throw new za(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new za(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new za(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Uo.fromNumber(this.Te)}de(e,n,s){let i=e.add(n.multiply(Uo.fromNumber(s)));return i.compare($V)===1&&(i=new Uo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=Jv(e),[s,i]=Zv(n);for(let r=0;r<this.hashCount;r++){const o=this.de(s,i,r);if(!this.Ae(o))return!1}return!0}static create(e,n,s){const i=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),o=new p_(r,i,n);return s.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=Jv(e),[s,i]=Zv(n);for(let r=0;r<this.hashCount;r++){const o=this.de(s,i,r);this.Re(o)}}Re(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class za extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,n,s,i,r){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const i=new Map;return i.set(e,El.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new zd(ge.min(),i,new mt(Ue),ai(),ke())}}class El{constructor(e,n,s,i,r){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new El(s,n,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,n,s,i){this.Ve=e,this.removedTargetIds=n,this.key=s,this.me=i}}class _R{constructor(e,n){this.targetId=e,this.fe=n}}class yR{constructor(e,n,s=un.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=i}}class e0{constructor(){this.ge=0,this.pe=n0(),this.ye=un.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=ke(),n=ke(),s=ke();return this.pe.forEach((i,r)=>{switch(r){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:s=s.add(i);break;default:de()}}),new El(this.ye,this.we,e,n,s)}Fe(){this.Se=!1,this.pe=n0()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ze(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class HV{constructor(e){this.Le=e,this.ke=new Map,this.qe=ai(),this.Qe=t0(),this.Ke=new mt(Ue)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const s=this.ze(n);switch(e.state){case 0:this.je(n)&&s.Ce(e.resumeToken);break;case 1:s.Ne(),s.be||s.Fe(),s.Ce(e.resumeToken);break;case 2:s.Ne(),s.be||this.removeTarget(n);break;case 3:this.je(n)&&(s.Be(),s.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),s.Ce(e.resumeToken));break;default:de()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((s,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,s=e.fe.count,i=this.Ye(n);if(i){const r=i.target;if(gg(r))if(s===0){const o=new se(r.path);this.We(n,o,nn.newNoDocument(o,ge.min()))}else Ze(s===1);else{const o=this.Ze(n);if(o!==s){const a=this.Xe(e),c=a?this.et(a,e,o):1;if(c!==0){this.He(n);const l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:r=0}=n;let o,a;try{o=Qr(s).toUint8Array()}catch(c){if(c instanceof GS)return Qo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new p_(o,i,r)}catch(c){return Qo(c instanceof za?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,s){return n.fe.count===s-this.rt(e,n.targetId)?0:2}rt(e,n){const s=this.Le.getRemoteKeysForTarget(n);let i=0;return s.forEach(r=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;e.mightContain(a)||(this.We(n,r,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((r,o)=>{const a=this.Ye(o);if(a){if(r.current&&gg(a.target)){const c=new se(a.target.path);this.qe.get(c)!==null||this.st(o,c)||this.We(o,c,nn.newNoDocument(c,e))}r.De&&(n.set(o,r.ve()),r.Fe())}});let s=ke();this.Qe.forEach((r,o)=>{let a=!0;o.forEachWhile(c=>{const l=this.Ye(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(r))}),this.qe.forEach((r,o)=>o.setReadTime(e));const i=new zd(e,n,this.Ke,this.qe,s);return this.qe=ai(),this.Qe=t0(),this.Ke=new mt(Ue),i}Ue(e,n){if(!this.je(e))return;const s=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,s),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,s){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),s&&(this.qe=this.qe.insert(n,s))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new e0,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Xt(Ue),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new e0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function t0(){return new mt(se.comparator)}function n0(){return new mt(se.comparator)}const zV={asc:"ASCENDING",desc:"DESCENDING"},jV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WV={and:"AND",or:"OR"};class qV{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function yg(t,e){return t.useProto3Json||Vd(e)?e:{value:e}}function Oh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function GV(t,e){return Oh(t,e.toTimestamp())}function As(t){return Ze(!!t),ge.fromTimestamp(function(n){const s=Zi(n);return new Bt(s.seconds,s.nanos)}(t))}function g_(t,e){return bg(t,e).canonicalString()}function bg(t,e){const n=function(i){return new it(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function vR(t){const e=it.fromString(t);return Ze(RR(e)),e}function vg(t,e){return g_(t.databaseId,e.path)}function ep(t,e){const n=vR(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new se(ER(n))}function wR(t,e){return g_(t.databaseId,e)}function KV(t){const e=vR(t);return e.length===4?it.emptyPath():ER(e)}function wg(t){return new it(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ER(t){return Ze(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function s0(t,e,n){return{name:vg(t,e),fields:n.value.mapValue.fields}}function YV(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:de()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],r=function(l,u){return l.useProto3Json?(Ze(u===void 0||typeof u=="string"),un.fromBase64String(u||"")):(Ze(u===void 0||u instanceof Uint8Array),un.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?L.UNKNOWN:mR(l.code);return new Q(u,l.message||"")}(o);n=new yR(s,i,r,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const i=ep(t,s.document.name),r=As(s.document.updateTime),o=s.document.createTime?As(s.document.createTime):ge.min(),a=new wn({mapValue:{fields:s.document.fields}}),c=nn.newFoundDocument(i,r,o,a),l=s.targetIds||[],u=s.removedTargetIds||[];n=new Uu(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const i=ep(t,s.document),r=s.readTime?As(s.readTime):ge.min(),o=nn.newNoDocument(i,r),a=s.removedTargetIds||[];n=new Uu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const i=ep(t,s.document),r=s.removedTargetIds||[];n=new Uu([],r,i,null)}else{if(!("filter"in e))return de();{e.filter;const s=e.filter;s.targetId;const{count:i=0,unchangedNames:r}=s,o=new FV(i,r),a=s.targetId;n=new _R(a,o)}}return n}function QV(t,e){let n;if(e instanceof wl)n={update:s0(t,e.key,e.value)};else if(e instanceof d_)n={delete:vg(t,e.key)};else if(e instanceof ar)n={update:s0(t,e.key,e.data),updateMask:rF(e.fieldMask)};else{if(!(e instanceof LV))return de();n={verify:vg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(r,o){const a=o.transform;if(a instanceof Ph)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ea)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ta)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Dh)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw de()}(0,s))),e.precondition.isNone||(n.currentDocument=function(i,r){return r.updateTime!==void 0?{updateTime:GV(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:de()}(t,e.precondition)),n}function XV(t,e){return t&&t.length>0?(Ze(e!==void 0),t.map(n=>function(i,r){let o=i.updateTime?As(i.updateTime):As(r);return o.isEqual(ge.min())&&(o=As(r)),new DV(o,i.transformResults||[])}(n,e))):[]}function JV(t,e){return{documents:[wR(t,e.path)]}}function ZV(t,e){const n={structuredQuery:{}},s=e.path;let i;e.collectionGroup!==null?(i=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=wR(t,i);const r=function(l){if(l.length!==0)return SR(as.create(l,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const o=function(l){if(l.length!==0)return l.map(u=>function(d){return{field:xo(d.field),direction:nF(d.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=yg(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ut:n,parent:i}}function eF(t){let e=KV(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){Ze(s===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let r=[];n.where&&(r=function(h){const d=TR(h);return d instanceof as&&XS(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(g){return new Ah(Co(g.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,Vd(d)?null:d}(n.limit));let c=null;n.startAt&&(c=function(h){const d=!!h.before,f=h.values||[];return new kh(f,d)}(n.startAt));let l=null;return n.endAt&&(l=function(h){const d=!h.before,f=h.values||[];return new kh(f,d)}(n.endAt)),bV(e,i,o,r,a,"F",c,l)}function tF(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return de()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function TR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Co(n.unaryFilter.field);return Pt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=Co(n.unaryFilter.field);return Pt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Co(n.unaryFilter.field);return Pt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Co(n.unaryFilter.field);return Pt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return de()}}(t):t.fieldFilter!==void 0?function(n){return Pt.create(Co(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return de()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return as.create(n.compositeFilter.filters.map(s=>TR(s)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return de()}}(n.compositeFilter.op))}(t):de()}function nF(t){return zV[t]}function sF(t){return jV[t]}function iF(t){return WV[t]}function xo(t){return{fieldPath:t.canonicalString()}}function Co(t){return Yt.fromServerFormat(t.fieldPath)}function SR(t){return t instanceof Pt?function(n){if(n.op==="=="){if(zv(n.value))return{unaryFilter:{field:xo(n.field),op:"IS_NAN"}};if(Hv(n.value))return{unaryFilter:{field:xo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(zv(n.value))return{unaryFilter:{field:xo(n.field),op:"IS_NOT_NAN"}};if(Hv(n.value))return{unaryFilter:{field:xo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xo(n.field),op:sF(n.op),value:n.value}}}(t):t instanceof as?function(n){const s=n.getFilters().map(i=>SR(i));return s.length===1?s[0]:{compositeFilter:{op:iF(n.op),filters:s}}}(t):de()}function rF(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function RR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,n,s,i,r=ge.min(),o=ge.min(),a=un.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Ni(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(e){this.ct=e}}function aF(t){const e=eF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_g(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{constructor(){this._n=new lF}addToCollectionParentIndex(e,n){return this._n.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Ji.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Ji.min())}updateCollectionGroup(e,n,s){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class lF{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n]||new Xt(it.comparator),r=!i.has(s);return this.index[n]=i.add(s),r}has(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n];return i&&i.has(s)}getEntries(e){return(this.index[e]||new Xt(it.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new na(0)}static Bn(){return new na(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{constructor(){this.changes=new pa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?F.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dF{constructor(e,n,s,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=i}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(s=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(s!==null&&uc(s.mutation,i,On.empty(),Bt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,ke()).next(()=>s))}getLocalViewOfDocuments(e,n,s=ke()){const i=Ar();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,s).next(r=>{let o=Ha();return r.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=Ar();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,ke()))}populateOverlays(e,n,s){const i=[];return s.forEach(r=>{n.has(r)||i.push(r)}),this.documentOverlayCache.getOverlays(e,i).next(r=>{r.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,s,i){let r=ai();const o=lc(),a=function(){return lc()}();return n.forEach((c,l)=>{const u=s.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof ar)?r=r.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),uc(u.mutation,l,u.mutation.getFieldMask(),Bt.now())):o.set(l.key,On.empty())}),this.recalculateAndSaveOverlays(e,r).next(c=>(c.forEach((l,u)=>o.set(l,u)),n.forEach((l,u)=>{var h;return a.set(l,new hF(u,(h=o.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const s=lc();let i=new mt((o,a)=>o-a),r=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const l=n.get(c);if(l===null)return;let u=s.get(c)||On.empty();u=a.applyToLocalView(l,u),s.set(c,u);const h=(i.get(a.batchId)||ke()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,u=c.value,h=oR();u.forEach(d=>{if(!r.has(d)){const f=pR(n.get(d),s.get(d));f!==null&&h.set(d,f),r=r.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,h))}return F.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,i){return function(o){return se.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):tR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,i):this.getDocumentsMatchingCollectionQuery(e,n,s,i)}getNextDocuments(e,n,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,i).next(r=>{const o=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,i-r.size):F.resolve(Ar());let a=-1,c=r;return o.next(l=>F.forEach(l,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),r.get(u)?F.resolve():this.remoteDocumentCache.getEntry(e,u).next(d=>{c=c.insert(u,d)}))).next(()=>this.populateOverlays(e,l,r)).next(()=>this.computeViews(e,c,l,ke())).next(u=>({batchId:a,changes:rR(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new se(n)).next(s=>{let i=Ha();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,s,i){const r=n.collectionGroup;let o=Ha();return this.indexManager.getCollectionParents(e,r).next(a=>F.forEach(a,c=>{const l=function(h,d){return new vl(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,c.child(r));return this.getDocumentsMatchingCollectionQuery(e,l,s,i).next(u=>{u.forEach((h,d)=>{o=o.insert(h,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,r,i))).next(o=>{r.forEach((c,l)=>{const u=l.getKey();o.get(u)===null&&(o=o.insert(u,nn.newInvalidDocument(u)))});let a=Ha();return o.forEach((c,l)=>{const u=r.get(c);u!==void 0&&uc(u.mutation,l,On.empty(),Bt.now()),Ud(n,l)&&(a=a.insert(c,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return F.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:As(i.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:aF(i.bundledQuery),readTime:As(i.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(){this.overlays=new mt(se.comparator),this.hr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Ar();return F.forEach(n,i=>this.getOverlay(e,i).next(r=>{r!==null&&s.set(i,r)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((i,r)=>{this.ht(e,n,r)}),F.resolve()}removeOverlaysForBatchId(e,n,s){const i=this.hr.get(s);return i!==void 0&&(i.forEach(r=>this.overlays=this.overlays.remove(r)),this.hr.delete(s)),F.resolve()}getOverlaysForCollection(e,n,s){const i=Ar(),r=n.length+1,o=new se(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===r&&c.largestBatchId>s&&i.set(c.getKey(),c)}return F.resolve(i)}getOverlaysForCollectionGroup(e,n,s,i){let r=new mt((l,u)=>l-u);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>s){let u=r.get(l.largestBatchId);u===null&&(u=Ar(),r=r.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}const a=Ar(),c=r.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return F.resolve(a)}ht(e,n,s){const i=this.overlays.get(s.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(s.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new VV(n,s));let r=this.hr.get(n);r===void 0&&(r=ke(),this.hr.set(n,r)),this.hr.set(n,r.add(s.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(){this.Pr=new Xt($t.Ir),this.Tr=new Xt($t.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const s=new $t(e,n);this.Pr=this.Pr.add(s),this.Tr=this.Tr.add(s)}dr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Ar(new $t(e,n))}Rr(e,n){e.forEach(s=>this.removeReference(s,n))}Vr(e){const n=new se(new it([])),s=new $t(n,e),i=new $t(n,e+1),r=[];return this.Tr.forEachInRange([s,i],o=>{this.Ar(o),r.push(o.key)}),r}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new se(new it([])),s=new $t(n,e),i=new $t(n,e+1);let r=ke();return this.Tr.forEachInRange([s,i],o=>{r=r.add(o.key)}),r}containsKey(e){const n=new $t(e,0),s=this.Pr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class $t{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return se.comparator(e.key,n.key)||Ue(e.pr,n.pr)}static Er(e,n){return Ue(e.pr,n.pr)||se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Xt($t.Ir)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,i){const r=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new NV(r,n,s,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new $t(a.key,r)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,i=this.br(s),r=i<0?0:i;return F.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new $t(n,0),i=new $t(n,Number.POSITIVE_INFINITY),r=[];return this.wr.forEachInRange([s,i],o=>{const a=this.Sr(o.pr);r.push(a)}),F.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Xt(Ue);return n.forEach(i=>{const r=new $t(i,0),o=new $t(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([r,o],a=>{s=s.add(a.pr)})}),F.resolve(this.Dr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,i=s.length+1;let r=s;se.isDocumentKey(r)||(r=r.child(""));const o=new $t(new se(r),0);let a=new Xt(Ue);return this.wr.forEachWhile(c=>{const l=c.key.path;return!!s.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.pr)),!0)},o),F.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(s=>{const i=this.Sr(s);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ze(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.wr;return F.forEach(n.mutations,i=>{const r=new $t(i.key,n.batchId);return s=s.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=s})}Mn(e){}containsKey(e,n){const s=new $t(n,0),i=this.wr.firstAfterOrEqual(s);return F.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(e){this.vr=e,this.docs=function(){return new mt(se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,i=this.docs.get(s),r=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return F.resolve(s?s.document.mutableCopy():nn.newInvalidDocument(n))}getEntries(e,n){let s=ai();return n.forEach(i=>{const r=this.docs.get(i);s=s.insert(i,r?r.document.mutableCopy():nn.newInvalidDocument(i))}),F.resolve(s)}getDocumentsMatchingQuery(e,n,s,i){let r=ai();const o=n.path,a=new se(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||eV(ZN(u),s)<=0||(i.has(u.key)||Ud(n,u))&&(r=r.insert(u.key,u.mutableCopy()))}return F.resolve(r)}getAllFromCollectionGroup(e,n,s,i){de()}Fr(e,n){return F.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new _F(this)}getSize(e){return F.resolve(this.size)}}class _F extends uF{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((s,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(s)}),F.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{constructor(e){this.persistence=e,this.Mr=new pa(n=>u_(n),h_),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.Or=0,this.Nr=new m_,this.targetCount=0,this.Br=na.Nn()}forEachTarget(e,n){return this.Mr.forEach((s,i)=>n(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.Or&&(this.Or=n),F.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new na(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.qn(n),F.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,s){let i=0;const r=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.Mr.delete(o),r.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),F.waitFor(r).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const s=this.Mr.get(n)||null;return F.resolve(s)}addMatchingKeys(e,n,s){return this.Nr.dr(n,s),F.resolve()}removeMatchingKeys(e,n,s){this.Nr.Rr(n,s);const i=this.persistence.referenceDelegate,r=[];return i&&n.forEach(o=>{r.push(i.markPotentiallyOrphaned(e,o))}),F.waitFor(r)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Nr.gr(n);return F.resolve(s)}containsKey(e,n){return F.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bF{constructor(e,n){this.Lr={},this.overlays={},this.kr=new o_(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new yF(this),this.indexManager=new cF,this.remoteDocumentCache=function(i){return new mF(i)}(s=>this.referenceDelegate.Kr(s)),this.serializer=new oF(n),this.$r=new fF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new pF,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Lr[e.toKey()];return s||(s=new gF(n,this.referenceDelegate),this.Lr[e.toKey()]=s),s}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,s){q("MemoryPersistence","Starting transaction:",e);const i=new vF(this.kr.next());return this.referenceDelegate.Ur(),s(i).next(r=>this.referenceDelegate.Wr(i).next(()=>r)).toPromise().then(r=>(i.raiseOnCommittedEvent(),r))}Gr(e,n){return F.or(Object.values(this.Lr).map(s=>()=>s.containsKey(e,n)))}}class vF extends nV{constructor(e){super(),this.currentSequenceNumber=e}}class __{constructor(e){this.persistence=e,this.zr=new m_,this.jr=null}static Hr(e){return new __(e)}get Jr(){if(this.jr)return this.jr;throw de()}addReference(e,n,s){return this.zr.addReference(s,n),this.Jr.delete(s.toString()),F.resolve()}removeReference(e,n,s){return this.zr.removeReference(s,n),this.Jr.add(s.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),F.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(r=>this.Jr.add(r.toString()))}).next(()=>s.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Jr,s=>{const i=se.fromPath(s);return this.Yr(e,i).next(r=>{r||n.removeEntry(i,ge.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(s=>{s?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return F.or([()=>F.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e,n,s,i){this.targetId=e,this.fromCache=n,this.qi=s,this.Qi=i}static Ki(e,n){let s=ke(),i=ke();for(const r of n.docChanges)switch(r.type){case 0:s=s.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new y_(e,n.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return ZD()?8:kr.v(Mt())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,s,i){const r={result:null};return this.ji(e,n).next(o=>{r.result=o}).next(()=>{if(!r.result)return this.Hi(e,n,i,s).next(o=>{r.result=o})}).next(()=>{if(r.result)return;const o=new wF;return this.Ji(e,n,o).next(a=>{if(r.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>r.result)}Yi(e,n,s,i){return s.documentReadCount<this.Wi?(Ia()<=Oe.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",Io(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),F.resolve()):(Ia()<=Oe.DEBUG&&q("QueryEngine","Query:",Io(n),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.Gi*i?(Ia()<=Oe.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",Io(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ks(n))):F.resolve())}ji(e,n){if(Gv(n))return F.resolve(null);let s=ks(n);return this.indexManager.getIndexType(e,s).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=_g(n,null,"F"),s=ks(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(r=>{const o=ke(...r);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(c=>{const l=this.Zi(n,a);return this.Xi(n,l,o,c.readTime)?this.ji(e,_g(n,null,"F")):this.es(e,l,n,c)}))})))}Hi(e,n,s,i){return Gv(n)||i.isEqual(ge.min())?F.resolve(null):this.zi.getDocuments(e,s).next(r=>{const o=this.Zi(n,r);return this.Xi(n,o,s,i)?F.resolve(null):(Ia()<=Oe.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Io(n)),this.es(e,o,n,JN(i,-1)).next(a=>a))})}Zi(e,n){let s=new Xt(sR(e));return n.forEach((i,r)=>{Ud(e,r)&&(s=s.add(r))}),s}Xi(e,n,s,i){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const r=e.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ji(e,n,s){return Ia()<=Oe.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",Io(n)),this.zi.getDocumentsMatchingQuery(e,n,Ji.min(),s)}es(e,n,s,i){return this.zi.getDocumentsMatchingQuery(e,s,i).next(r=>(n.forEach(o=>{r=r.insert(o.key,o)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TF{constructor(e,n,s,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new mt(Ue),this.rs=new pa(r=>u_(r),h_),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(s)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dF(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function SF(t,e,n,s){return new TF(t,e,n,s)}async function IR(t,e){const n=Te(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let i;return n.mutationQueue.getAllMutationBatches(s).next(r=>(i=r,n._s(e),n.mutationQueue.getAllMutationBatches(s))).next(r=>{const o=[],a=[];let c=ke();for(const l of i){o.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}for(const l of r){a.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(s,c).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function RF(t,e){const n=Te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const i=e.batch.keys(),r=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){const h=l.batch,d=h.keys();let f=F.resolve();return d.forEach(g=>{f=f.next(()=>u.getEntry(c,g)).next(m=>{const _=l.docVersions.get(g);Ze(_!==null),m.version.compareTo(_)<0&&(h.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),u.addEntry(m)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(n,s,e,r).next(()=>r.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(a){let c=ke();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(s,i))})}function xR(t){const e=Te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function IF(t,e){const n=Te(t),s=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((u,h)=>{const d=i.get(h);if(!d)return;a.push(n.Qr.removeMatchingKeys(r,u.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(r,u.addedDocuments,h)));let f=d.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(un.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,s)),i=i.insert(h,f),function(m,_,y){return m.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,f,u)&&a.push(n.Qr.updateTargetData(r,f))});let c=ai(),l=ke();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(r,u))}),a.push(xF(r,o,e.documentUpdates).next(u=>{c=u.cs,l=u.ls})),!s.isEqual(ge.min())){const u=n.Qr.getLastRemoteSnapshotVersion(r).next(h=>n.Qr.setTargetsMetadata(r,r.currentSequenceNumber,s));a.push(u)}return F.waitFor(a).next(()=>o.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,c,l)).next(()=>c)}).then(r=>(n.ns=i,r))}function xF(t,e,n){let s=ke(),i=ke();return n.forEach(r=>s=s.add(r)),e.getEntries(t,s).next(r=>{let o=ai();return n.forEach((a,c)=>{const l=r.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ge.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:o,ls:i}})}function CF(t,e){const n=Te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function kF(t,e){const n=Te(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let i;return n.Qr.getTargetData(s,e).next(r=>r?(i=r,F.resolve(i)):n.Qr.allocateTargetId(s).next(o=>(i=new Ni(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Qr.addTargetData(s,i).next(()=>i))))}).then(s=>{const i=n.ns.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(s.targetId,s),n.rs.set(e,s.targetId)),s})}async function Eg(t,e,n){const s=Te(t),i=s.ns.get(e),r=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",r,o=>s.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!bl(o))throw o;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}s.ns=s.ns.remove(e),s.rs.delete(i.target)}function i0(t,e,n){const s=Te(t);let i=ge.min(),r=ke();return s.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,u){const h=Te(c),d=h.rs.get(u);return d!==void 0?F.resolve(h.ns.get(d)):h.Qr.getTargetData(l,u)}(s,o,ks(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,s.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{r=c})}).next(()=>s.ts.getDocumentsMatchingQuery(o,e,n?i:ge.min(),n?r:ke())).next(a=>(AF(s,wV(e),a),{documents:a,hs:r})))}function AF(t,e,n){let s=t.ss.get(e)||ge.min();n.forEach((i,r)=>{r.readTime.compareTo(s)>0&&(s=r.readTime)}),t.ss.set(e,s)}class r0{constructor(){this.activeTargetIds=xV()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class PF{constructor(){this.no=new r0,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,s){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new r0,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ou=null;function tp(){return ou===null?ou=function(){return 268435456+Math.round(2147483648*Math.random())}():ou++,"0x"+ou.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt="WebChannelConnection";class LF extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const s=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=s+"://"+n.host,this.po=`projects/${i}/databases/${r}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${r}`}get wo(){return!1}So(n,s,i,r,o){const a=tp(),c=this.bo(n,s.toUriEncodedString());q("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);const l={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(l,r,o),this.Co(n,c,l,i).then(u=>(q("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Qo("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",c,"request:",i),u})}vo(n,s,i,r,o,a){return this.So(n,s,i,r,o)}Do(n,s,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fa}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((r,o)=>n[o]=r),i&&i.headers.forEach((r,o)=>n[o]=r)}bo(n,s){const i=OF[n];return`${this.fo}/v1/${s}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,s,i){const r=tp();return new Promise((o,a)=>{const c=new $N;c.setWithCredentials(!0),c.listenOnce(BN.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Zf.NO_ERROR:const u=c.getResponseJson();q(Jt,`XHR for RPC '${e}' ${r} received:`,JSON.stringify(u)),o(u);break;case Zf.TIMEOUT:q(Jt,`RPC '${e}' ${r} timed out`),a(new Q(L.DEADLINE_EXCEEDED,"Request time out"));break;case Zf.HTTP_ERROR:const h=c.getStatus();if(q(Jt,`RPC '${e}' ${r} failed with status:`,h,"response text:",c.getResponseText()),h>0){let d=c.getResponseJson();Array.isArray(d)&&(d=d[0]);const f=d==null?void 0:d.error;if(f&&f.status&&f.message){const g=function(_){const y=_.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(y)>=0?y:L.UNKNOWN}(f.status);a(new Q(g,f.message))}else a(new Q(L.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new Q(L.UNAVAILABLE,"Connection failed."));break;default:de()}}finally{q(Jt,`RPC '${e}' ${r} completed.`)}});const l=JSON.stringify(i);q(Jt,`RPC '${e}' ${r} sending request:`,i),c.send(n,"POST",l,s,15)})}Fo(e,n,s){const i=tp(),r=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=VN(),a=FN(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const u=r.join("");q(Jt,`Creating RPC '${e}' stream ${i}: ${u}`,c);const h=o.createWebChannel(u,c);let d=!1,f=!1;const g=new MF({lo:_=>{f?q(Jt,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(d||(q(Jt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),d=!0),q(Jt,`RPC '${e}' stream ${i} sending:`,_),h.send(_))},ho:()=>h.close()}),m=(_,y,v)=>{_.listen(y,E=>{try{v(E)}catch(T){setTimeout(()=>{throw T},0)}})};return m(h,su.EventType.OPEN,()=>{f||q(Jt,`RPC '${e}' stream ${i} transport opened.`)}),m(h,su.EventType.CLOSE,()=>{f||(f=!0,q(Jt,`RPC '${e}' stream ${i} transport closed`),g.Vo())}),m(h,su.EventType.ERROR,_=>{f||(f=!0,Qo(Jt,`RPC '${e}' stream ${i} transport errored:`,_),g.Vo(new Q(L.UNAVAILABLE,"The operation could not be completed")))}),m(h,su.EventType.MESSAGE,_=>{var y;if(!f){const v=_.data[0];Ze(!!v);const E=v,T=E.error||((y=E[0])===null||y===void 0?void 0:y.error);if(T){q(Jt,`RPC '${e}' stream ${i} received error:`,T);const S=T.status;let I=function(N){const $=kt[N];if($!==void 0)return mR($)}(S),k=T.message;I===void 0&&(I=L.INTERNAL,k="Unknown error status: "+S+" with message "+T.message),f=!0,g.Vo(new Q(I,k)),h.close()}else q(Jt,`RPC '${e}' stream ${i} received:`,v),g.mo(v)}}),m(a,UN.STAT_EVENT,_=>{_.stat===Lv.PROXY?q(Jt,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===Lv.NOPROXY&&q(Jt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.Ro()},0),g}}function np(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jd(t){return new qV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,n,s=1e3,i=1.5,r=6e4){this.oi=e,this.timerId=n,this.Mo=s,this.xo=i,this.Oo=r,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),s=Math.max(0,Date.now()-this.Lo),i=Math.max(0,n-s);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,n,s,i,r,o,a,c){this.oi=e,this.$o=s,this.Uo=i,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new CR(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(Ns(n.toString()),Ns("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(n)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,i])=>{this.Wo===n&&this.o_(s,i)},s=>{e(()=>{const i=new Q(L.UNKNOWN,"Fetching auth token failed: "+s.message);return this.__(i)})})}o_(e,n){const s=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{s(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{s(()=>this.__(i))}),this.stream.onMessage(i=>{s(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class NF extends kR{constructor(e,n,s,i,r,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=YV(this.serializer,e),s=function(r){if(!("targetChange"in r))return ge.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?ge.min():o.readTime?As(o.readTime):ge.min()}(e);return this.listener.u_(n,s)}c_(e){const n={};n.database=wg(this.serializer),n.addTarget=function(r,o){let a;const c=o.target;if(a=gg(c)?{documents:JV(r,c)}:{query:ZV(r,c).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=bR(r,o.resumeToken);const l=yg(r,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ge.min())>0){a.readTime=Oh(r,o.snapshotVersion.toTimestamp());const l=yg(r,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);const s=tF(this.serializer,e);s&&(n.labels=s),this.t_(n)}l_(e){const n={};n.database=wg(this.serializer),n.removeTarget=e,this.t_(n)}}class VF extends kR{constructor(e,n,s,i,r,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(Ze(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=XV(e.writeResults,e.commitTime),s=As(e.commitTime);return this.listener.T_(s,n)}return Ze(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=wg(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>QV(this.serializer,s))};this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF extends class{}{constructor(e,n,s,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new Q(L.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,s,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.So(e,bg(n,s),i,r,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Q(L.UNKNOWN,r.toString())})}vo(e,n,s,i,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,bg(n,s),i,o,a,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(L.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class BF{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Ns(n),this.g_=!1):q("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(e,n,s,i,r){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=r,this.M_.io(o=>{s.enqueueAndForget(async()=>{lo(this)&&(q("RemoteStore","Restarting streams for network reachability change."),await async function(c){const l=Te(c);l.v_.add(4),await Tl(l),l.x_.set("Unknown"),l.v_.delete(4),await Wd(l)}(this))})}),this.x_=new BF(s,i)}}async function Wd(t){if(lo(t))for(const e of t.F_)await e(!0)}async function Tl(t){for(const e of t.F_)await e(!1)}function AR(t,e){const n=Te(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),w_(n)?v_(n):ga(n).Jo()&&b_(n,e))}function PR(t,e){const n=Te(t),s=ga(n);n.C_.delete(e),s.Jo()&&DR(n,e),n.C_.size===0&&(s.Jo()?s.Xo():lo(n)&&n.x_.set("Unknown"))}function b_(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ga(t).c_(e)}function DR(t,e){t.O_.Oe(e),ga(t).l_(e)}function v_(t){t.O_=new HV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),ga(t).start(),t.x_.p_()}function w_(t){return lo(t)&&!ga(t).Ho()&&t.C_.size>0}function lo(t){return Te(t).v_.size===0}function OR(t){t.O_=void 0}async function $F(t){t.C_.forEach((e,n)=>{b_(t,e)})}async function HF(t,e){OR(t),w_(t)?(t.x_.S_(e),v_(t)):t.x_.set("Unknown")}async function zF(t,e,n){if(t.x_.set("Online"),e instanceof yR&&e.state===2&&e.cause)try{await async function(i,r){const o=r.cause;for(const a of r.targetIds)i.C_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.C_.delete(a),i.O_.removeTarget(a))}(t,e)}catch(s){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Mh(t,s)}else if(e instanceof Uu?t.O_.$e(e):e instanceof _R?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(ge.min()))try{const s=await xR(t.localStore);n.compareTo(s)>=0&&await function(r,o){const a=r.O_.it(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){const u=r.C_.get(l);u&&r.C_.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{const u=r.C_.get(c);if(!u)return;r.C_.set(c,u.withResumeToken(un.EMPTY_BYTE_STRING,u.snapshotVersion)),DR(r,c);const h=new Ni(u.target,c,l,u.sequenceNumber);b_(r,h)}),r.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(s){q("RemoteStore","Failed to raise snapshot:",s),await Mh(t,s)}}async function Mh(t,e,n){if(!bl(e))throw e;t.v_.add(1),await Tl(t),t.x_.set("Offline"),n||(n=()=>xR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await Wd(t)})}function MR(t,e){return e().catch(n=>Mh(t,n,e))}async function qd(t){const e=Te(t),n=er(e);let s=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;jF(e);)try{const i=await CF(e.localStore,s);if(i===null){e.D_.length===0&&n.Xo();break}s=i.batchId,WF(e,i)}catch(i){await Mh(e,i)}LR(e)&&NR(e)}function jF(t){return lo(t)&&t.D_.length<10}function WF(t,e){t.D_.push(e);const n=er(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function LR(t){return lo(t)&&!er(t).Ho()&&t.D_.length>0}function NR(t){er(t).start()}async function qF(t){er(t).d_()}async function GF(t){const e=er(t);for(const n of t.D_)e.I_(n.mutations)}async function KF(t,e,n){const s=t.D_.shift(),i=f_.from(s,e,n);await MR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await qd(t)}async function YF(t,e){e&&er(t).P_&&await async function(s,i){if(function(o){return BV(o)&&o!==L.ABORTED}(i.code)){const r=s.D_.shift();er(s).Zo(),await MR(s,()=>s.remoteSyncer.rejectFailedWrite(r.batchId,i)),await qd(s)}}(t,e),LR(t)&&NR(t)}async function a0(t,e){const n=Te(t);n.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");const s=lo(n);n.v_.add(3),await Tl(n),s&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await Wd(n)}async function QF(t,e){const n=Te(t);e?(n.v_.delete(2),await Wd(n)):e||(n.v_.add(2),await Tl(n),n.x_.set("Unknown"))}function ga(t){return t.N_||(t.N_=function(n,s,i){const r=Te(n);return r.R_(),new NF(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{Po:$F.bind(null,t),To:HF.bind(null,t),u_:zF.bind(null,t)}),t.F_.push(async e=>{e?(t.N_.Zo(),w_(t)?v_(t):t.x_.set("Unknown")):(await t.N_.stop(),OR(t))})),t.N_}function er(t){return t.B_||(t.B_=function(n,s,i){const r=Te(n);return r.R_(),new VF(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{Po:qF.bind(null,t),To:YF.bind(null,t),E_:GF.bind(null,t),T_:KF.bind(null,t)}),t.F_.push(async e=>{e?(t.B_.Zo(),await qd(t)):(await t.B_.stop(),t.D_.length>0&&(q("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))})),t.B_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e,n,s,i,r){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=i,this.removalCallback=r,this.deferred=new Cs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,i,r){const o=Date.now()+s,a=new E_(e,n,o,i,r);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function T_(t,e){if(Ns("AsyncQueue",`${e}: ${t}`),bl(t))return new Q(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this.comparator=e?(n,s)=>e(n,s)||se.comparator(n.key,s.key):(n,s)=>se.comparator(n.key,s.key),this.keyedMap=Ha(),this.sortedSet=new mt(this.comparator)}static emptySet(e){return new $o(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof $o)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(!i.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new $o;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(){this.L_=new mt(se.comparator)}track(e){const n=e.doc.key,s=this.L_.get(n);s?e.type!==0&&s.type===3?this.L_=this.L_.insert(n,e):e.type===3&&s.type!==1?this.L_=this.L_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.L_=this.L_.remove(n):e.type===1&&s.type===2?this.L_=this.L_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):de():this.L_=this.L_.insert(n,e)}k_(){const e=[];return this.L_.inorderTraversal((n,s)=>{e.push(s)}),e}}class sa{constructor(e,n,s,i,r,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,s,i,r){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new sa(e,n,$o.emptySet(n),o,s,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==s[i].type||!n[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(){this.q_=void 0,this.Q_=[]}}class JF{constructor(){this.queries=new pa(e=>nR(e),Bd),this.onlineState="Unknown",this.K_=new Set}}async function S_(t,e){const n=Te(t),s=e.query;let i=!1,r=n.queries.get(s);if(r||(i=!0,r=new XF),i)try{r.q_=await n.onListen(s)}catch(o){const a=T_(o,`Initialization of query '${Io(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,r),r.Q_.push(e),e.U_(n.onlineState),r.q_&&e.W_(r.q_)&&I_(n)}async function R_(t,e){const n=Te(t),s=e.query;let i=!1;const r=n.queries.get(s);if(r){const o=r.Q_.indexOf(e);o>=0&&(r.Q_.splice(o,1),i=r.Q_.length===0)}if(i)return n.queries.delete(s),n.onUnlisten(s)}function ZF(t,e){const n=Te(t);let s=!1;for(const i of e){const r=i.query,o=n.queries.get(r);if(o){for(const a of o.Q_)a.W_(i)&&(s=!0);o.q_=i}}s&&I_(n)}function eB(t,e,n){const s=Te(t),i=s.queries.get(e);if(i)for(const r of i.Q_)r.onError(n);s.queries.delete(e)}function I_(t){t.K_.forEach(e=>{e.next()})}class x_{constructor(e,n,s){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=s||{}}W_(e){if(!this.options.includeMetadataChanges){const s=[];for(const i of e.docChanges)i.type!==3&&s.push(i);e=new sa(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){if(!e.fromCache)return!0;const s=n!=="Offline";return(!this.options.Z_||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}H_(e){if(e.docChanges.length>0)return!0;const n=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(e){e=sa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e){this.key=e}}class FR{constructor(e){this.key=e}}class tB{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=ke(),this.mutatedKeys=ke(),this.ua=sR(e),this.ca=new $o(this.ua)}get la(){return this.oa}ha(e,n){const s=n?n.Pa:new c0,i=n?n.ca:this.ca;let r=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{const d=i.get(u),f=Ud(this.query,h)?h:null,g=!!d&&this.mutatedKeys.has(d.key),m=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let _=!1;d&&f?d.data.isEqual(f.data)?g!==m&&(s.track({type:3,doc:f}),_=!0):this.Ia(d,f)||(s.track({type:2,doc:f}),_=!0,(c&&this.ua(f,c)>0||l&&this.ua(f,l)<0)&&(a=!0)):!d&&f?(s.track({type:0,doc:f}),_=!0):d&&!f&&(s.track({type:1,doc:d}),_=!0,(c||l)&&(a=!0)),_&&(f?(o=o.add(f),r=m?r.add(u):r.delete(u)):(o=o.delete(u),r=r.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),r=r.delete(u.key),s.track({type:1,doc:u})}return{ca:o,Pa:s,Xi:a,mutatedKeys:r}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,i){const r=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const o=e.Pa.k_();o.sort((u,h)=>function(f,g){const m=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return de()}};return m(f)-m(g)}(u.type,h.type)||this.ua(u.doc,h.doc)),this.Ta(s),i=i!=null&&i;const a=n&&!i?this.Ea():[],c=this.aa.size===0&&this.current&&!i?1:0,l=c!==this._a;return this._a=c,o.length!==0||l?{snapshot:new sa(this.query,e.ca,r,o,e.mutatedKeys,c===0,l,!1,!!s&&s.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new c0,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=ke(),this.ca.forEach(s=>{this.Aa(s.key)&&(this.aa=this.aa.add(s.key))});const n=[];return e.forEach(s=>{this.aa.has(s)||n.push(new FR(s))}),this.aa.forEach(s=>{e.has(s)||n.push(new VR(s))}),n}Ra(e){this.oa=e.hs,this.aa=ke();const n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return sa.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}}class nB{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class sB{constructor(e){this.key=e,this.ma=!1}}class iB{constructor(e,n,s,i,r,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new pa(a=>nR(a),Bd),this.pa=new Map,this.ya=new Set,this.wa=new mt(se.comparator),this.Sa=new Map,this.ba=new m_,this.Da={},this.Ca=new Map,this.va=na.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}}async function rB(t,e){const n=gB(t);let s,i;const r=n.ga.get(e);if(r)s=r.targetId,n.sharedClientState.addLocalQueryTarget(s),i=r.view.Va();else{const o=await kF(n.localStore,ks(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);s=o.targetId,i=await oB(n,e,s,a==="current",o.resumeToken),n.isPrimaryClient&&AR(n.remoteStore,o)}return i}async function oB(t,e,n,s,i){t.Ma=(h,d,f)=>async function(m,_,y,v){let E=_.view.ha(y);E.Xi&&(E=await i0(m.localStore,_.query,!1).then(({documents:k})=>_.view.ha(k,E)));const T=v&&v.targetChanges.get(_.targetId),S=v&&v.targetMismatches.get(_.targetId)!=null,I=_.view.applyChanges(E,m.isPrimaryClient,T,S);return u0(m,_.targetId,I.da),I.snapshot}(t,h,d,f);const r=await i0(t.localStore,e,!0),o=new tB(e,r.hs),a=o.ha(r.documents),c=El.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,c);u0(t,n,l.da);const u=new nB(e,n,o);return t.ga.set(e,u),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),l.snapshot}async function aB(t,e){const n=Te(t),s=n.ga.get(e),i=n.pa.get(s.targetId);if(i.length>1)return n.pa.set(s.targetId,i.filter(r=>!Bd(r,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Eg(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),PR(n.remoteStore,s.targetId),Tg(n,s.targetId)}).catch(yl)):(Tg(n,s.targetId),await Eg(n.localStore,s.targetId,!0))}async function cB(t,e,n){const s=mB(t);try{const i=await function(o,a){const c=Te(o),l=Bt.now(),u=a.reduce((f,g)=>f.add(g.key),ke());let h,d;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let g=ai(),m=ke();return c.os.getEntries(f,u).next(_=>{g=_,g.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,g)).next(_=>{h=_;const y=[];for(const v of a){const E=MV(v,h.get(v.key).overlayedDocument);E!=null&&y.push(new ar(v.key,E,KS(E.value.mapValue),zn.exists(!0)))}return c.mutationQueue.addMutationBatch(f,l,y,a)}).next(_=>{d=_;const y=_.applyToLocalDocumentSet(h,m);return c.documentOverlayCache.saveOverlays(f,_.batchId,y)})}).then(()=>({batchId:d.batchId,changes:rR(h)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Da[o.currentUser.toKey()];l||(l=new mt(Ue)),l=l.insert(a,c),o.Da[o.currentUser.toKey()]=l}(s,i.batchId,n),await Sl(s,i.changes),await qd(s.remoteStore)}catch(i){const r=T_(i,"Failed to persist write");n.reject(r)}}async function BR(t,e){const n=Te(t);try{const s=await IF(n.localStore,e);e.targetChanges.forEach((i,r)=>{const o=n.Sa.get(r);o&&(Ze(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ma=!0:i.modifiedDocuments.size>0?Ze(o.ma):i.removedDocuments.size>0&&(Ze(o.ma),o.ma=!1))}),await Sl(n,s,e)}catch(s){await yl(s)}}function l0(t,e,n){const s=Te(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const i=[];s.ga.forEach((r,o)=>{const a=o.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const c=Te(o);c.onlineState=a;let l=!1;c.queries.forEach((u,h)=>{for(const d of h.Q_)d.U_(a)&&(l=!0)}),l&&I_(c)}(s.eventManager,e),i.length&&s.fa.u_(i),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function lB(t,e,n){const s=Te(t);s.sharedClientState.updateQueryState(e,"rejected",n);const i=s.Sa.get(e),r=i&&i.key;if(r){let o=new mt(se.comparator);o=o.insert(r,nn.newNoDocument(r,ge.min()));const a=ke().add(r),c=new zd(ge.min(),new Map,new mt(Ue),o,a);await BR(s,c),s.wa=s.wa.remove(r),s.Sa.delete(e),C_(s)}else await Eg(s.localStore,e,!1).then(()=>Tg(s,e,n)).catch(yl)}async function uB(t,e){const n=Te(t),s=e.batch.batchId;try{const i=await RF(n.localStore,e);$R(n,s,null),UR(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Sl(n,i)}catch(i){await yl(i)}}async function hB(t,e,n){const s=Te(t);try{const i=await function(o,a){const c=Te(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(h=>(Ze(h!==null),u=h.keys(),c.mutationQueue.removeMutationBatch(l,h))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})}(s.localStore,e);$R(s,e,n),UR(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Sl(s,i)}catch(i){await yl(i)}}function UR(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function $R(t,e,n){const s=Te(t);let i=s.Da[s.currentUser.toKey()];if(i){const r=i.get(e);r&&(n?r.reject(n):r.resolve(),i=i.remove(e)),s.Da[s.currentUser.toKey()]=i}}function Tg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.pa.get(e))t.ga.delete(s),n&&t.fa.xa(s,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach(s=>{t.ba.containsKey(s)||HR(t,s)})}function HR(t,e){t.ya.delete(e.path.canonicalString());const n=t.wa.get(e);n!==null&&(PR(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),C_(t))}function u0(t,e,n){for(const s of n)s instanceof VR?(t.ba.addReference(s.key,e),dB(t,s)):s instanceof FR?(q("SyncEngine","Document no longer in limbo: "+s.key),t.ba.removeReference(s.key,e),t.ba.containsKey(s.key)||HR(t,s.key)):de()}function dB(t,e){const n=e.key,s=n.path.canonicalString();t.wa.get(n)||t.ya.has(s)||(q("SyncEngine","New document in limbo: "+n),t.ya.add(s),C_(t))}function C_(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){const e=t.ya.values().next().value;t.ya.delete(e);const n=new se(it.fromString(e)),s=t.va.next();t.Sa.set(s,new sB(n)),t.wa=t.wa.insert(n,s),AR(t.remoteStore,new Ni(ks(Fd(n.path)),s,"TargetPurposeLimboResolution",o_._e))}}async function Sl(t,e,n){const s=Te(t),i=[],r=[],o=[];s.ga.isEmpty()||(s.ga.forEach((a,c)=>{o.push(s.Ma(c,e,n).then(l=>{if((l||n)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(c.targetId,l!=null&&l.fromCache?"not-current":"current"),l){i.push(l);const u=y_.Ki(c.targetId,l);r.push(u)}}))}),await Promise.all(o),s.fa.u_(i),await async function(c,l){const u=Te(c);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>F.forEach(l,d=>F.forEach(d.qi,f=>u.persistence.referenceDelegate.addReference(h,d.targetId,f)).next(()=>F.forEach(d.Qi,f=>u.persistence.referenceDelegate.removeReference(h,d.targetId,f)))))}catch(h){if(!bl(h))throw h;q("LocalStore","Failed to update sequence numbers: "+h)}for(const h of l){const d=h.targetId;if(!h.fromCache){const f=u.ns.get(d),g=f.snapshotVersion,m=f.withLastLimboFreeSnapshotVersion(g);u.ns=u.ns.insert(d,m)}}}(s.localStore,r))}async function fB(t,e){const n=Te(t);if(!n.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());const s=await IR(n.localStore,e);n.currentUser=e,function(r,o){r.Ca.forEach(a=>{a.forEach(c=>{c.reject(new Q(L.CANCELLED,o))})}),r.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Sl(n,s.us)}}function pB(t,e){const n=Te(t),s=n.Sa.get(e);if(s&&s.ma)return ke().add(s.key);{let i=ke();const r=n.pa.get(e);if(!r)return i;for(const o of r){const a=n.ga.get(o);i=i.unionWith(a.view.la)}return i}}function gB(t){const e=Te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=BR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lB.bind(null,e),e.fa.u_=ZF.bind(null,e.eventManager),e.fa.xa=eB.bind(null,e.eventManager),e}function mB(t){const e=Te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hB.bind(null,e),e}class h0{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=jd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return SF(this.persistence,new EF,e.initialUser,this.serializer)}createPersistence(e){return new bF(__.Hr,this.serializer)}createSharedClientState(e){return new PF}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class _B{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>l0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=fB.bind(null,this.syncEngine),await QF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new JF}()}createDatastore(e){const n=jd(e.databaseInfo.databaseId),s=function(r){return new LF(r)}(e.databaseInfo);return function(r,o,a,c){return new FF(r,o,a,c)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,i,r,o,a){return new UF(s,i,r,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>l0(this.syncEngine,n,0),function(){return o0.D()?new o0:new DF}())}createSyncEngine(e,n){return function(i,r,o,a,c,l,u){const h=new iB(i,r,o,a,c,l);return u&&(h.Fa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(s){const i=Te(s);q("RemoteStore","RemoteStore shutting down."),i.v_.add(5),await Tl(i),i.M_.shutdown(),i.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Ns("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yB{constructor(e,n,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=i,this.user=tn.UNAUTHENTICATED,this.clientId=WS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,async r=>{q("FirestoreClient","Received user=",r.uid),await this.authCredentialListener(r),this.user=r}),this.appCheckCredentials.start(s,r=>(q("FirestoreClient","Received new app check token=",r),this.appCheckCredentialListener(r,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Q(L.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Cs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=T_(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function sp(t,e){t.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async i=>{s.isEqual(i)||(await IR(e.localStore,i),s=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function d0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await vB(t);q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>a0(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>a0(e.remoteStore,i)),t._onlineComponents=e}function bB(t){return t.name==="FirebaseError"?t.code===L.FAILED_PRECONDITION||t.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function vB(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{await sp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!bB(n))throw n;Qo("Error using user provided cache. Falling back to memory cache: "+n),await sp(t,new h0)}}else q("FirestoreClient","Using default OfflineComponentProvider"),await sp(t,new h0);return t._offlineComponents}async function zR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),await d0(t,t._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),await d0(t,new _B))),t._onlineComponents}function wB(t){return zR(t).then(e=>e.syncEngine)}async function Lh(t){const e=await zR(t),n=e.eventManager;return n.onListen=rB.bind(null,e.syncEngine),n.onUnlisten=aB.bind(null,e.syncEngine),n}function EB(t,e,n={}){const s=new Cs;return t.asyncQueue.enqueueAndForget(async()=>function(r,o,a,c,l){const u=new k_({next:d=>{o.enqueueAndForget(()=>R_(r,h));const f=d.docs.has(a);!f&&d.fromCache?l.reject(new Q(L.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&d.fromCache&&c&&c.source==="server"?l.reject(new Q(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),h=new x_(Fd(a.path),u,{includeMetadataChanges:!0,Z_:!0});return S_(r,h)}(await Lh(t),t.asyncQueue,e,n,s)),s.promise}function TB(t,e,n={}){const s=new Cs;return t.asyncQueue.enqueueAndForget(async()=>function(r,o,a,c,l){const u=new k_({next:d=>{o.enqueueAndForget(()=>R_(r,h)),d.fromCache&&c.source==="server"?l.reject(new Q(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),h=new x_(a,u,{includeMetadataChanges:!0,Z_:!0});return S_(r,h)}(await Lh(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(t,e,n){if(!n)throw new Q(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function SB(t,e,n,s){if(e===!0&&s===!0)throw new Q(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function p0(t){if(!se.isDocumentKey(t))throw new Q(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function g0(t){if(se.isDocumentKey(t))throw new Q(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Gd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":de()}function Tn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gd(t);throw new Q(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Q(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}SB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jR((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,i){return s.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kd{constructor(e,n,s,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new m0({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Q(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Q(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new m0(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new zN;switch(s.type){case"firstParty":return new GN(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Q(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=f0.get(n);s&&(q("ComponentProvider","Removing Datastore"),f0.delete(n),s.terminate())}(this),Promise.resolve()}}function RB(t,e,n,s={}){var i;const r=(t=Tn(t,Kd))._getSettings(),o=`${e}:${n}`;if(r.host!=="firestore.googleapis.com"&&r.host!==o&&Qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},r),{host:o,ssl:!1})),s.mockUserToken){let a,c;if(typeof s.mockUserToken=="string")a=s.mockUserToken,c=tn.MOCK_USER;else{a=n1(s.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const l=s.mockUserToken.sub||s.mockUserToken.user_id;if(!l)throw new Q(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new tn(l)}t._authCredentials=new jN(new jS(a,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new uo(this.firestore,e,this._query)}}class ln{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ln(this.firestore,e,this._key)}}class Wi extends uo{constructor(e,n,s){super(e,n,Fd(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ln(this.firestore,null,new se(e))}withConverter(e){return new Wi(this.firestore,e,this._path)}}function Ps(t,e,...n){if(t=ct(t),WR("collection","path",e),t instanceof Kd){const s=it.fromString(e,...n);return g0(s),new Wi(t,null,s)}{if(!(t instanceof ln||t instanceof Wi))throw new Q(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(it.fromString(e,...n));return g0(s),new Wi(t.firestore,null,s)}}function Ie(t,e,...n){if(t=ct(t),arguments.length===1&&(e=WS.newId()),WR("doc","path",e),t instanceof Kd){const s=it.fromString(e,...n);return p0(s),new ln(t,null,new se(s))}{if(!(t instanceof ln||t instanceof Wi))throw new Q(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(it.fromString(e,...n));return p0(s),new ln(t.firestore,t instanceof Wi?t.converter:null,new se(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IB{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new CR(this,"async_queue_retry"),this._u=()=>{const n=np();n&&q("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=np();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const n=np();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const n=new Cs;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}async cu(){if(this.eu.length!==0){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!bl(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}}uu(e){const n=this.Xa.then(()=>(this.iu=!0,e().catch(s=>{this.ru=s,this.iu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(s);throw Ns("INTERNAL UNHANDLED ERROR: ",i),s}).then(s=>(this.iu=!1,s))));return this.Xa=n,n}enqueueAfterDelay(e,n,s){this.au(),this.ou.indexOf(e)>-1&&(n=0);const i=E_.createAndSchedule(this,e,n,s,r=>this.lu(r));return this.nu.push(i),i}au(){this.ru&&de()}verifyOperationInProgress(){}async hu(){let e;do e=this.Xa,await e;while(e!==this.Xa)}Pu(e){for(const n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.nu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const n=this.nu.indexOf(e);this.nu.splice(n,1)}}function _0(t){return function(n,s){if(typeof n!="object"||n===null)return!1;const i=n;for(const r of s)if(r in i&&typeof i[r]=="function")return!0;return!1}(t,["next","error","complete"])}class ci extends Kd{constructor(e,n,s,i){super(e,n,s,i),this.type="firestore",this._queue=function(){return new IB}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||qR(this),this._firestoreClient.terminate()}}function ia(t,e){const n=typeof t=="object"?t:Rm(),s=typeof t=="string"?t:e||"(default)",i=md(n,"firestore").getImmediate({identifier:s});if(!i._initialized){const r=ZT("firestore");r&&RB(i,...r)}return i}function Yd(t){return t._firestoreClient||qR(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function qR(t){var e,n,s;const i=t._freezeSettings(),r=function(a,c,l,u){return new aV(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,jR(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new yB(t._authCredentials,t._appCheckCredentials,t._queue,r),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=i.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ra(un.fromBase64String(e))}catch(n){throw new Q(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ra(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xB=/^__.*__$/;class CB{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ar(e,this.data,this.fieldMask,n,this.fieldTransforms):new wl(e,this.data,n,this.fieldTransforms)}}class GR{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new ar(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function KR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw de()}}class Xd{constructor(e,n,s,i,r,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=i,r===void 0&&this.Eu(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new Xd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:s,Vu:!1});return i.mu(e),i}fu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:s,Vu:!1});return i.Eu(),i}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return Nh(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(e.length===0)throw this.pu("Document fields must not be empty");if(KR(this.du)&&xB.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class kB{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||jd(e)}Su(e,n,s,i=!1){return new Xd({du:e,methodName:n,wu:s,path:Yt.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jd(t){const e=t._freezeSettings(),n=jd(t._databaseId);return new kB(t._databaseId,!!e.ignoreUndefinedProperties,n)}function YR(t,e,n,s,i,r={}){const o=t.Su(r.merge||r.mergeFields?2:0,e,n,i);O_("Data must be an object, but it was:",o,s);const a=XR(s,o);let c,l;if(r.merge)c=new On(o.fieldMask),l=o.fieldTransforms;else if(r.mergeFields){const u=[];for(const h of r.mergeFields){const d=Sg(e,h,n);if(!o.contains(d))throw new Q(L.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);ZR(u,d)||u.push(d)}c=new On(u),l=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,l=o.fieldTransforms;return new CB(new wn(a),c,l)}class Zd extends Rl{_toFieldTransform(e){if(e.du!==2)throw e.du===1?e.pu(`${this._methodName}() can only appear at the top level of your update data`):e.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zd}}function QR(t,e,n){return new Xd({du:3,wu:e.settings.wu,methodName:t._methodName,Vu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class P_ extends Rl{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){const n=QR(this,e,!0),s=this.bu.map(r=>ho(r,n)),i=new ea(s);return new fR(e.path,i)}isEqual(e){return e instanceof P_&&Go(this.bu,e.bu)}}class D_ extends Rl{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){const n=QR(this,e,!0),s=this.bu.map(r=>ho(r,n)),i=new ta(s);return new fR(e.path,i)}isEqual(e){return e instanceof D_&&Go(this.bu,e.bu)}}function AB(t,e,n,s){const i=t.Su(1,e,n);O_("Data must be an object, but it was:",i,s);const r=[],o=wn.empty();co(s,(c,l)=>{const u=M_(e,c,n);l=ct(l);const h=i.fu(u);if(l instanceof Zd)r.push(u);else{const d=ho(l,h);d!=null&&(r.push(u),o.set(u,d))}});const a=new On(r);return new GR(o,a,i.fieldTransforms)}function PB(t,e,n,s,i,r){const o=t.Su(1,e,n),a=[Sg(e,s,n)],c=[i];if(r.length%2!=0)throw new Q(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<r.length;d+=2)a.push(Sg(e,r[d])),c.push(r[d+1]);const l=[],u=wn.empty();for(let d=a.length-1;d>=0;--d)if(!ZR(l,a[d])){const f=a[d];let g=c[d];g=ct(g);const m=o.fu(f);if(g instanceof Zd)l.push(f);else{const _=ho(g,m);_!=null&&(l.push(f),u.set(f,_))}}const h=new On(l);return new GR(u,h,o.fieldTransforms)}function DB(t,e,n,s=!1){return ho(n,t.Su(s?4:3,e))}function ho(t,e){if(JR(t=ct(t)))return O_("Unsupported field value:",e,t),XR(t,e);if(t instanceof Rl)return function(s,i){if(!KR(i.du))throw i.pu(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.pu(`${s._methodName}() is not currently supported inside arrays`);const r=s._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&e.du!==4)throw e.pu("Nested arrays are not supported");return function(s,i){const r=[];let o=0;for(const a of s){let c=ho(a,i.gu(o));c==null&&(c={nullValue:"NULL_VALUE"}),r.push(c),o++}return{arrayValue:{values:r}}}(t,e)}return function(s,i){if((s=ct(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return CV(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const r=Bt.fromDate(s);return{timestampValue:Oh(i.serializer,r)}}if(s instanceof Bt){const r=new Bt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Oh(i.serializer,r)}}if(s instanceof A_)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ra)return{bytesValue:bR(i.serializer,s._byteString)};if(s instanceof ln){const r=i.databaseId,o=s.firestore._databaseId;if(!o.isEqual(r))throw i.pu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:g_(s.firestore._databaseId||i.databaseId,s._key.path)}}throw i.pu(`Unsupported field value: ${Gd(s)}`)}(t,e)}function XR(t,e){const n={};return qS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):co(t,(s,i)=>{const r=ho(i,e.Ru(s));r!=null&&(n[s]=r)}),{mapValue:{fields:n}}}function JR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Bt||t instanceof A_||t instanceof ra||t instanceof ln||t instanceof Rl)}function O_(t,e,n){if(!JR(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const s=Gd(n);throw s==="an object"?e.pu(t+" a custom object"):e.pu(t+" "+s)}}function Sg(t,e,n){if((e=ct(e))instanceof Qd)return e._internalPath;if(typeof e=="string")return M_(t,e);throw Nh("Field path arguments must be of type string or ",t,!1,void 0,n)}const OB=new RegExp("[~\\*/\\[\\]]");function M_(t,e,n){if(e.search(OB)>=0)throw Nh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Qd(...e.split("."))._internalPath}catch{throw Nh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Nh(t,e,n,s,i){const r=s&&!s.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(r||o)&&(c+=" (found",r&&(c+=` in field ${s}`),o&&(c+=` in document ${i}`),c+=")"),new Q(L.INVALID_ARGUMENT,a+t+c)}function ZR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,n,s,i,r){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new MB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(L_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class MB extends eI{data(){return super.data()}}function L_(t,e){return typeof e=="string"?M_(t,e):e instanceof Qd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class N_{}class LB extends N_{}function nI(t,e,...n){let s=[];e instanceof N_&&s.push(e),s=s.concat(n),function(r){const o=r.filter(c=>c instanceof V_).length,a=r.filter(c=>c instanceof ef).length;if(o>1||o>0&&a>0)throw new Q(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const i of s)t=i._apply(t);return t}class ef extends LB{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new ef(e,n,s)}_apply(e){const n=this._parse(e);return iI(e._query,n),new uo(e.firestore,e.converter,mg(e._query,n))}_parse(e){const n=Jd(e.firestore);return function(r,o,a,c,l,u,h){let d;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new Q(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){b0(h,u);const f=[];for(const g of h)f.push(y0(c,r,g));d={arrayValue:{values:f}}}else d=y0(c,r,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||b0(h,u),d=DB(a,o,h,u==="in"||u==="not-in");return Pt.create(l,u,d)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function sI(t,e,n){const s=e,i=L_("where",t);return ef._create(i,s,n)}class V_ extends N_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new V_(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:as.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,r){let o=i;const a=r.getFlattenedFilters();for(const c of a)iI(o,c),o=mg(o,c)}(e._query,n),new uo(e.firestore,e.converter,mg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function y0(t,e,n){if(typeof(n=ct(n))=="string"){if(n==="")throw new Q(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tR(e)&&n.indexOf("/")!==-1)throw new Q(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(it.fromString(n));if(!se.isDocumentKey(s))throw new Q(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return $v(t,new se(s))}if(n instanceof ln)return $v(t,n._key);throw new Q(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gd(n)}.`)}function b0(t,e){if(!Array.isArray(t)||t.length===0)throw new Q(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function iI(t,e){const n=function(i,r){for(const o of i)for(const a of o.getFlattenedFilters())if(r.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Q(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class NB{convertValue(e,n="none"){switch(Xr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw de()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return co(e,(i,r)=>{s[i]=this.convertValue(r,n)}),s}convertGeoPoint(e){return new A_(At(e.latitude),At(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=c_(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Uc(e));default:return null}}convertTimestamp(e){const n=Zi(e);return new Bt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=it.fromString(e);Ze(RR(s));const i=new $c(s.get(1),s.get(3)),r=new se(s.popFirst(5));return i.isEqual(n)||Ns(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class oI extends eI{constructor(e,n,s,i,r,o){super(e,n,s,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new $u(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(L_("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class $u extends oI{data(e={}){return super.data(e)}}class aI{constructor(e,n,s,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ja(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new $u(this._firestore,this._userDataWriter,s.key,s,new ja(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const c=new $u(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ja(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>r||a.type!==3).map(a=>{const c=new $u(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ja(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:VB(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function VB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return de()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(t){t=Tn(t,ln);const e=Tn(t.firestore,ci);return EB(Yd(e),t._key).then(n=>cI(e,t,n))}class F_ extends NB{constructor(e){super(),this.firestore=e}convertBytes(e){return new ra(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ln(this.firestore,null,n)}}function Br(t){t=Tn(t,uo);const e=Tn(t.firestore,ci),n=Yd(e),s=new F_(e);return tI(t._query),TB(n,t._query).then(i=>new aI(e,s,t,i))}function Pr(t,e,n){t=Tn(t,ln);const s=Tn(t.firestore,ci),i=rI(t.converter,e,n);return tf(s,[YR(Jd(s),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,zn.none())])}function Sn(t,e,n,...s){t=Tn(t,ln);const i=Tn(t.firestore,ci),r=Jd(i);let o;return o=typeof(e=ct(e))=="string"||e instanceof Qd?PB(r,"updateDoc",t._key,e,n,s):AB(r,"updateDoc",t._key,e),tf(i,[o.toMutation(t._key,zn.exists(!0))])}function FB(t){return tf(Tn(t.firestore,ci),[new d_(t._key,zn.none())])}function BB(t,e){const n=Tn(t.firestore,ci),s=Ie(t),i=rI(t.converter,e);return tf(n,[YR(Jd(t.firestore),"addDoc",s._key,i,t.converter!==null,{}).toMutation(s._key,zn.exists(!1))]).then(()=>s)}function UB(t,...e){var n,s,i;t=ct(t);let r={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||_0(e[o])||(r=e[o],o++);const a={includeMetadataChanges:r.includeMetadataChanges};if(_0(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(s=h.error)===null||s===void 0?void 0:s.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let c,l,u;if(t instanceof ln)l=Tn(t.firestore,ci),u=Fd(t._key.path),c={next:h=>{e[o]&&e[o](cI(l,t,h))},error:e[o+1],complete:e[o+2]};else{const h=Tn(t,uo);l=Tn(h.firestore,ci),u=h._query;const d=new F_(l);c={next:f=>{e[o]&&e[o](new aI(l,d,h,f))},error:e[o+1],complete:e[o+2]},tI(t._query)}return function(d,f,g,m){const _=new k_(m),y=new x_(f,_,g);return d.asyncQueue.enqueueAndForget(async()=>S_(await Lh(d),y)),()=>{_.La(),d.asyncQueue.enqueueAndForget(async()=>R_(await Lh(d),y))}}(Yd(l),u,a,c)}function tf(t,e){return function(s,i){const r=new Cs;return s.asyncQueue.enqueueAndForget(async()=>cB(await wB(s),i,r)),r.promise}(Yd(t),e)}function cI(t,e,n){const s=n.docs.get(e._key),i=new F_(t);return new oI(t,i,e._key,s,new ja(n.hasPendingWrites,n.fromCache),e.converter)}function zc(...t){return new P_("arrayUnion",t)}function Hu(...t){return new D_("arrayRemove",t)}(function(e,n=!0){(function(i){fa=i})(io),qr(new Xi("firestore",(s,{instanceIdentifier:i,options:r})=>{const o=s.getProvider("app").getImmediate(),a=new ci(new WN(s.getProvider("auth-internal")),new YN(s.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Q(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $c(l.options.projectId,u)}(o,i),o);return r=Object.assign({useFetchStreams:n},r),a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),Rs(Nv,"4.4.3",e),Rs(Nv,"4.4.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI="firebasestorage.googleapis.com",uI="storageBucket",$B=2*60*1e3,HB=10*60*1e3,zB=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t extends Bs{constructor(e,n,s=0){super(ip(e),`Firebase Storage: ${n} (${ip(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,_t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ip(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var lt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(lt||(lt={}));function ip(t){return"storage/"+t}function B_(){const t="An unknown error occurred, please check the error payload for server response.";return new _t(lt.UNKNOWN,t)}function jB(t){return new _t(lt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function WB(t){return new _t(lt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function qB(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new _t(lt.UNAUTHENTICATED,t)}function GB(){return new _t(lt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function KB(t){return new _t(lt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function hI(){return new _t(lt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function dI(){return new _t(lt.CANCELED,"User canceled the upload/download.")}function YB(t){return new _t(lt.INVALID_URL,"Invalid URL '"+t+"'.")}function QB(t){return new _t(lt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function XB(){return new _t(lt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+uI+"' property when initializing the app?")}function fI(){return new _t(lt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function JB(){return new _t(lt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function ZB(){return new _t(lt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function eU(t){return new _t(lt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Rg(t){return new _t(lt.INVALID_ARGUMENT,t)}function pI(){return new _t(lt.APP_DELETED,"The Firebase app was deleted.")}function tU(t){return new _t(lt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function hc(t,e){return new _t(lt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function xa(t){throw new _t(lt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=Mn.makeFromUrl(e,n)}catch{return new Mn(e,"")}if(s.path==="")return s;throw QB(e)}static makeFromUrl(e,n){let s=null;const i="([A-Za-z0-9.\\-_]+)";function r(T){T.path.charAt(T.path.length-1)==="/"&&(T.path_=T.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function l(T){T.path_=decodeURIComponent(T.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${u}/b/${i}/o${d}`,"i"),g={bucket:1,path:3},m=n===lI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,_="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${_}`,"i"),E=[{regex:a,indices:c,postModify:r},{regex:f,indices:g,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let T=0;T<E.length;T++){const S=E[T],I=S.regex.exec(e);if(I){const k=I[S.indices.bucket];let R=I[S.indices.path];R||(R=""),s=new Mn(k,R),S.postModify(s);break}}if(s==null)throw YB(e);return s}}class nU{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sU(t,e,n){let s=1,i=null,r=null,o=!1,a=0;function c(){return a===2}let l=!1;function u(..._){l||(l=!0,e.apply(null,_))}function h(_){i=setTimeout(()=>{i=null,t(f,c())},_)}function d(){r&&clearTimeout(r)}function f(_,...y){if(l){d();return}if(_){d(),u.call(null,_,...y);return}if(c()||o){d(),u.call(null,_,...y);return}s<64&&(s*=2);let E;a===1?(a=2,E=0):E=(s+Math.random())*1e3,h(E)}let g=!1;function m(_){g||(g=!0,d(),!l&&(i!==null?(_||(a=2),clearTimeout(i),h(0)):_||(a=1)))}return h(0),r=setTimeout(()=>{o=!0,m(!0)},n),m}function iU(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rU(t){return t!==void 0}function oU(t){return typeof t=="function"}function aU(t){return typeof t=="object"&&!Array.isArray(t)}function nf(t){return typeof t=="string"||t instanceof String}function v0(t){return U_()&&t instanceof Blob}function U_(){return typeof Blob<"u"}function w0(t,e,n,s){if(s<e)throw Rg(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw Rg(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Il(t,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${t}`}function gI(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const i=e(s)+"="+e(t[s]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ur;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ur||(Ur={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,r=e.indexOf(t)!==-1;return n||i||r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(e,n,s,i,r,o,a,c,l,u,h,d=!0){this.url_=e,this.method_=n,this.headers_=s,this.body_=i,this.successCodes_=r,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=u,this.connectionFactory_=h,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,g)=>{this.resolve_=f,this.reject_=g,this.start_()})}start_(){const e=(s,i)=>{if(i){s(!1,new au(!1,null,!0));return}const r=this.connectionFactory_();this.pendingConnection_=r;const o=a=>{const c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&r.addUploadProgressListener(o),r.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&r.removeUploadProgressListener(o),this.pendingConnection_=null;const a=r.getErrorCode()===Ur.NO_ERROR,c=r.getStatus();if(!a||mI(c,this.additionalRetryCodes_)&&this.retry){const u=r.getErrorCode()===Ur.ABORT;s(!1,new au(!1,null,u));return}const l=this.successCodes_.indexOf(c)!==-1;s(!0,new au(l,r))})},n=(s,i)=>{const r=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());rU(c)?r(c):r()}catch(c){o(c)}else if(a!==null){const c=B_();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){const c=this.appDelete_?pI():dI();o(c)}else{const c=hI();o(c)}};this.canceled_?n(!1,new au(!1,null,!0)):this.backoffId_=sU(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&iU(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class au{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function lU(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function uU(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function hU(t,e){e&&(t["X-Firebase-GMPID"]=e)}function dU(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function fU(t,e,n,s,i,r,o=!0){const a=gI(t.urlParams),c=t.url+a,l=Object.assign({},t.headers);return hU(l,e),lU(l,n),uU(l,r),dU(l,s),new cU(c,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pU(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function gU(...t){const e=pU();if(e!==void 0){const n=new e;for(let s=0;s<t.length;s++)n.append(t[s]);return n.getBlob()}else{if(U_())return new Blob(t);throw new _t(lt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function mU(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _U(t){if(typeof atob>"u")throw eU("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class rp{constructor(e,n){this.data=e,this.contentType=n||null}}function yU(t,e){switch(t){case Es.RAW:return new rp(_I(e));case Es.BASE64:case Es.BASE64URL:return new rp(yI(t,e));case Es.DATA_URL:return new rp(vU(e),wU(e))}throw B_()}function _I(t){const e=[];for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const r=s,o=t.charCodeAt(++n);s=65536|(r&1023)<<10|o&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function bU(t){let e;try{e=decodeURIComponent(t)}catch{throw hc(Es.DATA_URL,"Malformed data URL.")}return _I(e)}function yI(t,e){switch(t){case Es.BASE64:{const i=e.indexOf("-")!==-1,r=e.indexOf("_")!==-1;if(i||r)throw hc(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Es.BASE64URL:{const i=e.indexOf("+")!==-1,r=e.indexOf("/")!==-1;if(i||r)throw hc(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=_U(e)}catch(i){throw i.message.includes("polyfill")?i:hc(t,"Invalid character found")}const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s}class bI{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw hc(Es.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=EU(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function vU(t){const e=new bI(t);return e.base64?yI(Es.BASE64,e.rest):bU(e.rest)}function wU(t){return new bI(t).contentType}function EU(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,n){let s=0,i="";v0(e)?(this.data_=e,s=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(v0(this.data_)){const s=this.data_,i=mU(s,e,n);return i===null?null:new Li(i)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new Li(s,!0)}}static getBlob(...e){if(U_()){const n=e.map(s=>s instanceof Li?s.data_:s);return new Li(gU.apply(null,n))}else{const n=e.map(o=>nf(o)?yU(Es.RAW,o).data:o.data_);let s=0;n.forEach(o=>{s+=o.byteLength});const i=new Uint8Array(s);let r=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[r++]=o[a]}),new Li(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(t){let e;try{e=JSON.parse(t)}catch{return null}return aU(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TU(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function SU(t,e){const n=e.split("/").filter(s=>s.length>0).join("/");return t.length===0?n:t+"/"+n}function wI(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RU(t,e){return e}class pn{constructor(e,n,s,i){this.server=e,this.local=n||e,this.writable=!!s,this.xform=i||RU}}let cu=null;function IU(t){return!nf(t)||t.length<2?t:wI(t)}function EI(){if(cu)return cu;const t=[];t.push(new pn("bucket")),t.push(new pn("generation")),t.push(new pn("metageneration")),t.push(new pn("name","fullPath",!0));function e(r,o){return IU(o)}const n=new pn("name");n.xform=e,t.push(n);function s(r,o){return o!==void 0?Number(o):o}const i=new pn("size");return i.xform=s,t.push(i),t.push(new pn("timeCreated")),t.push(new pn("updated")),t.push(new pn("md5Hash",null,!0)),t.push(new pn("cacheControl",null,!0)),t.push(new pn("contentDisposition",null,!0)),t.push(new pn("contentEncoding",null,!0)),t.push(new pn("contentLanguage",null,!0)),t.push(new pn("contentType",null,!0)),t.push(new pn("metadata","customMetadata",!0)),cu=t,cu}function xU(t,e){function n(){const s=t.bucket,i=t.fullPath,r=new Mn(s,i);return e._makeStorageReference(r)}Object.defineProperty(t,"ref",{get:n})}function CU(t,e,n){const s={};s.type="file";const i=n.length;for(let r=0;r<i;r++){const o=n[r];s[o.local]=o.xform(s,e[o.server])}return xU(s,t),s}function TI(t,e,n){const s=vI(e);return s===null?null:CU(t,s,n)}function kU(t,e,n,s){const i=vI(e);if(i===null||!nf(i.downloadTokens))return null;const r=i.downloadTokens;if(r.length===0)return null;const o=encodeURIComponent;return r.split(",").map(l=>{const u=t.bucket,h=t.fullPath,d="/b/"+o(u)+"/o/"+o(h),f=Il(d,n,s),g=gI({alt:"media",token:l});return f+g})[0]}function SI(t,e){const n={},s=e.length;for(let i=0;i<s;i++){const r=e[i];r.writable&&(n[r.server]=t[r.local])}return JSON.stringify(n)}class ma{constructor(e,n,s,i){this.url=e,this.method=n,this.handler=s,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(t){if(!t)throw B_()}function $_(t,e){function n(s,i){const r=TI(t,i,e);return ni(r!==null),r}return n}function AU(t,e){function n(s,i){const r=TI(t,i,e);return ni(r!==null),kU(r,i,t.host,t._protocol)}return n}function xl(t){function e(n,s){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=GB():i=qB():n.getStatus()===402?i=WB(t.bucket):n.getStatus()===403?i=KB(t.path):i=s,i.status=n.getStatus(),i.serverResponse=s.serverResponse,i}return e}function RI(t){const e=xl(t);function n(s,i){let r=e(s,i);return s.getStatus()===404&&(r=jB(t.path)),r.serverResponse=i.serverResponse,r}return n}function PU(t,e,n){const s=e.fullServerUrl(),i=Il(s,t.host,t._protocol),r="GET",o=t.maxOperationRetryTime,a=new ma(i,r,$_(t,n),o);return a.errorHandler=RI(e),a}function DU(t,e,n){const s=e.fullServerUrl(),i=Il(s,t.host,t._protocol),r="GET",o=t.maxOperationRetryTime,a=new ma(i,r,AU(t,n),o);return a.errorHandler=RI(e),a}function OU(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function II(t,e,n){const s=Object.assign({},n);return s.fullPath=t.path,s.size=e.size(),s.contentType||(s.contentType=OU(null,e)),s}function MU(t,e,n,s,i){const r=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let E="";for(let T=0;T<2;T++)E=E+Math.random().toString().slice(2);return E}const c=a();o["Content-Type"]="multipart/related; boundary="+c;const l=II(e,s,i),u=SI(l,n),h="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+c+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+c+"--",f=Li.getBlob(h,s,d);if(f===null)throw fI();const g={name:l.fullPath},m=Il(r,t.host,t._protocol),_="POST",y=t.maxUploadRetryTime,v=new ma(m,_,$_(t,n),y);return v.urlParams=g,v.headers=o,v.body=f.uploadData(),v.errorHandler=xl(e),v}class Vh{constructor(e,n,s,i){this.current=e,this.total=n,this.finalized=!!s,this.metadata=i||null}}function H_(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{ni(!1)}return ni(!!n&&(e||["active"]).indexOf(n)!==-1),n}function LU(t,e,n,s,i){const r=e.bucketOnlyServerUrl(),o=II(e,s,i),a={name:o.fullPath},c=Il(r,t.host,t._protocol),l="POST",u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${s.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=SI(o,n),d=t.maxUploadRetryTime;function f(m){H_(m);let _;try{_=m.getResponseHeader("X-Goog-Upload-URL")}catch{ni(!1)}return ni(nf(_)),_}const g=new ma(c,l,f,d);return g.urlParams=a,g.headers=u,g.body=h,g.errorHandler=xl(e),g}function NU(t,e,n,s){const i={"X-Goog-Upload-Command":"query"};function r(l){const u=H_(l,["active","final"]);let h=null;try{h=l.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ni(!1)}h||ni(!1);const d=Number(h);return ni(!isNaN(d)),new Vh(d,s.size(),u==="final")}const o="POST",a=t.maxUploadRetryTime,c=new ma(n,o,r,a);return c.headers=i,c.errorHandler=xl(e),c}const E0=256*1024;function VU(t,e,n,s,i,r,o,a){const c=new Vh(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=s.size()),s.size()!==c.total)throw JB();const l=c.total-c.current;let u=l;i>0&&(u=Math.min(u,i));const h=c.current,d=h+u;let f="";u===0?f="finalize":l===u?f="upload, finalize":f="upload";const g={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":`${c.current}`},m=s.slice(h,d);if(m===null)throw fI();function _(T,S){const I=H_(T,["active","final"]),k=c.current+u,R=s.size();let N;return I==="final"?N=$_(e,r)(T,S):N=null,new Vh(k,R,I==="final",N)}const y="POST",v=e.maxUploadRetryTime,E=new ma(n,y,_,v);return E.headers=g,E.body=m.uploadData(),E.progressCallback=a||null,E.errorHandler=xl(t),E}const vn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function op(t){switch(t){case"running":case"pausing":case"canceling":return vn.RUNNING;case"paused":return vn.PAUSED;case"success":return vn.SUCCESS;case"canceled":return vn.CANCELED;case"error":return vn.ERROR;default:return vn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(e,n,s){if(oU(e)||n!=null||s!=null)this.next=e,this.error=n??void 0,this.complete=s??void 0;else{const r=e;this.next=r.next,this.error=r.error,this.complete=r.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class BU{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ur.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ur.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ur.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,i){if(this.sent_)throw xa("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const r in i)i.hasOwnProperty(r)&&this.xhr_.setRequestHeader(r,i[r].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw xa("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw xa("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw xa("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw xa("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class UU extends BU{initXhr(){this.xhr_.responseType="text"}}function ko(){return new UU}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(e,n,s=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=s,this._mappings=EI(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(lt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const r=this.isExponentialBackoffExpired();if(mI(i.status,[]))if(r)i=hI();else{this.sleepTime=Math.max(this.sleepTime*2,zB),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(lt.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,r)=>{this._resolve=i,this._reject=r,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,s])=>{switch(this._state){case"running":e(n,s);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const s=LU(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(s,ko,e,n);this._request=i,i.getPromise().then(r=>{this._request=void 0,this._uploadUrl=r,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,s)=>{const i=NU(this._ref.storage,this._ref._location,e,this._blob),r=this._ref.storage._makeRequest(i,ko,n,s);this._request=r,r.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=E0*this._chunkMultiplier,n=new Vh(this._transferred,this._blob.size()),s=this._uploadUrl;this._resolveToken((i,r)=>{let o;try{o=VU(this._ref._location,this._ref.storage,s,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const a=this._ref.storage._makeRequest(o,ko,i,r,!1);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){E0*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const s=PU(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(s,ko,e,n);this._request=i,i.getPromise().then(r=>{this._request=void 0,this._metadata=r,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const s=MU(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(s,ko,e,n);this._request=i,i.getPromise().then(r=>{this._request=void 0,this._metadata=r,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=dI(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=op(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,s,i){const r=new FU(n||void 0,s||void 0,i||void 0);return this._addObserver(r),()=>{this._removeObserver(r)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(op(this._state)){case vn.SUCCESS:bo(this._resolve.bind(null,this.snapshot))();break;case vn.CANCELED:case vn.ERROR:const n=this._reject;bo(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(op(this._state)){case vn.RUNNING:case vn.PAUSED:e.next&&bo(e.next.bind(e,this.snapshot))();break;case vn.SUCCESS:e.complete&&bo(e.complete.bind(e))();break;case vn.CANCELED:case vn.ERROR:e.error&&bo(e.error.bind(e,this._error))();break;default:e.error&&bo(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,n){this._service=e,n instanceof Mn?this._location=n:this._location=Mn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Jr(e,n)}get root(){const e=new Mn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return wI(this._location.path)}get storage(){return this._service}get parent(){const e=TU(this._location.path);if(e===null)return null;const n=new Mn(this._location.bucket,e);return new Jr(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw tU(e)}}function HU(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new $U(t,new Li(e),n)}function zU(t){t._throwIfRoot("getDownloadURL");const e=DU(t.storage,t._location,EI());return t.storage.makeRequestWithTokens(e,ko).then(n=>{if(n===null)throw ZB();return n})}function jU(t,e){const n=SU(t._location.path,e),s=new Mn(t._location.bucket,n);return new Jr(t.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WU(t){return/^[A-Za-z]+:\/\//.test(t)}function qU(t,e){return new Jr(t,e)}function xI(t,e){if(t instanceof z_){const n=t;if(n._bucket==null)throw XB();const s=new Jr(n,n._bucket);return e!=null?xI(s,e):s}else return e!==void 0?jU(t,e):t}function GU(t,e){if(e&&WU(e)){if(t instanceof z_)return qU(t,e);throw Rg("To use ref(service, url), the first argument must be a Storage instance.")}else return xI(t,e)}function T0(t,e){const n=e==null?void 0:e[uI];return n==null?null:Mn.makeFromBucketSpec(n,t)}function KU(t,e,n,s={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=s;i&&(t._overrideAuthToken=typeof i=="string"?i:n1(i,t.app.options.projectId))}class z_{constructor(e,n,s,i,r){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=i,this._firebaseVersion=r,this._bucket=null,this._host=lI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=$B,this._maxUploadRetryTime=HB,this._requests=new Set,i!=null?this._bucket=Mn.makeFromBucketSpec(i,this._host):this._bucket=T0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Mn.makeFromBucketSpec(this._url,e):this._bucket=T0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){w0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){w0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Jr(this,e)}_makeRequest(e,n,s,i,r=!0){if(this._deleted)return new nU(pI());{const o=fU(e,this._appId,s,i,n,this._firebaseVersion,r);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[s,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,i).getPromise()}}const S0="@firebase/storage",R0="0.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI="storage";function sf(t,e,n){return t=ct(t),HU(t,e,n)}function rf(t){return t=ct(t),zU(t)}function of(t,e){return t=ct(t),GU(t,e)}function YU(t=Rm(),e){t=ct(t);const s=md(t,CI).getImmediate({identifier:e}),i=ZT("storage");return i&&QU(s,...i),s}function QU(t,e,n,s={}){KU(t,e,n,s)}function XU(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new z_(n,s,i,e,io)}function JU(){qr(new Xi(CI,XU,"PUBLIC").setMultipleInstances(!0)),Rs(S0,R0,""),Rs(S0,R0,"esm2017")}JU();const ZU={apiKey:"AIzaSyCZ-HBufDf5JrElikOjjVwcVxeyLRd6BzU",authDomain:"pantrypal-e1225.firebaseapp.com",projectId:"pantrypal-e1225",storageBucket:"pantrypal-e1225.appspot.com",messagingSenderId:"694619781401",appId:"1:694619781401:web:ec0a8b6ad6950a1a222d88",measurementId:"G-SW04Z59K30"},tr=o1(ZU),af=YU(tr),Re=LL(tr),Ae=ia(tr);async function cf(){try{const e=(await Br(Ps(Ae,"categories"))).docs.map(n=>n.data());return console.log(e.map(n=>n.category_name)),e.map(n=>n.category_name)}catch(t){return console.error("Error fetching categories: ",t),[]}}var e4=Object.defineProperty,I0=Object.getOwnPropertySymbols,t4=Object.prototype.hasOwnProperty,n4=Object.prototype.propertyIsEnumerable,x0=(t,e,n)=>e in t?e4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kI=(t,e)=>{for(var n in e||(e={}))t4.call(e,n)&&x0(t,n,e[n]);if(I0)for(var n of I0(e))n4.call(e,n)&&x0(t,n,e[n]);return t},lf=t=>typeof t=="function",uf=t=>typeof t=="string",AI=t=>uf(t)&&t.trim().length>0,s4=t=>typeof t=="number",Dr=t=>typeof t>"u",jc=t=>typeof t=="object"&&t!==null,i4=t=>Ds(t,"tag")&&AI(t.tag),PI=t=>window.TouchEvent&&t instanceof TouchEvent,DI=t=>Ds(t,"component")&&OI(t.component),r4=t=>lf(t)||jc(t),OI=t=>!Dr(t)&&(uf(t)||r4(t)||DI(t)),C0=t=>jc(t)&&["height","width","right","left","top","bottom"].every(e=>s4(t[e])),Ds=(t,e)=>(jc(t)||lf(t))&&e in t,o4=(t=>()=>t++)(0);function ap(t){return PI(t)?t.targetTouches[0].clientX:t.clientX}function k0(t){return PI(t)?t.targetTouches[0].clientY:t.clientY}var a4=t=>{Dr(t.remove)?t.parentNode&&t.parentNode.removeChild(t):t.remove()},Cl=t=>DI(t)?Cl(t.component):i4(t)?ui({render(){return t}}):typeof t=="string"?t:Ne(Nr(t)),c4=t=>{if(typeof t=="string")return t;const e=Ds(t,"props")&&jc(t.props)?t.props:{},n=Ds(t,"listeners")&&jc(t.listeners)?t.listeners:{};return{component:Cl(t),props:e,listeners:n}},l4=()=>typeof window<"u",j_=class{constructor(){this.allHandlers={}}getHandlers(t){return this.allHandlers[t]||[]}on(t,e){const n=this.getHandlers(t);n.push(e),this.allHandlers[t]=n}off(t,e){const n=this.getHandlers(t);n.splice(n.indexOf(e)>>>0,1)}emit(t,e){this.getHandlers(t).forEach(s=>s(e))}},u4=t=>["on","off","emit"].every(e=>Ds(t,e)&&lf(t[e])),Pn;(function(t){t.SUCCESS="success",t.ERROR="error",t.WARNING="warning",t.INFO="info",t.DEFAULT="default"})(Pn||(Pn={}));var Fh;(function(t){t.TOP_LEFT="top-left",t.TOP_CENTER="top-center",t.TOP_RIGHT="top-right",t.BOTTOM_LEFT="bottom-left",t.BOTTOM_CENTER="bottom-center",t.BOTTOM_RIGHT="bottom-right"})(Fh||(Fh={}));var Dn;(function(t){t.ADD="add",t.DISMISS="dismiss",t.UPDATE="update",t.CLEAR="clear",t.UPDATE_DEFAULTS="update_defaults"})(Dn||(Dn={}));var ts="Vue-Toastification",Jn={type:{type:String,default:Pn.DEFAULT},classNames:{type:[String,Array],default:()=>[]},trueBoolean:{type:Boolean,default:!0}},MI={type:Jn.type,customIcon:{type:[String,Boolean,Object,Function],default:!0}},zu={component:{type:[String,Object,Function,Boolean],default:"button"},classNames:Jn.classNames,showOnHover:{type:Boolean,default:!1},ariaLabel:{type:String,default:"close"}},Ig={timeout:{type:[Number,Boolean],default:5e3},hideProgressBar:{type:Boolean,default:!1},isRunning:{type:Boolean,default:!1}},LI={transition:{type:[Object,String],default:`${ts}__bounce`}},h4={position:{type:String,default:Fh.TOP_RIGHT},draggable:Jn.trueBoolean,draggablePercent:{type:Number,default:.6},pauseOnFocusLoss:Jn.trueBoolean,pauseOnHover:Jn.trueBoolean,closeOnClick:Jn.trueBoolean,timeout:Ig.timeout,hideProgressBar:Ig.hideProgressBar,toastClassName:Jn.classNames,bodyClassName:Jn.classNames,icon:MI.customIcon,closeButton:zu.component,closeButtonClassName:zu.classNames,showCloseButtonOnHover:zu.showOnHover,accessibility:{type:Object,default:()=>({toastRole:"alert",closeButtonLabel:"close"})},rtl:{type:Boolean,default:!1},eventBus:{type:Object,required:!1,default:()=>new j_}},d4={id:{type:[String,Number],required:!0,default:0},type:Jn.type,content:{type:[String,Object,Function],required:!0,default:""},onClick:{type:Function,default:void 0},onClose:{type:Function,default:void 0}},f4={container:{type:[Object,Function],default:()=>document.body},newestOnTop:Jn.trueBoolean,maxToasts:{type:Number,default:20},transition:LI.transition,toastDefaults:Object,filterBeforeCreate:{type:Function,default:t=>t},filterToasts:{type:Function,default:t=>t},containerClassName:Jn.classNames,onMounted:Function,shareAppContext:[Boolean,Object]},si={CORE_TOAST:h4,TOAST:d4,CONTAINER:f4,PROGRESS_BAR:Ig,ICON:MI,TRANSITION:LI,CLOSE_BUTTON:zu},NI=ui({name:"VtProgressBar",props:si.PROGRESS_BAR,data(){return{hasClass:!0}},computed:{style(){return{animationDuration:`${this.timeout}ms`,animationPlayState:this.isRunning?"running":"paused",opacity:this.hideProgressBar?0:1}},cpClass(){return this.hasClass?`${ts}__progress-bar`:""}},watch:{timeout(){this.hasClass=!1,this.$nextTick(()=>this.hasClass=!0)}},mounted(){this.$el.addEventListener("animationend",this.animationEnded)},beforeUnmount(){this.$el.removeEventListener("animationend",this.animationEnded)},methods:{animationEnded(){this.$emit("close-toast")}}});function p4(t,e){return C(),O("div",{style:nl(t.style),class:Tt(t.cpClass)},null,6)}NI.render=p4;var g4=NI,VI=ui({name:"VtCloseButton",props:si.CLOSE_BUTTON,computed:{buttonComponent(){return this.component!==!1?Cl(this.component):"button"},classes(){const t=[`${ts}__close-button`];return this.showOnHover&&t.push("show-on-hover"),t.concat(this.classNames)}}}),m4=on(" × ");function _4(t,e){return C(),De(gm(t.buttonComponent),ud({"aria-label":t.ariaLabel,class:t.classes},t.$attrs),{default:jr(()=>[m4]),_:1},16,["aria-label","class"])}VI.render=_4;var y4=VI,FI={},b4={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"check-circle",class:"svg-inline--fa fa-check-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},v4=p("path",{fill:"currentColor",d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},null,-1),w4=[v4];function E4(t,e){return C(),O("svg",b4,w4)}FI.render=E4;var T4=FI,BI={},S4={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"info-circle",class:"svg-inline--fa fa-info-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},R4=p("path",{fill:"currentColor",d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},null,-1),I4=[R4];function x4(t,e){return C(),O("svg",S4,I4)}BI.render=x4;var A0=BI,UI={},C4={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"exclamation-circle",class:"svg-inline--fa fa-exclamation-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},k4=p("path",{fill:"currentColor",d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},null,-1),A4=[k4];function P4(t,e){return C(),O("svg",C4,A4)}UI.render=P4;var D4=UI,$I={},O4={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"exclamation-triangle",class:"svg-inline--fa fa-exclamation-triangle fa-w-18",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},M4=p("path",{fill:"currentColor",d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},null,-1),L4=[M4];function N4(t,e){return C(),O("svg",O4,L4)}$I.render=N4;var V4=$I,HI=ui({name:"VtIcon",props:si.ICON,computed:{customIconChildren(){return Ds(this.customIcon,"iconChildren")?this.trimValue(this.customIcon.iconChildren):""},customIconClass(){return uf(this.customIcon)?this.trimValue(this.customIcon):Ds(this.customIcon,"iconClass")?this.trimValue(this.customIcon.iconClass):""},customIconTag(){return Ds(this.customIcon,"iconTag")?this.trimValue(this.customIcon.iconTag,"i"):"i"},hasCustomIcon(){return this.customIconClass.length>0},component(){return this.hasCustomIcon?this.customIconTag:OI(this.customIcon)?Cl(this.customIcon):this.iconTypeComponent},iconTypeComponent(){return{[Pn.DEFAULT]:A0,[Pn.INFO]:A0,[Pn.SUCCESS]:T4,[Pn.ERROR]:V4,[Pn.WARNING]:D4}[this.type]},iconClasses(){const t=[`${ts}__icon`];return this.hasCustomIcon?t.concat(this.customIconClass):t}},methods:{trimValue(t,e=""){return AI(t)?t.trim():e}}});function F4(t,e){return C(),De(gm(t.component),{class:Tt(t.iconClasses)},{default:jr(()=>[on(Se(t.customIconChildren),1)]),_:1},8,["class"])}HI.render=F4;var B4=HI,zI=ui({name:"VtToast",components:{ProgressBar:g4,CloseButton:y4,Icon:B4},inheritAttrs:!1,props:Object.assign({},si.CORE_TOAST,si.TOAST),data(){return{isRunning:!0,disableTransitions:!1,beingDragged:!1,dragStart:0,dragPos:{x:0,y:0},dragRect:{}}},computed:{classes(){const t=[`${ts}__toast`,`${ts}__toast--${this.type}`,`${this.position}`].concat(this.toastClassName);return this.disableTransitions&&t.push("disable-transition"),this.rtl&&t.push(`${ts}__toast--rtl`),t},bodyClasses(){return[`${ts}__toast-${uf(this.content)?"body":"component-body"}`].concat(this.bodyClassName)},draggableStyle(){return this.dragStart===this.dragPos.x?{}:this.beingDragged?{transform:`translateX(${this.dragDelta}px)`,opacity:1-Math.abs(this.dragDelta/this.removalDistance)}:{transition:"transform 0.2s, opacity 0.2s",transform:"translateX(0)",opacity:1}},dragDelta(){return this.beingDragged?this.dragPos.x-this.dragStart:0},removalDistance(){return C0(this.dragRect)?(this.dragRect.right-this.dragRect.left)*this.draggablePercent:0}},mounted(){this.draggable&&this.draggableSetup(),this.pauseOnFocusLoss&&this.focusSetup()},beforeUnmount(){this.draggable&&this.draggableCleanup(),this.pauseOnFocusLoss&&this.focusCleanup()},methods:{hasProp:Ds,getVueComponentFromObj:Cl,closeToast(){this.eventBus.emit(Dn.DISMISS,this.id)},clickHandler(){this.onClick&&this.onClick(this.closeToast),this.closeOnClick&&(!this.beingDragged||this.dragStart===this.dragPos.x)&&this.closeToast()},timeoutHandler(){this.closeToast()},hoverPause(){this.pauseOnHover&&(this.isRunning=!1)},hoverPlay(){this.pauseOnHover&&(this.isRunning=!0)},focusPause(){this.isRunning=!1},focusPlay(){this.isRunning=!0},focusSetup(){addEventListener("blur",this.focusPause),addEventListener("focus",this.focusPlay)},focusCleanup(){removeEventListener("blur",this.focusPause),removeEventListener("focus",this.focusPlay)},draggableSetup(){const t=this.$el;t.addEventListener("touchstart",this.onDragStart,{passive:!0}),t.addEventListener("mousedown",this.onDragStart),addEventListener("touchmove",this.onDragMove,{passive:!1}),addEventListener("mousemove",this.onDragMove),addEventListener("touchend",this.onDragEnd),addEventListener("mouseup",this.onDragEnd)},draggableCleanup(){const t=this.$el;t.removeEventListener("touchstart",this.onDragStart),t.removeEventListener("mousedown",this.onDragStart),removeEventListener("touchmove",this.onDragMove),removeEventListener("mousemove",this.onDragMove),removeEventListener("touchend",this.onDragEnd),removeEventListener("mouseup",this.onDragEnd)},onDragStart(t){this.beingDragged=!0,this.dragPos={x:ap(t),y:k0(t)},this.dragStart=ap(t),this.dragRect=this.$el.getBoundingClientRect()},onDragMove(t){this.beingDragged&&(t.preventDefault(),this.isRunning&&(this.isRunning=!1),this.dragPos={x:ap(t),y:k0(t)})},onDragEnd(){this.beingDragged&&(Math.abs(this.dragDelta)>=this.removalDistance?(this.disableTransitions=!0,this.$nextTick(()=>this.closeToast())):setTimeout(()=>{this.beingDragged=!1,C0(this.dragRect)&&this.pauseOnHover&&this.dragRect.bottom>=this.dragPos.y&&this.dragPos.y>=this.dragRect.top&&this.dragRect.left<=this.dragPos.x&&this.dragPos.x<=this.dragRect.right?this.isRunning=!1:this.isRunning=!0}))}}}),U4=["role"];function $4(t,e){const n=te("Icon"),s=te("CloseButton"),i=te("ProgressBar");return C(),O("div",{class:Tt(t.classes),style:nl(t.draggableStyle),onClick:e[0]||(e[0]=(...r)=>t.clickHandler&&t.clickHandler(...r)),onMouseenter:e[1]||(e[1]=(...r)=>t.hoverPause&&t.hoverPause(...r)),onMouseleave:e[2]||(e[2]=(...r)=>t.hoverPlay&&t.hoverPlay(...r))},[t.icon?(C(),De(n,{key:0,"custom-icon":t.icon,type:t.type},null,8,["custom-icon","type"])):be("v-if",!0),p("div",{role:t.accessibility.toastRole||"alert",class:Tt(t.bodyClasses)},[typeof t.content=="string"?(C(),O(me,{key:0},[on(Se(t.content),1)],2112)):(C(),De(gm(t.getVueComponentFromObj(t.content)),ud({key:1,"toast-id":t.id},t.hasProp(t.content,"props")?t.content.props:{},yA(t.hasProp(t.content,"listeners")?t.content.listeners:{}),{onCloseToast:t.closeToast}),null,16,["toast-id","onCloseToast"]))],10,U4),t.closeButton?(C(),De(s,{key:1,component:t.closeButton,"class-names":t.closeButtonClassName,"show-on-hover":t.showCloseButtonOnHover,"aria-label":t.accessibility.closeButtonLabel,onClick:Ye(t.closeToast,["stop"])},null,8,["component","class-names","show-on-hover","aria-label","onClick"])):be("v-if",!0),t.timeout?(C(),De(i,{key:2,"is-running":t.isRunning,"hide-progress-bar":t.hideProgressBar,timeout:t.timeout,onCloseToast:t.timeoutHandler},null,8,["is-running","hide-progress-bar","timeout","onCloseToast"])):be("v-if",!0)],38)}zI.render=$4;var H4=zI,jI=ui({name:"VtTransition",props:si.TRANSITION,emits:["leave"],methods:{hasProp:Ds,leave(t){t instanceof HTMLElement&&(t.style.left=t.offsetLeft+"px",t.style.top=t.offsetTop+"px",t.style.width=getComputedStyle(t).width,t.style.position="absolute")}}});function z4(t,e){return C(),De(vP,{tag:"div","enter-active-class":t.transition.enter?t.transition.enter:`${t.transition}-enter-active`,"move-class":t.transition.move?t.transition.move:`${t.transition}-move`,"leave-active-class":t.transition.leave?t.transition.leave:`${t.transition}-leave-active`,onLeave:t.leave},{default:jr(()=>[Zt(t.$slots,"default")]),_:3},8,["enter-active-class","move-class","leave-active-class","onLeave"])}jI.render=z4;var j4=jI,WI=ui({name:"VueToastification",devtools:{hide:!0},components:{Toast:H4,VtTransition:j4},props:Object.assign({},si.CORE_TOAST,si.CONTAINER,si.TRANSITION),data(){return{count:0,positions:Object.values(Fh),toasts:{},defaults:{}}},computed:{toastArray(){return Object.values(this.toasts)},filteredToasts(){return this.defaults.filterToasts(this.toastArray)}},beforeMount(){const t=this.eventBus;t.on(Dn.ADD,this.addToast),t.on(Dn.CLEAR,this.clearToasts),t.on(Dn.DISMISS,this.dismissToast),t.on(Dn.UPDATE,this.updateToast),t.on(Dn.UPDATE_DEFAULTS,this.updateDefaults),this.defaults=this.$props},mounted(){this.setup(this.container)},methods:{async setup(t){lf(t)&&(t=await t()),a4(this.$el),t.appendChild(this.$el)},setToast(t){Dr(t.id)||(this.toasts[t.id]=t)},addToast(t){t.content=c4(t.content);const e=Object.assign({},this.defaults,t.type&&this.defaults.toastDefaults&&this.defaults.toastDefaults[t.type],t),n=this.defaults.filterBeforeCreate(e,this.toastArray);n&&this.setToast(n)},dismissToast(t){const e=this.toasts[t];!Dr(e)&&!Dr(e.onClose)&&e.onClose(),delete this.toasts[t]},clearToasts(){Object.keys(this.toasts).forEach(t=>{this.dismissToast(t)})},getPositionToasts(t){const e=this.filteredToasts.filter(n=>n.position===t).slice(0,this.defaults.maxToasts);return this.defaults.newestOnTop?e.reverse():e},updateDefaults(t){Dr(t.container)||this.setup(t.container),this.defaults=Object.assign({},this.defaults,t)},updateToast({id:t,options:e,create:n}){this.toasts[t]?(e.timeout&&e.timeout===this.toasts[t].timeout&&e.timeout++,this.setToast(Object.assign({},this.toasts[t],e))):n&&this.addToast(Object.assign({},{id:t},e))},getClasses(t){return[`${ts}__container`,t].concat(this.defaults.containerClassName)}}});function W4(t,e){const n=te("Toast"),s=te("VtTransition");return C(),O("div",null,[(C(!0),O(me,null,ft(t.positions,i=>(C(),O("div",{key:i},[W(s,{transition:t.defaults.transition,class:Tt(t.getClasses(i))},{default:jr(()=>[(C(!0),O(me,null,ft(t.getPositionToasts(i),r=>(C(),De(n,ud({key:r.id},r),null,16))),128))]),_:2},1032,["transition","class"])]))),128))])}WI.render=W4;var q4=WI,P0=(t={},e=!0)=>{const n=t.eventBus=t.eventBus||new j_;e&&dm(()=>{const r=VT(q4,kI({},t)),o=r.mount(document.createElement("div")),a=t.onMounted;if(Dr(a)||a(o,r),t.shareAppContext){const c=t.shareAppContext;c===!0?console.warn(`[${ts}] App to share context with was not provided.`):(r._context.components=c._context.components,r._context.directives=c._context.directives,r._context.mixins=c._context.mixins,r._context.provides=c._context.provides,r.config.globalProperties=c.config.globalProperties)}});const s=(r,o)=>{const a=Object.assign({},{id:o4(),type:Pn.DEFAULT},o,{content:r});return n.emit(Dn.ADD,a),a.id};s.clear=()=>n.emit(Dn.CLEAR,void 0),s.updateDefaults=r=>{n.emit(Dn.UPDATE_DEFAULTS,r)},s.dismiss=r=>{n.emit(Dn.DISMISS,r)};function i(r,{content:o,options:a},c=!1){const l=Object.assign({},a,{content:o});n.emit(Dn.UPDATE,{id:r,options:l,create:c})}return s.update=i,s.success=(r,o)=>s(r,Object.assign({},o,{type:Pn.SUCCESS})),s.info=(r,o)=>s(r,Object.assign({},o,{type:Pn.INFO})),s.error=(r,o)=>s(r,Object.assign({},o,{type:Pn.ERROR})),s.warning=(r,o)=>s(r,Object.assign({},o,{type:Pn.WARNING})),s},G4=()=>{const t=()=>console.warn(`[${ts}] This plugin does not support SSR!`);return new Proxy(t,{get(){return t}})};function xg(t){return l4()?u4(t)?P0({eventBus:t},!1):P0(t,!0):G4()}var qI=Symbol("VueToastification"),GI=new j_,K4=(t,e)=>{(e==null?void 0:e.shareAppContext)===!0&&(e.shareAppContext=t);const n=xg(kI({eventBus:GI},e));t.provide(qI,n)},fo=t=>{if(t)return xg(t);const e=vm()?Ss(qI,void 0):void 0;return e||xg(GI)},Y4=K4;const kl="/assets/logo-PjH7a8V4.jpg",Q4="/assets/landingfood-iaW25sLx.png",X4={name:"LandingPage",setup(){return{toast:fo()}},methods:{goToSignUp(){this.$router.push("/signup")},goToLogin(){this.$router.push("/login")},triggerToast(){this.toast.error("You need to be logged in to access that page.",{timeout:2e3,position:"top-center",hideProgressBar:!0})}},created(){this.$route.query.redirected&&this.triggerToast()}},W_=t=>(Lt("data-v-138f60e1"),t=t(),Nt(),t),J4={id:"app"},Z4={class:"top-bar"},e$=W_(()=>p("img",{src:kl,alt:"PantryPal Logo",class:"logo"},null,-1)),t$={class:"menu"},n$=W_(()=>p("div",{class:"separator"},null,-1)),s$=W_(()=>p("div",{class:"gallery-container"},[p("header",null,[p("h1",null,"Transform leftovers into culinary treasures!")]),p("section",{class:"gallery"},[p("div",null,[p("img",{class:"gallery-item",src:Q4,alt:"food"})])])],-1));function i$(t,e,n,s,i,r){return C(),O("div",J4,[p("div",Z4,[e$,p("div",t$,[p("button",{class:"btn-login",onClick:e[0]||(e[0]=(...o)=>r.goToLogin&&r.goToLogin(...o))},"Login"),p("button",{class:"btn-signup",onClick:e[1]||(e[1]=(...o)=>r.goToSignUp&&r.goToSignUp(...o))},"Sign Up")])]),n$,s$])}const r$=Ve(X4,[["render",i$],["__scopeId","data-v-138f60e1"]]),o$={name:"SignUp",data(){return{user:{email:"",username:"",password:"",confirmPassword:""},error:""}},methods:{register(){if(this.user.password!==this.user.confirmPassword){this.error="Passwords do not match.";return}m2(Re,this.user.email,this.user.password).then(()=>{try{console.log(Re.currentUser.uid);const t=Ie(Ae,"users",Re.currentUser.uid);Pr(t,{email:this.user.email,liked_recipes:[],my_cookbook:[],profile_img_url:"",user_id:Re.currentUser.uid,username:this.user.username})}catch(t){console.log(t)}this.$router.push("/community-page")}).catch(t=>{t.code==="auth/email-already-in-use"?this.error="This email is already in use. Please use a different email.":this.error=t.message,console.error("Registration error:",t)})}}},fi=t=>(Lt("data-v-a12c18ce"),t=t(),Nt(),t),a$={class:"signup-container"},c$=fi(()=>p("div",{class:"signup-image-container"},null,-1)),l$={class:"signup-form-container"},u$=fi(()=>p("img",{src:kl,alt:"PantryPal Logo",class:"logo"},null,-1)),h$=fi(()=>p("h1",null,"Create New Account",-1)),d$={class:"input-group"},f$=fi(()=>p("label",{for:"email"},"EMAIL",-1)),p$={class:"input-group"},g$=fi(()=>p("label",{for:"username"},"USERNAME",-1)),m$={class:"input-group"},_$=fi(()=>p("label",{for:"password"},"PASSWORD",-1)),y$={class:"input-group"},b$=fi(()=>p("label",{for:"confirm-password"},"CONFIRM PASSWORD",-1)),v$=fi(()=>p("div",{class:"login-link"},[on("Already Registered? "),p("a",{href:"/login"},"Login")],-1)),w$=fi(()=>p("button",{type:"submit",class:"btn-signup"},"Sign Up",-1)),E$={key:0,class:"error-message",style:{color:"red","text-align":"center","margin-top":"20px"}};function T$(t,e,n,s,i,r){return C(),O("div",a$,[c$,p("div",l$,[u$,h$,p("form",{class:"signup-form",onSubmit:e[4]||(e[4]=Ye((...o)=>r.register&&r.register(...o),["prevent"]))},[p("div",d$,[f$,ie(p("input",{type:"email",id:"email","onUpdate:modelValue":e[0]||(e[0]=o=>i.user.email=o),required:""},null,512),[[ve,i.user.email]])]),p("div",p$,[g$,ie(p("input",{type:"text",id:"username","onUpdate:modelValue":e[1]||(e[1]=o=>i.user.username=o),required:""},null,512),[[ve,i.user.username]])]),p("div",m$,[_$,ie(p("input",{type:"password",id:"password","onUpdate:modelValue":e[2]||(e[2]=o=>i.user.password=o),required:""},null,512),[[ve,i.user.password]])]),p("div",y$,[b$,ie(p("input",{type:"password",id:"confirm-password","onUpdate:modelValue":e[3]||(e[3]=o=>i.user.confirmPassword=o),required:""},null,512),[[ve,i.user.confirmPassword]])]),v$,w$],32),i.error?(C(),O("div",E$,Se(i.error),1)):be("",!0)])])}const S$=Ve(o$,[["render",T$],["__scopeId","data-v-a12c18ce"]]),R$={name:"Login",data(){return{user:{email:"",password:""},error:""}},methods:{login(){_2(Re,this.user.email,this.user.password).then(()=>{this.$router.push("/community-page")}).catch(t=>{this.error="Invalid login credentials. Please try again.",console.error("Login error:",t)})}}},po=t=>(Lt("data-v-e07e4202"),t=t(),Nt(),t),I$={class:"login-container"},x$={class:"login-form-container"},C$=po(()=>p("img",{src:kl,alt:"PantryPal Logo",class:"logo"},null,-1)),k$=po(()=>p("h1",null,"Welcome Back",-1)),A$={class:"input-group"},P$=po(()=>p("label",{for:"email"},"EMAIL",-1)),D$={class:"input-group"},O$=po(()=>p("label",{for:"password"},"PASSWORD",-1)),M$=po(()=>p("div",{class:"register-link"},[on(" New Here? "),p("a",{href:"/signup"},"Register")],-1)),L$=po(()=>p("button",{type:"submit",class:"btn-login"},"Log In",-1)),N$={key:0,class:"error-message",style:{color:"red"}},V$=po(()=>p("div",{class:"login-image-container"},null,-1));function F$(t,e,n,s,i,r){return C(),O("div",I$,[p("div",x$,[C$,k$,p("form",{class:"login-form",onSubmit:e[2]||(e[2]=Ye((...o)=>r.login&&r.login(...o),["prevent"]))},[p("div",A$,[P$,ie(p("input",{type:"email",id:"email","onUpdate:modelValue":e[0]||(e[0]=o=>i.user.email=o),required:""},null,512),[[ve,i.user.email]])]),p("div",D$,[O$,ie(p("input",{type:"password",id:"password","onUpdate:modelValue":e[1]||(e[1]=o=>i.user.password=o),required:""},null,512),[[ve,i.user.password]])]),M$,L$],32),i.error?(C(),O("div",N$,Se(i.error),1)):be("",!0)]),V$])}const B$=Ve(R$,[["render",F$],["__scopeId","data-v-e07e4202"]]);function KI(t,e){return function(){return t.apply(e,arguments)}}const{toString:U$}=Object.prototype,{getPrototypeOf:q_}=Object,hf=(t=>e=>{const n=U$.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Us=t=>(t=t.toLowerCase(),e=>hf(e)===t),df=t=>e=>typeof e===t,{isArray:_a}=Array,Wc=df("undefined");function $$(t){return t!==null&&!Wc(t)&&t.constructor!==null&&!Wc(t.constructor)&&jn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const YI=Us("ArrayBuffer");function H$(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&YI(t.buffer),e}const z$=df("string"),jn=df("function"),QI=df("number"),ff=t=>t!==null&&typeof t=="object",j$=t=>t===!0||t===!1,ju=t=>{if(hf(t)!=="object")return!1;const e=q_(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},W$=Us("Date"),q$=Us("File"),G$=Us("Blob"),K$=Us("FileList"),Y$=t=>ff(t)&&jn(t.pipe),Q$=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||jn(t.append)&&((e=hf(t))==="formdata"||e==="object"&&jn(t.toString)&&t.toString()==="[object FormData]"))},X$=Us("URLSearchParams"),J$=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Al(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let s,i;if(typeof t!="object"&&(t=[t]),_a(t))for(s=0,i=t.length;s<i;s++)e.call(null,t[s],s,t);else{const r=n?Object.getOwnPropertyNames(t):Object.keys(t),o=r.length;let a;for(s=0;s<o;s++)a=r[s],e.call(null,t[a],a,t)}}function XI(t,e){e=e.toLowerCase();const n=Object.keys(t);let s=n.length,i;for(;s-- >0;)if(i=n[s],e===i.toLowerCase())return i;return null}const JI=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ZI=t=>!Wc(t)&&t!==JI;function Cg(){const{caseless:t}=ZI(this)&&this||{},e={},n=(s,i)=>{const r=t&&XI(e,i)||i;ju(e[r])&&ju(s)?e[r]=Cg(e[r],s):ju(s)?e[r]=Cg({},s):_a(s)?e[r]=s.slice():e[r]=s};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&Al(arguments[s],n);return e}const Z$=(t,e,n,{allOwnKeys:s}={})=>(Al(e,(i,r)=>{n&&jn(i)?t[r]=KI(i,n):t[r]=i},{allOwnKeys:s}),t),e5=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),t5=(t,e,n,s)=>{t.prototype=Object.create(e.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},n5=(t,e,n,s)=>{let i,r,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),r=i.length;r-- >0;)o=i[r],(!s||s(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&q_(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},s5=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const s=t.indexOf(e,n);return s!==-1&&s===n},i5=t=>{if(!t)return null;if(_a(t))return t;let e=t.length;if(!QI(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},r5=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&q_(Uint8Array)),o5=(t,e)=>{const s=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=s.next())&&!i.done;){const r=i.value;e.call(t,r[0],r[1])}},a5=(t,e)=>{let n;const s=[];for(;(n=t.exec(e))!==null;)s.push(n);return s},c5=Us("HTMLFormElement"),l5=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,i){return s.toUpperCase()+i}),D0=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),u5=Us("RegExp"),ex=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),s={};Al(n,(i,r)=>{let o;(o=e(i,r,t))!==!1&&(s[r]=o||i)}),Object.defineProperties(t,s)},h5=t=>{ex(t,(e,n)=>{if(jn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=t[n];if(jn(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},d5=(t,e)=>{const n={},s=i=>{i.forEach(r=>{n[r]=!0})};return _a(t)?s(t):s(String(t).split(e)),n},f5=()=>{},p5=(t,e)=>(t=+t,Number.isFinite(t)?t:e),cp="abcdefghijklmnopqrstuvwxyz",O0="0123456789",tx={DIGIT:O0,ALPHA:cp,ALPHA_DIGIT:cp+cp.toUpperCase()+O0},g5=(t=16,e=tx.ALPHA_DIGIT)=>{let n="";const{length:s}=e;for(;t--;)n+=e[Math.random()*s|0];return n};function m5(t){return!!(t&&jn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const _5=t=>{const e=new Array(10),n=(s,i)=>{if(ff(s)){if(e.indexOf(s)>=0)return;if(!("toJSON"in s)){e[i]=s;const r=_a(s)?[]:{};return Al(s,(o,a)=>{const c=n(o,i+1);!Wc(c)&&(r[a]=c)}),e[i]=void 0,r}}return s};return n(t,0)},y5=Us("AsyncFunction"),b5=t=>t&&(ff(t)||jn(t))&&jn(t.then)&&jn(t.catch),D={isArray:_a,isArrayBuffer:YI,isBuffer:$$,isFormData:Q$,isArrayBufferView:H$,isString:z$,isNumber:QI,isBoolean:j$,isObject:ff,isPlainObject:ju,isUndefined:Wc,isDate:W$,isFile:q$,isBlob:G$,isRegExp:u5,isFunction:jn,isStream:Y$,isURLSearchParams:X$,isTypedArray:r5,isFileList:K$,forEach:Al,merge:Cg,extend:Z$,trim:J$,stripBOM:e5,inherits:t5,toFlatObject:n5,kindOf:hf,kindOfTest:Us,endsWith:s5,toArray:i5,forEachEntry:o5,matchAll:a5,isHTMLForm:c5,hasOwnProperty:D0,hasOwnProp:D0,reduceDescriptors:ex,freezeMethods:h5,toObjectSet:d5,toCamelCase:l5,noop:f5,toFiniteNumber:p5,findKey:XI,global:JI,isContextDefined:ZI,ALPHABET:tx,generateString:g5,isSpecCompliantForm:m5,toJSONObject:_5,isAsyncFn:y5,isThenable:b5};function Le(t,e,n,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),s&&(this.request=s),i&&(this.response=i)}D.inherits(Le,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:D.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const nx=Le.prototype,sx={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{sx[t]={value:t}});Object.defineProperties(Le,sx);Object.defineProperty(nx,"isAxiosError",{value:!0});Le.from=(t,e,n,s,i,r)=>{const o=Object.create(nx);return D.toFlatObject(t,o,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),Le.call(o,t.message,e,n,s,i),o.cause=t,o.name=t.name,r&&Object.assign(o,r),o};const v5=null;function kg(t){return D.isPlainObject(t)||D.isArray(t)}function ix(t){return D.endsWith(t,"[]")?t.slice(0,-2):t}function M0(t,e,n){return t?t.concat(e).map(function(i,r){return i=ix(i),!n&&r?"["+i+"]":i}).join(n?".":""):e}function w5(t){return D.isArray(t)&&!t.some(kg)}const E5=D.toFlatObject(D,{},null,function(e){return/^is[A-Z]/.test(e)});function pf(t,e,n){if(!D.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=D.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,_){return!D.isUndefined(_[m])});const s=n.metaTokens,i=n.visitor||u,r=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&D.isSpecCompliantForm(e);if(!D.isFunction(i))throw new TypeError("visitor must be a function");function l(g){if(g===null)return"";if(D.isDate(g))return g.toISOString();if(!c&&D.isBlob(g))throw new Le("Blob is not supported. Use a Buffer instead.");return D.isArrayBuffer(g)||D.isTypedArray(g)?c&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,m,_){let y=g;if(g&&!_&&typeof g=="object"){if(D.endsWith(m,"{}"))m=s?m:m.slice(0,-2),g=JSON.stringify(g);else if(D.isArray(g)&&w5(g)||(D.isFileList(g)||D.endsWith(m,"[]"))&&(y=D.toArray(g)))return m=ix(m),y.forEach(function(E,T){!(D.isUndefined(E)||E===null)&&e.append(o===!0?M0([m],T,r):o===null?m:m+"[]",l(E))}),!1}return kg(g)?!0:(e.append(M0(_,m,r),l(g)),!1)}const h=[],d=Object.assign(E5,{defaultVisitor:u,convertValue:l,isVisitable:kg});function f(g,m){if(!D.isUndefined(g)){if(h.indexOf(g)!==-1)throw Error("Circular reference detected in "+m.join("."));h.push(g),D.forEach(g,function(y,v){(!(D.isUndefined(y)||y===null)&&i.call(e,y,D.isString(v)?v.trim():v,m,d))===!0&&f(y,m?m.concat(v):[v])}),h.pop()}}if(!D.isObject(t))throw new TypeError("data must be an object");return f(t),e}function L0(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function G_(t,e){this._pairs=[],t&&pf(t,this,e)}const rx=G_.prototype;rx.append=function(e,n){this._pairs.push([e,n])};rx.toString=function(e){const n=e?function(s){return e.call(this,s,L0)}:L0;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function T5(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ox(t,e,n){if(!e)return t;const s=n&&n.encode||T5,i=n&&n.serialize;let r;if(i?r=i(e,n):r=D.isURLSearchParams(e)?e.toString():new G_(e,n).toString(s),r){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+r}return t}class N0{constructor(){this.handlers=[]}use(e,n,s){return this.handlers.push({fulfilled:e,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){D.forEach(this.handlers,function(s){s!==null&&e(s)})}}const ax={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},S5=typeof URLSearchParams<"u"?URLSearchParams:G_,R5=typeof FormData<"u"?FormData:null,I5=typeof Blob<"u"?Blob:null,x5={isBrowser:!0,classes:{URLSearchParams:S5,FormData:R5,Blob:I5},protocols:["http","https","file","blob","url","data"]},cx=typeof window<"u"&&typeof document<"u",C5=(t=>cx&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),k5=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",A5=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:cx,hasStandardBrowserEnv:C5,hasStandardBrowserWebWorkerEnv:k5},Symbol.toStringTag,{value:"Module"})),Ts={...A5,...x5};function P5(t,e){return pf(t,new Ts.classes.URLSearchParams,Object.assign({visitor:function(n,s,i,r){return Ts.isNode&&D.isBuffer(n)?(this.append(s,n.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}function D5(t){return D.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function O5(t){const e={},n=Object.keys(t);let s;const i=n.length;let r;for(s=0;s<i;s++)r=n[s],e[r]=t[r];return e}function lx(t){function e(n,s,i,r){let o=n[r++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),c=r>=n.length;return o=!o&&D.isArray(i)?i.length:o,c?(D.hasOwnProp(i,o)?i[o]=[i[o],s]:i[o]=s,!a):((!i[o]||!D.isObject(i[o]))&&(i[o]=[]),e(n,s,i[o],r)&&D.isArray(i[o])&&(i[o]=O5(i[o])),!a)}if(D.isFormData(t)&&D.isFunction(t.entries)){const n={};return D.forEachEntry(t,(s,i)=>{e(D5(s),i,n,0)}),n}return null}function M5(t,e,n){if(D.isString(t))try{return(e||JSON.parse)(t),D.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(t)}const K_={transitional:ax,adapter:["xhr","http"],transformRequest:[function(e,n){const s=n.getContentType()||"",i=s.indexOf("application/json")>-1,r=D.isObject(e);if(r&&D.isHTMLForm(e)&&(e=new FormData(e)),D.isFormData(e))return i?JSON.stringify(lx(e)):e;if(D.isArrayBuffer(e)||D.isBuffer(e)||D.isStream(e)||D.isFile(e)||D.isBlob(e))return e;if(D.isArrayBufferView(e))return e.buffer;if(D.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(r){if(s.indexOf("application/x-www-form-urlencoded")>-1)return P5(e,this.formSerializer).toString();if((a=D.isFileList(e))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return pf(a?{"files[]":e}:e,c&&new c,this.formSerializer)}}return r||i?(n.setContentType("application/json",!1),M5(e)):e}],transformResponse:[function(e){const n=this.transitional||K_.transitional,s=n&&n.forcedJSONParsing,i=this.responseType==="json";if(e&&D.isString(e)&&(s&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Le.from(a,Le.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ts.classes.FormData,Blob:Ts.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};D.forEach(["delete","get","head","post","put","patch"],t=>{K_.headers[t]={}});const Y_=K_,L5=D.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),N5=t=>{const e={};let n,s,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),s=o.substring(i+1).trim(),!(!n||e[n]&&L5[n])&&(n==="set-cookie"?e[n]?e[n].push(s):e[n]=[s]:e[n]=e[n]?e[n]+", "+s:s)}),e},V0=Symbol("internals");function Ca(t){return t&&String(t).trim().toLowerCase()}function Wu(t){return t===!1||t==null?t:D.isArray(t)?t.map(Wu):String(t)}function V5(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(t);)e[s[1]]=s[2];return e}const F5=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function lp(t,e,n,s,i){if(D.isFunction(s))return s.call(this,e,n);if(i&&(e=n),!!D.isString(e)){if(D.isString(s))return e.indexOf(s)!==-1;if(D.isRegExp(s))return s.test(e)}}function B5(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,s)=>n.toUpperCase()+s)}function U5(t,e){const n=D.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+n,{value:function(i,r,o){return this[s].call(this,e,i,r,o)},configurable:!0})})}class gf{constructor(e){e&&this.set(e)}set(e,n,s){const i=this;function r(a,c,l){const u=Ca(c);if(!u)throw new Error("header name must be a non-empty string");const h=D.findKey(i,u);(!h||i[h]===void 0||l===!0||l===void 0&&i[h]!==!1)&&(i[h||c]=Wu(a))}const o=(a,c)=>D.forEach(a,(l,u)=>r(l,u,c));return D.isPlainObject(e)||e instanceof this.constructor?o(e,n):D.isString(e)&&(e=e.trim())&&!F5(e)?o(N5(e),n):e!=null&&r(n,e,s),this}get(e,n){if(e=Ca(e),e){const s=D.findKey(this,e);if(s){const i=this[s];if(!n)return i;if(n===!0)return V5(i);if(D.isFunction(n))return n.call(this,i,s);if(D.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Ca(e),e){const s=D.findKey(this,e);return!!(s&&this[s]!==void 0&&(!n||lp(this,this[s],s,n)))}return!1}delete(e,n){const s=this;let i=!1;function r(o){if(o=Ca(o),o){const a=D.findKey(s,o);a&&(!n||lp(s,s[a],a,n))&&(delete s[a],i=!0)}}return D.isArray(e)?e.forEach(r):r(e),i}clear(e){const n=Object.keys(this);let s=n.length,i=!1;for(;s--;){const r=n[s];(!e||lp(this,this[r],r,e,!0))&&(delete this[r],i=!0)}return i}normalize(e){const n=this,s={};return D.forEach(this,(i,r)=>{const o=D.findKey(s,r);if(o){n[o]=Wu(i),delete n[r];return}const a=e?B5(r):String(r).trim();a!==r&&delete n[r],n[a]=Wu(i),s[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return D.forEach(this,(s,i)=>{s!=null&&s!==!1&&(n[i]=e&&D.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const s=new this(e);return n.forEach(i=>s.set(i)),s}static accessor(e){const s=(this[V0]=this[V0]={accessors:{}}).accessors,i=this.prototype;function r(o){const a=Ca(o);s[a]||(U5(i,o),s[a]=!0)}return D.isArray(e)?e.forEach(r):r(e),this}}gf.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);D.reduceDescriptors(gf.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(s){this[n]=s}}});D.freezeMethods(gf);const ii=gf;function up(t,e){const n=this||Y_,s=e||n,i=ii.from(s.headers);let r=s.data;return D.forEach(t,function(a){r=a.call(n,r,i.normalize(),e?e.status:void 0)}),i.normalize(),r}function ux(t){return!!(t&&t.__CANCEL__)}function Pl(t,e,n){Le.call(this,t??"canceled",Le.ERR_CANCELED,e,n),this.name="CanceledError"}D.inherits(Pl,Le,{__CANCEL__:!0});function $5(t,e,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?t(n):e(new Le("Request failed with status code "+n.status,[Le.ERR_BAD_REQUEST,Le.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const H5=Ts.hasStandardBrowserEnv?{write(t,e,n,s,i,r){const o=[t+"="+encodeURIComponent(e)];D.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),D.isString(s)&&o.push("path="+s),D.isString(i)&&o.push("domain="+i),r===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function z5(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function j5(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function hx(t,e){return t&&!z5(e)?j5(t,e):e}const W5=Ts.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let s;function i(r){let o=r;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return s=i(window.location.href),function(o){const a=D.isString(o)?i(o):o;return a.protocol===s.protocol&&a.host===s.host}}():function(){return function(){return!0}}();function q5(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function G5(t,e){t=t||10;const n=new Array(t),s=new Array(t);let i=0,r=0,o;return e=e!==void 0?e:1e3,function(c){const l=Date.now(),u=s[r];o||(o=l),n[i]=c,s[i]=l;let h=r,d=0;for(;h!==i;)d+=n[h++],h=h%t;if(i=(i+1)%t,i===r&&(r=(r+1)%t),l-o<e)return;const f=u&&l-u;return f?Math.round(d*1e3/f):void 0}}function F0(t,e){let n=0;const s=G5(50,250);return i=>{const r=i.loaded,o=i.lengthComputable?i.total:void 0,a=r-n,c=s(a),l=r<=o;n=r;const u={loaded:r,total:o,progress:o?r/o:void 0,bytes:a,rate:c||void 0,estimated:c&&o&&l?(o-r)/c:void 0,event:i};u[e?"download":"upload"]=!0,t(u)}}const K5=typeof XMLHttpRequest<"u",Y5=K5&&function(t){return new Promise(function(n,s){let i=t.data;const r=ii.from(t.headers).normalize();let{responseType:o,withXSRFToken:a}=t,c;function l(){t.cancelToken&&t.cancelToken.unsubscribe(c),t.signal&&t.signal.removeEventListener("abort",c)}let u;if(D.isFormData(i)){if(Ts.hasStandardBrowserEnv||Ts.hasStandardBrowserWebWorkerEnv)r.setContentType(!1);else if((u=r.getContentType())!==!1){const[m,..._]=u?u.split(";").map(y=>y.trim()).filter(Boolean):[];r.setContentType([m||"multipart/form-data",..._].join("; "))}}let h=new XMLHttpRequest;if(t.auth){const m=t.auth.username||"",_=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";r.set("Authorization","Basic "+btoa(m+":"+_))}const d=hx(t.baseURL,t.url);h.open(t.method.toUpperCase(),ox(d,t.params,t.paramsSerializer),!0),h.timeout=t.timeout;function f(){if(!h)return;const m=ii.from("getAllResponseHeaders"in h&&h.getAllResponseHeaders()),y={data:!o||o==="text"||o==="json"?h.responseText:h.response,status:h.status,statusText:h.statusText,headers:m,config:t,request:h};$5(function(E){n(E),l()},function(E){s(E),l()},y),h=null}if("onloadend"in h?h.onloadend=f:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf("file:")===0)||setTimeout(f)},h.onabort=function(){h&&(s(new Le("Request aborted",Le.ECONNABORTED,t,h)),h=null)},h.onerror=function(){s(new Le("Network Error",Le.ERR_NETWORK,t,h)),h=null},h.ontimeout=function(){let _=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const y=t.transitional||ax;t.timeoutErrorMessage&&(_=t.timeoutErrorMessage),s(new Le(_,y.clarifyTimeoutError?Le.ETIMEDOUT:Le.ECONNABORTED,t,h)),h=null},Ts.hasStandardBrowserEnv&&(a&&D.isFunction(a)&&(a=a(t)),a||a!==!1&&W5(d))){const m=t.xsrfHeaderName&&t.xsrfCookieName&&H5.read(t.xsrfCookieName);m&&r.set(t.xsrfHeaderName,m)}i===void 0&&r.setContentType(null),"setRequestHeader"in h&&D.forEach(r.toJSON(),function(_,y){h.setRequestHeader(y,_)}),D.isUndefined(t.withCredentials)||(h.withCredentials=!!t.withCredentials),o&&o!=="json"&&(h.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&h.addEventListener("progress",F0(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&h.upload&&h.upload.addEventListener("progress",F0(t.onUploadProgress)),(t.cancelToken||t.signal)&&(c=m=>{h&&(s(!m||m.type?new Pl(null,t,h):m),h.abort(),h=null)},t.cancelToken&&t.cancelToken.subscribe(c),t.signal&&(t.signal.aborted?c():t.signal.addEventListener("abort",c)));const g=q5(d);if(g&&Ts.protocols.indexOf(g)===-1){s(new Le("Unsupported protocol "+g+":",Le.ERR_BAD_REQUEST,t));return}h.send(i||null)})},Ag={http:v5,xhr:Y5};D.forEach(Ag,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const B0=t=>`- ${t}`,Q5=t=>D.isFunction(t)||t===null||t===!1,dx={getAdapter:t=>{t=D.isArray(t)?t:[t];const{length:e}=t;let n,s;const i={};for(let r=0;r<e;r++){n=t[r];let o;if(s=n,!Q5(n)&&(s=Ag[(o=String(n)).toLowerCase()],s===void 0))throw new Le(`Unknown adapter '${o}'`);if(s)break;i[o||"#"+r]=s}if(!s){const r=Object.entries(i).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=e?r.length>1?`since :
`+r.map(B0).join(`
`):" "+B0(r[0]):"as no adapter specified";throw new Le("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s},adapters:Ag};function hp(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Pl(null,t)}function U0(t){return hp(t),t.headers=ii.from(t.headers),t.data=up.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),dx.getAdapter(t.adapter||Y_.adapter)(t).then(function(s){return hp(t),s.data=up.call(t,t.transformResponse,s),s.headers=ii.from(s.headers),s},function(s){return ux(s)||(hp(t),s&&s.response&&(s.response.data=up.call(t,t.transformResponse,s.response),s.response.headers=ii.from(s.response.headers))),Promise.reject(s)})}const $0=t=>t instanceof ii?{...t}:t;function oa(t,e){e=e||{};const n={};function s(l,u,h){return D.isPlainObject(l)&&D.isPlainObject(u)?D.merge.call({caseless:h},l,u):D.isPlainObject(u)?D.merge({},u):D.isArray(u)?u.slice():u}function i(l,u,h){if(D.isUndefined(u)){if(!D.isUndefined(l))return s(void 0,l,h)}else return s(l,u,h)}function r(l,u){if(!D.isUndefined(u))return s(void 0,u)}function o(l,u){if(D.isUndefined(u)){if(!D.isUndefined(l))return s(void 0,l)}else return s(void 0,u)}function a(l,u,h){if(h in e)return s(l,u);if(h in t)return s(void 0,l)}const c={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(l,u)=>i($0(l),$0(u),!0)};return D.forEach(Object.keys(Object.assign({},t,e)),function(u){const h=c[u]||i,d=h(t[u],e[u],u);D.isUndefined(d)&&h!==a||(n[u]=d)}),n}const fx="1.6.8",Q_={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Q_[t]=function(s){return typeof s===t||"a"+(e<1?"n ":" ")+t}});const H0={};Q_.transitional=function(e,n,s){function i(r,o){return"[Axios v"+fx+"] Transitional option '"+r+"'"+o+(s?". "+s:"")}return(r,o,a)=>{if(e===!1)throw new Le(i(o," has been removed"+(n?" in "+n:"")),Le.ERR_DEPRECATED);return n&&!H0[o]&&(H0[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(r,o,a):!0}};function X5(t,e,n){if(typeof t!="object")throw new Le("options must be an object",Le.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let i=s.length;for(;i-- >0;){const r=s[i],o=e[r];if(o){const a=t[r],c=a===void 0||o(a,r,t);if(c!==!0)throw new Le("option "+r+" must be "+c,Le.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Le("Unknown option "+r,Le.ERR_BAD_OPTION)}}const Pg={assertOptions:X5,validators:Q_},vi=Pg.validators;class Bh{constructor(e){this.defaults=e,this.interceptors={request:new N0,response:new N0}}async request(e,n){try{return await this._request(e,n)}catch(s){if(s instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const r=i.stack?i.stack.replace(/^.+\n/,""):"";s.stack?r&&!String(s.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+r):s.stack=r}throw s}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=oa(this.defaults,n);const{transitional:s,paramsSerializer:i,headers:r}=n;s!==void 0&&Pg.assertOptions(s,{silentJSONParsing:vi.transitional(vi.boolean),forcedJSONParsing:vi.transitional(vi.boolean),clarifyTimeoutError:vi.transitional(vi.boolean)},!1),i!=null&&(D.isFunction(i)?n.paramsSerializer={serialize:i}:Pg.assertOptions(i,{encode:vi.function,serialize:vi.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=r&&D.merge(r.common,r[n.method]);r&&D.forEach(["delete","get","head","post","put","patch","common"],g=>{delete r[g]}),n.headers=ii.concat(o,r);const a=[];let c=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(c=c&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const l=[];this.interceptors.response.forEach(function(m){l.push(m.fulfilled,m.rejected)});let u,h=0,d;if(!c){const g=[U0.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,l),d=g.length,u=Promise.resolve(n);h<d;)u=u.then(g[h++],g[h++]);return u}d=a.length;let f=n;for(h=0;h<d;){const g=a[h++],m=a[h++];try{f=g(f)}catch(_){m.call(this,_);break}}try{u=U0.call(this,f)}catch(g){return Promise.reject(g)}for(h=0,d=l.length;h<d;)u=u.then(l[h++],l[h++]);return u}getUri(e){e=oa(this.defaults,e);const n=hx(e.baseURL,e.url);return ox(n,e.params,e.paramsSerializer)}}D.forEach(["delete","get","head","options"],function(e){Bh.prototype[e]=function(n,s){return this.request(oa(s||{},{method:e,url:n,data:(s||{}).data}))}});D.forEach(["post","put","patch"],function(e){function n(s){return function(r,o,a){return this.request(oa(a||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}Bh.prototype[e]=n(),Bh.prototype[e+"Form"]=n(!0)});const qu=Bh;class X_{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(r){n=r});const s=this;this.promise.then(i=>{if(!s._listeners)return;let r=s._listeners.length;for(;r-- >0;)s._listeners[r](i);s._listeners=null}),this.promise.then=i=>{let r;const o=new Promise(a=>{s.subscribe(a),r=a}).then(i);return o.cancel=function(){s.unsubscribe(r)},o},e(function(r,o,a){s.reason||(s.reason=new Pl(r,o,a),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new X_(function(i){e=i}),cancel:e}}}const J5=X_;function Z5(t){return function(n){return t.apply(null,n)}}function e6(t){return D.isObject(t)&&t.isAxiosError===!0}const Dg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Dg).forEach(([t,e])=>{Dg[e]=t});const t6=Dg;function px(t){const e=new qu(t),n=KI(qu.prototype.request,e);return D.extend(n,qu.prototype,e,{allOwnKeys:!0}),D.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return px(oa(t,i))},n}const Ct=px(Y_);Ct.Axios=qu;Ct.CanceledError=Pl;Ct.CancelToken=J5;Ct.isCancel=ux;Ct.VERSION=fx;Ct.toFormData=pf;Ct.AxiosError=Le;Ct.Cancel=Ct.CanceledError;Ct.all=function(e){return Promise.all(e)};Ct.spread=Z5;Ct.isAxiosError=e6;Ct.mergeConfig=oa;Ct.AxiosHeaders=ii;Ct.formToJSON=t=>lx(D.isHTMLForm(t)?new FormData(t):t);Ct.getAdapter=dx.getAdapter;Ct.HttpStatusCode=t6;Ct.default=Ct;const n6="/assets/chefbot-icon-BTOuAu8B.png",s6="/assets/send-icon-Ca7Far_h.png",i6={name:"ChefBot",data(){return{currentMessage:"",messages:[],isTyping:!1}},props:{selectedRecipe:{type:Object,required:!0}},mounted(){console.log(this.selectedRecipe),console.log("mounted");const t=`Welcome to ChefBot! Let's get cooking with your selected recipe: ${this.selectedRecipe.recipe_name}. Do you have any questions?`;this.messages.push({from:"chatGpt",data:t})},methods:{async sendMessage(){const t=this.currentMessage.trim();if(!t)return;this.currentMessage=null,this.messages.push({from:"user",data:t}),this.scrollToBottom(),this.isTyping=!0;const e=this.messages.map(n=>({role:n.from==="user"?"user":"assistant",content:n.data}));await Ct.post("https://us-central1-pantrypal-e1225.cloudfunctions.net/api/chatbot",{message:t,conversationHistory:e,selectedRecipe:this.selectedRecipe}).then(n=>{this.isTyping=!1,this.messages.push({from:"chatGpt",data:n.data.data}),this.scrollToBottom()})},scrollToBottom(){this.$nextTick(()=>{const t=this.$refs.messageBox;t.scrollTo({top:t.scrollHeight,behavior:"smooth"})})}}},Dl=t=>(Lt("data-v-7b55eebb"),t=t(),Nt(),t),r6={class:"chatbox-container"},o6={class:"container"},a6=Dl(()=>p("div",{class:"chefbot-icon-container"},[p("img",{src:n6,height:"85px",width:"85px"})],-1)),c6={class:"messageBox mt-8",ref:"messageBox"},l6={key:0,class:"typing-indicator"},u6=Dl(()=>p("span",null,null,-1)),h6=Dl(()=>p("span",null,null,-1)),d6=Dl(()=>p("span",null,null,-1)),f6=[u6,h6,d6],p6=Dl(()=>p("button",{type:"submit",class:"askButton"},[p("img",{src:s6,height:"20px"})],-1));function g6(t,e,n,s,i,r){return C(),O("div",{class:"popup-container",onMousedown:e[2]||(e[2]=Ye(o=>this.$emit("close"),["self","prevent"]))},[p("div",r6,[p("div",o6,[a6,p("div",c6,[(C(!0),O(me,null,ft(i.messages,(o,a)=>(C(),O("div",{key:a,class:Tt(o.from=="user"?"messageFromUser":"messageFromChatGpt")},[p("div",{class:Tt(o.from=="user"?"userMessageWrapper":"chatGptMessageWrapper")},[p("div",{class:Tt(o.from=="user"?"userMessageContent":"chatGptMessageContent")},Se(o.data),3)],2)],2))),128)),i.isTyping?(C(),O("div",l6,f6)):be("",!0)],512),p("form",{onSubmit:e[1]||(e[1]=Ye((...o)=>r.sendMessage&&r.sendMessage(...o),["prevent"])),class:"inputContainer"},[ie(p("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>i.currentMessage=o),type:"text",class:"messageInput",placeholder:"Ask me anything..."},null,512),[[ve,i.currentMessage]]),p6],32)])])],32)}const m6=Ve(i6,[["render",g6],["__scopeId","data-v-7b55eebb"]]),_6={name:"CircleButton",props:{logo:String}},y6={class:"circle-button"},b6=["src"];function v6(t,e,n,s,i,r){return C(),O("div",y6,[p("img",{class:"logo",src:n.logo,alt:"button"},null,8,b6)])}const Ol=Ve(_6,[["render",v6],["__scopeId","data-v-40d75ded"]]);function dp(t){return t===0?!1:Array.isArray(t)&&t.length===0?!0:!t}function w6(t){return(...e)=>!t(...e)}function E6(t,e){return t===void 0&&(t="undefined"),t===null&&(t="null"),t===!1&&(t="false"),t.toString().toLowerCase().indexOf(e.trim())!==-1}function gx(t,e,n,s){return e?t.filter(i=>E6(s(i,n),e)).sort((i,r)=>s(i,n).length-s(r,n).length):t}function T6(t){return t.filter(e=>!e.$isLabel)}function fp(t,e){return n=>n.reduce((s,i)=>i[t]&&i[t].length?(s.push({$groupLabel:i[e],$isLabel:!0}),s.concat(i[t])):s,[])}function S6(t,e,n,s,i){return r=>r.map(o=>{if(!o[n])return console.warn("Options passed to vue-multiselect do not contain groups, despite the config."),[];const a=gx(o[n],t,e,i);return a.length?{[s]:o[s],[n]:a}:[]})}const z0=(...t)=>e=>t.reduce((n,s)=>s(n),e);var R6={data(){return{search:"",isOpen:!1,preferredOpenDirection:"below",optimizedHeight:this.maxHeight}},props:{internalSearch:{type:Boolean,default:!0},options:{type:Array,required:!0},multiple:{type:Boolean,default:!1},trackBy:{type:String},label:{type:String},searchable:{type:Boolean,default:!0},clearOnSelect:{type:Boolean,default:!0},hideSelected:{type:Boolean,default:!1},placeholder:{type:String,default:"Select option"},allowEmpty:{type:Boolean,default:!0},resetAfter:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:!0},customLabel:{type:Function,default(t,e){return dp(t)?"":e?t[e]:t}},taggable:{type:Boolean,default:!1},tagPlaceholder:{type:String,default:"Press enter to create a tag"},tagPosition:{type:String,default:"top"},max:{type:[Number,Boolean],default:!1},id:{default:null},optionsLimit:{type:Number,default:1e3},groupValues:{type:String},groupLabel:{type:String},groupSelect:{type:Boolean,default:!1},blockKeys:{type:Array,default(){return[]}},preserveSearch:{type:Boolean,default:!1},preselectFirst:{type:Boolean,default:!1},preventAutofocus:{type:Boolean,default:!1}},mounted(){!this.multiple&&this.max&&console.warn("[Vue-Multiselect warn]: Max prop should not be used when prop Multiple equals false."),this.preselectFirst&&!this.internalValue.length&&this.options.length&&this.select(this.filteredOptions[0])},computed:{internalValue(){return this.modelValue||this.modelValue===0?Array.isArray(this.modelValue)?this.modelValue:[this.modelValue]:[]},filteredOptions(){const t=this.search||"",e=t.toLowerCase().trim();let n=this.options.concat();return this.internalSearch?n=this.groupValues?this.filterAndFlat(n,e,this.label):gx(n,e,this.label,this.customLabel):n=this.groupValues?fp(this.groupValues,this.groupLabel)(n):n,n=this.hideSelected?n.filter(w6(this.isSelected)):n,this.taggable&&e.length&&!this.isExistingOption(e)&&(this.tagPosition==="bottom"?n.push({isTag:!0,label:t}):n.unshift({isTag:!0,label:t})),n.slice(0,this.optionsLimit)},valueKeys(){return this.trackBy?this.internalValue.map(t=>t[this.trackBy]):this.internalValue},optionKeys(){return(this.groupValues?this.flatAndStrip(this.options):this.options).map(e=>this.customLabel(e,this.label).toString().toLowerCase())},currentOptionLabel(){return this.multiple?this.searchable?"":this.placeholder:this.internalValue.length?this.getOptionLabel(this.internalValue[0]):this.searchable?"":this.placeholder}},watch:{internalValue:{handler(){this.resetAfter&&this.internalValue.length&&(this.search="",this.$emit("update:modelValue",this.multiple?[]:null))},deep:!0},search(){this.$emit("search-change",this.search)}},emits:["open","search-change","close","select","update:modelValue","remove","tag"],methods:{getValue(){return this.multiple?this.internalValue:this.internalValue.length===0?null:this.internalValue[0]},filterAndFlat(t,e,n){return z0(S6(e,n,this.groupValues,this.groupLabel,this.customLabel),fp(this.groupValues,this.groupLabel))(t)},flatAndStrip(t){return z0(fp(this.groupValues,this.groupLabel),T6)(t)},updateSearch(t){this.search=t},isExistingOption(t){return this.options?this.optionKeys.indexOf(t)>-1:!1},isSelected(t){const e=this.trackBy?t[this.trackBy]:t;return this.valueKeys.indexOf(e)>-1},isOptionDisabled(t){return!!t.$isDisabled},getOptionLabel(t){if(dp(t))return"";if(t.isTag)return t.label;if(t.$isLabel)return t.$groupLabel;const e=this.customLabel(t,this.label);return dp(e)?"":e},select(t,e){if(t.$isLabel&&this.groupSelect){this.selectGroup(t);return}if(!(this.blockKeys.indexOf(e)!==-1||this.disabled||t.$isDisabled||t.$isLabel)&&!(this.max&&this.multiple&&this.internalValue.length===this.max)&&!(e==="Tab"&&!this.pointerDirty)){if(t.isTag)this.$emit("tag",t.label,this.id),this.search="",this.closeOnSelect&&!this.multiple&&this.deactivate();else{if(this.isSelected(t)){e!=="Tab"&&this.removeElement(t);return}this.multiple?this.$emit("update:modelValue",this.internalValue.concat([t])):this.$emit("update:modelValue",t),this.$emit("select",t,this.id),this.clearOnSelect&&(this.search="")}this.closeOnSelect&&this.deactivate()}},selectGroup(t){const e=this.options.find(n=>n[this.groupLabel]===t.$groupLabel);if(e){if(this.wholeGroupSelected(e)){this.$emit("remove",e[this.groupValues],this.id);const n=this.internalValue.filter(s=>e[this.groupValues].indexOf(s)===-1);this.$emit("update:modelValue",n)}else{let n=e[this.groupValues].filter(s=>!(this.isOptionDisabled(s)||this.isSelected(s)));this.max&&n.splice(this.max-this.internalValue.length),this.$emit("select",n,this.id),this.$emit("update:modelValue",this.internalValue.concat(n))}this.closeOnSelect&&this.deactivate()}},wholeGroupSelected(t){return t[this.groupValues].every(e=>this.isSelected(e)||this.isOptionDisabled(e))},wholeGroupDisabled(t){return t[this.groupValues].every(this.isOptionDisabled)},removeElement(t,e=!0){if(this.disabled||t.$isDisabled)return;if(!this.allowEmpty&&this.internalValue.length<=1){this.deactivate();return}const n=typeof t=="object"?this.valueKeys.indexOf(t[this.trackBy]):this.valueKeys.indexOf(t);if(this.multiple){const s=this.internalValue.slice(0,n).concat(this.internalValue.slice(n+1));this.$emit("update:modelValue",s)}else this.$emit("update:modelValue",null);this.$emit("remove",t,this.id),this.closeOnSelect&&e&&this.deactivate()},removeLastElement(){this.blockKeys.indexOf("Delete")===-1&&this.search.length===0&&Array.isArray(this.internalValue)&&this.internalValue.length&&this.removeElement(this.internalValue[this.internalValue.length-1],!1)},activate(){this.isOpen||this.disabled||(this.adjustPosition(),this.groupValues&&this.pointer===0&&this.filteredOptions.length&&(this.pointer=1),this.isOpen=!0,this.searchable?(this.preserveSearch||(this.search=""),this.preventAutofocus||this.$nextTick(()=>this.$refs.search&&this.$refs.search.focus())):this.preventAutofocus||typeof this.$el<"u"&&this.$el.focus(),this.$emit("open",this.id))},deactivate(){this.isOpen&&(this.isOpen=!1,this.searchable?this.$refs.search!==null&&typeof this.$refs.search<"u"&&this.$refs.search.blur():typeof this.$el<"u"&&this.$el.blur(),this.preserveSearch||(this.search=""),this.$emit("close",this.getValue(),this.id))},toggle(){this.isOpen?this.deactivate():this.activate()},adjustPosition(){if(typeof window>"u")return;const t=this.$el.getBoundingClientRect().top,e=window.innerHeight-this.$el.getBoundingClientRect().bottom;e>this.maxHeight||e>t||this.openDirection==="below"||this.openDirection==="bottom"?(this.preferredOpenDirection="below",this.optimizedHeight=Math.min(e-40,this.maxHeight)):(this.preferredOpenDirection="above",this.optimizedHeight=Math.min(t-40,this.maxHeight))}}},I6={data(){return{pointer:0,pointerDirty:!1}},props:{showPointer:{type:Boolean,default:!0},optionHeight:{type:Number,default:40}},computed:{pointerPosition(){return this.pointer*this.optionHeight},visibleElements(){return this.optimizedHeight/this.optionHeight}},watch:{filteredOptions(){this.pointerAdjust()},isOpen(){this.pointerDirty=!1},pointer(){this.$refs.search&&this.$refs.search.setAttribute("aria-activedescendant",this.id+"-"+this.pointer.toString())}},methods:{optionHighlight(t,e){return{"multiselect__option--highlight":t===this.pointer&&this.showPointer,"multiselect__option--selected":this.isSelected(e)}},groupHighlight(t,e){if(!this.groupSelect)return["multiselect__option--disabled",{"multiselect__option--group":e.$isLabel}];const n=this.options.find(s=>s[this.groupLabel]===e.$groupLabel);return n&&!this.wholeGroupDisabled(n)?["multiselect__option--group",{"multiselect__option--highlight":t===this.pointer&&this.showPointer},{"multiselect__option--group-selected":this.wholeGroupSelected(n)}]:"multiselect__option--disabled"},addPointerElement({key:t}="Enter"){this.filteredOptions.length>0&&this.select(this.filteredOptions[this.pointer],t),this.pointerReset()},pointerForward(){this.pointer<this.filteredOptions.length-1&&(this.pointer++,this.$refs.list.scrollTop<=this.pointerPosition-(this.visibleElements-1)*this.optionHeight&&(this.$refs.list.scrollTop=this.pointerPosition-(this.visibleElements-1)*this.optionHeight),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()),this.pointerDirty=!0},pointerBackward(){this.pointer>0?(this.pointer--,this.$refs.list.scrollTop>=this.pointerPosition&&(this.$refs.list.scrollTop=this.pointerPosition),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerBackward()):this.filteredOptions[this.pointer]&&this.filteredOptions[0].$isLabel&&!this.groupSelect&&this.pointerForward(),this.pointerDirty=!0},pointerReset(){this.closeOnSelect&&(this.pointer=0,this.$refs.list&&(this.$refs.list.scrollTop=0))},pointerAdjust(){this.pointer>=this.filteredOptions.length-1&&(this.pointer=this.filteredOptions.length?this.filteredOptions.length-1:0),this.filteredOptions.length>0&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()},pointerSet(t){this.pointer=t,this.pointerDirty=!0}}},Ml={name:"vue-multiselect",mixins:[R6,I6],compatConfig:{MODE:3,ATTR_ENUMERATED_COERCION:!1},props:{name:{type:String,default:""},modelValue:{type:null,default(){return[]}},selectLabel:{type:String,default:"Press enter to select"},selectGroupLabel:{type:String,default:"Press enter to select group"},selectedLabel:{type:String,default:"Selected"},deselectLabel:{type:String,default:"Press enter to remove"},deselectGroupLabel:{type:String,default:"Press enter to deselect group"},showLabels:{type:Boolean,default:!0},limit:{type:Number,default:99999},maxHeight:{type:Number,default:300},limitText:{type:Function,default:t=>`and ${t} more`},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},openDirection:{type:String,default:""},showNoOptions:{type:Boolean,default:!0},showNoResults:{type:Boolean,default:!0},tabindex:{type:Number,default:0}},computed:{hasOptionGroup(){return this.groupValues&&this.groupLabel&&this.groupSelect},isSingleLabelVisible(){return(this.singleValue||this.singleValue===0)&&(!this.isOpen||!this.searchable)&&!this.visibleValues.length},isPlaceholderVisible(){return!this.internalValue.length&&(!this.searchable||!this.isOpen)},visibleValues(){return this.multiple?this.internalValue.slice(0,this.limit):[]},singleValue(){return this.internalValue[0]},deselectLabelText(){return this.showLabels?this.deselectLabel:""},deselectGroupLabelText(){return this.showLabels?this.deselectGroupLabel:""},selectLabelText(){return this.showLabels?this.selectLabel:""},selectGroupLabelText(){return this.showLabels?this.selectGroupLabel:""},selectedLabelText(){return this.showLabels?this.selectedLabel:""},inputStyle(){return this.searchable||this.multiple&&this.modelValue&&this.modelValue.length?this.isOpen?{width:"100%"}:{width:"0",position:"absolute",padding:"0"}:""},contentStyle(){return this.options.length?{display:"inline-block"}:{display:"block"}},isAbove(){return this.openDirection==="above"||this.openDirection==="top"?!0:this.openDirection==="below"||this.openDirection==="bottom"?!1:this.preferredOpenDirection==="above"},showSearchInput(){return this.searchable&&(this.hasSingleSelectedSlot&&(this.visibleSingleValue||this.visibleSingleValue===0)?this.isOpen:!0)}}};const x6={ref:"tags",class:"multiselect__tags"},C6={class:"multiselect__tags-wrap"},k6={class:"multiselect__spinner"},A6={key:0},P6={class:"multiselect__option"},D6={class:"multiselect__option"},O6=on("No elements found. Consider changing the search query."),M6={class:"multiselect__option"},L6=on("List is empty.");function N6(t,e,n,s,i,r){return C(),De("div",{tabindex:t.searchable?-1:n.tabindex,class:[{"multiselect--active":t.isOpen,"multiselect--disabled":n.disabled,"multiselect--above":r.isAbove,"multiselect--has-options-group":r.hasOptionGroup},"multiselect"],onFocus:e[14]||(e[14]=o=>t.activate()),onBlur:e[15]||(e[15]=o=>t.searchable?!1:t.deactivate()),onKeydown:[e[16]||(e[16]=hs(Ye(o=>t.pointerForward(),["self","prevent"]),["down"])),e[17]||(e[17]=hs(Ye(o=>t.pointerBackward(),["self","prevent"]),["up"]))],onKeypress:e[18]||(e[18]=hs(Ye(o=>t.addPointerElement(o),["stop","self"]),["enter","tab"])),onKeyup:e[19]||(e[19]=hs(o=>t.deactivate(),["esc"])),role:"combobox","aria-owns":"listbox-"+t.id},[Zt(t.$slots,"caret",{toggle:t.toggle},()=>[W("div",{onMousedown:e[1]||(e[1]=Ye(o=>t.toggle(),["prevent","stop"])),class:"multiselect__select"},null,32)]),Zt(t.$slots,"clear",{search:t.search}),W("div",x6,[Zt(t.$slots,"selection",{search:t.search,remove:t.removeElement,values:r.visibleValues,isOpen:t.isOpen},()=>[ie(W("div",C6,[(C(!0),De(me,null,ft(r.visibleValues,(o,a)=>Zt(t.$slots,"tag",{option:o,search:t.search,remove:t.removeElement},()=>[(C(),De("span",{class:"multiselect__tag",key:a},[W("span",{textContent:Se(t.getOptionLabel(o))},null,8,["textContent"]),W("i",{tabindex:"1",onKeypress:hs(Ye(c=>t.removeElement(o),["prevent"]),["enter"]),onMousedown:Ye(c=>t.removeElement(o),["prevent"]),class:"multiselect__tag-icon"},null,40,["onKeypress","onMousedown"])]))])),256))],512),[[So,r.visibleValues.length>0]]),t.internalValue&&t.internalValue.length>n.limit?Zt(t.$slots,"limit",{key:0},()=>[W("strong",{class:"multiselect__strong",textContent:Se(n.limitText(t.internalValue.length-n.limit))},null,8,["textContent"])]):be("v-if",!0)]),W(hh,{name:"multiselect__loading"},{default:jr(()=>[Zt(t.$slots,"loading",{},()=>[ie(W("div",k6,null,512),[[So,n.loading]])])]),_:3}),t.searchable?(C(),De("input",{key:0,ref:"search",name:n.name,id:t.id,type:"text",autocomplete:"off",spellcheck:!1,placeholder:t.placeholder,style:r.inputStyle,value:t.search,disabled:n.disabled,tabindex:n.tabindex,onInput:e[2]||(e[2]=o=>t.updateSearch(o.target.value)),onFocus:e[3]||(e[3]=Ye(o=>t.activate(),["prevent"])),onBlur:e[4]||(e[4]=Ye(o=>t.deactivate(),["prevent"])),onKeyup:e[5]||(e[5]=hs(o=>t.deactivate(),["esc"])),onKeydown:[e[6]||(e[6]=hs(Ye(o=>t.pointerForward(),["prevent"]),["down"])),e[7]||(e[7]=hs(Ye(o=>t.pointerBackward(),["prevent"]),["up"])),e[9]||(e[9]=hs(Ye(o=>t.removeLastElement(),["stop"]),["delete"]))],onKeypress:e[8]||(e[8]=hs(Ye(o=>t.addPointerElement(o),["prevent","stop","self"]),["enter"])),class:"multiselect__input","aria-controls":"listbox-"+t.id},null,44,["name","id","placeholder","value","disabled","tabindex","aria-controls"])):be("v-if",!0),r.isSingleLabelVisible?(C(),De("span",{key:1,class:"multiselect__single",onMousedown:e[10]||(e[10]=Ye((...o)=>t.toggle&&t.toggle(...o),["prevent"]))},[Zt(t.$slots,"singleLabel",{option:r.singleValue},()=>[on(Se(t.currentOptionLabel),1)])],32)):be("v-if",!0),r.isPlaceholderVisible?(C(),De("span",{key:2,class:"multiselect__placeholder",onMousedown:e[11]||(e[11]=Ye((...o)=>t.toggle&&t.toggle(...o),["prevent"]))},[Zt(t.$slots,"placeholder",{},()=>[on(Se(t.placeholder),1)])],32)):be("v-if",!0)],512),W(hh,{name:"multiselect"},{default:jr(()=>[ie(W("div",{class:"multiselect__content-wrapper",onFocus:e[12]||(e[12]=(...o)=>t.activate&&t.activate(...o)),tabindex:"-1",onMousedown:e[13]||(e[13]=Ye(()=>{},["prevent"])),style:{maxHeight:t.optimizedHeight+"px"},ref:"list"},[W("ul",{class:"multiselect__content",style:r.contentStyle,role:"listbox",id:"listbox-"+t.id},[Zt(t.$slots,"beforeList"),t.multiple&&t.max===t.internalValue.length?(C(),De("li",A6,[W("span",P6,[Zt(t.$slots,"maxElements",{},()=>[on("Maximum of "+Se(t.max)+" options selected. First remove a selected option to select another.",1)])])])):be("v-if",!0),!t.max||t.internalValue.length<t.max?(C(!0),De(me,{key:1},ft(t.filteredOptions,(o,a)=>(C(),De("li",{class:"multiselect__element",key:a,id:t.id+"-"+a,role:o&&(o.$isLabel||o.$isDisabled)?null:"option"},[o&&(o.$isLabel||o.$isDisabled)?be("v-if",!0):(C(),De("span",{key:0,class:[t.optionHighlight(a,o),"multiselect__option"],onClick:Ye(c=>t.select(o),["stop"]),onMouseenter:Ye(c=>t.pointerSet(a),["self"]),"data-select":o&&o.isTag?t.tagPlaceholder:r.selectLabelText,"data-selected":r.selectedLabelText,"data-deselect":r.deselectLabelText},[Zt(t.$slots,"option",{option:o,search:t.search,index:a},()=>[W("span",null,Se(t.getOptionLabel(o)),1)])],42,["onClick","onMouseenter","data-select","data-selected","data-deselect"])),o&&(o.$isLabel||o.$isDisabled)?(C(),De("span",{key:1,"data-select":t.groupSelect&&r.selectGroupLabelText,"data-deselect":t.groupSelect&&r.deselectGroupLabelText,class:[t.groupHighlight(a,o),"multiselect__option"],onMouseenter:Ye(c=>t.groupSelect&&t.pointerSet(a),["self"]),onMousedown:Ye(c=>t.selectGroup(o),["prevent"])},[Zt(t.$slots,"option",{option:o,search:t.search,index:a},()=>[W("span",null,Se(t.getOptionLabel(o)),1)])],42,["data-select","data-deselect","onMouseenter","onMousedown"])):be("v-if",!0)],8,["id","role"]))),128)):be("v-if",!0),ie(W("li",null,[W("span",D6,[Zt(t.$slots,"noResult",{search:t.search},()=>[O6])])],512),[[So,n.showNoResults&&t.filteredOptions.length===0&&t.search&&!n.loading]]),ie(W("li",null,[W("span",M6,[Zt(t.$slots,"noOptions",{},()=>[L6])])],512),[[So,n.showNoOptions&&(t.options.length===0||r.hasOptionGroup===!0&&t.filteredOptions.length===0)&&!t.search&&!n.loading]]),Zt(t.$slots,"afterList")],12,["id"])],36),[[So,t.isOpen]])]),_:3})],42,["tabindex","aria-owns"])}Ml.render=N6;const V6={components:{Multiselect:Ml},name:"InputLeftover",setup(){return{toast:fo()}},data(){return{options:[],value:null,dietaryRestrictions:"",ingredients:[{name:"",quantity:""},{name:"",quantity:""}]}},async mounted(){this.options=await cf()},methods:{addIngredient(){this.ingredients.push({name:"",quantity:""})},validateIngredients(){return this.ingredients.every(t=>t.name.trim()&&t.quantity.trim())},removeIngredient(t){this.ingredients.splice(t,1)},generateRecipe(){console.log("Generating recipe..."),console.log(this.value),this.validateIngredients()===!1?this.triggerToast():this.$emit("generate-recipe",{categories:this.value,dietaryRestrictions:this.dietaryRestrictions,ingredients:this.ingredients})},triggerToast(){this.toast.error("Please fill in all leftover names and quantities.",{timeout:2e3,position:"top-center",hideProgressBar:!0})}}},J_=t=>(Lt("data-v-b1931c74"),t=t(),Nt(),t),F6={class:"grid-container"},B6={class:"column"},U6=J_(()=>p("label",null,"Preferred Cuisines",-1)),$6={class:"dropdown-container"},H6=J_(()=>p("label",null,"Dietary Restrictions",-1)),z6={class:"column"},j6={class:"ingredient-container"},W6={class:"one-ingredient-container"},q6=["onUpdate:modelValue"],G6=J_(()=>p("label",null,"Quantity",-1)),K6=["onUpdate:modelValue"],Y6=["onClick"],Q6={class:"button-container"},X6={class:"button-container"};function J6(t,e,n,s,i,r){const o=te("multiselect");return C(),O(me,null,[p("div",F6,[p("div",B6,[U6,p("div",$6,[W(o,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=a=>i.value=a),options:i.options,multiple:!0,"close-on-select":!1,max:3},null,8,["modelValue","options"])]),H6,ie(p("textarea",{"onUpdate:modelValue":e[1]||(e[1]=a=>i.dietaryRestrictions=a),type:"text",placeholder:"e.g. dairy, nuts",rows:"5"},null,512),[[ve,i.dietaryRestrictions]])]),p("div",z6,[(C(!0),O(me,null,ft(i.ingredients,(a,c)=>(C(),O("div",j6,[p("div",W6,[p("label",null,"Name of leftover #"+Se(c+1),1),ie(p("input",{"onUpdate:modelValue":l=>i.ingredients[c].name=l,type:"text",placeholder:"e.g. Chicken",required:""},null,8,q6),[[ve,i.ingredients[c].name]])]),p("div",null,[G6,ie(p("input",{"onUpdate:modelValue":l=>i.ingredients[c].quantity=l,type:"text",placeholder:"e.g. 100g",required:""},null,8,K6),[[ve,i.ingredients[c].quantity]])]),p("button",{type:"button",class:"remove-button",onClick:l=>r.removeIngredient(c)}," x ",8,Y6)]))),256)),p("div",Q6,[p("button",{type:"submit",class:"add-button",onClick:e[2]||(e[2]=(...a)=>r.addIngredient&&r.addIngredient(...a))},"+ ADD MORE")])])]),p("div",X6,[p("button",{type:"submit",class:"generate-button",onClick:e[3]||(e[3]=(...a)=>r.generateRecipe&&r.generateRecipe(...a))}," Generate Recipe ")])],64)}const Z6=Ve(V6,[["render",J6],["__scopeId","data-v-b1931c74"]]),e3="modulepreload",t3=function(t){return"/"+t},j0={},n3=function(e,n,s){let i=Promise.resolve();if(n&&n.length>0){const r=document.getElementsByTagName("link");i=Promise.all(n.map(o=>{if(o=t3(o),o in j0)return;j0[o]=!0;const a=o.endsWith(".css"),c=a?'[rel="stylesheet"]':"";if(!!s)for(let h=r.length-1;h>=0;h--){const d=r[h];if(d.href===o&&(!a||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${c}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":e3,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((h,d)=>{u.addEventListener("load",h),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${o}`)))})}))}return i.then(()=>e()).catch(r=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r})},s3={data(){return{defaultProfileUrl:null}},props:{path:String,ifCard:Boolean},async created(){try{this.defaultProfileUrl=(await n3(()=>import("./profile-CucqEQJk.js"),__vite__mapDeps([]))).default}catch(t){console.error("Error loading default profile picture:",t)}},computed:{renderedUrl(){return console.log(this.path),this.path&&this.path.trim()!==""?this.path:this.defaultProfileUrl}}},i3=["src"],r3=["src"];function o3(t,e,n,s,i,r){return n.ifCard?(C(),O("img",{key:0,class:"topBar",src:r.renderedUrl,alt:""},null,8,i3)):(C(),O("img",{key:1,class:"",src:r.renderedUrl,alt:""},null,8,r3))}const mx=Ve(s3,[["render",o3],["__scopeId","data-v-5bebf0c6"]]),a3={props:{whichPage:{type:String,required:!0}},components:{ProfileImage:mx},data(){return{userData:{},showNavbar:!0,lastScrollPosition:0}},mounted(){let t=localStorage.getItem("userData");console.log(t),t&&t!==""&&t!=="undefined"?this.userData=JSON.parse(t):this.fetchUserData(),window.addEventListener("scroll",this.handleScroll)},beforeDestroy(){window.removeEventListener("scroll",this.handleScroll)},methods:{goToCommunityPage(){console.log("test"),this.$router.push("/community-page")},goToRecipeGenerator(){this.$router.push("/recipe-generator")},goToProfile(){this.$router.push("/profile")},logout(){T2(Re).then(()=>{localStorage.clear(),this.$router.push("/")}).catch(t=>{console.error("Logout Error:",t)})},async fetchUserData(){if(Re.currentUser){const t=await Dt(Ie(Ae,"users",Re.currentUser.uid));this.userData=t.data(),localStorage.setItem("userData",JSON.stringify(this.userData))}},handleScroll(){const t=window.scrollY||document.documentElement.scrollTop;t<0||Math.abs(t-this.lastScrollPosition)<20||(this.showNavbar=t<this.lastScrollPosition,this.lastScrollPosition=t)}}},c3=p("img",{src:kl,alt:"PantryPal Logo",class:"logo"},null,-1),l3=[c3],u3={key:0,class:"secondContainer"},h3=p("p",{class:"button-text-selected"},"My Feed",-1),d3=[h3],f3=p("p",{class:"button-text"},"Smart Leftovers",-1),p3=[f3],g3={key:1,class:"secondContainer"},m3=p("p",{class:"button-text"},"My Feed",-1),_3=[m3],y3=p("p",{class:"button-text-selected"},"Smart Leftovers",-1),b3=[y3],v3={key:2,class:"secondContainer"},w3=p("p",{class:"button-text"},"My Feed",-1),E3=[w3],T3=p("p",{class:"button-text"},"Smart Leftovers",-1),S3=[T3],R3={class:"thirdContainer"},I3=p("p",{class:"logOutButton-text"},"Log Out",-1),x3=[I3],C3=p("hr",null,null,-1);function k3(t,e,n,s,i,r){const o=te("ProfileImage");return C(),O("div",{class:Tt(["topBar",{"topBar--hidden":!i.showNavbar}])},[p("button",{class:"firstContainer",onClick:e[0]||(e[0]=a=>r.goToCommunityPage())},l3),n.whichPage==="feed"?(C(),O("div",u3,[p("button",{class:"custom-button",onClick:e[1]||(e[1]=a=>r.goToCommunityPage())},d3),p("button",{class:"custom-button",onClick:e[2]||(e[2]=a=>r.goToRecipeGenerator())},p3)])):n.whichPage==="generator"?(C(),O("div",g3,[p("button",{class:"custom-button",onClick:e[3]||(e[3]=a=>r.goToCommunityPage())},_3),p("button",{class:"custom-button",onClick:e[4]||(e[4]=a=>r.goToRecipeGenerator())},b3)])):(C(),O("div",v3,[p("button",{class:"custom-button",onClick:e[5]||(e[5]=a=>r.goToCommunityPage())},E3),p("button",{class:"custom-button",onClick:e[6]||(e[6]=a=>r.goToRecipeGenerator())},S3)])),p("div",R3,[p("button",{class:"logOutButton",onClick:e[7]||(e[7]=(...a)=>r.logout&&r.logout(...a))},x3),p("button",{type:"button",class:"profileButton",onClick:e[9]||(e[9]=a=>r.goToProfile())},[W(o,{path:t.profilePicUrl||i.userData.profile_img_url,ifCard:!1,alt:"profile pic",class:"profile",onClick:e[8]||(e[8]=a=>r.goToProfile())},null,8,["path"])])]),C3],2)}const ya=Ve(a3,[["render",k3]]),A3="/assets/recipe-generator-map-Bwcu6ihu.png",P3={name:"Recipe Generator Sidebar",props:{selected:String}},Ll=t=>(Lt("data-v-1e18b1f9"),t=t(),Nt(),t),D3={class:"sidebar"},O3={class:"menu-container"},M3=Ll(()=>p("img",{src:A3,height:"500px"},null,-1)),L3=Ll(()=>p("h3",null,"Input Leftovers",-1)),N3=[L3],V3=Ll(()=>p("h3",null,"Generate Recipe",-1)),F3=[V3],B3=Ll(()=>p("h3",null,"Save Recipe",-1)),U3=[B3],$3=Ll(()=>p("div",null,[p("h3",null,"And Start Cooking!")],-1));function H3(t,e,n,s,i,r){return C(),O("aside",D3,[p("div",O3,[M3,p("div",{class:Tt(["header",{selected:n.selected==="input"}])},N3,2),p("div",{class:Tt(["header",{selected:n.selected==="generate"}])},F3,2),p("div",{class:Tt(["header save",{selected:n.selected==="save"}])},U3,2),$3])])}const z3=Ve(P3,[["render",H3],["__scopeId","data-v-1e18b1f9"]]),j3={name:"GenerateErrorModal",props:{isVisible:Boolean},methods:{handleBack(){this.$emit("back")}}},_x=t=>(Lt("data-v-de519fd0"),t=t(),Nt(),t),W3={key:0,class:"modal-overlay"},q3={class:"modal"},G3=_x(()=>p("h2",null,"Error",-1)),K3=_x(()=>p("p",null,"An error occurred while generating the recipe due to inappropriate ingredients. Please try again with edible leftovers.",-1)),Y3={class:"buttons"};function Q3(t,e,n,s,i,r){return n.isVisible?(C(),O("div",W3,[p("div",q3,[G3,K3,p("div",Y3,[p("button",{type:"button",onClick:e[0]||(e[0]=(...o)=>r.handleBack&&r.handleBack(...o))},"Go Back")])])])):be("",!0)}const X3=Ve(j3,[["render",Q3],["__scopeId","data-v-de519fd0"]]),J3="/assets/loading-BZDBN9Kl.gif",Z3={name:"Generator Loading",components:{GenerateErrorModal:X3},data(){return{showErrorModal:!1}},props:{ingredients:Array,categories:Array,dietaryRestrictions:String,prev_recipe_name:{type:String,default:()=>null}},async mounted(){console.log("mounted.."),await this.fetchRecipe()},methods:{fetchRecipe(){const t={ingredients:this.ingredients,categories:this.categories,dietaryRestrictions:this.dietaryRestrictions};this.previousRecipe!==null?(t.prev_recipe_name=this.prev_recipe_name,t.first=!1):t.first=!0,Ct.post("https://us-central1-pantrypal-e1225.cloudfunctions.net/api/initial-recipe",t).then(e=>{e.status===400?this.showErrorModal=!0:this.$emit("recipeGenerated",{generatedRecipe:e.data.content})}).catch(e=>{this.showErrorModal=!0,console.error("Error fetching recipe:",e),console.log(this.showErrorModal+"hi")})},handleModalClose(){this.showErrorModal=!1,this.$emit("back")}}},Z_=t=>(Lt("data-v-31ce497b"),t=t(),Nt(),t),e9={class:"generate-container"},t9=Z_(()=>p("h1",null,"We are cooking up your recipe!",-1)),n9=Z_(()=>p("h1",null,"Give us a few seconds...",-1)),s9={class:"ingredient-container"},i9=Z_(()=>p("img",{src:J3,height:"40px"},null,-1));function r9(t,e,n,s,i,r){const o=te("GenerateErrorModal");return C(),O("div",e9,[W(o,{isVisible:i.showErrorModal,"onUpdate:isVisible":e[0]||(e[0]=a=>i.showErrorModal=a),onBack:r.handleModalClose},null,8,["isVisible","onBack"]),t9,n9,(C(!0),O(me,null,ft(n.ingredients,(a,c)=>(C(),O("div",null,[p("div",s9,[p("span",null,Se(n.ingredients[c].name),1),p("span",null,Se(n.ingredients[c].quantity),1)])]))),256)),i9])}const o9=Ve(Z3,[["render",r9],["__scopeId","data-v-31ce497b"]]),a9={data(){return{url:"https://via.placeholder.com/140x100"}},props:{path:String,ifCard:Boolean},created(){this.url=this.path}},c9=["src"],l9=["src"];function u9(t,e,n,s,i,r){return n.ifCard?(C(),O("img",{key:0,class:"card",src:i.url,alt:""},null,8,c9)):(C(),O("img",{key:1,class:"window",src:i.url,alt:""},null,8,l9))}const Nl=Ve(a9,[["render",u9],["__scopeId","data-v-5ff3ff91"]]),h9={props:{recipe:{type:Object,required:!0}},data(){return{recipeIsLiked:!1}},async created(){if(Re.currentUser){const e=(await Dt(Ie(Ae,"users",Re.currentUser.uid))).data();this.recipeIsLiked=e.liked_recipes.includes(this.recipe.recipe_id)}},methods:{async toggleLikeRecipe(){if(!Re.currentUser){this.$router.push("/login");return}Re.currentUser;const t=Ie(Ae,"all_recipes",this.recipe.recipe_id);try{if(this.$emit("updateLiked"),this.recipeIsLiked){this.recipe.like_count--,await Pr(t,{...this.recipe,like_count:this.recipe.like_count});const e=Ie(Ae,"users",Re.currentUser.uid),s=(await Dt(Ie(Ae,"users",Re.currentUser.uid))).data();await Pr(e,{...s,liked_recipes:s.liked_recipes.filter(i=>i!==this.recipe.recipe_id)})}else{this.recipe.like_count++,await Pr(t,{...this.recipe,like_count:this.recipe.like_count});const e=Ie(Ae,"users",Re.currentUser.uid),s=(await Dt(Ie(Ae,"users",Re.currentUser.uid))).data();await Pr(e,{...s,liked_recipes:[...s.liked_recipes,this.recipe.recipe_id]})}this.recipeIsLiked=!this.recipeIsLiked}catch(e){console.error("Error toggling recipe like:",e)}}}},d9={class:"like"};function f9(t,e,n,s,i,r){return C(),O("div",d9,[p("button",{class:"like-button",onClick:e[0]||(e[0]=Ye((...o)=>r.toggleLikeRecipe&&r.toggleLikeRecipe(...o),["stop"]))},[p("i",{class:Tt(["fa",["fa-thumbs-up",{liked:!i.recipeIsLiked}]]),"aria-hidden":"true"},null,2)]),p("span",null,Se(n.recipe.like_count),1)])}const yx=Ve(h9,[["render",f9],["__scopeId","data-v-f1849cd3"]]),p9={props:{onConfirm:{type:Function,required:!0},onCancel:{type:Function,required:!0}}},g9={class:"confirm-toast"},m9=p("p",null,"Are you sure you want to delete this recipe?",-1),_9={class:"button-container"};function y9(t,e,n,s,i,r){return C(),O("div",g9,[m9,p("div",_9,[p("button",{class:"cancel-delete-button",onClick:e[0]||(e[0]=(...o)=>n.onCancel&&n.onCancel(...o))},"Cancel"),p("button",{class:"confirm-delete-button",onClick:e[1]||(e[1]=(...o)=>n.onConfirm&&n.onConfirm(...o))},"Delete")])])}const b9=Ve(p9,[["render",y9]]),bx="/assets/warning-icon-BnsmZdPz.png",v9={components:{RecipeImage:Nl,LikeButton:yx},data(){return{username:"",cookingTimeInHrAndMin:"",user:Re.currentUser}},props:{selectedRecipe:{type:Object,required:!0},selectedIngredients:{type:Array,required:!0},likeExists:{type:Boolean},disabled:{type:Boolean}},setup(){return{toast:fo({position:"top-center",timeout:!1,hideProgressBar:!0,closeButton:!1})}},mounted(){this.fetchRecipeUsernameAndCookingTime()},methods:{async fetchRecipeUsernameAndCookingTime(){const t=nI(Ps(Ae,"users"),sI("user_id","==",this.selectedRecipe.user_id)),e=await Br(t);if(!e.empty){const n=e.docs[0].data();this.username=n.username}this.calculateCookingTime()},calculateCookingTime(){const t=this.selectedRecipe.cook_time,e=Math.floor(t/60),n=t%60;let s="";e>0&&(s+=`${e}h`),n>0&&(s+=`${n}mins`),this.cookingTimeInHrAndMin=s||"0mins"},togglePublishToCommunity(){this.$emit("togglePublishToCommunity",this.selectedRecipe.community)},edit(){this.$router.push({name:"RecipeEdit",params:{id:this.selectedRecipe.recipe_id}})},confirmDelete(){this.toast.warning({component:b9,props:{onConfirm:()=>this.deleteRecipe(),onCancel:()=>this.toast.clear()},position:"top-center",timeout:!1,hideProgressBar:!0,closeButton:!1})},async deleteRecipe(){try{const t=Ie(Ae,"all_recipes",this.selectedRecipe.recipe_id);await FB(t),(await Br(Ps(Ae,"categories"))).forEach(i=>{const r=i.data();this.selectedRecipe.categories.includes(r.category_name)&&Sn(i.ref,{recipes:Hu(this.selectedRecipe.recipe_id)})});const n=Ie(Ae,"users",this.selectedRecipe.user_id);await Sn(n,{my_cookbook:Hu(this.selectedRecipe.recipe_id)}),(await Br(Ps(Ae,"users"))).forEach(i=>{i.data().liked_recipes.includes(this.selectedRecipe.recipe_id)&&Sn(i.ref,{liked_recipes:Hu(this.selectedRecipe.recipe_id)})}),this.toast.success("Recipe deleted successfully!",{timeout:2e3,position:"top-center",hideProgressBar:!0}),this.$router.push("/community-page")}catch(t){this.toast.error("Failed to delete recipe: "+t.message,{position:"top-center",hideProgressBar:!0})}},goBack(){this.$router.push("/community-page")}}},Wn=t=>(Lt("data-v-3bab28a2"),t=t(),Nt(),t),w9=Wn(()=>p("i",{class:"fas fa-arrow-left"},null,-1)),E9={class:"horizontalRow"},T9={class:"first"},S9={key:0,class:"switch-container"},R9={class:"switch"},I9=["disabled"],x9=Wn(()=>p("span",{class:"slider"},null,-1)),C9=Wn(()=>p("label",{for:"publishToCommunity"},"Publish to Community",-1)),k9={class:"second"},A9={class:"title-row"},P9={key:0,class:"warning"},D9=Wn(()=>p("img",{clas:"warning-logo",src:bx,height:"16px"},null,-1)),O9=Wn(()=>p("span",null,"This recipe is AI-generated and PantryPal has not verified it for accuracy and safety.",-1)),M9=[D9,O9],L9={key:1,class:"warning"},N9=Wn(()=>p("img",{clas:"warning-logo",src:bx,height:"16px"},null,-1)),V9=Wn(()=>p("span",null,"This recipe has been edited since its previous revision.",-1)),F9=[N9,V9],B9={key:0},U9={key:1},$9=Wn(()=>p("b",null,"SERVING SIZE:",-1)),H9=Wn(()=>p("b",null,"COOK TIME:",-1)),z9={class:"allergens-container"},j9=Wn(()=>p("p",null,[p("b",null,"CONTAINS:")],-1)),W9={key:0},q9={class:"horizontalRow"},G9={class:"first"},K9={class:"recipe-section"},Y9=Wn(()=>p("h3",null,"Ingredients:",-1)),Q9={class:"checkbox-list"},X9=["id","onUpdate:modelValue"],J9=["for"],Z9={class:"second"},eH={class:"recipe-section"},tH=Wn(()=>p("h3",null,"Directions:",-1)),nH={key:0,class:"button-container"};function sH(t,e,n,s,i,r){const o=te("RecipeImage"),a=te("LikeButton");return C(),O(me,null,[p("button",{class:"back-button",onClick:e[0]||(e[0]=(...c)=>r.goBack&&r.goBack(...c))},[w9,on(" Back ")]),p("div",E9,[p("div",T9,[W(o,{path:n.selectedRecipe.recipe_img_url,ifCard:!1},null,8,["path"]),n.likeExists?be("",!0):(C(),O("div",S9,[p("label",R9,[ie(p("input",{type:"checkbox",id:"publishToCommunity","onUpdate:modelValue":e[1]||(e[1]=c=>n.selectedRecipe.community=c),onChange:e[2]||(e[2]=(...c)=>r.togglePublishToCommunity&&r.togglePublishToCommunity(...c)),disabled:n.disabled},null,40,I9),[[Rc,n.selectedRecipe.community]]),x9]),C9]))]),p("div",k9,[p("div",A9,[p("h1",null,Se(n.selectedRecipe.recipe_name),1),n.likeExists?(C(),De(a,{key:0,recipe:n.selectedRecipe},null,8,["recipe"])):be("",!0)]),n.selectedRecipe.AIgenerated?(C(),O("div",P9,M9)):be("",!0),n.selectedRecipe.editted?(C(),O("div",L9,F9)):be("",!0),p("p",null,[n.likeExists?(C(),O("i",B9," By @"+Se(i.username)+", "+Se(new Date(n.selectedRecipe.created_date.seconds*1e3).toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"numeric"})),1)):(C(),O("i",U9," By @"+Se(i.username)+", "+Se(new Date(n.selectedRecipe.created_date).toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"numeric"})),1))]),p("p",null,Se(n.selectedRecipe.description),1),p("p",null,[$9,on(" "+Se(n.selectedRecipe.serving_size)+" | ",1),H9,on(" "+Se(i.cookingTimeInHrAndMin),1)]),p("span",z9,[j9,(C(!0),O(me,null,ft(n.selectedRecipe.allergens,(c,l)=>(C(),O(me,{key:l},[p("span",null,Se(c),1),l<n.selectedRecipe.allergens.length-1?(C(),O("p",W9,",")):be("",!0)],64))),128))]),(C(!0),O(me,null,ft(n.selectedRecipe.categories,(c,l)=>(C(),O("span",{key:l,class:"category-bubble"},Se(c),1))),128))])]),p("div",q9,[p("div",G9,[p("div",K9,[Y9,p("ul",Q9,[(C(!0),O(me,null,ft(n.selectedRecipe.ingredients,(c,l)=>(C(),O("li",{key:l},[n.likeExists?be("",!0):ie((C(),O("input",{key:0,type:"checkbox",id:"ingredient"+l,"onUpdate:modelValue":u=>n.selectedIngredients[l]=u},null,8,X9)),[[Rc,n.selectedIngredients[l]]]),p("label",{for:"ingredient"+l},Se(c),9,J9)]))),128))])])]),p("div",Z9,[p("div",eH,[tH,p("ol",null,[(C(!0),O(me,null,ft(n.selectedRecipe.directions,(c,l)=>(C(),O("li",{key:l},Se(l+1)+". "+Se(c),1))),128))])]),i.user&&i.user.uid===n.selectedRecipe.user_id&&n.likeExists?(C(),O("div",nH,[p("button",{class:"edit-recipe-button",onClick:e[3]||(e[3]=(...c)=>r.edit&&r.edit(...c))},"Edit Recipe"),p("button",{class:"delete-recipe-button",onClick:e[4]||(e[4]=(...c)=>r.confirmDelete&&r.confirmDelete(...c))}," Delete Recipe ")])):be("",!0)])])],64)}const vx=Ve(v9,[["render",sH],["__scopeId","data-v-3bab28a2"]]),iH={name:"SaveRecipeButton",props:{disabled:Boolean},methods:{submitRecipe(){this.$emit("save-recipe")}}},rH=["disabled"];function oH(t,e,n,s,i,r){return C(),O("button",{class:"save-recipe-button",onClick:e[0]||(e[0]=(...o)=>r.submitRecipe&&r.submitRecipe(...o)),disabled:n.disabled}," Save Recipe ",8,rH)}const mf=Ve(iH,[["render",oH],["__scopeId","data-v-ee7f9c86"]]);let lu;const aH=new Uint8Array(16);function cH(){if(!lu&&(lu=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!lu))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return lu(aH)}const Wt=[];for(let t=0;t<256;++t)Wt.push((t+256).toString(16).slice(1));function lH(t,e=0){return Wt[t[e+0]]+Wt[t[e+1]]+Wt[t[e+2]]+Wt[t[e+3]]+"-"+Wt[t[e+4]]+Wt[t[e+5]]+"-"+Wt[t[e+6]]+Wt[t[e+7]]+"-"+Wt[t[e+8]]+Wt[t[e+9]]+"-"+Wt[t[e+10]]+Wt[t[e+11]]+Wt[t[e+12]]+Wt[t[e+13]]+Wt[t[e+14]]+Wt[t[e+15]]}const uH=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),W0={randomUUID:uH};function wx(t,e,n){if(W0.randomUUID&&!e&&!t)return W0.randomUUID();t=t||{};const s=t.random||(t.rng||cH)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=s[i];return e}return lH(s)}const pp=ia(tr),hH={name:"Recipe Generator",components:{ChefBot:m6,CircleButton:Ol,InputLeftover:Z6,TopBar:ya,RecipeGeneratorSidebar:z3,GenerateLoading:o9,RecipeDetails:vx,SaveRecipeButton:mf},setup(){return{toast:fo()}},data(){return{showChefBot:!1,selected:"input",categories:null,dietaryRestrictions:"",ingredients:[],recipe:{},selectedIngredients:[],prev_recipe_name:null,disabled:!1}},methods:{toggleChefBot(){this.showChefBot=!this.showChefBot},regenerateRecipe(){this.disabled=!1,this.selected="generate"},handleBack(){this.selected="input"},generateRecipe(t){this.categories=t.categories,this.dietaryRestrictions=t.dietaryRestrictions,this.ingredients=t.ingredients,this.selected="generate",console.log(this.categories),console.log(this.dietaryRestrictions)},recipeGenerated(t){console.log("recipegenerated :)"),console.log(t.generatedRecipe);try{this.recipe=t.generatedRecipe;const e=Re.currentUser;let n=e?e.uid:"chefbot";this.recipe.user_id=n,this.recipe.created_date=new Date,this.prev_recipe_name=this.recipe.recipe_name,this.recipe.community=!1,this.recipe.AIgenerated=!0,this.selectedIngredients=this.recipe.ingredients.map(()=>!1);let s=[];this.recipe.ingredients.forEach((i,r)=>{for(let o=0;o<this.ingredients.length;o++){const a=this.ingredients[o].name;if(i.toLowerCase().includes(a.toLowerCase())){this.selectedIngredients[r]=!0,s.push(a.toLowerCase());break}}}),this.recipe.leftovers=s,console.log(this.recipe.leftovers),this.selected="save",console.log(this.recipe),console.log(typeof this.recipe)}catch(e){console.error("Error parsing JSON:",e)}},async submitRecipe(){this.disabled=!0;const t=wx().toString();this.recipe.like_count=0,this.recipe.recipe_id=t,console.log(this.recipe);try{const e=await this.saveDalleImageToFirebase(this.recipe.recipe_img_url,this.recipe.recipe_id);this.recipe.recipe_img_url=e}catch{console.error("Error converting Dall-e")}try{const e=await Pr(Ie(pp,"all_recipes",t),this.recipe);await Sn(Ie(pp,"users",this.recipe.user_id),{my_cookbook:zc(this.recipe.recipe_id)}),this.recipe.categories&&this.recipe.categories.forEach(n=>Sn(Ie(pp,"categories",n),{recipes:zc(this.recipe.recipe_id)})),this.triggerToast()}catch(e){console.error("Error adding document:",e)}},async saveDalleImageToFirebase(t,e){try{const n=await this.fetchImageAsBlob(t),s=await this.uploadImageToFirebase(n,e);return console.log("Image uploaded to Firebase:",s),s}catch(n){throw console.error("Error saving Dalle image to Firebase:",n),n}},async fetchImageAsBlob(t){const e=await fetch(`https://us-central1-pantrypal-e1225.cloudfunctions.net/api/fetch-image?url=${encodeURIComponent(t)}`);if(!e.ok)throw new Error(`Network response was not ok for URL: ${t}`);return await e.blob()},async uploadImageToFirebase(t,e){return new Promise((n,s)=>{const i=of(af,`recipeImg/${e}`),r=sf(i,t);r.on("state_changed",o=>{const a=o.bytesTransferred/o.totalBytes*100;console.log("Upload is "+a+"% done")},o=>{console.error("Upload failed",o),s(o)},()=>{rf(r.snapshot.ref).then(o=>{console.log("File available at",o),n(o)}).catch(o=>{console.error("Failed to get download URL",o),s(o)})})})},triggerToast(){this.toast.success("Recipe saved successfully!",{position:"top-center",timeout:2e3,closeOnClick:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0})},togglePublishToCommunity(t){this.recipe.community=t}}},dH={class:"recipeGenerator"},fH={class:"content-container"},pH={class:"view-container"},gH={key:2,class:"recipe-details-container"},mH={class:"button-container"};function _H(t,e,n,s,i,r){const o=te("TopBar"),a=te("RecipeGeneratorSidebar"),c=te("InputLeftover"),l=te("GenerateLoading"),u=te("RecipeDetails"),h=te("CircleButton"),d=te("ChefBot"),f=te("SaveRecipeButton");return C(),O("div",dH,[W(o,{whichPage:"generator"}),p("div",fH,[W(a,{selected:i.selected},null,8,["selected"]),p("div",pH,[i.selected==="input"?(C(),De(c,{key:0,onGenerateRecipe:r.generateRecipe},null,8,["onGenerateRecipe"])):be("",!0),i.selected==="generate"?(C(),De(l,{key:1,ingredients:i.ingredients,categories:i.categories,dietaryRestrictions:i.dietaryRestrictions,prev_recipe_name:i.prev_recipe_name,onRecipeGenerated:r.recipeGenerated,onBack:r.handleBack},null,8,["ingredients","categories","dietaryRestrictions","prev_recipe_name","onRecipeGenerated","onBack"])):be("",!0),i.selected==="save"?(C(),O("div",gH,[W(u,{selectedRecipe:i.recipe,selectedIngredients:i.selectedIngredients,likeExists:!1,disabled:i.disabled},null,8,["selectedRecipe","selectedIngredients","disabled"]),W(h,{logo:"./chefbot-button.png",onClick:r.toggleChefBot},null,8,["onClick"]),ie((C(),De(d,{key:t.componentKey,selectedRecipe:i.recipe,onClose:e[0]||(e[0]=g=>i.showChefBot=!1),onTogglePublishToCommunity:r.togglePublishToCommunity},null,8,["selectedRecipe","onTogglePublishToCommunity"])),[[So,i.showChefBot]]),p("div",mH,[W(f,{onSaveRecipe:r.submitRecipe,disabled:i.disabled},null,8,["onSaveRecipe","disabled"]),p("button",{onClick:e[1]||(e[1]=(...g)=>r.regenerateRecipe&&r.regenerateRecipe(...g)),class:"reloadButton"},"Regenerate")])])):be("",!0)])])])}const yH=Ve(hH,[["render",_H],["__scopeId","data-v-ee294d0e"]]),bH={components:{RecipeImage:Nl,LikeButton:yx},props:{recipe:{type:Object,required:!0}},data(){return{recipeIsLiked:!1,userName:""}},async created(){if(Re.currentUser){const e=(await Dt(Ie(Ae,"users",Re.currentUser.uid))).data();this.recipeIsLiked=e.liked_recipes.includes(this.recipe.recipe_id);const n=nI(Ps(Ae,"users"),sI("user_id","==",this.recipe.user_id)),s=await Br(n);if(!s.empty){const i=s.docs[0].data();this.userName=i.username}}},methods:{toggleRecipeDetails(){this.$router.push({name:"RecipeDetailsPage",params:{id:this.recipe.recipe_id}})},updateLiked(){this.$emit("updateLiked")}}},vH={class:"recipe-image"},wH={class:"recipe-details"},EH={class:"recipe-name-container"},TH={class:"recipe-name"},SH={class:"info"},RH={class:"bottomRow"},IH={class:"user-id"},xH={class:"like"};function CH(t,e,n,s,i,r){const o=te("RecipeImage"),a=te("LikeButton");return C(),O("div",{class:"recipe-card",onClick:e[0]||(e[0]=(...c)=>r.toggleRecipeDetails&&r.toggleRecipeDetails(...c))},[p("div",vH,[W(o,{path:n.recipe.recipe_img_url,ifCard:!0},null,8,["path"])]),p("div",wH,[p("div",EH,[p("text",TH,Se(n.recipe.recipe_name),1)]),p("div",SH,[(C(!0),O(me,null,ft(n.recipe.categories,(c,l)=>(C(),O("span",{key:l,class:"category-bubble"},Se(c),1))),128))]),p("div",RH,[p("div",IH,[p("p",null,"@"+Se(i.userName),1)]),p("div",xH,[W(a,{recipe:n.recipe,onUpdateLiked:r.updateLiked},null,8,["recipe","onUpdateLiked"])])])])])}const ey=Ve(bH,[["render",CH],["__scopeId","data-v-5567a87f"]]),kH={data(){return{selectedOption:{name:""},showMenu:!1,placeholderText:"Please select an item"}},props:{options:{type:[Array,Object]},selected:{},placeholder:[String],closeOnOutsideClick:{type:[Boolean],default:!0}},mounted(){this.selectedOption=this.selected,this.placeholder&&(this.placeholderText=this.placeholder),this.closeOnOutsideClick&&document.addEventListener("click",this.clickHandler)},beforeDestroy(){document.removeEventListener("click",this.clickHandler)},methods:{updateOption(t){this.selectedOption=t,this.showMenu=!1,this.$emit("updateOption",this.selectedOption)},toggleMenu(){this.showMenu=!this.showMenu},clickHandler(t){const{target:e}=t,{$el:n}=this;n.contains(e)||(this.showMenu=!1)}}},AH={class:"btn-group"},PH=p("span",{class:"caret"},null,-1),DH=p("span",{class:"caret"},null,-1),OH={key:2,class:"dropdown-menu"},MH=["onClick"];function LH(t,e,n,s,i,r){return C(),O("div",AH,[i.selectedOption.name!==void 0?(C(),O("li",{key:0,onClick:e[0]||(e[0]=o=>r.toggleMenu()),class:"dropdown-toggle"},[on(Se(i.selectedOption.name)+" ",1),PH])):be("",!0),i.selectedOption.name===void 0?(C(),O("li",{key:1,onClick:e[1]||(e[1]=o=>r.toggleMenu()),class:"dropdown-toggle dropdown-toggle-placeholder"},[on(Se(i.placeholderText)+" ",1),DH])):be("",!0),i.showMenu?(C(),O("ul",OH,[(C(!0),O(me,null,ft(n.options,(o,a)=>(C(),O("li",{key:a},[p("a",{href:"javascript:void(0)",onClick:c=>r.updateOption(o)},Se(o.name),9,MH)]))),128))])):be("",!0)])}const ty=Ve(kH,[["render",LH]]),NH="/assets/image-upload-bKK7DP3T.png",VH={components:{Multiselect:Ml,SaveRecipeButton:mf},data(){return{recipeData:{imageSrc:null,publish_to_community:!1,recipe_name:"",serving_size:"",description:"",allergen_info:"",allergens:[],cook_time_hours:"",cook_time_minutes:"",categories:[],category:[],ingredients:[""],directions:[{stepNumber:1,text:""}]}}},async created(){this.recipeData.categories=await cf()},methods:{chooseFile(){this.$refs.fileInput.click()},handleImageUpload(t){const e=t.target.files[0];if(e&&(e.type==="image/jpeg"||e.type==="image/png")){const n=new FileReader;n.onload=s=>{this.recipeData.imageSrc=s.target.result},n.readAsDataURL(e)}else alert("Please select a JPG or PNG image file.")},addIngredient(){this.recipeData.ingredients.push("")},removeIngredient(t){this.recipeData.ingredients.splice(t,1)},addDirection(){const t=this.recipeData.directions.length+1;this.recipeData.directions.push({stepNumber:t,text:""})},removeDirection(t){this.recipeData.directions.splice(t,1);for(let e=t;e<this.recipeData.directions.length;e++)this.recipeData.directions[e].stepNumber--},close(){this.$emit("close")},validateForm(){return!this.recipeData.recipe_name||!this.recipeData.description||!this.recipeData.allergen_info||!this.recipeData.imageSrc||!this.recipeData.cook_time_hours||!this.recipeData.cook_time_minutes||!this.recipeData.category.length||!this.recipeData.serving_size||!this.recipeData.ingredients.length||!this.recipeData.directions.length?(alert("Please fill in all fields properly before submitting the recipe."),!1):!0},submitRecipe(){if(!this.validateForm())return;const t=Re.currentUser,e=t?t.uid:"",n={allergens:this.recipeData.allergen_info.split(",").map(r=>r.trim()),categories:this.recipeData.category,community:this.recipeData.publish_to_community,cook_time:parseInt(this.recipeData.cook_time_hours)*60+parseInt(this.recipeData.cook_time_minutes),created_date:new Date,description:this.recipeData.description,directions:this.recipeData.directions.map(r=>r.text),ingredients:this.recipeData.ingredients,like_count:0,recipe_id:"",recipe_img_url:this.recipeData.imageSrc,recipe_name:this.recipeData.recipe_name,serving_size:parseInt(this.recipeData.serving_size),user_id:e},s=ia(tr),i=Ps(s,"all_recipes");BB(i,n).then(r=>{console.log("Document written with ID: ",r.id),Sn(r,{recipe_id:r.id}).then(()=>{console.log("Document updated successfully."),this.$emit("close"),this.$router.push("/community-page")}).catch(o=>{console.error("Error updating document: ",o)})}).catch(r=>{console.error("Error adding document: ",r)})}}},qn=t=>(Lt("data-v-49840b6d"),t=t(),Nt(),t),FH={class:"create-recipe-modal"},BH={class:"recipe-form"},UH={class:"recipe-form-content"},$H={class:"createRecipeRow"},HH={class:"first1"},zH=["src"],jH={class:"switch-container"},WH={class:"switch"},qH=qn(()=>p("span",{class:"slider"},null,-1)),GH=qn(()=>p("label",{for:"publishToCommunity"},"Publish to Community",-1)),KH={class:"first2"},YH=qn(()=>p("label",{for:"recipeName"},"Title:",-1)),QH=qn(()=>p("label",{for:"recipeDescription"},"Description:",-1)),XH=qn(()=>p("label",{for:"allergenInfo"},"Allergen Information:",-1)),JH={class:"additional-info"},ZH={class:"input-group"},ez=qn(()=>p("label",{for:"cookTime"},"Cook Time:",-1)),tz={class:"time-input-group"},nz=qn(()=>p("span",null,"hours",-1)),sz=qn(()=>p("span",null,"mins",-1)),iz={class:"input-group"},rz=qn(()=>p("label",{for:"category"},"Category:",-1)),oz={class:"input-group"},az=qn(()=>p("label",{for:"servingSize"},"Serving Size:",-1)),cz={class:"createRecipeRow"},lz={class:"second1"},uz={class:"recipe-section"},hz=qn(()=>p("label",{for:"ingredients"},"Ingredients:",-1)),dz={class:"ingredients-container"},fz=["onUpdate:modelValue"],pz=["onClick"],gz={class:"button-group"},mz={class:"second2"},_z={class:"recipe-section"},yz=qn(()=>p("label",{for:"directions"},"Directions:",-1)),bz={class:"directions-container"},vz=["for"],wz={class:"direction-input"},Ez=["id","onUpdate:modelValue"],Tz=["onClick"],Sz={class:"button-group"},Rz={class:"button-container"};function Iz(t,e,n,s,i,r){const o=te("multiselect"),a=te("save-recipe-button");return C(),O("div",FH,[p("div",BH,[p("div",UH,[p("div",$H,[p("div",HH,[p("input",{type:"file",id:"recipeImage",ref:"fileInput",style:{display:"none"},onChange:e[0]||(e[0]=(...c)=>r.handleImageUpload&&r.handleImageUpload(...c))},null,544),p("div",{class:"plus-icon-container",onClick:e[1]||(e[1]=(...c)=>r.chooseFile&&r.chooseFile(...c))},[i.recipeData.imageSrc?(C(),O("img",{key:0,src:i.recipeData.imageSrc,class:"uploaded-image",alt:"Uploaded Image"},null,8,zH)):be("",!0),p("img",{class:Tt([{hidden:i.recipeData.imageSrc},"upload-image"]),src:NH,alt:"Upload Image"},null,2)]),p("div",jH,[p("label",WH,[ie(p("input",{type:"checkbox",id:"publishToCommunity","onUpdate:modelValue":e[2]||(e[2]=c=>i.recipeData.publish_to_community=c)},null,512),[[Rc,i.recipeData.publish_to_community]]),qH]),GH])]),p("div",KH,[YH,ie(p("input",{type:"text",id:"recipeName","onUpdate:modelValue":e[3]||(e[3]=c=>i.recipeData.recipe_name=c)},null,512),[[ve,i.recipeData.recipe_name]]),QH,ie(p("textarea",{id:"recipeDescription","onUpdate:modelValue":e[4]||(e[4]=c=>i.recipeData.description=c)},null,512),[[ve,i.recipeData.description]]),XH,ie(p("textarea",{id:"allergenInfo","onUpdate:modelValue":e[5]||(e[5]=c=>i.recipeData.allergen_info=c)},null,512),[[ve,i.recipeData.allergen_info]]),p("div",JH,[p("div",ZH,[ez,p("div",tz,[ie(p("input",{type:"number",id:"cookTimeHours","onUpdate:modelValue":e[6]||(e[6]=c=>i.recipeData.cook_time_hours=c),min:"0"},null,512),[[ve,i.recipeData.cook_time_hours]]),nz,ie(p("input",{type:"number",id:"cookTimeMins","onUpdate:modelValue":e[7]||(e[7]=c=>i.recipeData.cook_time_minutes=c),min:"0"},null,512),[[ve,i.recipeData.cook_time_minutes]]),sz])]),p("div",iz,[rz,W(o,{modelValue:i.recipeData.category,"onUpdate:modelValue":e[8]||(e[8]=c=>i.recipeData.category=c),options:i.recipeData.categories,multiple:!0,"close-on-select":!1},null,8,["modelValue","options"])]),p("div",oz,[az,ie(p("input",{type:"number",id:"servingSize","onUpdate:modelValue":e[9]||(e[9]=c=>i.recipeData.serving_size=c),min:"0"},null,512),[[ve,i.recipeData.serving_size]])])])])]),p("div",cz,[p("div",lz,[p("div",uz,[hz,p("div",dz,[(C(!0),O(me,null,ft(i.recipeData.ingredients,(c,l)=>(C(),O("div",{key:l,class:"ingredient-input"},[ie(p("input",{type:"text","onUpdate:modelValue":u=>i.recipeData.ingredients[l]=u,placeholder:"e.g. 10g Apple"},null,8,fz),[[ve,i.recipeData.ingredients[l]]]),p("button",{class:"remove-button",onClick:u=>r.removeIngredient(l)}," x ",8,pz)]))),128)),p("div",gz,[p("button",{class:"add-more-button",onClick:e[10]||(e[10]=(...c)=>r.addIngredient&&r.addIngredient(...c))}," + ADD MORE ")])])])]),p("div",mz,[p("div",_z,[yz,p("div",bz,[(C(!0),O(me,null,ft(i.recipeData.directions,(c,l)=>(C(),O("div",{key:l,class:"direction-step"},[p("label",{for:"direction"+c.stepNumber},"Step "+Se(c.stepNumber),9,vz),p("div",wz,[ie(p("textarea",{id:"direction"+c.stepNumber,"onUpdate:modelValue":u=>c.text=u},null,8,Ez),[[ve,c.text]]),p("button",{class:"remove-button",onClick:u=>r.removeDirection(l)}," x ",8,Tz)])]))),128)),p("div",Sz,[p("button",{class:"add-more-button",onClick:e[11]||(e[11]=(...c)=>r.addDirection&&r.addDirection(...c))}," + ADD MORE ")])])])])])]),p("div",Rz,[p("button",{class:"cancel-button",onClick:e[12]||(e[12]=(...c)=>r.close&&r.close(...c))},"Cancel"),W(a,{onSaveRecipe:r.submitRecipe},null,8,["onSaveRecipe"])])])])}const xz=Ve(VH,[["render",Iz],["__scopeId","data-v-49840b6d"]]),Cz={components:{}},kz={class:"recipe-card"},Az=UA('<div class="recipe-image" data-v-b026639d></div><div class="recipe-details" data-v-b026639d><div class="recipe-name-container" data-v-b026639d></div><div class="info" data-v-b026639d></div><div class="bottomRow" data-v-b026639d></div></div>',2),Pz=[Az];function Dz(t,e,n,s,i,r){return C(),O("div",kz,Pz)}const Ex=Ve(Cz,[["render",Dz],["__scopeId","data-v-b026639d"]]),ny="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M15.7955%2015.8111L21%2021M18%2010.5C18%2014.6421%2014.6421%2018%2010.5%2018C6.35786%2018%203%2014.6421%203%2010.5C3%206.35786%206.35786%203%2010.5%203C14.6421%203%2018%206.35786%2018%2010.5Z'%20stroke='%23000000'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Oz={components:{RecipeCard:ey,TopBar:ya,dropdown:ty,RecipeImage:Nl,CreateRecipe:xz,CircleButton:Ol,RecipeCardPlaceholder:Ex},data(){return{arrayOfCategories:[{name:"All"},{name:"Asian"},{name:"Western"},{name:"Local Delights"},{name:"Healthy Choices"},{name:"Fast Food"},{name:"Desserts and Snacks"},{name:"Beverages"},{name:"Specialty"},{name:"Breakfast and Brunch"},{name:"Late-night Eats"},{name:"Others"}],category:{},arrayOfSorts:[{name:"Most Recent"},{name:"Most Liked"}],sort:{},allCommunityRecipes:[],filteredRecipes:[],filteredRecipesByName:[],allRecipes:[],searchQuery:"",selectedRecipe:null,selectedIngredients:[],showCreateRecipe:!1,showBackToTop:!1,isDataLoaded:!1,showTopBar:!0,lastScrollPosition:0}},watch:{searchQuery(t){this.filterByNameOrIngredients(),localStorage.setItem("searchQuery",t)}},created(){this.fetchRecipes(),this.router=Hy,window.addEventListener("scroll",this.handleScroll)},destroyed(){window.removeEventListener("scroll",this.handleScroll)},mounted(){const t=localStorage.getItem("searchQuery");t&&(this.searchQuery=t),window.addEventListener("scroll",this.handleScroll)},methods:{async fetchRecipes(){(await Br(Ps(Ae,"all_recipes"))).forEach(e=>{this.allRecipes.push(e.data()),e.data().community&&e.data().community===!0&&(this.allCommunityRecipes.push(e.data()),this.filteredRecipes.push(e.data()),this.filteredRecipesByName.push(e.data()))}),this.filterByNameOrIngredients(),this.sortByMostRecent(this.allCommunityRecipes),this.sortByMostRecent(this.filteredRecipes),this.sortByMostRecent(this.filteredRecipesByName),this.isDataLoaded=!0},toggleCreateRecipe(){this.showCreateRecipe=!this.showCreateRecipe,this.showCreateRecipe&&this.router.push("/create-recipe")},toggleRecipeDetails(t){t.showDetails=!t.showDetails,this.selectedRecipe=t},filterByNameOrIngredients(){this.filteredRecipes=this.allCommunityRecipes.filter(t=>{const e=t.recipe_name.toLowerCase().includes(this.searchQuery.toLowerCase());let n=!1;t.ingredients.forEach(i=>{i.toLowerCase().includes(this.searchQuery.toLowerCase())&&(n=!0)});const s=this.category.name==="All"||Object.keys(this.category).length===0||t.categories.includes(this.category.name);return(e||n)&&s}),this.filteredRecipesByName=this.filteredRecipes},async filterUsingCategory(t){if(this.category=t,this.category.name=="All"&&this.searchQuery=="")this.filteredRecipes=this.allCommunityRecipes,this.filteredRecipesByName=this.allCommunityRecipes,this.filteredRecipes=this.filteredRecipesByName;else if(this.category.name=="All")this.filteredRecipes=this.filteredRecipesByName;else{const n=(await Dt(Ie(Ae,"categories",t.name))).data().recipes;n.length!=0&&(this.filteredRecipes=this.filteredRecipesByName,this.filteredRecipes=this.filteredRecipesByName.filter(s=>n.includes(s.recipe_id)))}},filterUsingSort(t){this.sort=t,t.name=="Most Recent"?this.sortByMostRecent(this.filteredRecipes):this.sortByMostLiked()},sortByMostRecent(t){t=t.sort((e,n)=>n.created_date.toDate()-e.created_date.toDate())},sortByMostLiked(){this.filteredRecipes=this.filteredRecipes.sort((t,e)=>e.like_count-t.like_count)},handleScroll(){this.showBackToTop=window.scrollY>250;const t=window.scrollY||document.documentElement.scrollTop;t<0||(t>this.lastScrollPosition?this.showTopBar=!1:this.showTopBar=!0,this.lastScrollPosition=t)},scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}}},sy=t=>(Lt("data-v-78f9515d"),t=t(),Nt(),t),Mz={class:"community-page"},Lz={class:"filters"},Nz={class:"filterBar"},Vz={class:"search-bar"},Fz=sy(()=>p("img",{class:"search-button",src:ny,alt:"Search Icon"},null,-1)),Bz=sy(()=>p("div",{class:"category-bar-text"},[p("p",null,"Category:")],-1)),Uz={class:"category-bar-dropdown"},$z={class:"dropdown-container"},Hz=sy(()=>p("div",{class:"sortby-bar-text"},[p("p",null,"Sort By:")],-1)),zz={class:"category-bar-dropdown"},jz={class:"dropdown-container"},Wz={class:"main-content"},qz={key:0,class:"recipe-list"},Gz={key:1,class:"recipe-list"},Kz={class:"NoSearchResultsContainer"},Yz={key:0};function Qz(t,e,n,s,i,r){const o=te("TopBar"),a=te("dropdown"),c=te("RecipeCardPlaceholder"),l=te("RecipeCard"),u=te("CircleButton");return C(),O(me,null,[W(o,{whichPage:"feed",showNavbar:i.showTopBar},null,8,["showNavbar"]),p("div",Mz,[p("div",Lz,[p("div",Nz,[p("div",Vz,[ie(p("input",{type:"text",class:"search-input",placeholder:"Search name or ingredients...","onUpdate:modelValue":e[0]||(e[0]=h=>i.searchQuery=h)},null,512),[[ve,i.searchQuery]]),Fz]),Bz,p("div",Uz,[p("div",$z,[W(a,{class:"my-dropdown-toggle",options:i.arrayOfCategories,selected:i.category,placeholder:"All",closeOnOutsideClick:!0,onUpdateOption:r.filterUsingCategory},null,8,["options","selected","onUpdateOption"])])]),Hz,p("div",zz,[p("div",jz,[W(a,{class:"my-dropdown-toggle",options:i.arrayOfSorts,selected:i.sort,placeholder:"Most Recent",closeOnOutsideClick:!0,onUpdateOption:r.filterUsingSort},null,8,["options","selected","onUpdateOption"])])])])]),p("div",Wz,[i.isDataLoaded?(C(),O("div",Gz,[(C(!0),O(me,null,ft(i.filteredRecipes,h=>(C(),De(l,{key:h.recipe_id,recipe:h,onToggle:r.toggleRecipeDetails},null,8,["recipe","onToggle"]))),128))])):(C(),O("div",qz,[(C(),O(me,null,ft(15,h=>W(c,{key:h})),64))])),p("div",Kz,[this.filteredRecipes.length==0?(C(),O("text",Yz,"No Search Results Found")):be("",!0)]),W(u,{logo:"./plus-icon.png",onClick:r.toggleCreateRecipe},null,8,["onClick"])])])],64)}const Xz=Ve(Oz,[["render",Qz],["__scopeId","data-v-78f9515d"]]),Jz={components:{TopBar:ya,RecipeDetails:vx},props:{id:String},data(){return{selectedRecipe:null,selectedIngredients:[]}},created(){this.fetchRecipeDetails()},methods:{async fetchRecipeDetails(){const t=await Dt(Ie(Ae,"all_recipes",this.id));this.selectedRecipe=t.data()}}},Zz={class:"main-recipe-details"},ej={class:"recipe-content"},tj=p("br",null,null,-1),nj=p("br",null,null,-1),sj=p("br",null,null,-1),ij=p("br",null,null,-1),rj=p("br",null,null,-1);function oj(t,e,n,s,i,r){const o=te("TopBar"),a=te("RecipeDetails");return C(),O("div",Zz,[W(o,{whichPage:"feed"}),p("div",ej,[tj,nj,sj,ij,rj,i.selectedRecipe?(C(),De(a,{key:0,selectedRecipe:i.selectedRecipe,selectedIngredients:i.selectedIngredients,likeExists:!0},null,8,["selectedRecipe","selectedIngredients"])):be("",!0)])])}const aj=Ve(Jz,[["render",oj]]),cj={name:"NotFoundPage",methods:{goToLanding(){this.$router.push("/")}}},_f=t=>(Lt("data-v-7a831135"),t=t(),Nt(),t),lj={id:"app"},uj=_f(()=>p("div",{class:"top-bar"},[p("img",{src:kl,alt:"PantryPal Logo",class:"logo"})],-1)),hj=_f(()=>p("div",{class:"separator"},null,-1)),dj={class:"gallery-container"},fj=_f(()=>p("header",null,[p("h1",null,"404 Error: Page Not Found")],-1)),pj=_f(()=>p("p",null,"The above link does not exist, click below to go back to landing page.",-1));function gj(t,e,n,s,i,r){return C(),O("div",lj,[uj,hj,p("div",dj,[fj,p("div",null,[pj,p("button",{class:"btn-login",onClick:e[0]||(e[0]=(...o)=>r.goToLanding&&r.goToLanding(...o))},"Landing Page")])])])}const mj=Ve(cj,[["render",gj],["__scopeId","data-v-7a831135"]]),_j="/assets/profile-plus-icon-uthoFEDF.png",yj={name:"Profile Sidebar",data(){return{profilePicUrl:""}},props:{selected:"",userData:{}},components:{ProfileImage:mx},emits:["selected"],watch:{profilePicUrl(t){localStorage.setItem("userData",JSON.stringify({...this.userData,profile_img_url:t}))}},methods:{selectedSettings(){this.$emit("selected","settings")},selectedLikedRecipes(){this.$emit("selected","likedRecipes")},selectedMyCookbook(){this.$emit("selected","myCookbook")},selectedStats(){this.$emit("selected","stats")},triggerFileInput(){this.$refs.fileInput.click()},onFileSelected(t){const e=t.target.files[0];e&&this.uploadImageToFirebase(e)},async uploadImageToFirebase(t){const e=of(af,`profileImg/${t.name}`),n=sf(e,t);n.on("state_changed",s=>{s.bytesTransferred/s.totalBytes*100},s=>{console.error("Upload failed",s)},()=>{rf(n.snapshot.ref).then(s=>{console.log("File available at",s),this.profilePicUrl=s,this.$emit("refreshProfilePic",s),this.updateUserProfilePic(s)}).catch(s=>{console.error("Failed to get download URL",s)})})},async updateUserProfilePic(t){const e=Re.currentUser,n=Ie(Ae,"users",e.uid);await Sn(n,{profile_img_url:t})}}},$s=t=>(Lt("data-v-879356c3"),t=t(),Nt(),t),bj={class:"sidebar"},vj={class:"profile-container"},wj=$s(()=>p("br",null,null,-1)),Ej=$s(()=>p("br",null,null,-1)),Tj=$s(()=>p("br",null,null,-1)),Sj=$s(()=>p("br",null,null,-1)),Rj=$s(()=>p("br",null,null,-1)),Ij={class:"profile-pic"},xj={key:0},Cj=$s(()=>p("img",{class:"plus-icon",src:_j,height:"10px"},null,-1)),kj=[Cj],Aj={class:"personal-details"},Pj={class:"user-name"},Dj={class:"created-number"},Oj={class:"profile-options"},Mj=$s(()=>p("h3",null,"Settings",-1)),Lj=[Mj],Nj=$s(()=>p("h3",null,"Liked Recipes",-1)),Vj=[Nj],Fj=$s(()=>p("h3",null,"My Cookbook",-1)),Bj=[Fj],Uj=$s(()=>p("h3",null,"User Stats",-1)),$j=[Uj];function Hj(t,e,n,s,i,r){var a;const o=te("ProfileImage");return C(),O("aside",bj,[p("div",vj,[wj,Ej,Tj,Sj,Rj,p("div",Ij,[W(o,{path:i.profilePicUrl||n.userData.profile_img_url,ifCard:!1,alt:"profile pic",class:"profile"},null,8,["path"]),p("input",{type:"file",onChange:e[0]||(e[0]=(...c)=>r.onFileSelected&&r.onFileSelected(...c)),hidden:"",ref:"fileInput"},null,544),n.selected==="settings"?(C(),O("div",xj,[p("button",{onClick:e[1]||(e[1]=(...c)=>r.triggerFileInput&&r.triggerFileInput(...c))},kj)])):be("",!0)]),p("div",Aj,[p("h4",Pj,"@"+Se(n.userData.username),1),p("h4",Dj," Created "+Se(((a=n.userData.my_cookbook)==null?void 0:a.length)||0)+" recipes ",1)]),p("div",Oj,[p("div",{class:Tt(["header",{selected:n.selected==="settings"}]),onClick:e[2]||(e[2]=c=>r.selectedSettings())},Lj,2),p("div",{class:Tt(["header",{selected:n.selected==="likedRecipes"}]),onClick:e[3]||(e[3]=c=>r.selectedLikedRecipes())},Vj,2),p("div",{class:Tt(["header",{selected:n.selected==="myCookbook"}]),onClick:e[4]||(e[4]=c=>r.selectedMyCookbook())},Bj,2),p("div",{class:Tt(["header",{selected:n.selected==="stats"}]),onClick:e[5]||(e[5]=c=>r.selectedStats())},$j,2)])])])}const zj=Ve(yj,[["render",Hj],["__scopeId","data-v-879356c3"]]),jj={name:"PasswordConfirmationModal",props:{isVisible:Boolean},data(){return{currentPassword:""}},watch:{isVisible(t){t||(this.currentPassword="")}},methods:{closeModal(){this.$emit("update:isVisible",!1)},confirmPassword(){this.$emit("confirm",this.currentPassword),this.closeModal()}}},Tx=t=>(Lt("data-v-71fed75f"),t=t(),Nt(),t),Wj={key:0,class:"modal-overlay"},qj={class:"modal"},Gj=Tx(()=>p("h2",null,"Confirm Current Password",-1)),Kj={class:"buttons"},Yj=Tx(()=>p("button",{type:"submit"},"Confirm",-1));function Qj(t,e,n,s,i,r){return n.isVisible?(C(),O("div",Wj,[p("div",qj,[Gj,p("form",{onSubmit:e[2]||(e[2]=Ye((...o)=>r.confirmPassword&&r.confirmPassword(...o),["prevent"]))},[ie(p("input",{type:"password","onUpdate:modelValue":e[0]||(e[0]=o=>i.currentPassword=o),placeholder:"Enter current password",class:"input-field"},null,512),[[ve,i.currentPassword]]),p("div",Kj,[Yj,p("button",{type:"button",onClick:e[1]||(e[1]=(...o)=>r.closeModal&&r.closeModal(...o))},"Cancel")])],32)])])):be("",!0)}const Xj=Ve(jj,[["render",Qj],["__scopeId","data-v-71fed75f"]]),Jj={name:"UserProfileEdit",props:{userData:{type:Object,required:!0}},components:{PasswordConfirmationModal:Xj},data(){return{email:"",username:"",newPassword:"",confirmPassword:"",user:null,showPasswordModal:!1,passwordUpdateComplete:!0}},setup(){return{toast:fo()}},created(){this.email=this.userData.email,this.username=this.userData.username},methods:{async saveChangesDetails(){try{const t=Re.currentUser;if(t){const e=Ie(Ae,"users",t.uid);await Sn(e,{username:this.username}),this.triggerToastUserComplete(),this.$emit("userData",{...this.userData,username:this.username})}}catch(t){console.error("Error updating profile:",t),alert(t.message)}},async saveChangesPassword(){try{const t=Re.currentUser;if(this.newPassword&&await this.changePassword(this.newPassword),this.newPassword&&!this.passwordUpdateComplete){this.triggerToastPasswordComplete();const e=Ie(Ae,"users",t.uid);await Sn(e,{username:this.username});return}}catch(t){console.error("Error updating profile:",t),alert(t.message)}},async changePassword(){if(this.newPassword!==this.confirmPassword){this.triggerToastPasswordNoMatch();return}if(!this.newPassword||!this.confirmPassword){this.triggerToastPasswordTooShort();return}this.showPasswordModal=!0,this.passwordUpdateComplete=!1},async handlePasswordConfirm(t){try{const e=Re.currentUser,n=oo.credential(e.email,t);await g2(e,n),await y2(e,this.newPassword),this.passwordUpdateComplete=!0,this.triggerToastPasswordSuccess(),this.newPassword="",this.confirmPassword=""}catch(e){console.error("Error updating password:",e),this.triggerToastPasswordFailed(),this.passwordUpdateComplete=!0}},triggerToastUserComplete(){this.toast("Profile updated successfully.",{timeout:2e3,position:"top-center",hideProgressBar:!0})},triggerToastPasswordNoMatch(){this.toast.error("Passwords do not match.",{timeout:2e3,position:"top-center",hideProgressBar:!0})},triggerToastPasswordTooShort(){this.toast.error("Password fields cannot be empty",{timeout:2e3,position:"top-center",hideProgressBar:!0})},triggerToastPasswordComplete(){this.toast("Please complete the password update process first.",{timeout:2e3,position:"top-center",hideProgressBar:!0})},triggerToastPasswordSuccess(){this.toast("Password updated successfully.",{timeout:2e3,position:"top-center",hideProgressBar:!0})},triggerToastPasswordFailed(){this.toast.error("Invalid Credentials",{timeout:2e3,position:"top-center",hideProgressBar:!0})}}},cr=t=>(Lt("data-v-08941851"),t=t(),Nt(),t),Zj={class:"user-profile-edit"},eW=cr(()=>p("h2",null,"Edit User Details",-1)),tW={class:"form-group"},nW=cr(()=>p("label",{for:"email"},"Email Address",-1)),sW={class:"form-group"},iW=cr(()=>p("label",{for:"username"},"Username",-1)),rW=cr(()=>p("div",{class:"save-changes-btn-container"},[p("button",{type:"submit",class:"save-changes-btn"},"Save Changes")],-1)),oW=cr(()=>p("h2",null,"Change Password",-1)),aW={class:"form-group"},cW=cr(()=>p("label",{for:"newPassword"},"New Password",-1)),lW={class:"form-group"},uW=cr(()=>p("label",{for:"confirmPassword"},"Confirm New Password",-1)),hW=cr(()=>p("div",{class:"save-changes-btn-container"},[p("button",{type:"submit",class:"save-changes-btn"},"Save Changes")],-1));function dW(t,e,n,s,i,r){const o=te("PasswordConfirmationModal");return C(),O("div",Zj,[W(o,{isVisible:i.showPasswordModal,"onUpdate:isVisible":e[0]||(e[0]=a=>i.showPasswordModal=a),onConfirm:r.handlePasswordConfirm},null,8,["isVisible","onConfirm"]),eW,p("form",{onSubmit:e[3]||(e[3]=Ye((...a)=>r.saveChangesDetails&&r.saveChangesDetails(...a),["prevent"])),class:"user-form"},[p("div",tW,[nW,ie(p("input",{type:"email",id:"email","onUpdate:modelValue":e[1]||(e[1]=a=>i.email=a),disabled:"",class:"input-field non-editable"},null,512),[[ve,i.email]])]),p("div",sW,[iW,ie(p("input",{type:"text",id:"username","onUpdate:modelValue":e[2]||(e[2]=a=>i.username=a),class:"input-field"},null,512),[[ve,i.username]])]),rW],32),oW,p("form",{onSubmit:e[6]||(e[6]=Ye((...a)=>r.saveChangesPassword&&r.saveChangesPassword(...a),["prevent"])),class:"user-form"},[p("div",aW,[cW,ie(p("input",{type:"password",id:"newPassword","onUpdate:modelValue":e[4]||(e[4]=a=>i.newPassword=a),class:"input-field"},null,512),[[ve,i.newPassword]])]),p("div",lW,[uW,ie(p("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":e[5]||(e[5]=a=>i.confirmPassword=a),class:"input-field"},null,512),[[ve,i.confirmPassword]])]),hW],32)])}const fW=Ve(Jj,[["render",dW],["__scopeId","data-v-08941851"]]),pW={components:{RecipeCard:ey,dropdown:ty,RecipeImage:Nl,RecipeCardPlaceholder:Ex},data(){return{arrayOfCategories:[{name:"All",id:"00"},{name:"Asian",id:"01"},{name:"Western",id:"02"},{name:"Local Delights",id:"03"},{name:"Healthy Choices",id:"04"},{name:"Fast Food",id:"05"},{name:"Desserts and Snacks",id:"06"},{name:"Beverages",id:"07"},{name:"Specialty",id:"08"},{name:"Breakfast and Brunch",id:"09"},{name:"Late-night Eats",id:"10"},{name:"Others",id:"11"}],category:{},arrayOfSorts:[{name:"Most Recent"},{name:"Most Liked"}],sort:{},allLikedRecipes:[],filteredRecipes:[],filteredRecipesByName:[],allRecipes:[],searchQuery:"",selectedRecipe:null,selectedIngredients:[],showCreateRecipe:!1,isDataLoaded:!1}},watch:{searchQuery(t){this.filterByNameOrIngredients()}},created(){this.fetchRecipes();const t=Ie(Ae,"users",Re.currentUser.uid);UB(t,e=>{if(e.exists()){const n=e.data().liked_recipes||[];this.updateLikedRecipes(n)}})},methods:{updateLiked(){this.$emit("updateLiked")},async fetchRecipes(){const e=(await Dt(Ie(Ae,"users",Re.currentUser.uid))).data().liked_recipes||[];this.updateLikedRecipes(e)},filterByNameOrIngredients(){this.filteredRecipes=this.allLikedRecipes.filter(t=>{const e=t.recipe_name.toLowerCase().includes(this.searchQuery.toLowerCase());let n=!1;t.ingredients.forEach(i=>{i.toLowerCase().includes(this.searchQuery.toLowerCase())&&(n=!0)});const s=this.category.name==="All"||Object.keys(this.category).length===0||t.categories.includes(this.category.name);return(e||n)&&s}),this.filteredRecipesByName=this.filteredRecipes},async filterUsingCategory(t){if(this.category=t,this.category.name=="All"&&this.searchQuery=="")this.filteredRecipes=this.allLikedRecipes,this.filteredRecipesByName=this.allLikedRecipes,this.filteredRecipes=this.filteredRecipesByName;else if(this.category.name=="All")this.filteredRecipes=this.filteredRecipesByName;else{const n=(await Dt(Ie(Ae,"categories",t.name))).data().recipes;n.length!=0&&(this.filteredRecipes=this.filteredRecipesByName,this.filteredRecipes=this.filteredRecipesByName.filter(s=>n.includes(s.recipe_id)))}},filterUsingSort(t){this.sort=t,t.name=="Most Recent"?this.sortByMostRecent():this.sortByMostLiked()},sortAllByMostRecent(){this.allLikedRecipes=this.allLikedRecipes.sort((t,e)=>e.created_date.toDate()-t.created_date.toDate())},sortByMostRecent(){this.filteredRecipes=this.filteredRecipes.sort((t,e)=>e.created_date.toDate()-t.created_date.toDate())},sortByMostLiked(){this.filteredRecipes=this.filteredRecipes.sort((t,e)=>e.like_count-t.like_count)},async updateLikedRecipes(t){try{this.filteredRecipes=[],this.allLikedRecipes=[];const e=t.map(async n=>{const s=await Dt(Ie(Ae,"all_recipes",n));if(s.exists()){const i=s.data();this.allLikedRecipes.some(r=>r.recipe_id===i.recipe_id)||this.allLikedRecipes.push(i),this.filteredRecipes.some(r=>r.recipe_id===i.recipe_id)||this.filteredRecipes.push(i)}else console.error(`Recipe with ID ${n} does not exist.`)});await Promise.all(e),this.isDataLoaded=!0}catch(e){console.error("Error fetching recipes:",e)}}}},iy=t=>(Lt("data-v-a5448194"),t=t(),Nt(),t),gW={class:"liked-recipes-page"},mW={class:"filterBar"},_W={class:"search-bar"},yW=iy(()=>p("img",{class:"search-button",src:ny,alt:"Search Icon"},null,-1)),bW=iy(()=>p("div",{class:"category-bar-text"},[p("p",null,"Category:")],-1)),vW={class:"category-bar-dropdown"},wW={class:"dropdown-container"},EW=iy(()=>p("div",{class:"sortby-bar-text"},[p("p",null,"Sort By:")],-1)),TW={class:"category-bar-dropdown"},SW={class:"dropdown-container"},RW={class:"recipe-container"},IW={key:0,class:"recipe-list"},xW={class:"recipe-list"},CW={class:"NoSearchResultsContainer"},kW={key:0};function AW(t,e,n,s,i,r){const o=te("dropdown"),a=te("RecipeCardPlaceholder"),c=te("RecipeCard");return C(),O("div",gW,[p("div",mW,[p("div",_W,[ie(p("input",{type:"text",class:"search-input",placeholder:"Search name or ingredients...","onUpdate:modelValue":e[0]||(e[0]=l=>i.searchQuery=l)},null,512),[[ve,i.searchQuery]]),yW]),bW,p("div",vW,[p("div",wW,[W(o,{class:"my-dropdown-toggle",options:i.arrayOfCategories,selected:i.category,placeholder:"All",closeOnOutsideClick:!0,onUpdateOption:r.filterUsingCategory},null,8,["options","selected","onUpdateOption"])])]),EW,p("div",TW,[p("div",SW,[W(o,{class:"my-dropdown-toggle",options:i.arrayOfSorts,selected:i.sort,placeholder:"Most Recent",closeOnOutsideClick:!0,onUpdateOption:r.filterUsingSort},null,8,["options","selected","onUpdateOption"])])])]),p("div",RW,[i.isDataLoaded?be("",!0):(C(),O("div",IW,[(C(),O(me,null,ft(15,l=>W(a,{key:l})),64))])),p("div",xW,[(C(!0),O(me,null,ft(i.filteredRecipes,l=>(C(),De(c,{key:l.recipe_id,recipe:l,onUpdateLiked:r.updateLiked},null,8,["recipe","onUpdateLiked"]))),128))])]),p("div",CW,[this.filteredRecipes.length==0&&i.isDataLoaded?(C(),O("text",kW,"No Search Results Found")):be("",!0)])])}const PW=Ve(pW,[["render",AW],["__scopeId","data-v-a5448194"]]),DW={components:{RecipeCard:ey,dropdown:ty,RecipeImage:Nl,CircleButton:Ol},props:{userData:{}},data(){return{arrayOfCategories:[{name:"All",id:"00"},{name:"Asian",id:"01"},{name:"Western",id:"02"},{name:"Local Delights",id:"03"},{name:"Healthy Choices",id:"04"},{name:"Fast Food",id:"05"},{name:"Desserts and Snacks",id:"06"},{name:"Beverages",id:"07"},{name:"Specialty",id:"08"},{name:"Breakfast and Brunch",id:"09"},{name:"Late-night Eats",id:"10"},{name:"Others",id:"11"}],category:{},arrayOfSorts:[{name:"Most Recent"},{name:"Most Liked"}],sort:{},myRecipes:[],filteredRecipes:[],filteredRecipesByName:[],searchQuery:"",selectedRecipe:null,selectedIngredients:[],showCreateRecipe:!1,isDataLoaded:!1}},watch:{searchQuery(t){this.filterByNameOrIngredients()}},created(){this.fetchRecipes(),this.sortAllByMostRecent()},methods:{toggleCreateRecipe(){this.$router.push("/create-recipe")},updateLiked(){this.$emit("updateLiked")},async fetchRecipes(){const e=(await Dt(Ie(Ae,"users",Re.currentUser.uid))).data().my_cookbook||[];this.filteredRecipes=await Promise.all(e.map(async n=>(await Dt(Ie(Ae,"all_recipes",n))).data())),this.myRecipes=this.filteredRecipes,this.sortByMostRecent(),this.sortAllByMostRecent(),this.isDataLoaded=!0},filterByNameOrIngredients(){this.filteredRecipes=this.myRecipes.filter(t=>{const e=t.recipe_name.toLowerCase().includes(this.searchQuery.toLowerCase());let n=!1;t.ingredients.forEach(i=>{i.toLowerCase().includes(this.searchQuery.toLowerCase())&&(n=!0)});const s=this.category.name==="All"||Object.keys(this.category).length===0||t.categories.includes(this.category.name);return(e||n)&&s}),this.filteredRecipesByName=this.filteredRecipes},async filterUsingCategory(t){if(this.category=t,this.category.name=="All"&&this.searchQuery=="")this.filteredRecipes=this.myRecipes,this.filteredRecipesByName=this.myRecipes;else if(this.category.name=="All")this.filteredRecipes=this.filteredRecipesByName;else{const n=(await Dt(Ie(Ae,"categories",t.name))).data().recipes;n.length!=0&&(this.filteredRecipes=this.filteredRecipesByName,this.filteredRecipes=this.filteredRecipesByName.filter(s=>n.includes(s.recipe_id)))}},filterUsingSort(t){this.sort=t,t.name=="Most Recent"?this.sortByMostRecent():this.sortByMostLiked()},sortAllByMostRecent(){this.allLikedRecipes=this.myRecipes.sort((t,e)=>e.created_date.toDate()-t.created_date.toDate())},sortByMostRecent(){this.filteredRecipes=this.filteredRecipes.sort((t,e)=>e.created_date.toDate()-t.created_date.toDate())},sortByMostLiked(){this.filteredRecipes=this.filteredRecipes.sort((t,e)=>e.like_count-t.like_count)}}},ry=t=>(Lt("data-v-7277ad08"),t=t(),Nt(),t),OW={class:"myCookbook-page"},MW={class:"filterBar"},LW={class:"search-bar"},NW=ry(()=>p("img",{class:"search-button",src:ny,alt:"Search Icon"},null,-1)),VW=ry(()=>p("div",{class:"category-bar-text"},[p("p",null,"Category:")],-1)),FW={class:"category-bar-dropdown"},BW={class:"dropdown-container"},UW=ry(()=>p("div",{class:"sortby-bar-text"},[p("p",null,"Sort By:")],-1)),$W={class:"category-bar-dropdown"},HW={class:"dropdown-container"},zW={class:"recipe-container"},jW={class:"recipe-list"},WW={class:"NoSearchResultsContainer"},qW={key:0};function GW(t,e,n,s,i,r){const o=te("dropdown"),a=te("RecipeCard"),c=te("CircleButton");return C(),O("div",OW,[p("div",MW,[p("div",LW,[ie(p("input",{type:"text",class:"search-input",placeholder:"Search name or ingredients...","onUpdate:modelValue":e[0]||(e[0]=l=>i.searchQuery=l)},null,512),[[ve,i.searchQuery]]),NW]),VW,p("div",FW,[p("div",BW,[W(o,{class:"my-dropdown-toggle",options:i.arrayOfCategories,selected:i.category,placeholder:"All",closeOnOutsideClick:!0,onUpdateOption:r.filterUsingCategory},null,8,["options","selected","onUpdateOption"])])]),UW,p("div",$W,[p("div",HW,[W(o,{class:"my-dropdown-toggle",options:i.arrayOfSorts,selected:i.sort,placeholder:"Most Recent",closeOnOutsideClick:!0,onUpdateOption:r.filterUsingSort},null,8,["options","selected","onUpdateOption"])])])]),p("div",zW,[p("div",jW,[(C(!0),O(me,null,ft(i.filteredRecipes,l=>(C(),De(a,{key:l.recipe_id,recipe:l,onUpdateLiked:r.updateLiked},null,8,["recipe","onUpdateLiked"]))),128))])]),p("div",WW,[this.filteredRecipes.length==0&&i.isDataLoaded?(C(),O("text",qW,"No Search Results Found")):be("",!0)]),W(c,{logo:"./plus-icon.png",onClick:r.toggleCreateRecipe},null,8,["onClick"])])}const KW=Ve(DW,[["render",GW],["__scopeId","data-v-7277ad08"]]);/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function Vl(t){return t+.5|0}const Vi=(t,e,n)=>Math.max(Math.min(t,n),e);function Wa(t){return Vi(Vl(t*2.55),0,255)}function qi(t){return Vi(Vl(t*255),0,255)}function Ks(t){return Vi(Vl(t/2.55)/100,0,1)}function q0(t){return Vi(Vl(t*100),0,100)}const Fn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Og=[..."0123456789ABCDEF"],YW=t=>Og[t&15],QW=t=>Og[(t&240)>>4]+Og[t&15],uu=t=>(t&240)>>4===(t&15),XW=t=>uu(t.r)&&uu(t.g)&&uu(t.b)&&uu(t.a);function JW(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Fn[t[1]]*17,g:255&Fn[t[2]]*17,b:255&Fn[t[3]]*17,a:e===5?Fn[t[4]]*17:255}:(e===7||e===9)&&(n={r:Fn[t[1]]<<4|Fn[t[2]],g:Fn[t[3]]<<4|Fn[t[4]],b:Fn[t[5]]<<4|Fn[t[6]],a:e===9?Fn[t[7]]<<4|Fn[t[8]]:255})),n}const ZW=(t,e)=>t<255?e(t):"";function e8(t){var e=XW(t)?YW:QW;return t?"#"+e(t.r)+e(t.g)+e(t.b)+ZW(t.a,e):void 0}const t8=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Sx(t,e,n){const s=e*Math.min(n,1-n),i=(r,o=(r+t/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function n8(t,e,n){const s=(i,r=(i+t/60)%6)=>n-n*e*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function s8(t,e,n){const s=Sx(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)s[i]*=1-e-n,s[i]+=e;return s}function i8(t,e,n,s,i){return t===i?(e-n)/s+(e<n?6:0):e===i?(n-t)/s+2:(t-e)/s+4}function oy(t){const n=t.r/255,s=t.g/255,i=t.b/255,r=Math.max(n,s,i),o=Math.min(n,s,i),a=(r+o)/2;let c,l,u;return r!==o&&(u=r-o,l=a>.5?u/(2-r-o):u/(r+o),c=i8(n,s,i,u,r),c=c*60+.5),[c|0,l||0,a]}function ay(t,e,n,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,s)).map(qi)}function cy(t,e,n){return ay(Sx,t,e,n)}function r8(t,e,n){return ay(s8,t,e,n)}function o8(t,e,n){return ay(n8,t,e,n)}function Rx(t){return(t%360+360)%360}function a8(t){const e=t8.exec(t);let n=255,s;if(!e)return;e[5]!==s&&(n=e[6]?Wa(+e[5]):qi(+e[5]));const i=Rx(+e[2]),r=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?s=r8(i,r,o):e[1]==="hsv"?s=o8(i,r,o):s=cy(i,r,o),{r:s[0],g:s[1],b:s[2],a:n}}function c8(t,e){var n=oy(t);n[0]=Rx(n[0]+e),n=cy(n),t.r=n[0],t.g=n[1],t.b=n[2]}function l8(t){if(!t)return;const e=oy(t),n=e[0],s=q0(e[1]),i=q0(e[2]);return t.a<255?`hsla(${n}, ${s}%, ${i}%, ${Ks(t.a)})`:`hsl(${n}, ${s}%, ${i}%)`}const G0={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},K0={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function u8(){const t={},e=Object.keys(K0),n=Object.keys(G0);let s,i,r,o,a;for(s=0;s<e.length;s++){for(o=a=e[s],i=0;i<n.length;i++)r=n[i],a=a.replace(r,G0[r]);r=parseInt(K0[o],16),t[a]=[r>>16&255,r>>8&255,r&255]}return t}let hu;function h8(t){hu||(hu=u8(),hu.transparent=[0,0,0,0]);const e=hu[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const d8=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function f8(t){const e=d8.exec(t);let n=255,s,i,r;if(e){if(e[7]!==s){const o=+e[7];n=e[8]?Wa(o):Vi(o*255,0,255)}return s=+e[1],i=+e[3],r=+e[5],s=255&(e[2]?Wa(s):Vi(s,0,255)),i=255&(e[4]?Wa(i):Vi(i,0,255)),r=255&(e[6]?Wa(r):Vi(r,0,255)),{r:s,g:i,b:r,a:n}}}function p8(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Ks(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const gp=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,vo=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function g8(t,e,n){const s=vo(Ks(t.r)),i=vo(Ks(t.g)),r=vo(Ks(t.b));return{r:qi(gp(s+n*(vo(Ks(e.r))-s))),g:qi(gp(i+n*(vo(Ks(e.g))-i))),b:qi(gp(r+n*(vo(Ks(e.b))-r))),a:t.a+n*(e.a-t.a)}}function du(t,e,n){if(t){let s=oy(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*n,e===0?360:1)),s=cy(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function Ix(t,e){return t&&Object.assign(e||{},t)}function Y0(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=qi(t[3]))):(e=Ix(t,{r:0,g:0,b:0,a:1}),e.a=qi(e.a)),e}function m8(t){return t.charAt(0)==="r"?f8(t):a8(t)}class qc{constructor(e){if(e instanceof qc)return e;const n=typeof e;let s;n==="object"?s=Y0(e):n==="string"&&(s=JW(e)||h8(e)||m8(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=Ix(this._rgb);return e&&(e.a=Ks(e.a)),e}set rgb(e){this._rgb=Y0(e)}rgbString(){return this._valid?p8(this._rgb):void 0}hexString(){return this._valid?e8(this._rgb):void 0}hslString(){return this._valid?l8(this._rgb):void 0}mix(e,n){if(e){const s=this.rgb,i=e.rgb;let r;const o=n===r?.5:n,a=2*o-1,c=s.a-i.a,l=((a*c===-1?a:(a+c)/(1+a*c))+1)/2;r=1-l,s.r=255&l*s.r+r*i.r+.5,s.g=255&l*s.g+r*i.g+.5,s.b=255&l*s.b+r*i.b+.5,s.a=o*s.a+(1-o)*i.a,this.rgb=s}return this}interpolate(e,n){return e&&(this._rgb=g8(this._rgb,e._rgb,n)),this}clone(){return new qc(this.rgb)}alpha(e){return this._rgb.a=qi(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Vl(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return du(this._rgb,2,e),this}darken(e){return du(this._rgb,2,-e),this}saturate(e){return du(this._rgb,1,e),this}desaturate(e){return du(this._rgb,1,-e),this}rotate(e){return c8(this._rgb,e),this}}/*!
 * Chart.js v4.4.2
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function js(){}const _8=(()=>{let t=0;return()=>t++})();function Be(t){return t===null||typeof t>"u"}function rt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Pe(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function yt(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function kn(t,e){return yt(t)?t:e}function we(t,e){return typeof t>"u"?e:t}const y8=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,xx=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Je(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function qe(t,e,n,s){let i,r,o;if(rt(t))if(r=t.length,s)for(i=r-1;i>=0;i--)e.call(n,t[i],i);else for(i=0;i<r;i++)e.call(n,t[i],i);else if(Pe(t))for(o=Object.keys(t),r=o.length,i=0;i<r;i++)e.call(n,t[o[i]],o[i])}function Uh(t,e){let n,s,i,r;if(!t||!e||t.length!==e.length)return!1;for(n=0,s=t.length;n<s;++n)if(i=t[n],r=e[n],i.datasetIndex!==r.datasetIndex||i.index!==r.index)return!1;return!0}function $h(t){if(rt(t))return t.map($h);if(Pe(t)){const e=Object.create(null),n=Object.keys(t),s=n.length;let i=0;for(;i<s;++i)e[n[i]]=$h(t[n[i]]);return e}return t}function Cx(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function b8(t,e,n,s){if(!Cx(t))return;const i=e[t],r=n[t];Pe(i)&&Pe(r)?Gc(i,r,s):e[t]=$h(r)}function Gc(t,e,n){const s=rt(e)?e:[e],i=s.length;if(!Pe(t))return t;n=n||{};const r=n.merger||b8;let o;for(let a=0;a<i;++a){if(o=s[a],!Pe(o))continue;const c=Object.keys(o);for(let l=0,u=c.length;l<u;++l)r(c[l],t,o,n)}return t}function dc(t,e){return Gc(t,e,{merger:v8})}function v8(t,e,n){if(!Cx(t))return;const s=e[t],i=n[t];Pe(s)&&Pe(i)?dc(s,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=$h(i))}const Q0={"":t=>t,x:t=>t.x,y:t=>t.y};function w8(t){const e=t.split("."),n=[];let s="";for(const i of e)s+=i,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function E8(t){const e=w8(t);return n=>{for(const s of e){if(s==="")break;n=n&&n[s]}return n}}function nr(t,e){return(Q0[e]||(Q0[e]=E8(e)))(t)}function ly(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Kc=t=>typeof t<"u",sr=t=>typeof t=="function",X0=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function T8(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const at=Math.PI,ot=2*at,S8=ot+at,Hh=Number.POSITIVE_INFINITY,R8=at/180,St=at/2,pr=at/4,J0=at*2/3,Fi=Math.log10,Os=Math.sign;function fc(t,e,n){return Math.abs(t-e)<n}function Z0(t){const e=Math.round(t);t=fc(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Fi(t))),s=t/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function I8(t){const e=[],n=Math.sqrt(t);let s;for(s=1;s<n;s++)t%s===0&&(e.push(s),e.push(t/s));return n===(n|0)&&e.push(n),e.sort((i,r)=>i-r).pop(),e}function aa(t){return!isNaN(parseFloat(t))&&isFinite(t)}function x8(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function kx(t,e,n){let s,i,r;for(s=0,i=t.length;s<i;s++)r=t[s][n],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function ns(t){return t*(at/180)}function uy(t){return t*(180/at)}function ew(t){if(!yt(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function Ax(t,e){const n=e.x-t.x,s=e.y-t.y,i=Math.sqrt(n*n+s*s);let r=Math.atan2(s,n);return r<-.5*at&&(r+=ot),{angle:r,distance:i}}function Mg(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function C8(t,e){return(t-e+S8)%ot-at}function An(t){return(t%ot+ot)%ot}function Yc(t,e,n,s){const i=An(t),r=An(e),o=An(n),a=An(r-i),c=An(o-i),l=An(i-r),u=An(i-o);return i===r||i===o||s&&r===o||a>c&&l<u}function Ht(t,e,n){return Math.max(e,Math.min(n,t))}function k8(t){return Ht(t,-32768,32767)}function Js(t,e,n,s=1e-6){return t>=Math.min(e,n)-s&&t<=Math.max(e,n)+s}function hy(t,e,n){n=n||(o=>t[o]<e);let s=t.length-1,i=0,r;for(;s-i>1;)r=i+s>>1,n(r)?i=r:s=r;return{lo:i,hi:s}}const Zs=(t,e,n,s)=>hy(t,n,s?i=>{const r=t[i][e];return r<n||r===n&&t[i+1][e]===n}:i=>t[i][e]<n),A8=(t,e,n)=>hy(t,n,s=>t[s][e]>=n);function P8(t,e,n){let s=0,i=t.length;for(;s<i&&t[s]<e;)s++;for(;i>s&&t[i-1]>n;)i--;return s>0||i<t.length?t.slice(s,i):t}const Px=["push","pop","shift","splice","unshift"];function D8(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Px.forEach(n=>{const s="_onData"+ly(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...r){const o=i.apply(this,r);return t._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...r)}),o}})})}function tw(t,e){const n=t._chartjs;if(!n)return;const s=n.listeners,i=s.indexOf(e);i!==-1&&s.splice(i,1),!(s.length>0)&&(Px.forEach(r=>{delete t[r]}),delete t._chartjs)}function Dx(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Ox=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function Mx(t,e){let n=[],s=!1;return function(...i){n=i,s||(s=!0,Ox.call(window,()=>{s=!1,t.apply(e,n)}))}}function O8(t,e){let n;return function(...s){return e?(clearTimeout(n),n=setTimeout(t,e,s)):t.apply(this,s),e}}const dy=t=>t==="start"?"left":t==="end"?"right":"center",en=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,M8=(t,e,n,s)=>t===(s?"left":"right")?n:t==="center"?(e+n)/2:e;function Lx(t,e,n){const s=e.length;let i=0,r=s;if(t._sorted){const{iScale:o,_parsed:a}=t,c=o.axis,{min:l,max:u,minDefined:h,maxDefined:d}=o.getUserBounds();h&&(i=Ht(Math.min(Zs(a,c,l).lo,n?s:Zs(e,c,o.getPixelForValue(l)).lo),0,s-1)),d?r=Ht(Math.max(Zs(a,o.axis,u,!0).hi+1,n?0:Zs(e,c,o.getPixelForValue(u),!0).hi+1),i,s)-i:r=s-i}return{start:i,count:r}}function Nx(t){const{xScale:e,yScale:n,_scaleRanges:s}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!s)return t._scaleRanges=i,!0;const r=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,i),r}const fu=t=>t===0||t===1,nw=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*ot/n)),sw=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*ot/n)+1,pc={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*St)+1,easeOutSine:t=>Math.sin(t*St),easeInOutSine:t=>-.5*(Math.cos(at*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>fu(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>fu(t)?t:nw(t,.075,.3),easeOutElastic:t=>fu(t)?t:sw(t,.075,.3),easeInOutElastic(t){return fu(t)?t:t<.5?.5*nw(t*2,.1125,.45):.5+.5*sw(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-pc.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?pc.easeInBounce(t*2)*.5:pc.easeOutBounce(t*2-1)*.5+.5};function fy(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function iw(t){return fy(t)?t:new qc(t)}function mp(t){return fy(t)?t:new qc(t).saturate(.5).darken(.1).hexString()}const L8=["x","y","borderWidth","radius","tension"],N8=["color","borderColor","backgroundColor"];function V8(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:N8},numbers:{type:"number",properties:L8}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function F8(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const rw=new Map;function B8(t,e){e=e||{};const n=t+JSON.stringify(e);let s=rw.get(n);return s||(s=new Intl.NumberFormat(t,e),rw.set(n,s)),s}function Fl(t,e,n){return B8(e,n).format(t)}const Vx={values(t){return rt(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const s=this.chart.options.locale;let i,r=t;if(n.length>1){const l=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(l<1e-4||l>1e15)&&(i="scientific"),r=U8(t,n)}const o=Fi(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),Fl(t,s,c)},logarithmic(t,e,n){if(t===0)return"0";const s=n[e].significand||t/Math.pow(10,Math.floor(Fi(t)));return[1,2,3,5,10,15].includes(s)||e>.8*n.length?Vx.numeric.call(this,t,e,n):""}};function U8(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var yf={formatters:Vx};function $8(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:yf.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Zr=Object.create(null),Lg=Object.create(null);function gc(t,e){if(!e)return t;const n=e.split(".");for(let s=0,i=n.length;s<i;++s){const r=n[s];t=t[r]||(t[r]=Object.create(null))}return t}function _p(t,e,n){return typeof e=="string"?Gc(gc(t,e),n):Gc(gc(t,""),e)}class H8{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,i)=>mp(i.backgroundColor),this.hoverBorderColor=(s,i)=>mp(i.borderColor),this.hoverColor=(s,i)=>mp(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return _p(this,e,n)}get(e){return gc(this,e)}describe(e,n){return _p(Lg,e,n)}override(e,n){return _p(Zr,e,n)}route(e,n,s,i){const r=gc(this,e),o=gc(this,s),a="_"+n;Object.defineProperties(r,{[a]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const c=this[a],l=o[i];return Pe(c)?Object.assign({},l,c):we(c,l)},set(c){this[a]=c}}})}apply(e){e.forEach(n=>n(this))}}var bt=new H8({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[V8,F8,$8]);function z8(t){return!t||Be(t.size)||Be(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function zh(t,e,n,s,i){let r=e[i];return r||(r=e[i]=t.measureText(i).width,n.push(i)),r>s&&(s=r),s}function j8(t,e,n,s){s=s||{};let i=s.data=s.data||{},r=s.garbageCollect=s.garbageCollect||[];s.font!==e&&(i=s.data={},r=s.garbageCollect=[],s.font=e),t.save(),t.font=e;let o=0;const a=n.length;let c,l,u,h,d;for(c=0;c<a;c++)if(h=n[c],h!=null&&!rt(h))o=zh(t,i,r,o,h);else if(rt(h))for(l=0,u=h.length;l<u;l++)d=h[l],d!=null&&!rt(d)&&(o=zh(t,i,r,o,d));t.restore();const f=r.length/2;if(f>n.length){for(c=0;c<f;c++)delete i[r[c]];r.splice(0,f)}return o}function gr(t,e,n){const s=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*s)/s+i}function ow(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function Ng(t,e,n,s){Fx(t,e,n,s,null)}function Fx(t,e,n,s,i){let r,o,a,c,l,u,h,d;const f=e.pointStyle,g=e.rotation,m=e.radius;let _=(g||0)*R8;if(f&&typeof f=="object"&&(r=f.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){t.save(),t.translate(n,s),t.rotate(_),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!(isNaN(m)||m<=0)){switch(t.beginPath(),f){default:i?t.ellipse(n,s,i/2,m,0,0,ot):t.arc(n,s,m,0,ot),t.closePath();break;case"triangle":u=i?i/2:m,t.moveTo(n+Math.sin(_)*u,s-Math.cos(_)*m),_+=J0,t.lineTo(n+Math.sin(_)*u,s-Math.cos(_)*m),_+=J0,t.lineTo(n+Math.sin(_)*u,s-Math.cos(_)*m),t.closePath();break;case"rectRounded":l=m*.516,c=m-l,o=Math.cos(_+pr)*c,h=Math.cos(_+pr)*(i?i/2-l:c),a=Math.sin(_+pr)*c,d=Math.sin(_+pr)*(i?i/2-l:c),t.arc(n-h,s-a,l,_-at,_-St),t.arc(n+d,s-o,l,_-St,_),t.arc(n+h,s+a,l,_,_+St),t.arc(n-d,s+o,l,_+St,_+at),t.closePath();break;case"rect":if(!g){c=Math.SQRT1_2*m,u=i?i/2:c,t.rect(n-u,s-c,2*u,2*c);break}_+=pr;case"rectRot":h=Math.cos(_)*(i?i/2:m),o=Math.cos(_)*m,a=Math.sin(_)*m,d=Math.sin(_)*(i?i/2:m),t.moveTo(n-h,s-a),t.lineTo(n+d,s-o),t.lineTo(n+h,s+a),t.lineTo(n-d,s+o),t.closePath();break;case"crossRot":_+=pr;case"cross":h=Math.cos(_)*(i?i/2:m),o=Math.cos(_)*m,a=Math.sin(_)*m,d=Math.sin(_)*(i?i/2:m),t.moveTo(n-h,s-a),t.lineTo(n+h,s+a),t.moveTo(n+d,s-o),t.lineTo(n-d,s+o);break;case"star":h=Math.cos(_)*(i?i/2:m),o=Math.cos(_)*m,a=Math.sin(_)*m,d=Math.sin(_)*(i?i/2:m),t.moveTo(n-h,s-a),t.lineTo(n+h,s+a),t.moveTo(n+d,s-o),t.lineTo(n-d,s+o),_+=pr,h=Math.cos(_)*(i?i/2:m),o=Math.cos(_)*m,a=Math.sin(_)*m,d=Math.sin(_)*(i?i/2:m),t.moveTo(n-h,s-a),t.lineTo(n+h,s+a),t.moveTo(n+d,s-o),t.lineTo(n-d,s+o);break;case"line":o=i?i/2:Math.cos(_)*m,a=Math.sin(_)*m,t.moveTo(n-o,s-a),t.lineTo(n+o,s+a);break;case"dash":t.moveTo(n,s),t.lineTo(n+Math.cos(_)*(i?i/2:m),s+Math.sin(_)*m);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function ei(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function bf(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function vf(t){t.restore()}function W8(t,e,n,s,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const r=(e.x+n.x)/2;t.lineTo(r,e.y),t.lineTo(r,n.y)}else i==="after"!=!!s?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function q8(t,e,n,s){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function G8(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Be(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function K8(t,e,n,s,i){if(i.strikethrough||i.underline){const r=t.measureText(s),o=e-r.actualBoundingBoxLeft,a=e+r.actualBoundingBoxRight,c=n-r.actualBoundingBoxAscent,l=n+r.actualBoundingBoxDescent,u=i.strikethrough?(c+l)/2:l;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function Y8(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function eo(t,e,n,s,i,r={}){const o=rt(e)?e:[e],a=r.strokeWidth>0&&r.strokeColor!=="";let c,l;for(t.save(),t.font=i.string,G8(t,r),c=0;c<o.length;++c)l=o[c],r.backdrop&&Y8(t,r.backdrop),a&&(r.strokeColor&&(t.strokeStyle=r.strokeColor),Be(r.strokeWidth)||(t.lineWidth=r.strokeWidth),t.strokeText(l,n,s,r.maxWidth)),t.fillText(l,n,s,r.maxWidth),K8(t,n,s,l,r),s+=Number(i.lineHeight);t.restore()}function Qc(t,e){const{x:n,y:s,w:i,h:r,radius:o}=e;t.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*at,at,!0),t.lineTo(n,s+r-o.bottomLeft),t.arc(n+o.bottomLeft,s+r-o.bottomLeft,o.bottomLeft,at,St,!0),t.lineTo(n+i-o.bottomRight,s+r),t.arc(n+i-o.bottomRight,s+r-o.bottomRight,o.bottomRight,St,0,!0),t.lineTo(n+i,s+o.topRight),t.arc(n+i-o.topRight,s+o.topRight,o.topRight,0,-St,!0),t.lineTo(n+o.topLeft,s)}const Q8=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,X8=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function J8(t,e){const n=(""+t).match(Q8);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const Z8=t=>+t||0;function py(t,e){const n={},s=Pe(e),i=s?Object.keys(e):e,r=Pe(t)?s?o=>we(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=Z8(r(o));return n}function Bx(t){return py(t,{top:"y",right:"x",bottom:"y",left:"x"})}function $r(t){return py(t,["topLeft","topRight","bottomLeft","bottomRight"])}function hn(t){const e=Bx(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ft(t,e){t=t||{},e=e||bt.font;let n=we(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let s=we(t.style,e.style);s&&!(""+s).match(X8)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const i={family:we(t.family,e.family),lineHeight:J8(we(t.lineHeight,e.lineHeight),n),size:n,style:s,weight:we(t.weight,e.weight),string:""};return i.string=z8(i),i}function qa(t,e,n,s){let i=!0,r,o,a;for(r=0,o=t.length;r<o;++r)if(a=t[r],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),i=!1),n!==void 0&&rt(a)&&(a=a[n%a.length],i=!1),a!==void 0))return s&&!i&&(s.cacheable=!1),a}function eq(t,e,n){const{min:s,max:i}=t,r=xx(e,(i-s)/2),o=(a,c)=>n&&a===0?0:a+c;return{min:o(s,-Math.abs(r)),max:o(i,r)}}function lr(t,e){return Object.assign(Object.create(t),e)}function gy(t,e=[""],n,s,i=()=>t[0]){const r=n||t;typeof s>"u"&&(s=zx("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:r,_fallback:s,_getTarget:i,override:a=>gy([a,...t],e,r,s)};return new Proxy(o,{deleteProperty(a,c){return delete a[c],delete a._keys,delete t[0][c],!0},get(a,c){return $x(a,c,()=>cq(c,e,t,a))},getOwnPropertyDescriptor(a,c){return Reflect.getOwnPropertyDescriptor(a._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,c){return cw(a).includes(c)},ownKeys(a){return cw(a)},set(a,c,l){const u=a._storage||(a._storage=i());return a[c]=u[c]=l,delete a._keys,!0}})}function ca(t,e,n,s){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Ux(t,s),setContext:r=>ca(t,r,n,s),override:r=>ca(t.override(r),e,n,s)};return new Proxy(i,{deleteProperty(r,o){return delete r[o],delete t[o],!0},get(r,o,a){return $x(r,o,()=>nq(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(r,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(r,o,a){return t[o]=a,delete r[o],!0}})}function Ux(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:s=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:s,isScriptable:sr(n)?n:()=>n,isIndexable:sr(s)?s:()=>s}}const tq=(t,e)=>t?t+ly(e):e,my=(t,e)=>Pe(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function $x(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const s=n();return t[e]=s,s}function nq(t,e,n){const{_proxy:s,_context:i,_subProxy:r,_descriptors:o}=t;let a=s[e];return sr(a)&&o.isScriptable(e)&&(a=sq(e,a,t,n)),rt(a)&&a.length&&(a=iq(e,a,t,o.isIndexable)),my(e,a)&&(a=ca(a,i,r&&r[e],o)),a}function sq(t,e,n,s){const{_proxy:i,_context:r,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let c=e(r,o||s);return a.delete(t),my(t,c)&&(c=_y(i._scopes,i,t,c)),c}function iq(t,e,n,s){const{_proxy:i,_context:r,_subProxy:o,_descriptors:a}=n;if(typeof r.index<"u"&&s(t))return e[r.index%e.length];if(Pe(e[0])){const c=e,l=i._scopes.filter(u=>u!==c);e=[];for(const u of c){const h=_y(l,i,t,u);e.push(ca(h,r,o&&o[t],a))}}return e}function Hx(t,e,n){return sr(t)?t(e,n):t}const rq=(t,e)=>t===!0?e:typeof t=="string"?nr(e,t):void 0;function oq(t,e,n,s,i){for(const r of e){const o=rq(n,r);if(o){t.add(o);const a=Hx(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==s)return a}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function _y(t,e,n,s){const i=e._rootScopes,r=Hx(e._fallback,n,s),o=[...t,...i],a=new Set;a.add(s);let c=aw(a,o,n,r||n,s);return c===null||typeof r<"u"&&r!==n&&(c=aw(a,o,r,c,s),c===null)?!1:gy(Array.from(a),[""],i,r,()=>aq(e,n,s))}function aw(t,e,n,s,i){for(;n;)n=oq(t,e,n,s,i);return n}function aq(t,e,n){const s=t._getTarget();e in s||(s[e]={});const i=s[e];return rt(i)&&Pe(n)?n:i||{}}function cq(t,e,n,s){let i;for(const r of e)if(i=zx(tq(r,t),n),typeof i<"u")return my(t,i)?_y(n,s,t,i):i}function zx(t,e){for(const n of e){if(!n)continue;const s=n[t];if(typeof s<"u")return s}}function cw(t){let e=t._keys;return e||(e=t._keys=lq(t._scopes)),e}function lq(t){const e=new Set;for(const n of t)for(const s of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(s);return Array.from(e)}function jx(t,e,n,s){const{iScale:i}=t,{key:r="r"}=this._parsing,o=new Array(s);let a,c,l,u;for(a=0,c=s;a<c;++a)l=a+n,u=e[l],o[a]={r:i.parse(nr(u,r),l)};return o}const uq=Number.EPSILON||1e-14,la=(t,e)=>e<t.length&&!t[e].skip&&t[e],Wx=t=>t==="x"?"y":"x";function hq(t,e,n,s){const i=t.skip?e:t,r=e,o=n.skip?e:n,a=Mg(r,i),c=Mg(o,r);let l=a/(a+c),u=c/(a+c);l=isNaN(l)?0:l,u=isNaN(u)?0:u;const h=s*l,d=s*u;return{previous:{x:r.x-h*(o.x-i.x),y:r.y-h*(o.y-i.y)},next:{x:r.x+d*(o.x-i.x),y:r.y+d*(o.y-i.y)}}}function dq(t,e,n){const s=t.length;let i,r,o,a,c,l=la(t,0);for(let u=0;u<s-1;++u)if(c=l,l=la(t,u+1),!(!c||!l)){if(fc(e[u],0,uq)){n[u]=n[u+1]=0;continue}i=n[u]/e[u],r=n[u+1]/e[u],a=Math.pow(i,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=i*o*e[u],n[u+1]=r*o*e[u])}}function fq(t,e,n="x"){const s=Wx(n),i=t.length;let r,o,a,c=la(t,0);for(let l=0;l<i;++l){if(o=a,a=c,c=la(t,l+1),!a)continue;const u=a[n],h=a[s];o&&(r=(u-o[n])/3,a[`cp1${n}`]=u-r,a[`cp1${s}`]=h-r*e[l]),c&&(r=(c[n]-u)/3,a[`cp2${n}`]=u+r,a[`cp2${s}`]=h+r*e[l])}}function pq(t,e="x"){const n=Wx(e),s=t.length,i=Array(s).fill(0),r=Array(s);let o,a,c,l=la(t,0);for(o=0;o<s;++o)if(a=c,c=l,l=la(t,o+1),!!c){if(l){const u=l[e]-c[e];i[o]=u!==0?(l[n]-c[n])/u:0}r[o]=a?l?Os(i[o-1])!==Os(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}dq(t,i,r),fq(t,r,e)}function pu(t,e,n){return Math.max(Math.min(t,n),e)}function gq(t,e){let n,s,i,r,o,a=ei(t[0],e);for(n=0,s=t.length;n<s;++n)o=r,r=a,a=n<s-1&&ei(t[n+1],e),r&&(i=t[n],o&&(i.cp1x=pu(i.cp1x,e.left,e.right),i.cp1y=pu(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=pu(i.cp2x,e.left,e.right),i.cp2y=pu(i.cp2y,e.top,e.bottom)))}function mq(t,e,n,s,i){let r,o,a,c;if(e.spanGaps&&(t=t.filter(l=>!l.skip)),e.cubicInterpolationMode==="monotone")pq(t,i);else{let l=s?t[t.length-1]:t[0];for(r=0,o=t.length;r<o;++r)a=t[r],c=hq(l,a,t[Math.min(r+1,o-(s?0:1))%o],e.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,l=a}e.capBezierPoints&&gq(t,n)}function yy(){return typeof window<"u"&&typeof document<"u"}function by(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function jh(t,e,n){let s;return typeof t=="string"?(s=parseInt(t,10),t.indexOf("%")!==-1&&(s=s/100*e.parentNode[n])):s=t,s}const wf=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function _q(t,e){return wf(t).getPropertyValue(e)}const yq=["top","right","bottom","left"];function Hr(t,e,n){const s={};n=n?"-"+n:"";for(let i=0;i<4;i++){const r=yq[i];s[r]=parseFloat(t[e+"-"+r+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const bq=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function vq(t,e){const n=t.touches,s=n&&n.length?n[0]:t,{offsetX:i,offsetY:r}=s;let o=!1,a,c;if(bq(i,r,t.target))a=i,c=r;else{const l=e.getBoundingClientRect();a=s.clientX-l.left,c=s.clientY-l.top,o=!0}return{x:a,y:c,box:o}}function br(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:s}=e,i=wf(n),r=i.boxSizing==="border-box",o=Hr(i,"padding"),a=Hr(i,"border","width"),{x:c,y:l,box:u}=vq(t,n),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:g}=e;return r&&(f-=o.width+a.width,g-=o.height+a.height),{x:Math.round((c-h)/f*n.width/s),y:Math.round((l-d)/g*n.height/s)}}function wq(t,e,n){let s,i;if(e===void 0||n===void 0){const r=by(t);if(!r)e=t.clientWidth,n=t.clientHeight;else{const o=r.getBoundingClientRect(),a=wf(r),c=Hr(a,"border","width"),l=Hr(a,"padding");e=o.width-l.width-c.width,n=o.height-l.height-c.height,s=jh(a.maxWidth,r,"clientWidth"),i=jh(a.maxHeight,r,"clientHeight")}}return{width:e,height:n,maxWidth:s||Hh,maxHeight:i||Hh}}const gu=t=>Math.round(t*10)/10;function Eq(t,e,n,s){const i=wf(t),r=Hr(i,"margin"),o=jh(i.maxWidth,t,"clientWidth")||Hh,a=jh(i.maxHeight,t,"clientHeight")||Hh,c=wq(t,e,n);let{width:l,height:u}=c;if(i.boxSizing==="content-box"){const d=Hr(i,"border","width"),f=Hr(i,"padding");l-=f.width+d.width,u-=f.height+d.height}return l=Math.max(0,l-r.width),u=Math.max(0,s?l/s:u-r.height),l=gu(Math.min(l,o,c.maxWidth)),u=gu(Math.min(u,a,c.maxHeight)),l&&!u&&(u=gu(l/2)),(e!==void 0||n!==void 0)&&s&&c.height&&u>c.height&&(u=c.height,l=gu(Math.floor(u*s))),{width:l,height:u}}function lw(t,e,n){const s=e||1,i=Math.floor(t.height*s),r=Math.floor(t.width*s);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==s||o.height!==i||o.width!==r?(t.currentDevicePixelRatio=s,o.height=i,o.width=r,t.ctx.setTransform(s,0,0,s,0,0),!0):!1}const Tq=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};yy()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function uw(t,e){const n=_q(t,e),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function vr(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function Sq(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:s==="middle"?n<.5?t.y:e.y:s==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function Rq(t,e,n,s){const i={x:t.cp2x,y:t.cp2y},r={x:e.cp1x,y:e.cp1y},o=vr(t,i,n),a=vr(i,r,n),c=vr(r,e,n),l=vr(o,a,n),u=vr(a,c,n);return vr(l,u,n)}const Iq=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},xq=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Ho(t,e,n){return t?Iq(e,n):xq()}function qx(t,e){let n,s;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=s)}function Gx(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Kx(t){return t==="angle"?{between:Yc,compare:C8,normalize:An}:{between:Js,compare:(e,n)=>e-n,normalize:e=>e}}function hw({start:t,end:e,count:n,loop:s,style:i}){return{start:t%n,end:e%n,loop:s&&(e-t+1)%n===0,style:i}}function Cq(t,e,n){const{property:s,start:i,end:r}=n,{between:o,normalize:a}=Kx(s),c=e.length;let{start:l,end:u,loop:h}=t,d,f;if(h){for(l+=c,u+=c,d=0,f=c;d<f&&o(a(e[l%c][s]),i,r);++d)l--,u--;l%=c,u%=c}return u<l&&(u+=c),{start:l,end:u,loop:h,style:t.style}}function Yx(t,e,n){if(!n)return[t];const{property:s,start:i,end:r}=n,o=e.length,{compare:a,between:c,normalize:l}=Kx(s),{start:u,end:h,loop:d,style:f}=Cq(t,e,n),g=[];let m=!1,_=null,y,v,E;const T=()=>c(i,E,y)&&a(i,E)!==0,S=()=>a(r,y)===0||c(r,E,y),I=()=>m||T(),k=()=>!m||S();for(let R=u,N=u;R<=h;++R)v=e[R%o],!v.skip&&(y=l(v[s]),y!==E&&(m=c(y,i,r),_===null&&I()&&(_=a(y,i)===0?R:N),_!==null&&k()&&(g.push(hw({start:_,end:R,loop:d,count:o,style:f})),_=null),N=R,E=y));return _!==null&&g.push(hw({start:_,end:h,loop:d,count:o,style:f})),g}function Qx(t,e){const n=[],s=t.segments;for(let i=0;i<s.length;i++){const r=Yx(s[i],t.points,e);r.length&&n.push(...r)}return n}function kq(t,e,n,s){let i=0,r=e-1;if(n&&!s)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(r+=i);r>i&&t[r%e].skip;)r--;return r%=e,{start:i,end:r}}function Aq(t,e,n,s){const i=t.length,r=[];let o=e,a=t[e],c;for(c=e+1;c<=n;++c){const l=t[c%i];l.skip||l.stop?a.skip||(s=!1,r.push({start:e%i,end:(c-1)%i,loop:s}),e=o=l.stop?c:null):(o=c,a.skip&&(e=c)),a=l}return o!==null&&r.push({start:e%i,end:o%i,loop:s}),r}function Pq(t,e){const n=t.points,s=t.options.spanGaps,i=n.length;if(!i)return[];const r=!!t._loop,{start:o,end:a}=kq(n,i,r,s);if(s===!0)return dw(t,[{start:o,end:a,loop:r}],n,e);const c=a<o?a+i:a,l=!!t._fullLoop&&o===0&&a===i-1;return dw(t,Aq(n,o,c,l),n,e)}function dw(t,e,n,s){return!s||!s.setContext||!n?e:Dq(t,e,n,s)}function Dq(t,e,n,s){const i=t._chart.getContext(),r=fw(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,c=n.length,l=[];let u=r,h=e[0].start,d=h;function f(g,m,_,y){const v=a?-1:1;if(g!==m){for(g+=c;n[g%c].skip;)g-=v;for(;n[m%c].skip;)m+=v;g%c!==m%c&&(l.push({start:g%c,end:m%c,loop:_,style:y}),u=y,h=m%c)}}for(const g of e){h=a?h:g.start;let m=n[h%c],_;for(d=h+1;d<=g.end;d++){const y=n[d%c];_=fw(s.setContext(lr(i,{type:"segment",p0:m,p1:y,p0DataIndex:(d-1)%c,p1DataIndex:d%c,datasetIndex:o}))),Oq(_,u)&&f(h,d-1,g.loop,u),m=y,u=_}h<d-1&&f(h,d-1,g.loop,u)}return l}function fw(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Oq(t,e){if(!e)return!1;const n=[],s=function(i,r){return fy(r)?(n.includes(r)||n.push(r),n.indexOf(r)):r};return JSON.stringify(t,s)!==JSON.stringify(e,s)}/*!
 * Chart.js v4.4.2
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class Mq{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,s,i){const r=n.listeners[i],o=n.duration;r.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Ox.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((s,i)=>{if(!s.running||!s.items.length)return;const r=s.items;let o=r.length-1,a=!1,c;for(;o>=0;--o)c=r[o],c._active?(c._total>s.duration&&(s.duration=c._total),c.tick(e),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,s,e,"progress")),r.length||(s.running=!1,this._notify(i,s,e,"complete"),s.initial=!1),n+=r.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let s=n.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,s)),s}listen(e,n,s){this._getAnims(e).listeners[n].push(s)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,i)=>Math.max(s,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const s=n.items;let i=s.length-1;for(;i>=0;--i)s[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var qs=new Mq;const pw="transparent",Lq={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const s=iw(t||pw),i=s.valid&&iw(e||pw);return i&&i.valid?i.mix(s,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class Nq{constructor(e,n,s,i){const r=n[s];i=qa([e.to,i,r,e.from]);const o=qa([e.from,r,i]);this._active=!0,this._fn=e.fn||Lq[e.type||typeof o],this._easing=pc[e.easing]||pc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=s,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,s){if(this._active){this._notify(!1);const i=this._target[this._prop],r=s-this._start,o=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=qa([e.to,n,i,e.from]),this._from=qa([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,s=this._duration,i=this._prop,r=this._from,o=this._loop,a=this._to;let c;if(this._active=r!==a&&(o||n<s),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=r;return}c=n/s%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[i]=this._fn(r,a,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,s)=>{e.push({res:n,rej:s})})}_notify(e){const n=e?"res":"rej",s=this._promises||[];for(let i=0;i<s.length;i++)s[i][n]()}}class Xx{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Pe(e))return;const n=Object.keys(bt.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const r=e[i];if(!Pe(r))return;const o={};for(const a of n)o[a]=r[a];(rt(r.properties)&&r.properties||[i]).forEach(a=>{(a===i||!s.has(a))&&s.set(a,o)})})}_animateOptions(e,n){const s=n.options,i=Fq(e,s);if(!i)return[];const r=this._createAnimations(i,s);return s.$shared&&Vq(e.options.$animations,s).then(()=>{e.options=s},()=>{}),r}_createAnimations(e,n){const s=this._properties,i=[],r=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let c;for(c=o.length-1;c>=0;--c){const l=o[c];if(l.charAt(0)==="$")continue;if(l==="options"){i.push(...this._animateOptions(e,n));continue}const u=n[l];let h=r[l];const d=s.get(l);if(h)if(d&&h.active()){h.update(d,u,a);continue}else h.cancel();if(!d||!d.duration){e[l]=u;continue}r[l]=h=new Nq(d,e,l,u),i.push(h)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const s=this._createAnimations(e,n);if(s.length)return qs.add(this._chart,s),!0}}function Vq(t,e){const n=[],s=Object.keys(e);for(let i=0;i<s.length;i++){const r=t[s[i]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function Fq(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function gw(t,e){const n=t&&t.options||{},s=n.reverse,i=n.min===void 0?e:0,r=n.max===void 0?e:0;return{start:s?r:i,end:s?i:r}}function Bq(t,e,n){if(n===!1)return!1;const s=gw(t,n),i=gw(e,n);return{top:i.end,right:s.end,bottom:i.start,left:s.start}}function Uq(t){let e,n,s,i;return Pe(t)?(e=t.top,n=t.right,s=t.bottom,i=t.left):e=n=s=i=t,{top:e,right:n,bottom:s,left:i,disabled:t===!1}}function Jx(t,e){const n=[],s=t._getSortedDatasetMetas(e);let i,r;for(i=0,r=s.length;i<r;++i)n.push(s[i].index);return n}function mw(t,e,n,s={}){const i=t.keys,r=s.mode==="single";let o,a,c,l;if(e!==null){for(o=0,a=i.length;o<a;++o){if(c=+i[o],c===n){if(s.all)continue;break}l=t.values[c],yt(l)&&(r||e===0||Os(e)===Os(l))&&(e+=l)}return e}}function $q(t){const e=Object.keys(t),n=new Array(e.length);let s,i,r;for(s=0,i=e.length;s<i;++s)r=e[s],n[s]={x:r,y:t[r]};return n}function _w(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function Hq(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function zq(t){const{min:e,max:n,minDefined:s,maxDefined:i}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function jq(t,e,n){const s=t[e]||(t[e]={});return s[n]||(s[n]={})}function yw(t,e,n,s){for(const i of e.getMatchingVisibleMetas(s).reverse()){const r=t[i.index];if(n&&r>0||!n&&r<0)return i.index}return null}function bw(t,e){const{chart:n,_cachedMeta:s}=t,i=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:a}=s,c=r.axis,l=o.axis,u=Hq(r,o,s),h=e.length;let d;for(let f=0;f<h;++f){const g=e[f],{[c]:m,[l]:_}=g,y=g._stacks||(g._stacks={});d=y[l]=jq(i,u,m),d[a]=_,d._top=yw(d,o,!0,s.type),d._bottom=yw(d,o,!1,s.type);const v=d._visualValues||(d._visualValues={});v[a]=_}}function yp(t,e){const n=t.scales;return Object.keys(n).filter(s=>n[s].axis===e).shift()}function Wq(t,e){return lr(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function qq(t,e,n){return lr(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function ka(t,e){const n=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const i of e){const r=i._stacks;if(!r||r[s]===void 0||r[s][n]===void 0)return;delete r[s][n],r[s]._visualValues!==void 0&&r[s]._visualValues[n]!==void 0&&delete r[s]._visualValues[n]}}}const bp=t=>t==="reset"||t==="none",vw=(t,e)=>e?t:Object.assign({},t),Gq=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Jx(n,!0),values:null};class ss{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=_w(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ka(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,s=this.getDataset(),i=(h,d,f,g)=>h==="x"?d:h==="r"?g:f,r=n.xAxisID=we(s.xAxisID,yp(e,"x")),o=n.yAxisID=we(s.yAxisID,yp(e,"y")),a=n.rAxisID=we(s.rAxisID,yp(e,"r")),c=n.indexAxis,l=n.iAxisID=i(c,r,o,a),u=n.vAxisID=i(c,o,r,a);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(l),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&tw(this._data,this),e._stacked&&ka(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),s=this._data;if(Pe(n))this._data=$q(n);else if(s!==n){if(s){tw(s,this);const i=this._cachedMeta;ka(i),i._parsed=[]}n&&Object.isExtensible(n)&&D8(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,s=this.getDataset();let i=!1;this._dataCheck();const r=n._stacked;n._stacked=_w(n.vScale,n),n.stack!==s.stack&&(i=!0,ka(n),n.stack=s.stack),this._resyncElements(e),(i||r!==n._stacked)&&bw(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:s,_data:i}=this,{iScale:r,_stacked:o}=s,a=r.axis;let c=e===0&&n===i.length?!0:s._sorted,l=e>0&&s._parsed[e-1],u,h,d;if(this._parsing===!1)s._parsed=i,s._sorted=!0,d=i;else{rt(i[e])?d=this.parseArrayData(s,i,e,n):Pe(i[e])?d=this.parseObjectData(s,i,e,n):d=this.parsePrimitiveData(s,i,e,n);const f=()=>h[a]===null||l&&h[a]<l[a];for(u=0;u<n;++u)s._parsed[u+e]=h=d[u],c&&(f()&&(c=!1),l=h);s._sorted=c}o&&bw(this,d)}parsePrimitiveData(e,n,s,i){const{iScale:r,vScale:o}=e,a=r.axis,c=o.axis,l=r.getLabels(),u=r===o,h=new Array(i);let d,f,g;for(d=0,f=i;d<f;++d)g=d+s,h[d]={[a]:u||r.parse(l[g],g),[c]:o.parse(n[g],g)};return h}parseArrayData(e,n,s,i){const{xScale:r,yScale:o}=e,a=new Array(i);let c,l,u,h;for(c=0,l=i;c<l;++c)u=c+s,h=n[u],a[c]={x:r.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,n,s,i){const{xScale:r,yScale:o}=e,{xAxisKey:a="x",yAxisKey:c="y"}=this._parsing,l=new Array(i);let u,h,d,f;for(u=0,h=i;u<h;++u)d=u+s,f=n[d],l[u]={x:r.parse(nr(f,a),d),y:o.parse(nr(f,c),d)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,s){const i=this.chart,r=this._cachedMeta,o=n[e.axis],a={keys:Jx(i,!0),values:n._stacks[e.axis]._visualValues};return mw(a,o,r.index,{mode:s})}updateRangeFromParsed(e,n,s,i){const r=s[n.axis];let o=r===null?NaN:r;const a=i&&s._stacks[n.axis];i&&a&&(i.values=a,o=mw(i,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const s=this._cachedMeta,i=s._parsed,r=s._sorted&&e===s.iScale,o=i.length,a=this._getOtherScale(e),c=Gq(n,s,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=zq(a);let d,f;function g(){f=i[d];const m=f[a.axis];return!yt(f[e.axis])||u>m||h<m}for(d=0;d<o&&!(!g()&&(this.updateRangeFromParsed(l,e,f,c),r));++d);if(r){for(d=o-1;d>=0;--d)if(!g()){this.updateRangeFromParsed(l,e,f,c);break}}return l}getAllParsedValues(e){const n=this._cachedMeta._parsed,s=[];let i,r,o;for(i=0,r=n.length;i<r;++i)o=n[i][e.axis],yt(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,s=n.iScale,i=n.vScale,r=this.getParsed(e);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=Uq(we(this.options.clip,Bq(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,s=this._cachedMeta,i=s.data||[],r=n.chartArea,o=[],a=this._drawStart||0,c=this._drawCount||i.length-a,l=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(e,r,a,c),u=a;u<a+c;++u){const h=i[u];h.hidden||(h.active&&l?o.push(h):h.draw(e,r))}for(u=0;u<o.length;++u)o[u].draw(e,r)}getStyle(e,n){const s=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,n,s){const i=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];r=o.$context||(o.$context=qq(this.getContext(),e,o)),r.parsed=this.getParsed(e),r.raw=i.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=Wq(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=s,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",s){const i=n==="active",r=this._cachedDataOpts,o=e+"-"+n,a=r[o],c=this.enableOptionSharing&&Kc(s);if(a)return vw(a,c);const l=this.chart.config,u=l.datasetElementScopeKeys(this._type,e),h=i?[`${e}Hover`,"hover",e,""]:[e,""],d=l.getOptionScopes(this.getDataset(),u),f=Object.keys(bt.elements[e]),g=()=>this.getContext(s,i,n),m=l.resolveNamedOptions(d,f,g,h);return m.$shared&&(m.$shared=c,r[o]=Object.freeze(vw(m,c))),m}_resolveAnimations(e,n,s){const i=this.chart,r=this._cachedDataOpts,o=`animation-${n}`,a=r[o];if(a)return a;let c;if(i.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),d=u.getOptionScopes(this.getDataset(),h);c=u.createResolver(d,this.getContext(e,s,n))}const l=new Xx(i,c&&c.animations);return c&&c._cacheable&&(r[o]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||bp(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const s=this.resolveDataElementOptions(e,n),i=this._sharedOptions,r=this.getSharedOptions(s),o=this.includeOptions(n,r)||r!==i;return this.updateSharedOptions(r,n,s),{sharedOptions:r,includeOptions:o}}updateElement(e,n,s,i){bp(i)?Object.assign(e,s):this._resolveAnimations(n,i).update(e,s)}updateSharedOptions(e,n,s){e&&!bp(n)&&this._resolveAnimations(void 0,n).update(e,s)}_setStyle(e,n,s,i){e.active=i;const r=this.getStyle(n,i);this._resolveAnimations(n,s,i).update(e,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(e,n,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,n,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,s=this._cachedMeta.data;for(const[a,c,l]of this._syncList)this[a](c,l);this._syncList=[];const i=s.length,r=n.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,e):r<i&&this._removeElements(r,i-r)}_insertElements(e,n,s=!0){const i=this._cachedMeta,r=i.data,o=e+n;let a;const c=l=>{for(l.length+=n,a=l.length-1;a>=o;a--)l[a]=l[a-n]};for(c(r),a=e;a<o;++a)r[a]=new this.dataElementType;this._parsing&&c(i._parsed),this.parse(e,n),s&&this.updateElements(r,e,n,"reset")}updateElements(e,n,s,i){}_removeElements(e,n){const s=this._cachedMeta;if(this._parsing){const i=s._parsed.splice(e,n);s._stacked&&ka(s,i)}s.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,s,i]=e;this[n](s,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}x(ss,"defaults",{}),x(ss,"datasetElementType",null),x(ss,"dataElementType",null);function Kq(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let s=[];for(let i=0,r=n.length;i<r;i++)s=s.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=Dx(s.sort((i,r)=>i-r))}return t._cache.$bar}function Yq(t){const e=t.iScale,n=Kq(e,t.type);let s=e._length,i,r,o,a;const c=()=>{o===32767||o===-32768||(Kc(a)&&(s=Math.min(s,Math.abs(o-a)||s)),a=o)};for(i=0,r=n.length;i<r;++i)o=e.getPixelForValue(n[i]),c();for(a=void 0,i=0,r=e.ticks.length;i<r;++i)o=e.getPixelForTick(i),c();return s}function Qq(t,e,n,s){const i=n.barThickness;let r,o;return Be(i)?(r=e.min*n.categoryPercentage,o=n.barPercentage):(r=i*s,o=1),{chunk:r/s,ratio:o,start:e.pixels[t]-r/2}}function Xq(t,e,n,s){const i=e.pixels,r=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const c=n.categoryPercentage;o===null&&(o=r-(a===null?e.end-e.start:a-r)),a===null&&(a=r+r-o);const l=r-(r-Math.min(o,a))/2*c;return{chunk:Math.abs(a-o)/2*c/s,ratio:n.barPercentage,start:l}}function Jq(t,e,n,s){const i=n.parse(t[0],s),r=n.parse(t[1],s),o=Math.min(i,r),a=Math.max(i,r);let c=o,l=a;Math.abs(o)>Math.abs(a)&&(c=a,l=o),e[n.axis]=l,e._custom={barStart:c,barEnd:l,start:i,end:r,min:o,max:a}}function Zx(t,e,n,s){return rt(t)?Jq(t,e,n,s):e[n.axis]=n.parse(t,s),e}function ww(t,e,n,s){const i=t.iScale,r=t.vScale,o=i.getLabels(),a=i===r,c=[];let l,u,h,d;for(l=n,u=n+s;l<u;++l)d=e[l],h={},h[i.axis]=a||i.parse(o[l],l),c.push(Zx(d,h,r,l));return c}function vp(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function Zq(t,e,n){return t!==0?Os(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function e7(t){let e,n,s,i,r;return t.horizontal?(e=t.base>t.x,n="left",s="right"):(e=t.base<t.y,n="bottom",s="top"),e?(i="end",r="start"):(i="start",r="end"),{start:n,end:s,reverse:e,top:i,bottom:r}}function t7(t,e,n,s){let i=e.borderSkipped;const r={};if(!i){t.borderSkipped=r;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:c,top:l,bottom:u}=e7(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===s?i=l:(n._bottom||0)===s?i=u:(r[Ew(u,o,a,c)]=!0,i=l)),r[Ew(i,o,a,c)]=!0,t.borderSkipped=r}function Ew(t,e,n,s){return s?(t=n7(t,e,n),t=Tw(t,n,e)):t=Tw(t,e,n),t}function n7(t,e,n){return t===e?n:t===n?e:t}function Tw(t,e,n){return t==="start"?e:t==="end"?n:t}function s7(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class Gu extends ss{parsePrimitiveData(e,n,s,i){return ww(e,n,s,i)}parseArrayData(e,n,s,i){return ww(e,n,s,i)}parseObjectData(e,n,s,i){const{iScale:r,vScale:o}=e,{xAxisKey:a="x",yAxisKey:c="y"}=this._parsing,l=r.axis==="x"?a:c,u=o.axis==="x"?a:c,h=[];let d,f,g,m;for(d=s,f=s+i;d<f;++d)m=n[d],g={},g[r.axis]=r.parse(nr(m,l),d),h.push(Zx(nr(m,u),g,o,d));return h}updateRangeFromParsed(e,n,s,i){super.updateRangeFromParsed(e,n,s,i);const r=s._custom;r&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:s,vScale:i}=n,r=this.getParsed(e),o=r._custom,a=vp(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+s.getLabelForValue(r[s.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,s,i){const r=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,c=a.getBasePixel(),l=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,i);for(let f=n;f<n+s;f++){const g=this.getParsed(f),m=r||Be(g[a.axis])?{base:c,head:c}:this._calculateBarValuePixels(f),_=this._calculateBarIndexPixels(f,u),y=(g._stacks||{})[a.axis],v={horizontal:l,base:m.base,enableBorderRadius:!y||vp(g._custom)||o===y._top||o===y._bottom,x:l?m.head:_.center,y:l?_.center:m.head,height:l?_.size:Math.abs(m.size),width:l?Math.abs(m.size):_.size};d&&(v.options=h||this.resolveDataElementOptions(f,e[f].active?"active":i));const E=v.options||e[f].options;t7(v,E,y,o),s7(v,E,u.ratio),this.updateElement(e[f],f,v,i)}}_getStacks(e,n){const{iScale:s}=this._cachedMeta,i=s.getMatchingVisibleMetas(this._type).filter(c=>c.controller.options.grouped),r=s.options.stacked,o=[],a=c=>{const l=c.controller.getParsed(n),u=l&&l[c.vScale.axis];if(Be(u)||isNaN(u))return!0};for(const c of i)if(!(n!==void 0&&a(c))&&((r===!1||o.indexOf(c.stack)===-1||r===void 0&&c.stack===void 0)&&o.push(c.stack),c.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,s){const i=this._getStacks(e,s),r=n!==void 0?i.indexOf(n):-1;return r===-1?i.length-1:r}_getRuler(){const e=this.options,n=this._cachedMeta,s=n.iScale,i=[];let r,o;for(r=0,o=n.data.length;r<o;++r)i.push(s.getPixelForValue(this.getParsed(r)[s.axis],r));const a=e.barThickness;return{min:a||Yq(n),pixels:i,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:s,index:i},options:{base:r,minBarLength:o}}=this,a=r||0,c=this.getParsed(e),l=c._custom,u=vp(l);let h=c[n.axis],d=0,f=s?this.applyStack(n,c,s):h,g,m;f!==h&&(d=f-h,f=h),u&&(h=l.barStart,f=l.barEnd-l.barStart,h!==0&&Os(h)!==Os(l.barEnd)&&(d=0),d+=h);const _=!Be(r)&&!u?r:d;let y=n.getPixelForValue(_);if(this.chart.getDataVisibility(e)?g=n.getPixelForValue(d+f):g=y,m=g-y,Math.abs(m)<o){m=Zq(m,n,a)*o,h===a&&(y-=m/2);const v=n.getPixelForDecimal(0),E=n.getPixelForDecimal(1),T=Math.min(v,E),S=Math.max(v,E);y=Math.max(Math.min(y,S),T),g=y+m,s&&!u&&(c._stacks[n.axis]._visualValues[i]=n.getValueForPixel(g)-n.getValueForPixel(y))}if(y===n.getPixelForValue(a)){const v=Os(m)*n.getLineWidthForValue(a)/2;y+=v,m-=v}return{size:m,base:y,head:g,center:g+m/2}}_calculateBarIndexPixels(e,n){const s=n.scale,i=this.options,r=i.skipNull,o=we(i.maxBarThickness,1/0);let a,c;if(n.grouped){const l=r?this._getStackCount(e):n.stackCount,u=i.barThickness==="flex"?Xq(e,n,i,l):Qq(e,n,i,l),h=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0);a=u.start+u.chunk*h+u.chunk/2,c=Math.min(o,u.chunk*u.ratio)}else a=s.getPixelForValue(this.getParsed(e)[s.axis],e),c=Math.min(o,n.min*n.ratio);return{base:a-c/2,head:a+c/2,center:a,size:c}}draw(){const e=this._cachedMeta,n=e.vScale,s=e.data,i=s.length;let r=0;for(;r<i;++r)this.getParsed(r)[n.axis]!==null&&s[r].draw(this._ctx)}}x(Gu,"id","bar"),x(Gu,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),x(Gu,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Ku extends ss{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,s,i){const r=super.parsePrimitiveData(e,n,s,i);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+s).radius;return r}parseArrayData(e,n,s,i){const r=super.parseArrayData(e,n,s,i);for(let o=0;o<r.length;o++){const a=n[s+o];r[o]._custom=we(a[2],this.resolveDataElementOptions(o+s).radius)}return r}parseObjectData(e,n,s,i){const r=super.parseObjectData(e,n,s,i);for(let o=0;o<r.length;o++){const a=n[s+o];r[o]._custom=we(a&&a.r&&+a.r,this.resolveDataElementOptions(o+s).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let s=e.length-1;s>=0;--s)n=Math.max(n,e[s].size(this.resolveDataElementOptions(s))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart.data.labels||[],{xScale:i,yScale:r}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),c=r.getLabelForValue(o.y),l=o._custom;return{label:s[e]||"",value:"("+a+", "+c+(l?", "+l:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,s,i){const r=i==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:c,includeOptions:l}=this._getSharedOptions(n,i),u=o.axis,h=a.axis;for(let d=n;d<n+s;d++){const f=e[d],g=!r&&this.getParsed(d),m={},_=m[u]=r?o.getPixelForDecimal(.5):o.getPixelForValue(g[u]),y=m[h]=r?a.getBasePixel():a.getPixelForValue(g[h]);m.skip=isNaN(_)||isNaN(y),l&&(m.options=c||this.resolveDataElementOptions(d,f.active?"active":i),r&&(m.options.radius=0)),this.updateElement(f,d,m,i)}}resolveDataElementOptions(e,n){const s=this.getParsed(e);let i=super.resolveDataElementOptions(e,n);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return n!=="active"&&(i.radius=0),i.radius+=we(s&&s._custom,r),i}}x(Ku,"id","bubble"),x(Ku,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),x(Ku,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function i7(t,e,n){let s=1,i=1,r=0,o=0;if(e<ot){const a=t,c=a+e,l=Math.cos(a),u=Math.sin(a),h=Math.cos(c),d=Math.sin(c),f=(E,T,S)=>Yc(E,a,c,!0)?1:Math.max(T,T*n,S,S*n),g=(E,T,S)=>Yc(E,a,c,!0)?-1:Math.min(T,T*n,S,S*n),m=f(0,l,h),_=f(St,u,d),y=g(at,l,h),v=g(at+St,u,d);s=(m-y)/2,i=(_-v)/2,r=-(m+y)/2,o=-(_+v)/2}return{ratioX:s,ratioY:i,offsetX:r,offsetY:o}}class Or extends ss{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const s=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=s;else{let r=c=>+s[c];if(Pe(s[e])){const{key:c="value"}=this._parsing;r=l=>+nr(s[l],c)}let o,a;for(o=e,a=e+n;o<a;++o)i._parsed[o]=r(o)}}_getRotation(){return ns(this.options.rotation-90)}_getCircumference(){return ns(this.options.circumference)}_getRotationExtents(){let e=ot,n=-ot;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const i=this.chart.getDatasetMeta(s).controller,r=i._getRotation(),o=i._getCircumference();e=Math.min(e,r),n=Math.max(n,r+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:s}=n,i=this._cachedMeta,r=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),c=Math.min(y8(this.options.cutout,a),1),l=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:d,ratioY:f,offsetX:g,offsetY:m}=i7(h,u,c),_=(s.width-o)/d,y=(s.height-o)/f,v=Math.max(Math.min(_,y)/2,0),E=xx(this.options.radius,v),T=Math.max(E*c,0),S=(E-T)/this._getVisibleDatasetWeightTotal();this.offsetX=g*E,this.offsetY=m*E,i.total=this.calculateTotal(),this.outerRadius=E-S*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-S*l,0),this.updateElements(r,0,r.length,e)}_circumference(e,n){const s=this.options,i=this._cachedMeta,r=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*r/ot)}updateElements(e,n,s,i){const r=i==="reset",o=this.chart,a=o.chartArea,l=o.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,d=r&&l.animateScale,f=d?0:this.innerRadius,g=d?0:this.outerRadius,{sharedOptions:m,includeOptions:_}=this._getSharedOptions(n,i);let y=this._getRotation(),v;for(v=0;v<n;++v)y+=this._circumference(v,r);for(v=n;v<n+s;++v){const E=this._circumference(v,r),T=e[v],S={x:u+this.offsetX,y:h+this.offsetY,startAngle:y,endAngle:y+E,circumference:E,outerRadius:g,innerRadius:f};_&&(S.options=m||this.resolveDataElementOptions(v,T.active?"active":i)),y+=E,this.updateElement(T,v,S,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let s=0,i;for(i=0;i<n.length;i++){const r=e._parsed[i];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(s+=Math.abs(r))}return s}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?ot*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart,i=s.data.labels||[],r=Fl(n._parsed[e],s.options.locale);return{label:i[e]||"",value:r}}getMaxBorderWidth(e){let n=0;const s=this.chart;let i,r,o,a,c;if(!e){for(i=0,r=s.data.datasets.length;i<r;++i)if(s.isDatasetVisible(i)){o=s.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,r=e.length;i<r;++i)c=a.resolveDataElementOptions(i),c.borderAlign!=="inner"&&(n=Math.max(n,c.borderWidth||0,c.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let s=0,i=e.length;s<i;++s){const r=this.resolveDataElementOptions(s);n=Math.max(n,r.offset||0,r.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(e){return Math.max(we(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}x(Or,"id","doughnut"),x(Or,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),x(Or,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),x(Or,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:s,color:i}}=e.legend.options;return n.labels.map((r,o)=>{const c=e.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:i,lineWidth:c.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}});class Yu extends ss{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:s,data:i=[],_dataset:r}=n,o=this.chart._animationsDisabled;let{start:a,count:c}=Lx(n,i,o);this._drawStart=a,this._drawCount=c,Nx(n)&&(a=0,c=i.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!r._decimated,s.points=i;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:l},e),this.updateElements(i,a,c,e)}updateElements(e,n,s,i){const r=i==="reset",{iScale:o,vScale:a,_stacked:c,_dataset:l}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(n,i),d=o.axis,f=a.axis,{spanGaps:g,segment:m}=this.options,_=aa(g)?g:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||r||i==="none",v=n+s,E=e.length;let T=n>0&&this.getParsed(n-1);for(let S=0;S<E;++S){const I=e[S],k=y?I:{};if(S<n||S>=v){k.skip=!0;continue}const R=this.getParsed(S),N=Be(R[f]),$=k[d]=o.getPixelForValue(R[d],S),X=k[f]=r||N?a.getBasePixel():a.getPixelForValue(c?this.applyStack(a,R,c):R[f],S);k.skip=isNaN($)||isNaN(X)||N,k.stop=S>0&&Math.abs(R[d]-T[d])>_,m&&(k.parsed=R,k.raw=l.data[S]),h&&(k.options=u||this.resolveDataElementOptions(S,I.active?"active":i)),y||this.updateElement(I,S,k,i),T=R}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,s=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return s;const r=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,r,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}x(Yu,"id","line"),x(Yu,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),x(Yu,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class mc extends ss{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart,i=s.data.labels||[],r=Fl(n._parsed[e].r,s.options.locale);return{label:i[e]||"",value:r}}parseObjectData(e,n,s,i){return jx.bind(this)(e,n,s,i)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((s,i)=>{const r=this.getParsed(i).r;!isNaN(r)&&this.chart.getDataVisibility(i)&&(r<n.min&&(n.min=r),r>n.max&&(n.max=r))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,s=e.options,i=Math.min(n.right-n.left,n.bottom-n.top),r=Math.max(i/2,0),o=Math.max(s.cutoutPercentage?r/100*s.cutoutPercentage:1,0),a=(r-o)/e.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,s,i){const r=i==="reset",o=this.chart,c=o.options.animation,l=this._cachedMeta.rScale,u=l.xCenter,h=l.yCenter,d=l.getIndexAngle(0)-.5*at;let f=d,g;const m=360/this.countVisibleElements();for(g=0;g<n;++g)f+=this._computeAngle(g,i,m);for(g=n;g<n+s;g++){const _=e[g];let y=f,v=f+this._computeAngle(g,i,m),E=o.getDataVisibility(g)?l.getDistanceFromCenterForValue(this.getParsed(g).r):0;f=v,r&&(c.animateScale&&(E=0),c.animateRotate&&(y=v=d));const T={x:u,y:h,innerRadius:0,outerRadius:E,startAngle:y,endAngle:v,options:this.resolveDataElementOptions(g,_.active?"active":i)};this.updateElement(_,g,T,i)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((s,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&n++}),n}_computeAngle(e,n,s){return this.chart.getDataVisibility(e)?ns(this.resolveDataElementOptions(e,n).angle||s):0}}x(mc,"id","polarArea"),x(mc,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),x(mc,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:s,color:i}}=e.legend.options;return n.labels.map((r,o)=>{const c=e.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:i,lineWidth:c.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Vg extends Or{}x(Vg,"id","pie"),x(Vg,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Qu extends ss{getLabelAndValue(e){const n=this._cachedMeta.vScale,s=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(s[n.axis])}}parseObjectData(e,n,s,i){return jx.bind(this)(e,n,s,i)}update(e){const n=this._cachedMeta,s=n.dataset,i=n.data||[],r=n.iScale.getLabels();if(s.points=i,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===i.length,options:o};this.updateElement(s,void 0,a,e)}this.updateElements(i,0,i.length,e)}updateElements(e,n,s,i){const r=this._cachedMeta.rScale,o=i==="reset";for(let a=n;a<n+s;a++){const c=e[a],l=this.resolveDataElementOptions(a,c.active?"active":i),u=r.getPointPositionForValue(a,this.getParsed(a).r),h=o?r.xCenter:u.x,d=o?r.yCenter:u.y,f={x:h,y:d,angle:u.angle,skip:isNaN(h)||isNaN(d),options:l};this.updateElement(c,a,f,i)}}}x(Qu,"id","radar"),x(Qu,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),x(Qu,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Xu extends ss{getLabelAndValue(e){const n=this._cachedMeta,s=this.chart.data.labels||[],{xScale:i,yScale:r}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),c=r.getLabelForValue(o.y);return{label:s[e]||"",value:"("+a+", "+c+")"}}update(e){const n=this._cachedMeta,{data:s=[]}=n,i=this.chart._animationsDisabled;let{start:r,count:o}=Lx(n,s,i);if(this._drawStart=r,this._drawCount=o,Nx(n)&&(r=0,o=s.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:c}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!c._decimated,a.points=s;const l=this.resolveDatasetElementOptions(e);l.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:l},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(s,r,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,s,i){const r=i==="reset",{iScale:o,vScale:a,_stacked:c,_dataset:l}=this._cachedMeta,u=this.resolveDataElementOptions(n,i),h=this.getSharedOptions(u),d=this.includeOptions(i,h),f=o.axis,g=a.axis,{spanGaps:m,segment:_}=this.options,y=aa(m)?m:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||r||i==="none";let E=n>0&&this.getParsed(n-1);for(let T=n;T<n+s;++T){const S=e[T],I=this.getParsed(T),k=v?S:{},R=Be(I[g]),N=k[f]=o.getPixelForValue(I[f],T),$=k[g]=r||R?a.getBasePixel():a.getPixelForValue(c?this.applyStack(a,I,c):I[g],T);k.skip=isNaN(N)||isNaN($)||R,k.stop=T>0&&Math.abs(I[f]-E[f])>y,_&&(k.parsed=I,k.raw=l.data[T]),d&&(k.options=h||this.resolveDataElementOptions(T,S.active?"active":i)),v||this.updateElement(S,T,k,i),E=I}this.updateSharedOptions(h,i,u)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let c=n.length-1;c>=0;--c)a=Math.max(a,n[c].size(this.resolveDataElementOptions(c))/2);return a>0&&a}const s=e.dataset,i=s.options&&s.options.borderWidth||0;if(!n.length)return i;const r=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,r,o)/2}}x(Xu,"id","scatter"),x(Xu,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),x(Xu,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var r7=Object.freeze({__proto__:null,BarController:Gu,BubbleController:Ku,DoughnutController:Or,LineController:Yu,PieController:Vg,PolarAreaController:mc,RadarController:Qu,ScatterController:Xu});function mr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class vy{constructor(e){x(this,"options");this.options=e||{}}static override(e){Object.assign(vy.prototype,e)}init(){}formats(){return mr()}parse(){return mr()}format(){return mr()}add(){return mr()}diff(){return mr()}startOf(){return mr()}endOf(){return mr()}}var eC={_date:vy};function o7(t,e,n,s){const{controller:i,data:r,_sorted:o}=t,a=i._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&r.length){const c=a._reversePixels?A8:Zs;if(s){if(i._sharedOptions){const l=r[0],u=typeof l.getRange=="function"&&l.getRange(e);if(u){const h=c(r,e,n-u),d=c(r,e,n+u);return{lo:h.lo,hi:d.hi}}}}else return c(r,e,n)}return{lo:0,hi:r.length-1}}function Bl(t,e,n,s,i){const r=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,c=r.length;a<c;++a){const{index:l,data:u}=r[a],{lo:h,hi:d}=o7(r[a],e,o,i);for(let f=h;f<=d;++f){const g=u[f];g.skip||s(g,l,f)}}}function a7(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(s,i){const r=e?Math.abs(s.x-i.x):0,o=n?Math.abs(s.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function wp(t,e,n,s,i){const r=[];return!i&&!t.isPointInArea(e)||Bl(t,n,e,function(a,c,l){!i&&!ei(a,t.chartArea,0)||a.inRange(e.x,e.y,s)&&r.push({element:a,datasetIndex:c,index:l})},!0),r}function c7(t,e,n,s){let i=[];function r(o,a,c){const{startAngle:l,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:h}=Ax(o,{x:e.x,y:e.y});Yc(h,l,u)&&i.push({element:o,datasetIndex:a,index:c})}return Bl(t,n,e,r),i}function l7(t,e,n,s,i,r){let o=[];const a=a7(n);let c=Number.POSITIVE_INFINITY;function l(u,h,d){const f=u.inRange(e.x,e.y,i);if(s&&!f)return;const g=u.getCenterPoint(i);if(!(!!r||t.isPointInArea(g))&&!f)return;const _=a(e,g);_<c?(o=[{element:u,datasetIndex:h,index:d}],c=_):_===c&&o.push({element:u,datasetIndex:h,index:d})}return Bl(t,n,e,l),o}function Ep(t,e,n,s,i,r){return!r&&!t.isPointInArea(e)?[]:n==="r"&&!s?c7(t,e,n,i):l7(t,e,n,s,i,r)}function Sw(t,e,n,s,i){const r=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Bl(t,n,e,(c,l,u)=>{c[o](e[n],i)&&(r.push({element:c,datasetIndex:l,index:u}),a=a||c.inRange(e.x,e.y,i))}),s&&!a?[]:r}var u7={evaluateInteractionItems:Bl,modes:{index(t,e,n,s){const i=br(e,t),r=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?wp(t,i,r,s,o):Ep(t,i,r,!1,s,o),c=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(l=>{const u=a[0].index,h=l.data[u];h&&!h.skip&&c.push({element:h,datasetIndex:l.index,index:u})}),c):[]},dataset(t,e,n,s){const i=br(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?wp(t,i,r,s,o):Ep(t,i,r,!1,s,o);if(a.length>0){const c=a[0].datasetIndex,l=t.getDatasetMeta(c).data;a=[];for(let u=0;u<l.length;++u)a.push({element:l[u],datasetIndex:c,index:u})}return a},point(t,e,n,s){const i=br(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return wp(t,i,r,s,o)},nearest(t,e,n,s){const i=br(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return Ep(t,i,r,n.intersect,s,o)},x(t,e,n,s){const i=br(e,t);return Sw(t,i,"x",n.intersect,s)},y(t,e,n,s){const i=br(e,t);return Sw(t,i,"y",n.intersect,s)}}};const tC=["left","top","right","bottom"];function Aa(t,e){return t.filter(n=>n.pos===e)}function Rw(t,e){return t.filter(n=>tC.indexOf(n.pos)===-1&&n.box.axis===e)}function Pa(t,e){return t.sort((n,s)=>{const i=e?s:n,r=e?n:s;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function h7(t){const e=[];let n,s,i,r,o,a;for(n=0,s=(t||[]).length;n<s;++n)i=t[n],{position:r,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&r+o,stackWeight:a});return e}function d7(t){const e={};for(const n of t){const{stack:s,pos:i,stackWeight:r}=n;if(!s||!tC.includes(i))continue;const o=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}function f7(t,e){const n=d7(t),{vBoxMaxWidth:s,hBoxMaxHeight:i}=e;let r,o,a;for(r=0,o=t.length;r<o;++r){a=t[r];const{fullSize:c}=a.box,l=n[a.stack],u=l&&a.stackWeight/l.weight;a.horizontal?(a.width=u?u*s:c&&e.availableWidth,a.height=i):(a.width=s,a.height=u?u*i:c&&e.availableHeight)}return n}function p7(t){const e=h7(t),n=Pa(e.filter(l=>l.box.fullSize),!0),s=Pa(Aa(e,"left"),!0),i=Pa(Aa(e,"right")),r=Pa(Aa(e,"top"),!0),o=Pa(Aa(e,"bottom")),a=Rw(e,"x"),c=Rw(e,"y");return{fullSize:n,leftAndTop:s.concat(r),rightAndBottom:i.concat(c).concat(o).concat(a),chartArea:Aa(e,"chartArea"),vertical:s.concat(i).concat(c),horizontal:r.concat(o).concat(a)}}function Iw(t,e,n,s){return Math.max(t[n],e[n])+Math.max(t[s],e[s])}function nC(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function g7(t,e,n,s){const{pos:i,box:r}=n,o=t.maxPadding;if(!Pe(i)){n.size&&(t[i]-=n.size);const h=s[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?r.height:r.width),n.size=h.size/h.count,t[i]+=n.size}r.getPadding&&nC(o,r.getPadding());const a=Math.max(0,e.outerWidth-Iw(o,t,"left","right")),c=Math.max(0,e.outerHeight-Iw(o,t,"top","bottom")),l=a!==t.w,u=c!==t.h;return t.w=a,t.h=c,n.horizontal?{same:l,other:u}:{same:u,other:l}}function m7(t){const e=t.maxPadding;function n(s){const i=Math.max(e[s]-t[s],0);return t[s]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function _7(t,e){const n=e.maxPadding;function s(i){const r={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{r[o]=Math.max(e[o],n[o])}),r}return s(t?["left","right"]:["top","bottom"])}function Ga(t,e,n,s){const i=[];let r,o,a,c,l,u;for(r=0,o=t.length,l=0;r<o;++r){a=t[r],c=a.box,c.update(a.width||e.w,a.height||e.h,_7(a.horizontal,e));const{same:h,other:d}=g7(e,n,a,s);l|=h&&i.length,u=u||d,c.fullSize||i.push(a)}return l&&Ga(i,e,n,s)||u}function mu(t,e,n,s,i){t.top=n,t.left=e,t.right=e+s,t.bottom=n+i,t.width=s,t.height=i}function xw(t,e,n,s){const i=n.padding;let{x:r,y:o}=e;for(const a of t){const c=a.box,l=s[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/l.weight||1;if(a.horizontal){const h=e.w*u,d=l.size||c.height;Kc(l.start)&&(o=l.start),c.fullSize?mu(c,i.left,o,n.outerWidth-i.right-i.left,d):mu(c,e.left+l.placed,o,h,d),l.start=o,l.placed+=h,o=c.bottom}else{const h=e.h*u,d=l.size||c.width;Kc(l.start)&&(r=l.start),c.fullSize?mu(c,r,i.top,d,n.outerHeight-i.bottom-i.top):mu(c,r,e.top+l.placed,d,h),l.start=r,l.placed+=h,r=c.right}}e.x=r,e.y=o}var rn={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,s){if(!t)return;const i=hn(t.options.layout.padding),r=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=p7(t.boxes),c=a.vertical,l=a.horizontal;qe(t.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const u=c.reduce((m,_)=>_.box.options&&_.box.options.display===!1?m:m+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},i);nC(d,hn(s));const f=Object.assign({maxPadding:d,w:r,h:o,x:i.left,y:i.top},i),g=f7(c.concat(l),h);Ga(a.fullSize,f,h,g),Ga(c,f,h,g),Ga(l,f,h,g)&&Ga(c,f,h,g),m7(f),xw(a.leftAndTop,f,h,g),f.x+=f.w,f.y+=f.h,xw(a.rightAndBottom,f,h,g),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},qe(a.chartArea,m=>{const _=m.box;Object.assign(_,t.chartArea),_.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class sC{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,s){}removeEventListener(e,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,s,i){return n=Math.max(0,n||e.width),s=s||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):s)}}isAttached(e){return!0}updateConfig(e){}}class y7 extends sC{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Ju="$chartjs",b7={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Cw=t=>t===null||t==="";function v7(t,e){const n=t.style,s=t.getAttribute("height"),i=t.getAttribute("width");if(t[Ju]={initial:{height:s,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Cw(i)){const r=uw(t,"width");r!==void 0&&(t.width=r)}if(Cw(s))if(t.style.height==="")t.height=t.width/(e||2);else{const r=uw(t,"height");r!==void 0&&(t.height=r)}return t}const iC=Tq?{passive:!0}:!1;function w7(t,e,n){t&&t.addEventListener(e,n,iC)}function E7(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,iC)}function T7(t,e){const n=b7[t.type]||t.type,{x:s,y:i}=br(t,e);return{type:n,chart:e,native:t,x:s!==void 0?s:null,y:i!==void 0?i:null}}function Wh(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function S7(t,e,n){const s=t.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Wh(a.addedNodes,s),o=o&&!Wh(a.removedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function R7(t,e,n){const s=t.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Wh(a.removedNodes,s),o=o&&!Wh(a.addedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const Xc=new Map;let kw=0;function rC(){const t=window.devicePixelRatio;t!==kw&&(kw=t,Xc.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function I7(t,e){Xc.size||window.addEventListener("resize",rC),Xc.set(t,e)}function x7(t){Xc.delete(t),Xc.size||window.removeEventListener("resize",rC)}function C7(t,e,n){const s=t.canvas,i=s&&by(s);if(!i)return;const r=Mx((a,c)=>{const l=i.clientWidth;n(a,c),l<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const c=a[0],l=c.contentRect.width,u=c.contentRect.height;l===0&&u===0||r(l,u)});return o.observe(i),I7(t,r),o}function Tp(t,e,n){n&&n.disconnect(),e==="resize"&&x7(t)}function k7(t,e,n){const s=t.canvas,i=Mx(r=>{t.ctx!==null&&n(T7(r,t))},t);return w7(s,e,i),i}class A7 extends sC{acquireContext(e,n){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(v7(e,n),s):null}releaseContext(e){const n=e.canvas;if(!n[Ju])return!1;const s=n[Ju].initial;["height","width"].forEach(r=>{const o=s[r];Be(o)?n.removeAttribute(r):n.setAttribute(r,o)});const i=s.style||{};return Object.keys(i).forEach(r=>{n.style[r]=i[r]}),n.width=n.width,delete n[Ju],!0}addEventListener(e,n,s){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:S7,detach:R7,resize:C7}[n]||k7;i[n]=o(e,n,s)}removeEventListener(e,n){const s=e.$proxies||(e.$proxies={}),i=s[n];if(!i)return;({attach:Tp,detach:Tp,resize:Tp}[n]||E7)(e,n,i),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,s,i){return Eq(e,n,s,i)}isAttached(e){const n=by(e);return!!(n&&n.isConnected)}}function P7(t){return!yy()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?y7:A7}var Ru;let pi=(Ru=class{constructor(){x(this,"x");x(this,"y");x(this,"active",!1);x(this,"options");x(this,"$animations")}tooltipPosition(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}hasValue(){return aa(this.x)&&aa(this.y)}getProps(e,n){const s=this.$animations;if(!n||!s)return this;const i={};return e.forEach(r=>{i[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),i}},x(Ru,"defaults",{}),x(Ru,"defaultRoutes"),Ru);function D7(t,e){const n=t.options.ticks,s=O7(t),i=Math.min(n.maxTicksLimit||s,s),r=n.major.enabled?L7(e):[],o=r.length,a=r[0],c=r[o-1],l=[];if(o>i)return N7(e,l,r,o/i),l;const u=M7(r,e,i);if(o>0){let h,d;const f=o>1?Math.round((c-a)/(o-1)):null;for(_u(e,l,u,Be(f)?0:a-f,a),h=0,d=o-1;h<d;h++)_u(e,l,u,r[h],r[h+1]);return _u(e,l,u,c,Be(f)?e.length:c+f),l}return _u(e,l,u),l}function O7(t){const e=t.options.offset,n=t._tickSize(),s=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(s,i))}function M7(t,e,n){const s=V7(t),i=e.length/n;if(!s)return Math.max(i,1);const r=I8(s);for(let o=0,a=r.length-1;o<a;o++){const c=r[o];if(c>i)return c}return Math.max(i,1)}function L7(t){const e=[];let n,s;for(n=0,s=t.length;n<s;n++)t[n].major&&e.push(n);return e}function N7(t,e,n,s){let i=0,r=n[0],o;for(s=Math.ceil(s),o=0;o<t.length;o++)o===r&&(e.push(t[o]),i++,r=n[i*s])}function _u(t,e,n,s,i){const r=we(s,0),o=Math.min(we(i,t.length),t.length);let a=0,c,l,u;for(n=Math.ceil(n),i&&(c=i-s,n=c/Math.floor(c/n)),u=r;u<0;)a++,u=Math.round(r+a*n);for(l=Math.max(r,0);l<o;l++)l===u&&(e.push(t[l]),a++,u=Math.round(r+a*n))}function V7(t){const e=t.length;let n,s;if(e<2)return!1;for(s=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==s)return!1;return s}const F7=t=>t==="left"?"right":t==="right"?"left":t,Aw=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Pw=(t,e)=>Math.min(e||t,t);function Dw(t,e){const n=[],s=t.length/e,i=t.length;let r=0;for(;r<i;r+=s)n.push(t[Math.floor(r)]);return n}function B7(t,e,n){const s=t.ticks.length,i=Math.min(e,s-1),r=t._startPixel,o=t._endPixel,a=1e-6;let c=t.getPixelForTick(i),l;if(!(n&&(s===1?l=Math.max(c-r,o-c):e===0?l=(t.getPixelForTick(1)-c)/2:l=(c-t.getPixelForTick(i-1))/2,c+=i<e?l:-l,c<r-a||c>o+a)))return c}function U7(t,e){qe(t,n=>{const s=n.gc,i=s.length/2;let r;if(i>e){for(r=0;r<i;++r)delete n.data[s[r]];s.splice(0,i)}})}function Da(t){return t.drawTicks?t.tickLength:0}function Ow(t,e){if(!t.display)return 0;const n=Ft(t.font,e),s=hn(t.padding);return(rt(t.text)?t.text.length:1)*n.lineHeight+s.height}function $7(t,e){return lr(t,{scale:e,type:"scale"})}function H7(t,e,n){return lr(t,{tick:n,index:e,type:"tick"})}function z7(t,e,n){let s=dy(t);return(n&&e!=="right"||!n&&e==="right")&&(s=F7(s)),s}function j7(t,e,n,s){const{top:i,left:r,bottom:o,right:a,chart:c}=t,{chartArea:l,scales:u}=c;let h=0,d,f,g;const m=o-i,_=a-r;if(t.isHorizontal()){if(f=en(s,r,a),Pe(n)){const y=Object.keys(n)[0],v=n[y];g=u[y].getPixelForValue(v)+m-e}else n==="center"?g=(l.bottom+l.top)/2+m-e:g=Aw(t,n,e);d=a-r}else{if(Pe(n)){const y=Object.keys(n)[0],v=n[y];f=u[y].getPixelForValue(v)-_+e}else n==="center"?f=(l.left+l.right)/2-_+e:f=Aw(t,n,e);g=en(s,o,i),h=n==="left"?-St:St}return{titleX:f,titleY:g,maxWidth:d,rotation:h}}class go extends pi{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:s,_suggestedMax:i}=this;return e=kn(e,Number.POSITIVE_INFINITY),n=kn(n,Number.NEGATIVE_INFINITY),s=kn(s,Number.POSITIVE_INFINITY),i=kn(i,Number.NEGATIVE_INFINITY),{min:kn(e,s),max:kn(n,i),minDefined:yt(e),maxDefined:yt(n)}}getMinMax(e){let{min:n,max:s,minDefined:i,maxDefined:r}=this.getUserBounds(),o;if(i&&r)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let c=0,l=a.length;c<l;++c)o=a[c].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),r||(s=Math.max(s,o.max));return n=r&&n>s?s:n,s=i&&n>s?n:s,{min:kn(n,kn(s,n)),max:kn(s,kn(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Je(this.options.beforeUpdate,[this])}update(e,n,s){const{beginAtZero:i,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=eq(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=a<this.ticks.length;this._convertTicksToLabels(c?Dw(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=D7(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,e=!e),this._startPixel=n,this._endPixel=s,this._reversePixels=e,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Je(this.options.afterUpdate,[this])}beforeSetDimensions(){Je(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Je(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Je(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Je(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let s,i,r;for(s=0,i=e.length;s<i;s++)r=e[s],r.label=Je(n.callback,[r.value,s,e],this)}afterTickToLabelConversion(){Je(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Je(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,s=Pw(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,r=n.maxRotation;let o=i,a,c,l;if(!this._isVisible()||!n.display||i>=r||s<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),h=u.widest.width,d=u.highest.height,f=Ht(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/s:f/(s-1),h+6>a&&(a=f/(s-(e.offset?.5:1)),c=this.maxHeight-Da(e.grid)-n.padding-Ow(e.title,this.chart.options.font),l=Math.sqrt(h*h+d*d),o=uy(Math.min(Math.asin(Ht((u.highest.height+6)/a,-1,1)),Math.asin(Ht(c/l,-1,1))-Math.asin(Ht(d/l,-1,1)))),o=Math.max(i,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Je(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Je(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:s,title:i,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const c=Ow(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=Da(r)+c):(e.height=this.maxHeight,e.width=Da(r)+c),s.display&&this.ticks.length){const{first:l,last:u,widest:h,highest:d}=this._getLabelSizes(),f=s.padding*2,g=ns(this.labelRotation),m=Math.cos(g),_=Math.sin(g);if(a){const y=s.mirror?0:_*h.width+m*d.height;e.height=Math.min(this.maxHeight,e.height+y+f)}else{const y=s.mirror?0:m*h.width+_*d.height;e.width=Math.min(this.maxWidth,e.width+y+f)}this._calculatePadding(l,u,_,m)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,s,i){const{ticks:{align:r,padding:o},position:a}=this.options,c=this.labelRotation!==0,l=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;c?l?(d=i*e.width,f=s*n.height):(d=s*e.height,f=i*n.width):r==="start"?f=n.width:r==="end"?d=e.width:r!=="inner"&&(d=e.width/2,f=n.width/2),this.paddingLeft=Math.max((d-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-h+o)*this.width/(this.width-h),0)}else{let u=n.height/2,h=e.height/2;r==="start"?(u=0,h=e.height):r==="end"&&(u=n.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Je(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,s;for(n=0,s=e.length;n<s;n++)Be(e[n].label)&&(e.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=Dw(s,n)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,s){const{ctx:i,_longestTextCache:r}=this,o=[],a=[],c=Math.floor(n/Pw(n,s));let l=0,u=0,h,d,f,g,m,_,y,v,E,T,S;for(h=0;h<n;h+=c){if(g=e[h].label,m=this._resolveTickFontOptions(h),i.font=_=m.string,y=r[_]=r[_]||{data:{},gc:[]},v=m.lineHeight,E=T=0,!Be(g)&&!rt(g))E=zh(i,y.data,y.gc,E,g),T=v;else if(rt(g))for(d=0,f=g.length;d<f;++d)S=g[d],!Be(S)&&!rt(S)&&(E=zh(i,y.data,y.gc,E,S),T+=v);o.push(E),a.push(T),l=Math.max(E,l),u=Math.max(T,u)}U7(r,n);const I=o.indexOf(l),k=a.indexOf(u),R=N=>({width:o[N]||0,height:a[N]||0});return{first:R(0),last:R(n-1),widest:R(I),highest:R(k),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return k8(this._alignToPixels?gr(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const s=n[e];return s.$context||(s.$context=H7(this.getContext(),e,s))}return this.$context||(this.$context=$7(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=ns(this.labelRotation),s=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,a=r?r.widest.width+o:0,c=r?r.highest.height+o:0;return this.isHorizontal()?c*s>a*i?a/s:c/i:c*i<a*s?c/s:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,s=this.chart,i=this.options,{grid:r,position:o,border:a}=i,c=r.offset,l=this.isHorizontal(),h=this.ticks.length+(c?1:0),d=Da(r),f=[],g=a.setContext(this.getContext()),m=g.display?g.width:0,_=m/2,y=function(ue){return gr(s,ue,m)};let v,E,T,S,I,k,R,N,$,X,B,ce;if(o==="top")v=y(this.bottom),k=this.bottom-d,N=v-_,X=y(e.top)+_,ce=e.bottom;else if(o==="bottom")v=y(this.top),X=e.top,ce=y(e.bottom)-_,k=v+_,N=this.top+d;else if(o==="left")v=y(this.right),I=this.right-d,R=v-_,$=y(e.left)+_,B=e.right;else if(o==="right")v=y(this.left),$=e.left,B=y(e.right)-_,I=v+_,R=this.left+d;else if(n==="x"){if(o==="center")v=y((e.top+e.bottom)/2+.5);else if(Pe(o)){const ue=Object.keys(o)[0],le=o[ue];v=y(this.chart.scales[ue].getPixelForValue(le))}X=e.top,ce=e.bottom,k=v+_,N=k+d}else if(n==="y"){if(o==="center")v=y((e.left+e.right)/2);else if(Pe(o)){const ue=Object.keys(o)[0],le=o[ue];v=y(this.chart.scales[ue].getPixelForValue(le))}I=v-_,R=I-d,$=e.left,B=e.right}const ze=we(i.ticks.maxTicksLimit,h),xe=Math.max(1,Math.ceil(h/ze));for(E=0;E<h;E+=xe){const ue=this.getContext(E),le=r.setContext(ue),ye=a.setContext(ue),Xe=le.lineWidth,dn=le.color,fn=ye.dash||[],Et=ye.dashOffset,Nn=le.tickWidth,_n=le.tickColor,cs=le.tickBorderDash||[],ut=le.tickBorderDashOffset;T=B7(this,E,c),T!==void 0&&(S=gr(s,T,Xe),l?I=R=$=B=S:k=N=X=ce=S,f.push({tx1:I,ty1:k,tx2:R,ty2:N,x1:$,y1:X,x2:B,y2:ce,width:Xe,color:dn,borderDash:fn,borderDashOffset:Et,tickWidth:Nn,tickColor:_n,tickBorderDash:cs,tickBorderDashOffset:ut}))}return this._ticksLength=h,this._borderValue=v,f}_computeLabelItems(e){const n=this.axis,s=this.options,{position:i,ticks:r}=s,o=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:l,padding:u,mirror:h}=r,d=Da(s.grid),f=d+u,g=h?-u:f,m=-ns(this.labelRotation),_=[];let y,v,E,T,S,I,k,R,N,$,X,B,ce="middle";if(i==="top")I=this.bottom-g,k=this._getXAxisLabelAlignment();else if(i==="bottom")I=this.top+g,k=this._getXAxisLabelAlignment();else if(i==="left"){const xe=this._getYAxisLabelAlignment(d);k=xe.textAlign,S=xe.x}else if(i==="right"){const xe=this._getYAxisLabelAlignment(d);k=xe.textAlign,S=xe.x}else if(n==="x"){if(i==="center")I=(e.top+e.bottom)/2+f;else if(Pe(i)){const xe=Object.keys(i)[0],ue=i[xe];I=this.chart.scales[xe].getPixelForValue(ue)+f}k=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")S=(e.left+e.right)/2-f;else if(Pe(i)){const xe=Object.keys(i)[0],ue=i[xe];S=this.chart.scales[xe].getPixelForValue(ue)}k=this._getYAxisLabelAlignment(d).textAlign}n==="y"&&(c==="start"?ce="top":c==="end"&&(ce="bottom"));const ze=this._getLabelSizes();for(y=0,v=a.length;y<v;++y){E=a[y],T=E.label;const xe=r.setContext(this.getContext(y));R=this.getPixelForTick(y)+r.labelOffset,N=this._resolveTickFontOptions(y),$=N.lineHeight,X=rt(T)?T.length:1;const ue=X/2,le=xe.color,ye=xe.textStrokeColor,Xe=xe.textStrokeWidth;let dn=k;o?(S=R,k==="inner"&&(y===v-1?dn=this.options.reverse?"left":"right":y===0?dn=this.options.reverse?"right":"left":dn="center"),i==="top"?l==="near"||m!==0?B=-X*$+$/2:l==="center"?B=-ze.highest.height/2-ue*$+$:B=-ze.highest.height+$/2:l==="near"||m!==0?B=$/2:l==="center"?B=ze.highest.height/2-ue*$:B=ze.highest.height-X*$,h&&(B*=-1),m!==0&&!xe.showLabelBackdrop&&(S+=$/2*Math.sin(m))):(I=R,B=(1-X)*$/2);let fn;if(xe.showLabelBackdrop){const Et=hn(xe.backdropPadding),Nn=ze.heights[y],_n=ze.widths[y];let cs=B-Et.top,ut=0-Et.left;switch(ce){case"middle":cs-=Nn/2;break;case"bottom":cs-=Nn;break}switch(k){case"center":ut-=_n/2;break;case"right":ut-=_n;break;case"inner":y===v-1?ut-=_n:y>0&&(ut-=_n/2);break}fn={left:ut,top:cs,width:_n+Et.width,height:Nn+Et.height,color:xe.backdropColor}}_.push({label:T,font:N,textOffset:B,options:{rotation:m,color:le,strokeColor:ye,strokeWidth:Xe,textAlign:dn,textBaseline:ce,translation:[S,I],backdrop:fn}})}return _}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-ns(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:s,mirror:i,padding:r}}=this.options,o=this._getLabelSizes(),a=e+r,c=o.widest.width;let l,u;return n==="left"?i?(u=this.right+r,s==="near"?l="left":s==="center"?(l="center",u+=c/2):(l="right",u+=c)):(u=this.right-a,s==="near"?l="right":s==="center"?(l="center",u-=c/2):(l="left",u=this.left)):n==="right"?i?(u=this.left+r,s==="near"?l="right":s==="center"?(l="center",u-=c/2):(l="left",u-=c)):(u=this.left+a,s==="near"?l="left":s==="center"?(l="center",u+=c/2):(l="right",u=this.right)):l="right",{textAlign:l,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:s,top:i,width:r,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(s,i,r,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(r=>r.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,s=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const a=(c,l,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(c.x,c.y),s.lineTo(l.x,l.y),s.stroke(),s.restore())};if(n.display)for(r=0,o=i.length;r<o;++r){const c=i[r];n.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),n.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:s,grid:i}}=this,r=s.setContext(this.getContext()),o=s.display?r.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let l,u,h,d;this.isHorizontal()?(l=gr(e,this.left,o)-o/2,u=gr(e,this.right,a)+a/2,h=d=c):(h=gr(e,this.top,o)-o/2,d=gr(e,this.bottom,a)+a/2,l=u=c),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(l,h),n.lineTo(u,d),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,i=this._computeLabelArea();i&&bf(s,i);const r=this.getLabelItems(e);for(const o of r){const a=o.options,c=o.font,l=o.label,u=o.textOffset;eo(s,l,0,u,c,a)}i&&vf(s)}drawTitle(){const{ctx:e,options:{position:n,title:s,reverse:i}}=this;if(!s.display)return;const r=Ft(s.font),o=hn(s.padding),a=s.align;let c=r.lineHeight/2;n==="bottom"||n==="center"||Pe(n)?(c+=o.bottom,rt(s.text)&&(c+=r.lineHeight*(s.text.length-1))):c+=o.top;const{titleX:l,titleY:u,maxWidth:h,rotation:d}=j7(this,c,n,a);eo(e,s.text,0,0,r,{color:s.color,maxWidth:h,rotation:d,textAlign:z7(a,n,i),textBaseline:"middle",translation:[l,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,s=we(e.grid&&e.grid.z,-1),i=we(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==go.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",i=[];let r,o;for(r=0,o=n.length;r<o;++r){const a=n[r];a[s]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Ft(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class yu{constructor(e,n,s){this.type=e,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let s;G7(n)&&(s=this.register(n));const i=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in i||(i[r]=e,W7(e,o,s),this.override&&bt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,s=e.id,i=this.scope;s in n&&delete n[s],i&&s in bt[i]&&(delete bt[i][s],this.override&&delete Zr[s])}}function W7(t,e,n){const s=Gc(Object.create(null),[n?bt.get(n):{},bt.get(e),t.defaults]);bt.set(e,s),t.defaultRoutes&&q7(e,t.defaultRoutes),t.descriptors&&bt.describe(e,t.descriptors)}function q7(t,e){Object.keys(e).forEach(n=>{const s=n.split("."),i=s.pop(),r=[t].concat(s).join("."),o=e[n].split("."),a=o.pop(),c=o.join(".");bt.route(r,i,c,a)})}function G7(t){return"id"in t&&"defaults"in t}class K7{constructor(){this.controllers=new yu(ss,"datasets",!0),this.elements=new yu(pi,"elements"),this.plugins=new yu(Object,"plugins"),this.scales=new yu(go,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,s){[...n].forEach(i=>{const r=s||this._getRegistryForType(i);s||r.isForType(i)||r===this.plugins&&i.id?this._exec(e,r,i):qe(i,o=>{const a=s||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,s){const i=ly(e);Je(s["before"+i],[],s),n[e](s),Je(s["after"+i],[],s)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(e))return s}return this.plugins}_get(e,n,s){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return i}}var fs=new K7;class Y7{constructor(){this._init=[]}notify(e,n,s,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(r,e,n,s);return n==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,s,i){i=i||{};for(const r of e){const o=r.plugin,a=o[s],c=[n,i,r.options];if(Je(a,c,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Be(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const s=e&&e.config,i=we(s.options&&s.options.plugins,{}),r=Q7(s);return i===!1&&!n?[]:J7(e,r,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],s=this._cache,i=(r,o)=>r.filter(a=>!o.some(c=>a.plugin.id===c.plugin.id));this._notify(i(n,s),e,"stop"),this._notify(i(s,n),e,"start")}}function Q7(t){const e={},n=[],s=Object.keys(fs.plugins.items);for(let r=0;r<s.length;r++)n.push(fs.getPlugin(s[r]));const i=t.plugins||[];for(let r=0;r<i.length;r++){const o=i[r];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function X7(t,e){return!e&&t===!1?null:t===!0?{}:t}function J7(t,{plugins:e,localIds:n},s,i){const r=[],o=t.getContext();for(const a of e){const c=a.id,l=X7(s[c],i);l!==null&&r.push({plugin:a,options:Z7(t.config,{plugin:a,local:n[c]},l,o)})}return r}function Z7(t,{plugin:e,local:n},s,i){const r=t.pluginScopeKeys(e),o=t.getOptionScopes(s,r);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Fg(t,e){const n=bt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function eG(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function tG(t,e){return t===e?"_index_":"_value_"}function Mw(t){if(t==="x"||t==="y"||t==="r")return t}function nG(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Bg(t,...e){if(Mw(t))return t;for(const n of e){const s=n.axis||nG(n.position)||t.length>1&&Mw(t[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Lw(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function sG(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(s=>s.xAxisID===t||s.yAxisID===t);if(n.length)return Lw(t,"x",n[0])||Lw(t,"y",n[0])}return{}}function iG(t,e){const n=Zr[t.type]||{scales:{}},s=e.scales||{},i=Fg(t.type,e),r=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!Pe(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=Bg(o,a,sG(o,t),bt.scales[a.type]),l=tG(c,i),u=n.scales||{};r[o]=dc(Object.create(null),[{axis:c},a,u[c],u[l]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,c=o.indexAxis||Fg(a,e),u=(Zr[a]||{}).scales||{};Object.keys(u).forEach(h=>{const d=eG(h,c),f=o[d+"AxisID"]||d;r[f]=r[f]||Object.create(null),dc(r[f],[{axis:d},s[f],u[h]])})}),Object.keys(r).forEach(o=>{const a=r[o];dc(a,[bt.scales[a.type],bt.scale])}),r}function oC(t){const e=t.options||(t.options={});e.plugins=we(e.plugins,{}),e.scales=iG(t,e)}function aC(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function rG(t){return t=t||{},t.data=aC(t.data),oC(t),t}const Nw=new Map,cC=new Set;function bu(t,e){let n=Nw.get(t);return n||(n=e(),Nw.set(t,n),cC.add(n)),n}const Oa=(t,e,n)=>{const s=nr(e,n);s!==void 0&&t.add(s)};class oG{constructor(e){this._config=rG(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=aC(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),oC(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return bu(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return bu(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return bu(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,s=this.type;return bu(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const s=this._scopeCache;let i=s.get(e);return(!i||n)&&(i=new Map,s.set(e,i)),i}getOptionScopes(e,n,s){const{options:i,type:r}=this,o=this._cachedScopes(e,s),a=o.get(n);if(a)return a;const c=new Set;n.forEach(u=>{e&&(c.add(e),u.forEach(h=>Oa(c,e,h))),u.forEach(h=>Oa(c,i,h)),u.forEach(h=>Oa(c,Zr[r]||{},h)),u.forEach(h=>Oa(c,bt,h)),u.forEach(h=>Oa(c,Lg,h))});const l=Array.from(c);return l.length===0&&l.push(Object.create(null)),cC.has(n)&&o.set(n,l),l}chartOptionScopes(){const{options:e,type:n}=this;return[e,Zr[n]||{},bt.datasets[n]||{},{type:n},bt,Lg]}resolveNamedOptions(e,n,s,i=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=Vw(this._resolverCache,e,i);let c=o;if(cG(o,n)){r.$shared=!1,s=sr(s)?s():s;const l=this.createResolver(e,s,a);c=ca(o,s,l)}for(const l of n)r[l]=c[l];return r}createResolver(e,n,s=[""],i){const{resolver:r}=Vw(this._resolverCache,e,s);return Pe(n)?ca(r,n,void 0,i):r}}function Vw(t,e,n){let s=t.get(e);s||(s=new Map,t.set(e,s));const i=n.join();let r=s.get(i);return r||(r={resolver:gy(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(i,r)),r}const aG=t=>Pe(t)&&Object.getOwnPropertyNames(t).some(e=>sr(t[e]));function cG(t,e){const{isScriptable:n,isIndexable:s}=Ux(t);for(const i of e){const r=n(i),o=s(i),a=(o||r)&&t[i];if(r&&(sr(a)||aG(a))||o&&rt(a))return!0}return!1}var lG="4.4.2";const uG=["top","bottom","left","right","chartArea"];function Fw(t,e){return t==="top"||t==="bottom"||uG.indexOf(t)===-1&&e==="x"}function Bw(t,e){return function(n,s){return n[t]===s[t]?n[e]-s[e]:n[t]-s[t]}}function Uw(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Je(n&&n.onComplete,[t],e)}function hG(t){const e=t.chart,n=e.options.animation;Je(n&&n.onProgress,[t],e)}function lC(t){return yy()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Zu={},$w=t=>{const e=lC(t);return Object.values(Zu).filter(n=>n.canvas===e).pop()};function dG(t,e,n){const s=Object.keys(t);for(const i of s){const r=+i;if(r>=e){const o=t[i];delete t[i],(n>0||r>e)&&(t[r+n]=o)}}}function fG(t,e,n,s){return!n||t.type==="mouseout"?null:s?e:t}function vu(t,e,n){return t.options.clip?t[n]:e[n]}function pG(t,e){const{xScale:n,yScale:s}=t;return n&&s?{left:vu(n,e,"left"),right:vu(n,e,"right"),top:vu(s,e,"top"),bottom:vu(s,e,"bottom")}:e}var Si;let wy=(Si=class{static register(...e){fs.add(...e),Hw()}static unregister(...e){fs.remove(...e),Hw()}constructor(e,n){const s=this.config=new oG(n),i=lC(e),r=$w(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||P7(i)),this.platform.updateConfig(s);const a=this.platform.acquireContext(i,o.aspectRatio),c=a&&a.canvas,l=c&&c.height,u=c&&c.width;if(this.id=_8(),this.ctx=a,this.canvas=c,this.width=u,this.height=l,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Y7,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=O8(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],Zu[this.id]=this,!a||!c){console.error("Failed to create chart: can't acquire context from the given item");return}qs.listen(this,"complete",Uw),qs.listen(this,"progress",hG),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:s,height:i,_aspectRatio:r}=this;return Be(e)?n&&r?r:i?s/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return fs}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():lw(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return ow(this.canvas,this.ctx),this}stop(){return qs.stop(this),this}resize(e,n){qs.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const s=this.options,i=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,r),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,lw(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Je(s.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};qe(n,(s,i)=>{s.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,s=this.scales,i=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let r=[];n&&(r=r.concat(Object.keys(n).map(o=>{const a=n[o],c=Bg(o,a),l=c==="r",u=c==="x";return{options:a,dposition:l?"chartArea":u?"bottom":"left",dtype:l?"radialLinear":u?"category":"linear"}}))),qe(r,o=>{const a=o.options,c=a.id,l=Bg(c,a),u=we(a.type,o.dtype);(a.position===void 0||Fw(a.position,l)!==Fw(o.dposition))&&(a.position=o.dposition),i[c]=!0;let h=null;if(c in s&&s[c].type===u)h=s[c];else{const d=fs.getScale(u);h=new d({id:c,type:u,ctx:this.ctx,chart:this}),s[h.id]=h}h.init(a,e)}),qe(i,(o,a)=>{o||delete s[a]}),qe(s,o=>{rn.configure(this,o,o.options),rn.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,s=e.length;if(e.sort((i,r)=>i.index-r.index),s>n){for(let i=n;i<s;++i)this._destroyDatasetMeta(i);e.splice(n,s-n)}this._sortedMetasets=e.slice(0).sort(Bw("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((s,i)=>{n.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let s,i;for(this._removeUnreferencedMetasets(),s=0,i=n.length;s<i;s++){const r=n[s];let o=this.getDatasetMeta(s);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=r.indexAxis||Fg(a,this.options),o.order=r.order||0,o.index=s,o.label=""+r.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const c=fs.getController(a),{datasetElementType:l,dataElementType:u}=bt.datasets[a];Object.assign(c,{dataElementType:fs.getElement(u),datasetElementType:l&&fs.getElement(l)}),o.controller=new c(this,s),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){qe(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let l=0,u=this.data.datasets.length;l<u;l++){const{controller:h}=this.getDatasetMeta(l),d=!i&&r.indexOf(h)===-1;h.buildOrUpdateElements(d),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),i||qe(r,l=>{l.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Bw("z","_idx"));const{_active:a,_lastEvent:c}=this;c?this._eventHandler(c,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){qe(this.scales,e=>{rn.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!X0(n,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:i,count:r}of n){const o=s==="_removeElements"?-r:r;dG(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=r=>new Set(e.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),i=s(0);for(let r=1;r<n;r++)if(!X0(i,s(r)))return;return Array.from(i).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;rn.update(this,this.width,this.height,e);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],qe(this.boxes,i=>{s&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,r)=>{i._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,sr(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const s=this.getDatasetMeta(e),i={meta:s,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(s.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(qs.has(this)?this.attached&&!qs.running(this)&&qs.start(this):(this.draw(),Uw({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:i}=this._resizeBeforeDraw;this._resize(s,i),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,s=[];let i,r;for(i=0,r=n.length;i<r;++i){const o=n[i];(!e||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,s=e._clip,i=!s.disabled,r=pG(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(i&&bf(n,{left:s.left===!1?0:r.left-s.left,right:s.right===!1?this.width:r.right+s.right,top:s.top===!1?0:r.top-s.top,bottom:s.bottom===!1?this.height:r.bottom+s.bottom}),e.controller.draw(),i&&vf(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return ei(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,s,i){const r=u7.modes[n];return typeof r=="function"?r(this,e,s,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],s=this._metasets;let i=s.filter(r=>r&&r._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},s.push(i)),i}getContext(){return this.$context||(this.$context=lr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(e,n){const s=this.getDatasetMeta(e);s.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,s){const i=s?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,i);Kc(n)?(r.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),o.update(r,{visible:s}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),qs.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),ow(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Zu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,s=(r,o)=>{n.addEventListener(this,r,o),e[r]=o},i=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};qe(this.options.events,r=>s(r,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,s=(c,l)=>{n.addEventListener(this,c,l),e[c]=l},i=(c,l)=>{e[c]&&(n.removeEventListener(this,c,l),delete e[c])},r=(c,l)=>{this.canvas&&this.resize(c,l)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),s("resize",r),s("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){qe(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},qe(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,s){const i=s?"set":"remove";let r,o,a,c;for(n==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,c=e.length;a<c;++a){o=e[a];const l=o&&this.getDatasetMeta(o.datasetIndex).controller;l&&l[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],s=e.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Uh(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(e,n,s){return this._plugins.notify(this,e,n,s)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,s){const i=this.options.hover,r=(c,l)=>c.filter(u=>!l.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=r(n,e),a=s?e:r(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const s={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,i)===!1)return;const r=this._handleEvent(e,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,i),(r||s.changed)&&this.render(),this}_handleEvent(e,n,s){const{_active:i=[],options:r}=this,o=n,a=this._getActiveElements(e,i,s,o),c=T8(e),l=fG(e,this._lastEvent,s,c);s&&(this._lastEvent=null,Je(r.onHover,[e,a,this],this),c&&Je(r.onClick,[e,a,this],this));const u=!Uh(a,i);return(u||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=l,u}_getActiveElements(e,n,s,i){if(e.type==="mouseout")return[];if(!s)return n;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,i)}},x(Si,"defaults",bt),x(Si,"instances",Zu),x(Si,"overrides",Zr),x(Si,"registry",fs),x(Si,"version",lG),x(Si,"getChart",$w),Si);function Hw(){return qe(wy.instances,t=>t._plugins.invalidate())}function gG(t,e,n){const{startAngle:s,pixelMargin:i,x:r,y:o,outerRadius:a,innerRadius:c}=e;let l=i/a;t.beginPath(),t.arc(r,o,a,s-l,n+l),c>i?(l=i/c,t.arc(r,o,c,n+l,s-l,!0)):t.arc(r,o,i,n+St,s-St),t.closePath(),t.clip()}function mG(t){return py(t,["outerStart","outerEnd","innerStart","innerEnd"])}function _G(t,e,n,s){const i=mG(t.options.borderRadius),r=(n-e)/2,o=Math.min(r,s*e/2),a=c=>{const l=(n-Math.min(r,c))*s/2;return Ht(c,0,Math.min(r,l))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Ht(i.innerStart,0,o),innerEnd:Ht(i.innerEnd,0,o)}}function wo(t,e,n,s){return{x:n+t*Math.cos(e),y:s+t*Math.sin(e)}}function qh(t,e,n,s,i,r){const{x:o,y:a,startAngle:c,pixelMargin:l,innerRadius:u}=e,h=Math.max(e.outerRadius+s+n-l,0),d=u>0?u+s+n+l:0;let f=0;const g=i-c;if(s){const xe=u>0?u-s:0,ue=h>0?h-s:0,le=(xe+ue)/2,ye=le!==0?g*le/(le+s):g;f=(g-ye)/2}const m=Math.max(.001,g*h-n/at)/h,_=(g-m)/2,y=c+_+f,v=i-_-f,{outerStart:E,outerEnd:T,innerStart:S,innerEnd:I}=_G(e,d,h,v-y),k=h-E,R=h-T,N=y+E/k,$=v-T/R,X=d+S,B=d+I,ce=y+S/X,ze=v-I/B;if(t.beginPath(),r){const xe=(N+$)/2;if(t.arc(o,a,h,N,xe),t.arc(o,a,h,xe,$),T>0){const Xe=wo(R,$,o,a);t.arc(Xe.x,Xe.y,T,$,v+St)}const ue=wo(B,v,o,a);if(t.lineTo(ue.x,ue.y),I>0){const Xe=wo(B,ze,o,a);t.arc(Xe.x,Xe.y,I,v+St,ze+Math.PI)}const le=(v-I/d+(y+S/d))/2;if(t.arc(o,a,d,v-I/d,le,!0),t.arc(o,a,d,le,y+S/d,!0),S>0){const Xe=wo(X,ce,o,a);t.arc(Xe.x,Xe.y,S,ce+Math.PI,y-St)}const ye=wo(k,y,o,a);if(t.lineTo(ye.x,ye.y),E>0){const Xe=wo(k,N,o,a);t.arc(Xe.x,Xe.y,E,y-St,N)}}else{t.moveTo(o,a);const xe=Math.cos(N)*h+o,ue=Math.sin(N)*h+a;t.lineTo(xe,ue);const le=Math.cos($)*h+o,ye=Math.sin($)*h+a;t.lineTo(le,ye)}t.closePath()}function yG(t,e,n,s,i){const{fullCircles:r,startAngle:o,circumference:a}=e;let c=e.endAngle;if(r){qh(t,e,n,s,c,i);for(let l=0;l<r;++l)t.fill();isNaN(a)||(c=o+(a%ot||ot))}return qh(t,e,n,s,c,i),t.fill(),c}function bG(t,e,n,s,i){const{fullCircles:r,startAngle:o,circumference:a,options:c}=e,{borderWidth:l,borderJoinStyle:u,borderDash:h,borderDashOffset:d}=c,f=c.borderAlign==="inner";if(!l)return;t.setLineDash(h||[]),t.lineDashOffset=d,f?(t.lineWidth=l*2,t.lineJoin=u||"round"):(t.lineWidth=l,t.lineJoin=u||"bevel");let g=e.endAngle;if(r){qh(t,e,n,s,g,i);for(let m=0;m<r;++m)t.stroke();isNaN(a)||(g=o+(a%ot||ot))}f&&gG(t,e,g),r||(qh(t,e,n,s,g,i),t.stroke())}class Ka extends pi{constructor(n){super();x(this,"circumference");x(this,"endAngle");x(this,"fullCircles");x(this,"innerRadius");x(this,"outerRadius");x(this,"pixelMargin");x(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,s,i){const r=this.getProps(["x","y"],i),{angle:o,distance:a}=Ax(r,{x:n,y:s}),{startAngle:c,endAngle:l,innerRadius:u,outerRadius:h,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),f=(this.options.spacing+this.options.borderWidth)/2,m=we(d,l-c)>=ot||Yc(o,c,l),_=Js(a,u+f,h+f);return m&&_}getCenterPoint(n){const{x:s,y:i,startAngle:r,endAngle:o,innerRadius:a,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:l,spacing:u}=this.options,h=(r+o)/2,d=(a+c+u+l)/2;return{x:s+Math.cos(h)*d,y:i+Math.sin(h)*d}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:s,circumference:i}=this,r=(s.offset||0)/4,o=(s.spacing||0)/2,a=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=i>ot?Math.floor(i/ot):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const c=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(c)*r,Math.sin(c)*r);const l=1-Math.sin(Math.min(at,i||0)),u=r*l;n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,yG(n,this,u,o,a),bG(n,this,u,o,a),n.restore()}}x(Ka,"id","arc"),x(Ka,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),x(Ka,"defaultRoutes",{backgroundColor:"backgroundColor"}),x(Ka,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function uC(t,e,n=e){t.lineCap=we(n.borderCapStyle,e.borderCapStyle),t.setLineDash(we(n.borderDash,e.borderDash)),t.lineDashOffset=we(n.borderDashOffset,e.borderDashOffset),t.lineJoin=we(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=we(n.borderWidth,e.borderWidth),t.strokeStyle=we(n.borderColor,e.borderColor)}function vG(t,e,n){t.lineTo(n.x,n.y)}function wG(t){return t.stepped?W8:t.tension||t.cubicInterpolationMode==="monotone"?q8:vG}function hC(t,e,n={}){const s=t.length,{start:i=0,end:r=s-1}=n,{start:o,end:a}=e,c=Math.max(i,o),l=Math.min(r,a),u=i<o&&r<o||i>a&&r>a;return{count:s,start:c,loop:e.loop,ilen:l<c&&!u?s+l-c:l-c}}function EG(t,e,n,s){const{points:i,options:r}=e,{count:o,start:a,loop:c,ilen:l}=hC(i,n,s),u=wG(r);let{move:h=!0,reverse:d}=s||{},f,g,m;for(f=0;f<=l;++f)g=i[(a+(d?l-f:f))%o],!g.skip&&(h?(t.moveTo(g.x,g.y),h=!1):u(t,m,g,d,r.stepped),m=g);return c&&(g=i[(a+(d?l:0))%o],u(t,m,g,d,r.stepped)),!!c}function TG(t,e,n,s){const i=e.points,{count:r,start:o,ilen:a}=hC(i,n,s),{move:c=!0,reverse:l}=s||{};let u=0,h=0,d,f,g,m,_,y;const v=T=>(o+(l?a-T:T))%r,E=()=>{m!==_&&(t.lineTo(u,_),t.lineTo(u,m),t.lineTo(u,y))};for(c&&(f=i[v(0)],t.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=i[v(d)],f.skip)continue;const T=f.x,S=f.y,I=T|0;I===g?(S<m?m=S:S>_&&(_=S),u=(h*u+T)/++h):(E(),t.lineTo(T,S),g=I,h=0,m=_=S),y=S}E()}function Ug(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?TG:EG}function SG(t){return t.stepped?Sq:t.tension||t.cubicInterpolationMode==="monotone"?Rq:vr}function RG(t,e,n,s){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,s)&&i.closePath()),uC(t,e.options),t.stroke(i)}function IG(t,e,n,s){const{segments:i,options:r}=e,o=Ug(e);for(const a of i)uC(t,r,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+s-1})&&t.closePath(),t.stroke()}const xG=typeof Path2D=="function";function CG(t,e,n,s){xG&&!e.options.segment?RG(t,e,n,s):IG(t,e,n,s)}class Bi extends pi{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const i=s.spanGaps?this._loop:this._fullLoop;mq(this._points,s,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Pq(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,s=e.length;return s&&n[e[s-1].end]}interpolate(e,n){const s=this.options,i=e[n],r=this.points,o=Qx(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],c=SG(s);let l,u;for(l=0,u=o.length;l<u;++l){const{start:h,end:d}=o[l],f=r[h],g=r[d];if(f===g){a.push(f);continue}const m=Math.abs((i-f[n])/(g[n]-f[n])),_=c(f,g,m,s.stepped);_[n]=e[n],a.push(_)}return a.length===1?a[0]:a}pathSegment(e,n,s){return Ug(this)(e,this,n,s)}path(e,n,s){const i=this.segments,r=Ug(this);let o=this._loop;n=n||0,s=s||this.points.length-n;for(const a of i)o&=r(e,this,a,{start:n,end:n+s-1});return!!o}draw(e,n,s,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),CG(e,this,s,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}x(Bi,"id","line"),x(Bi,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),x(Bi,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),x(Bi,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function zw(t,e,n,s){const i=t.options,{[n]:r}=t.getProps([n],s);return Math.abs(e-r)<i.radius+i.hitRadius}class eh extends pi{constructor(n){super();x(this,"parsed");x(this,"skip");x(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,s,i){const r=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(s-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(n,s){return zw(this,n,"x",s)}inYRange(n,s){return zw(this,n,"y",s)}getCenterPoint(n){const{x:s,y:i}=this.getProps(["x","y"],n);return{x:s,y:i}}size(n){n=n||this.options||{};let s=n.radius||0;s=Math.max(s,s&&n.hoverRadius||0);const i=s&&n.borderWidth||0;return(s+i)*2}draw(n,s){const i=this.options;this.skip||i.radius<.1||!ei(this,s,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,Ng(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}x(eh,"id","point"),x(eh,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),x(eh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function dC(t,e){const{x:n,y:s,base:i,width:r,height:o}=t.getProps(["x","y","base","width","height"],e);let a,c,l,u,h;return t.horizontal?(h=o/2,a=Math.min(n,i),c=Math.max(n,i),l=s-h,u=s+h):(h=r/2,a=n-h,c=n+h,l=Math.min(s,i),u=Math.max(s,i)),{left:a,top:l,right:c,bottom:u}}function Ui(t,e,n,s){return t?0:Ht(e,n,s)}function kG(t,e,n){const s=t.options.borderWidth,i=t.borderSkipped,r=Bx(s);return{t:Ui(i.top,r.top,0,n),r:Ui(i.right,r.right,0,e),b:Ui(i.bottom,r.bottom,0,n),l:Ui(i.left,r.left,0,e)}}function AG(t,e,n){const{enableBorderRadius:s}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,r=$r(i),o=Math.min(e,n),a=t.borderSkipped,c=s||Pe(i);return{topLeft:Ui(!c||a.top||a.left,r.topLeft,0,o),topRight:Ui(!c||a.top||a.right,r.topRight,0,o),bottomLeft:Ui(!c||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:Ui(!c||a.bottom||a.right,r.bottomRight,0,o)}}function PG(t){const e=dC(t),n=e.right-e.left,s=e.bottom-e.top,i=kG(t,n/2,s/2),r=AG(t,n/2,s/2);return{outer:{x:e.left,y:e.top,w:n,h:s,radius:r},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:s-i.t-i.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,r.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(i.b,i.r))}}}}function Sp(t,e,n,s){const i=e===null,r=n===null,a=t&&!(i&&r)&&dC(t,s);return a&&(i||Js(e,a.left,a.right))&&(r||Js(n,a.top,a.bottom))}function DG(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function OG(t,e){t.rect(e.x,e.y,e.w,e.h)}function Rp(t,e,n={}){const s=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,r=(t.x+t.w!==n.x+n.w?e:0)-s,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+s,y:t.y+i,w:t.w+r,h:t.h+o,radius:t.radius}}class th extends pi{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:s,backgroundColor:i}}=this,{inner:r,outer:o}=PG(this),a=DG(o.radius)?Qc:OG;e.save(),(o.w!==r.w||o.h!==r.h)&&(e.beginPath(),a(e,Rp(o,n,r)),e.clip(),a(e,Rp(r,-n,o)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),a(e,Rp(r,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,s){return Sp(this,e,n,s)}inXRange(e,n){return Sp(this,e,null,n)}inYRange(e,n){return Sp(this,null,e,n)}getCenterPoint(e){const{x:n,y:s,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(n+i)/2:n,y:r?s:(s+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}x(th,"id","bar"),x(th,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),x(th,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var MG=Object.freeze({__proto__:null,ArcElement:Ka,BarElement:th,LineElement:Bi,PointElement:eh});const $g=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],jw=$g.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function fC(t){return $g[t%$g.length]}function pC(t){return jw[t%jw.length]}function LG(t,e){return t.borderColor=fC(e),t.backgroundColor=pC(e),++e}function NG(t,e){return t.backgroundColor=t.data.map(()=>fC(e++)),e}function VG(t,e){return t.backgroundColor=t.data.map(()=>pC(e++)),e}function FG(t){let e=0;return(n,s)=>{const i=t.getDatasetMeta(s).controller;i instanceof Or?e=NG(n,e):i instanceof mc?e=VG(n,e):i&&(e=LG(n,e))}}function Ww(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function BG(t){return t&&(t.borderColor||t.backgroundColor)}var UG={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:s},options:i}=t.config,{elements:r}=i;if(!n.forceOverride&&(Ww(s)||BG(i)||r&&Ww(r)))return;const o=FG(t);s.forEach(o)}};function $G(t,e,n,s,i){const r=i.samples||s;if(r>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(r-2);let c=0;const l=e+n-1;let u=e,h,d,f,g,m;for(o[c++]=t[u],h=0;h<r-2;h++){let _=0,y=0,v;const E=Math.floor((h+1)*a)+1+e,T=Math.min(Math.floor((h+2)*a)+1,n)+e,S=T-E;for(v=E;v<T;v++)_+=t[v].x,y+=t[v].y;_/=S,y/=S;const I=Math.floor(h*a)+1+e,k=Math.min(Math.floor((h+1)*a)+1,n)+e,{x:R,y:N}=t[u];for(f=g=-1,v=I;v<k;v++)g=.5*Math.abs((R-_)*(t[v].y-N)-(R-t[v].x)*(y-N)),g>f&&(f=g,d=t[v],m=v);o[c++]=d,u=m}return o[c++]=t[l],o}function HG(t,e,n,s){let i=0,r=0,o,a,c,l,u,h,d,f,g,m;const _=[],y=e+n-1,v=t[e].x,T=t[y].x-v;for(o=e;o<e+n;++o){a=t[o],c=(a.x-v)/T*s,l=a.y;const S=c|0;if(S===u)l<g?(g=l,h=o):l>m&&(m=l,d=o),i=(r*i+a.x)/++r;else{const I=o-1;if(!Be(h)&&!Be(d)){const k=Math.min(h,d),R=Math.max(h,d);k!==f&&k!==I&&_.push({...t[k],x:i}),R!==f&&R!==I&&_.push({...t[R],x:i})}o>0&&I!==f&&_.push(t[I]),_.push(a),u=S,r=0,g=m=l,h=d=f=o}}return _}function gC(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function qw(t){t.data.datasets.forEach(e=>{gC(e)})}function zG(t,e){const n=e.length;let s=0,i;const{iScale:r}=t,{min:o,max:a,minDefined:c,maxDefined:l}=r.getUserBounds();return c&&(s=Ht(Zs(e,r.axis,o).lo,0,n-1)),l?i=Ht(Zs(e,r.axis,a).hi+1,s,n)-s:i=n-s,{start:s,count:i}}var jG={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){qw(t);return}const s=t.width;t.data.datasets.forEach((i,r)=>{const{_data:o,indexAxis:a}=i,c=t.getDatasetMeta(r),l=o||i.data;if(qa([a,t.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;const u=t.scales[c.xAxisID];if(u.type!=="linear"&&u.type!=="time"||t.options.parsing)return;let{start:h,count:d}=zG(c,l);const f=n.threshold||4*s;if(d<=f){gC(i);return}Be(o)&&(i._data=l,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(m){this._data=m}}));let g;switch(n.algorithm){case"lttb":g=$G(l,h,d,s,n);break;case"min-max":g=HG(l,h,d,s);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}i._decimated=g})},destroy(t){qw(t)}};function WG(t,e,n){const s=t.segments,i=t.points,r=e.points,o=[];for(const a of s){let{start:c,end:l}=a;l=Ey(c,l,i);const u=Hg(n,i[c],i[l],a.loop);if(!e.segments){o.push({source:a,target:u,start:i[c],end:i[l]});continue}const h=Qx(e,u);for(const d of h){const f=Hg(n,r[d.start],r[d.end],d.loop),g=Yx(a,i,f);for(const m of g)o.push({source:m,target:d,start:{[n]:Gw(u,f,"start",Math.max)},end:{[n]:Gw(u,f,"end",Math.min)}})}}return o}function Hg(t,e,n,s){if(s)return;let i=e[t],r=n[t];return t==="angle"&&(i=An(i),r=An(r)),{property:t,start:i,end:r}}function qG(t,e){const{x:n=null,y:s=null}=t||{},i=e.points,r=[];return e.segments.forEach(({start:o,end:a})=>{a=Ey(o,a,i);const c=i[o],l=i[a];s!==null?(r.push({x:c.x,y:s}),r.push({x:l.x,y:s})):n!==null&&(r.push({x:n,y:c.y}),r.push({x:n,y:l.y}))}),r}function Ey(t,e,n){for(;e>t;e--){const s=n[e];if(!isNaN(s.x)&&!isNaN(s.y))break}return e}function Gw(t,e,n,s){return t&&e?s(t[n],e[n]):t?t[n]:e?e[n]:0}function mC(t,e){let n=[],s=!1;return rt(t)?(s=!0,n=t):n=qG(t,e),n.length?new Bi({points:n,options:{tension:0},_loop:s,_fullLoop:s}):null}function Kw(t){return t&&t.fill!==!1}function GG(t,e,n){let i=t[e].fill;const r=[e];let o;if(!n)return i;for(;i!==!1&&r.indexOf(i)===-1;){if(!yt(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;r.push(i),i=o.fill}return!1}function KG(t,e,n){const s=JG(t);if(Pe(s))return isNaN(s.value)?!1:s;let i=parseFloat(s);return yt(i)&&Math.floor(i)===i?YG(s[0],e,i,n):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function YG(t,e,n,s){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=s?!1:n}function QG(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Pe(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function XG(t,e,n){let s;return t==="start"?s=n:t==="end"?s=e.options.reverse?e.min:e.max:Pe(t)?s=t.value:s=e.getBaseValue(),s}function JG(t){const e=t.options,n=e.fill;let s=we(n&&n.target,n);return s===void 0&&(s=!!e.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function ZG(t){const{scale:e,index:n,line:s}=t,i=[],r=s.segments,o=s.points,a=eK(e,n);a.push(mC({x:null,y:e.bottom},s));for(let c=0;c<r.length;c++){const l=r[c];for(let u=l.start;u<=l.end;u++)tK(i,o[u],a)}return new Bi({points:i,options:{}})}function eK(t,e){const n=[],s=t.getMatchingVisibleMetas("line");for(let i=0;i<s.length;i++){const r=s[i];if(r.index===e)break;r.hidden||n.unshift(r.dataset)}return n}function tK(t,e,n){const s=[];for(let i=0;i<n.length;i++){const r=n[i],{first:o,last:a,point:c}=nK(r,e,"x");if(!(!c||o&&a)){if(o)s.unshift(c);else if(t.push(c),!a)break}}t.push(...s)}function nK(t,e,n){const s=t.interpolate(e,n);if(!s)return{};const i=s[n],r=t.segments,o=t.points;let a=!1,c=!1;for(let l=0;l<r.length;l++){const u=r[l],h=o[u.start][n],d=o[u.end][n];if(Js(i,h,d)){a=i===h,c=i===d;break}}return{first:a,last:c,point:s}}class _C{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,s){const{x:i,y:r,radius:o}=this;return n=n||{start:0,end:ot},e.arc(i,r,o,n.end,n.start,!0),!s.bounds}interpolate(e){const{x:n,y:s,radius:i}=this,r=e.angle;return{x:n+Math.cos(r)*i,y:s+Math.sin(r)*i,angle:r}}}function sK(t){const{chart:e,fill:n,line:s}=t;if(yt(n))return iK(e,n);if(n==="stack")return ZG(t);if(n==="shape")return!0;const i=rK(t);return i instanceof _C?i:mC(i,s)}function iK(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function rK(t){return(t.scale||{}).getPointPositionForValue?aK(t):oK(t)}function oK(t){const{scale:e={},fill:n}=t,s=QG(n,e);if(yt(s)){const i=e.isHorizontal();return{x:i?s:null,y:i?null:s}}return null}function aK(t){const{scale:e,fill:n}=t,s=e.options,i=e.getLabels().length,r=s.reverse?e.max:e.min,o=XG(n,e,r),a=[];if(s.grid.circular){const c=e.getPointPositionForValue(0,r);return new _C({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<i;++c)a.push(e.getPointPositionForValue(c,o));return a}function Ip(t,e,n){const s=sK(e),{line:i,scale:r,axis:o}=e,a=i.options,c=a.fill,l=a.backgroundColor,{above:u=l,below:h=l}=c||{};s&&i.points.length&&(bf(t,n),cK(t,{line:i,target:s,above:u,below:h,area:n,scale:r,axis:o}),vf(t))}function cK(t,e){const{line:n,target:s,above:i,below:r,area:o,scale:a}=e,c=n._loop?"angle":e.axis;t.save(),c==="x"&&r!==i&&(Yw(t,s,o.top),Qw(t,{line:n,target:s,color:i,scale:a,property:c}),t.restore(),t.save(),Yw(t,s,o.bottom)),Qw(t,{line:n,target:s,color:r,scale:a,property:c}),t.restore()}function Yw(t,e,n){const{segments:s,points:i}=e;let r=!0,o=!1;t.beginPath();for(const a of s){const{start:c,end:l}=a,u=i[c],h=i[Ey(c,l,i)];r?(t.moveTo(u.x,u.y),r=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(h.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function Qw(t,e){const{line:n,target:s,property:i,color:r,scale:o}=e,a=WG(n,s,i);for(const{source:c,target:l,start:u,end:h}of a){const{style:{backgroundColor:d=r}={}}=c,f=s!==!0;t.save(),t.fillStyle=d,lK(t,o,f&&Hg(i,u,h)),t.beginPath();const g=!!n.pathSegment(t,c);let m;if(f){g?t.closePath():Xw(t,s,h,i);const _=!!s.pathSegment(t,l,{move:g,reverse:!0});m=g&&_,m||Xw(t,s,u,i)}t.closePath(),t.fill(m?"evenodd":"nonzero"),t.restore()}}function lK(t,e,n){const{top:s,bottom:i}=e.chart.chartArea,{property:r,start:o,end:a}=n||{};r==="x"&&(t.beginPath(),t.rect(o,s,a-o,i-s),t.clip())}function Xw(t,e,n,s){const i=e.interpolate(n,s);i&&t.lineTo(i.x,i.y)}var uK={id:"filler",afterDatasetsUpdate(t,e,n){const s=(t.data.datasets||[]).length,i=[];let r,o,a,c;for(o=0;o<s;++o)r=t.getDatasetMeta(o),a=r.dataset,c=null,a&&a.options&&a instanceof Bi&&(c={visible:t.isDatasetVisible(o),index:o,fill:KG(a,o,s),chart:t,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=c,i.push(c);for(o=0;o<s;++o)c=i[o],!(!c||c.fill===!1)&&(c.fill=GG(i,o,n.propagate))},beforeDraw(t,e,n){const s=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),r=t.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),s&&a.fill&&Ip(t.ctx,a,r))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const s=t.getSortedVisibleDatasetMetas();for(let i=s.length-1;i>=0;--i){const r=s[i].$filler;Kw(r)&&Ip(t.ctx,r,t.chartArea)}},beforeDatasetDraw(t,e,n){const s=e.meta.$filler;!Kw(s)||n.drawTime!=="beforeDatasetDraw"||Ip(t.ctx,s,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Jw=(t,e)=>{let{boxHeight:n=e,boxWidth:s=e}=t;return t.usePointStyle&&(n=Math.min(n,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(e,n)}},hK=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Zw extends pi{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,s){this.maxWidth=e,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Je(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(s=>e.filter(s,this.chart.data))),e.sort&&(n=n.sort((s,i)=>e.sort(s,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,i=Ft(s.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:c}=Jw(s,r);let l,u;n.font=i.string,this.isHorizontal()?(l=this.maxWidth,u=this._fitRows(o,r,a,c)+10):(u=this.maxHeight,l=this._fitCols(o,i,a,c)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,s,i){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.lineWidths=[0],u=i+a;let h=e;r.textAlign="left",r.textBaseline="middle";let d=-1,f=-u;return this.legendItems.forEach((g,m)=>{const _=s+n/2+r.measureText(g.text).width;(m===0||l[l.length-1]+_+2*a>o)&&(h+=u,l[l.length-(m>0?0:1)]=0,f+=u,d++),c[m]={left:0,top:f,row:d,width:_,height:i},l[l.length-1]+=_+a}),h}_fitCols(e,n,s,i){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.columnSizes=[],u=o-e;let h=a,d=0,f=0,g=0,m=0;return this.legendItems.forEach((_,y)=>{const{itemWidth:v,itemHeight:E}=dK(s,n,r,_,i);y>0&&f+E+2*a>u&&(h+=d+a,l.push({width:d,height:f}),g+=d+a,m++,d=f=0),c[y]={left:g,top:f,col:m,width:v,height:E},d=Math.max(d,v),f+=E+a}),h+=d,l.push({width:d,height:f}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:i},rtl:r}}=this,o=Ho(r,this.left,this.width);if(this.isHorizontal()){let a=0,c=en(s,this.left+i,this.right-this.lineWidths[a]);for(const l of n)a!==l.row&&(a=l.row,c=en(s,this.left+i,this.right-this.lineWidths[a])),l.top+=this.top+e+i,l.left=o.leftForLtr(o.x(c),l.width),c+=l.width+i}else{let a=0,c=en(s,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const l of n)l.col!==a&&(a=l.col,c=en(s,this.top+e+i,this.bottom-this.columnSizes[a].height)),l.top=c,l.left+=this.left+i,l.left=o.leftForLtr(o.x(l.left),l.width),c+=l.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;bf(e,this),this._draw(),vf(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:s,ctx:i}=this,{align:r,labels:o}=e,a=bt.color,c=Ho(e.rtl,this.left,this.width),l=Ft(o.font),{padding:u}=o,h=l.size,d=h/2;let f;this.drawTitle(),i.textAlign=c.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;const{boxWidth:g,boxHeight:m,itemHeight:_}=Jw(o,h),y=function(I,k,R){if(isNaN(g)||g<=0||isNaN(m)||m<0)return;i.save();const N=we(R.lineWidth,1);if(i.fillStyle=we(R.fillStyle,a),i.lineCap=we(R.lineCap,"butt"),i.lineDashOffset=we(R.lineDashOffset,0),i.lineJoin=we(R.lineJoin,"miter"),i.lineWidth=N,i.strokeStyle=we(R.strokeStyle,a),i.setLineDash(we(R.lineDash,[])),o.usePointStyle){const $={radius:m*Math.SQRT2/2,pointStyle:R.pointStyle,rotation:R.rotation,borderWidth:N},X=c.xPlus(I,g/2),B=k+d;Fx(i,$,X,B,o.pointStyleWidth&&g)}else{const $=k+Math.max((h-m)/2,0),X=c.leftForLtr(I,g),B=$r(R.borderRadius);i.beginPath(),Object.values(B).some(ce=>ce!==0)?Qc(i,{x:X,y:$,w:g,h:m,radius:B}):i.rect(X,$,g,m),i.fill(),N!==0&&i.stroke()}i.restore()},v=function(I,k,R){eo(i,R.text,I,k+_/2,l,{strikethrough:R.hidden,textAlign:c.textAlign(R.textAlign)})},E=this.isHorizontal(),T=this._computeTitleHeight();E?f={x:en(r,this.left+u,this.right-s[0]),y:this.top+u+T,line:0}:f={x:this.left+u,y:en(r,this.top+T+u,this.bottom-n[0].height),line:0},qx(this.ctx,e.textDirection);const S=_+u;this.legendItems.forEach((I,k)=>{i.strokeStyle=I.fontColor,i.fillStyle=I.fontColor;const R=i.measureText(I.text).width,N=c.textAlign(I.textAlign||(I.textAlign=o.textAlign)),$=g+d+R;let X=f.x,B=f.y;c.setWidth(this.width),E?k>0&&X+$+u>this.right&&(B=f.y+=S,f.line++,X=f.x=en(r,this.left+u,this.right-s[f.line])):k>0&&B+S>this.bottom&&(X=f.x=X+n[f.line].width+u,f.line++,B=f.y=en(r,this.top+T+u,this.bottom-n[f.line].height));const ce=c.x(X);if(y(ce,B,I),X=M8(N,X+g+d,E?X+$:this.right,e.rtl),v(c.x(X),B,I),E)f.x+=$+u;else if(typeof I.text!="string"){const ze=l.lineHeight;f.y+=yC(I,ze)+u}else f.y+=S}),Gx(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,s=Ft(n.font),i=hn(n.padding);if(!n.display)return;const r=Ho(e.rtl,this.left,this.width),o=this.ctx,a=n.position,c=s.size/2,l=i.top+c;let u,h=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),u=this.top+l,h=en(e.align,h,this.right-d);else{const g=this.columnSizes.reduce((m,_)=>Math.max(m,_.height),0);u=l+en(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const f=en(a,h,h+d);o.textAlign=r.textAlign(dy(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,eo(o,n.text,f,u,s)}_computeTitleHeight(){const e=this.options.title,n=Ft(e.font),s=hn(e.padding);return e.display?n.lineHeight+s.height:0}_getLegendItemAt(e,n){let s,i,r;if(Js(e,this.left,this.right)&&Js(n,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(i=r[s],Js(e,i.left,i.left+i.width)&&Js(n,i.top,i.top+i.height))return this.legendItems[s]}return null}handleEvent(e){const n=this.options;if(!gK(e.type,n))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,r=hK(i,s);i&&!r&&Je(n.onLeave,[e,i,this],this),this._hoveredItem=s,s&&!r&&Je(n.onHover,[e,s,this],this)}else s&&Je(n.onClick,[e,s,this],this)}}function dK(t,e,n,s,i){const r=fK(s,t,e,n),o=pK(i,s,e.lineHeight);return{itemWidth:r,itemHeight:o}}function fK(t,e,n,s){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((r,o)=>r.length>o.length?r:o)),e+n.size/2+s.measureText(i).width}function pK(t,e,n){let s=t;return typeof e.text!="string"&&(s=yC(e,n)),s}function yC(t,e){const n=t.text?t.text.length:0;return e*n}function gK(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var mK={id:"legend",_element:Zw,start(t,e,n){const s=t.legend=new Zw({ctx:t.ctx,options:n,chart:t});rn.configure(t,s,n),rn.addBox(t,s)},stop(t){rn.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const s=t.legend;rn.configure(t,s,n),s.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const s=e.datasetIndex,i=n.chart;i.isDatasetVisible(s)?(i.hide(s),e.hidden=!0):(i.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(c=>{const l=c.controller.getStyle(n?0:void 0),u=hn(l.borderWidth);return{text:e[c.index].label,fillStyle:l.backgroundColor,fontColor:r,hidden:!c.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:l.borderColor,pointStyle:s||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:c.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Ty extends pi{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=rt(s.text)?s.text.length:1;this._padding=hn(s.padding);const r=i*Ft(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:s,bottom:i,right:r,options:o}=this,a=o.align;let c=0,l,u,h;return this.isHorizontal()?(u=en(a,s,r),h=n+e,l=r-s):(o.position==="left"?(u=s+e,h=en(a,i,n),c=at*-.5):(u=r-e,h=en(a,n,i),c=at*.5),l=i-n),{titleX:u,titleY:h,maxWidth:l,rotation:c}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const s=Ft(n.font),r=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:c,rotation:l}=this._drawArgs(r);eo(e,n.text,0,0,s,{color:n.color,maxWidth:c,rotation:l,textAlign:dy(n.align),textBaseline:"middle",translation:[o,a]})}}function _K(t,e){const n=new Ty({ctx:t.ctx,options:e,chart:t});rn.configure(t,n,e),rn.addBox(t,n),t.titleBlock=n}var yK={id:"title",_element:Ty,start(t,e,n){_K(t,n)},stop(t){const e=t.titleBlock;rn.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const s=t.titleBlock;rn.configure(t,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const wu=new WeakMap;var bK={id:"subtitle",start(t,e,n){const s=new Ty({ctx:t.ctx,options:n,chart:t});rn.configure(t,s,n),rn.addBox(t,s),wu.set(t,s)},stop(t){rn.removeBox(t,wu.get(t)),wu.delete(t)},beforeUpdate(t,e,n){const s=wu.get(t);rn.configure(t,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ya={average(t){if(!t.length)return!1;let e,n,s=new Set,i=0,r=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const c=a.tooltipPosition();s.add(c.x),i+=c.y,++r}}return{x:[...s].reduce((a,c)=>a+c)/s.size,y:i/r}},nearest(t,e){if(!t.length)return!1;let n=e.x,s=e.y,i=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=t.length;r<o;++r){const c=t[r].element;if(c&&c.hasValue()){const l=c.getCenterPoint(),u=Mg(e,l);u<i&&(i=u,a=c)}}if(a){const c=a.tooltipPosition();n=c.x,s=c.y}return{x:n,y:s}}};function ds(t,e){return e&&(rt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Gs(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function vK(t,e){const{element:n,datasetIndex:s,index:i}=e,r=t.getDatasetMeta(s).controller,{label:o,value:a}=r.getLabelAndValue(i);return{chart:t,label:o,parsed:r.getParsed(i),raw:t.data.datasets[s].data[i],formattedValue:a,dataset:r.getDataset(),dataIndex:i,datasetIndex:s,element:n}}function eE(t,e){const n=t.chart.ctx,{body:s,footer:i,title:r}=t,{boxWidth:o,boxHeight:a}=e,c=Ft(e.bodyFont),l=Ft(e.titleFont),u=Ft(e.footerFont),h=r.length,d=i.length,f=s.length,g=hn(e.padding);let m=g.height,_=0,y=s.reduce((T,S)=>T+S.before.length+S.lines.length+S.after.length,0);if(y+=t.beforeBody.length+t.afterBody.length,h&&(m+=h*l.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),y){const T=e.displayColors?Math.max(a,c.lineHeight):c.lineHeight;m+=f*T+(y-f)*c.lineHeight+(y-1)*e.bodySpacing}d&&(m+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let v=0;const E=function(T){_=Math.max(_,n.measureText(T).width+v)};return n.save(),n.font=l.string,qe(t.title,E),n.font=c.string,qe(t.beforeBody.concat(t.afterBody),E),v=e.displayColors?o+2+e.boxPadding:0,qe(s,T=>{qe(T.before,E),qe(T.lines,E),qe(T.after,E)}),v=0,n.font=u.string,qe(t.footer,E),n.restore(),_+=g.width,{width:_,height:m}}function wK(t,e){const{y:n,height:s}=e;return n<s/2?"top":n>t.height-s/2?"bottom":"center"}function EK(t,e,n,s){const{x:i,width:r}=s,o=n.caretSize+n.caretPadding;if(t==="left"&&i+r+o>e.width||t==="right"&&i-r-o<0)return!0}function TK(t,e,n,s){const{x:i,width:r}=n,{width:o,chartArea:{left:a,right:c}}=t;let l="center";return s==="center"?l=i<=(a+c)/2?"left":"right":i<=r/2?l="left":i>=o-r/2&&(l="right"),EK(l,t,e,n)&&(l="center"),l}function tE(t,e,n){const s=n.yAlign||e.yAlign||wK(t,n);return{xAlign:n.xAlign||e.xAlign||TK(t,e,n,s),yAlign:s}}function SK(t,e){let{x:n,width:s}=t;return e==="right"?n-=s:e==="center"&&(n-=s/2),n}function RK(t,e,n){let{y:s,height:i}=t;return e==="top"?s+=n:e==="bottom"?s-=i+n:s-=i/2,s}function nE(t,e,n,s){const{caretSize:i,caretPadding:r,cornerRadius:o}=t,{xAlign:a,yAlign:c}=n,l=i+r,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=$r(o);let g=SK(e,a);const m=RK(e,c,l);return c==="center"?a==="left"?g+=l:a==="right"&&(g-=l):a==="left"?g-=Math.max(u,d)+i:a==="right"&&(g+=Math.max(h,f)+i),{x:Ht(g,0,s.width-e.width),y:Ht(m,0,s.height-e.height)}}function Eu(t,e,n){const s=hn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-s.right:t.x+s.left}function sE(t){return ds([],Gs(t))}function IK(t,e,n){return lr(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function iE(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const bC={beforeTitle:js,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return n[e.dataIndex]}return""},afterTitle:js,beforeBody:js,beforeLabel:js,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Be(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:js,afterBody:js,beforeFooter:js,footer:js,afterFooter:js};function yn(t,e,n,s){const i=t[e].call(n,s);return typeof i>"u"?bC[e].call(n,s):i}class zg extends pi{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,s=this.options.setContext(this.getContext()),i=s.enabled&&n.options.animation&&s.animations,r=new Xx(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=IK(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:s}=n,i=yn(s,"beforeTitle",this,e),r=yn(s,"title",this,e),o=yn(s,"afterTitle",this,e);let a=[];return a=ds(a,Gs(i)),a=ds(a,Gs(r)),a=ds(a,Gs(o)),a}getBeforeBody(e,n){return sE(yn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:s}=n,i=[];return qe(e,r=>{const o={before:[],lines:[],after:[]},a=iE(s,r);ds(o.before,Gs(yn(a,"beforeLabel",this,r))),ds(o.lines,yn(a,"label",this,r)),ds(o.after,Gs(yn(a,"afterLabel",this,r))),i.push(o)}),i}getAfterBody(e,n){return sE(yn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:s}=n,i=yn(s,"beforeFooter",this,e),r=yn(s,"footer",this,e),o=yn(s,"afterFooter",this,e);let a=[];return a=ds(a,Gs(i)),a=ds(a,Gs(r)),a=ds(a,Gs(o)),a}_createItems(e){const n=this._active,s=this.chart.data,i=[],r=[],o=[];let a=[],c,l;for(c=0,l=n.length;c<l;++c)a.push(vK(this.chart,n[c]));return e.filter&&(a=a.filter((u,h,d)=>e.filter(u,h,d,s))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,s))),qe(a,u=>{const h=iE(e.callbacks,u);i.push(yn(h,"labelColor",this,u)),r.push(yn(h,"labelPointStyle",this,u)),o.push(yn(h,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const s=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(!i.length)this.opacity!==0&&(r={opacity:0});else{const a=Ya[s.position].call(this,i,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const c=this._size=eE(this,s),l=Object.assign({},a,c),u=tE(this.chart,s,l),h=nE(s,l,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,s,i){const r=this.getCaretPosition(e,s,i);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(e,n,s){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:c,topRight:l,bottomLeft:u,bottomRight:h}=$r(a),{x:d,y:f}=e,{width:g,height:m}=n;let _,y,v,E,T,S;return r==="center"?(T=f+m/2,i==="left"?(_=d,y=_-o,E=T+o,S=T-o):(_=d+g,y=_+o,E=T-o,S=T+o),v=_):(i==="left"?y=d+Math.max(c,u)+o:i==="right"?y=d+g-Math.max(l,h)-o:y=this.caretX,r==="top"?(E=f,T=E-o,_=y-o,v=y+o):(E=f+m,T=E+o,_=y+o,v=y-o),S=E),{x1:_,x2:y,x3:v,y1:E,y2:T,y3:S}}drawTitle(e,n,s){const i=this.title,r=i.length;let o,a,c;if(r){const l=Ho(s.rtl,this.x,this.width);for(e.x=Eu(this,s.titleAlign,s),n.textAlign=l.textAlign(s.titleAlign),n.textBaseline="middle",o=Ft(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,c=0;c<r;++c)n.fillText(i[c],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,c+1===r&&(e.y+=s.titleMarginBottom-a)}}_drawColorBox(e,n,s,i,r){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:c,boxWidth:l}=r,u=Ft(r.bodyFont),h=Eu(this,"left",r),d=i.x(h),f=c<u.lineHeight?(u.lineHeight-c)/2:0,g=n.y+f;if(r.usePointStyle){const m={radius:Math.min(l,c)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},_=i.leftForLtr(d,l)+l/2,y=g+c/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,Ng(e,m,_,y),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Ng(e,m,_,y)}else{e.lineWidth=Pe(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const m=i.leftForLtr(d,l),_=i.leftForLtr(i.xPlus(d,1),l-2),y=$r(o.borderRadius);Object.values(y).some(v=>v!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,Qc(e,{x:m,y:g,w:l,h:c,radius:y}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Qc(e,{x:_,y:g+1,w:l-2,h:c-2,radius:y}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(m,g,l,c),e.strokeRect(m,g,l,c),e.fillStyle=o.backgroundColor,e.fillRect(_,g+1,l-2,c-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,n,s){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:c,boxWidth:l,boxPadding:u}=s,h=Ft(s.bodyFont);let d=h.lineHeight,f=0;const g=Ho(s.rtl,this.x,this.width),m=function(R){n.fillText(R,g.x(e.x+f),e.y+d/2),e.y+=d+r},_=g.textAlign(o);let y,v,E,T,S,I,k;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=Eu(this,_,s),n.fillStyle=s.bodyColor,qe(this.beforeBody,m),f=a&&_!=="right"?o==="center"?l/2+u:l+2+u:0,T=0,I=i.length;T<I;++T){for(y=i[T],v=this.labelTextColors[T],n.fillStyle=v,qe(y.before,m),E=y.lines,a&&E.length&&(this._drawColorBox(n,e,T,g,s),d=Math.max(h.lineHeight,c)),S=0,k=E.length;S<k;++S)m(E[S]),d=h.lineHeight;qe(y.after,m)}f=0,d=h.lineHeight,qe(this.afterBody,m),e.y-=r}drawFooter(e,n,s){const i=this.footer,r=i.length;let o,a;if(r){const c=Ho(s.rtl,this.x,this.width);for(e.x=Eu(this,s.footerAlign,s),e.y+=s.footerMarginTop,n.textAlign=c.textAlign(s.footerAlign),n.textBaseline="middle",o=Ft(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,a=0;a<r;++a)n.fillText(i[a],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s.footerSpacing}}drawBackground(e,n,s,i){const{xAlign:r,yAlign:o}=this,{x:a,y:c}=e,{width:l,height:u}=s,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:g}=$r(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+h,c),o==="top"&&this.drawCaret(e,n,s,i),n.lineTo(a+l-d,c),n.quadraticCurveTo(a+l,c,a+l,c+d),o==="center"&&r==="right"&&this.drawCaret(e,n,s,i),n.lineTo(a+l,c+u-g),n.quadraticCurveTo(a+l,c+u,a+l-g,c+u),o==="bottom"&&this.drawCaret(e,n,s,i),n.lineTo(a+f,c+u),n.quadraticCurveTo(a,c+u,a,c+u-f),o==="center"&&r==="left"&&this.drawCaret(e,n,s,i),n.lineTo(a,c+h),n.quadraticCurveTo(a,c,a+h,c),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,s=this.$animations,i=s&&s.x,r=s&&s.y;if(i||r){const o=Ya[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=eE(this,e),c=Object.assign({},o,this._size),l=tE(n,e,c),u=nE(e,c,l,n);(i._to!==u.x||r._to!==u.y)&&(this.xAlign=l.xAlign,this.yAlign=l.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=hn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=s,this.drawBackground(r,e,i,n),qx(e,n.textDirection),r.y+=o.top,this.drawTitle(r,e,n),this.drawBody(r,e,n),this.drawFooter(r,e,n),Gx(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const s=this._active,i=e.map(({datasetIndex:a,index:c})=>{const l=this.chart.getDatasetMeta(a);if(!l)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:l.data[c],index:c}}),r=!Uh(s,i),o=this._positionChanged(i,n);(r||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(e,r,n,s),a=this._positionChanged(o,e),c=n||!Uh(o,r)||a;return c&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),c}_getActiveElements(e,n,s,i){const r=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,r.mode,r,s);return r.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:s,caretY:i,options:r}=this,o=Ya[r.position].call(this,e,n);return o!==!1&&(s!==o.x||i!==o.y)}}x(zg,"positioners",Ya);var xK={id:"tooltip",_element:zg,positioners:Ya,afterInit(t,e,n){n&&(t.tooltip=new zg({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:bC},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},CK=Object.freeze({__proto__:null,Colors:UG,Decimation:jG,Filler:uK,Legend:mK,SubTitle:bK,Title:yK,Tooltip:xK});const kK=(t,e,n,s)=>(typeof e=="string"?(n=t.push(e)-1,s.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function AK(t,e,n,s){const i=t.indexOf(e);if(i===-1)return kK(t,e,n,s);const r=t.lastIndexOf(e);return i!==r?n:i}const PK=(t,e)=>t===null?null:Ht(Math.round(t),0,e);function rE(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class jg extends go{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:i,label:r}of n)s[i]===r&&s.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Be(e))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===e?n:AK(s,e,we(n,e),this._addedLabels),PK(n,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),n||(i=this.getLabels().length-1)),this.min=s,this.max=i}buildTicks(){const e=this.min,n=this.max,s=this.options.offset,i=[];let r=this.getLabels();r=e===0&&n===r.length-1?r:r.slice(e,n+1),this._valueRange=Math.max(r.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return rE.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}x(jg,"id","category"),x(jg,"defaults",{ticks:{callback:rE}});function DK(t,e){const n=[],{bounds:i,step:r,min:o,max:a,precision:c,count:l,maxTicks:u,maxDigits:h,includeBounds:d}=t,f=r||1,g=u-1,{min:m,max:_}=e,y=!Be(o),v=!Be(a),E=!Be(l),T=(_-m)/(h+1);let S=Z0((_-m)/g/f)*f,I,k,R,N;if(S<1e-14&&!y&&!v)return[{value:m},{value:_}];N=Math.ceil(_/S)-Math.floor(m/S),N>g&&(S=Z0(N*S/g/f)*f),Be(c)||(I=Math.pow(10,c),S=Math.ceil(S*I)/I),i==="ticks"?(k=Math.floor(m/S)*S,R=Math.ceil(_/S)*S):(k=m,R=_),y&&v&&r&&x8((a-o)/r,S/1e3)?(N=Math.round(Math.min((a-o)/S,u)),S=(a-o)/N,k=o,R=a):E?(k=y?o:k,R=v?a:R,N=l-1,S=(R-k)/N):(N=(R-k)/S,fc(N,Math.round(N),S/1e3)?N=Math.round(N):N=Math.ceil(N));const $=Math.max(ew(S),ew(k));I=Math.pow(10,Be(c)?$:c),k=Math.round(k*I)/I,R=Math.round(R*I)/I;let X=0;for(y&&(d&&k!==o?(n.push({value:o}),k<o&&X++,fc(Math.round((k+X*S)*I)/I,o,oE(o,T,t))&&X++):k<o&&X++);X<N;++X){const B=Math.round((k+X*S)*I)/I;if(v&&B>a)break;n.push({value:B})}return v&&d&&R!==a?n.length&&fc(n[n.length-1].value,a,oE(a,T,t))?n[n.length-1].value=a:n.push({value:a}):(!v||R===a)&&n.push({value:R}),n}function oE(t,e,{horizontal:n,minRotation:s}){const i=ns(s),r=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/r,o)}class Gh extends go{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Be(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:i,max:r}=this;const o=c=>i=n?i:c,a=c=>r=s?r:c;if(e){const c=Os(i),l=Os(r);c<0&&l<0?a(0):c>0&&l>0&&o(0)}if(i===r){let c=r===0?1:Math.abs(r*.05);a(r+c),e||o(i-c)}this.min=i,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=e,i;return s?(i=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const i={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},r=this._range||this,o=DK(i,r);return e.bounds==="ticks"&&kx(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const i=(s-n)/Math.max(e.length-1,1)/2;n-=i,s+=i}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(e){return Fl(e,this.chart.options.locale,this.options.ticks.format)}}class Wg extends Gh{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=yt(e)?e:0,this.max=yt(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,s=ns(this.options.ticks.minRotation),i=(e?Math.sin(s):Math.cos(s))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,r.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}x(Wg,"id","linear"),x(Wg,"defaults",{ticks:{callback:yf.formatters.numeric}});const Jc=t=>Math.floor(Fi(t)),_r=(t,e)=>Math.pow(10,Jc(t)+e);function aE(t){return t/Math.pow(10,Jc(t))===1}function cE(t,e,n){const s=Math.pow(10,n),i=Math.floor(t/s);return Math.ceil(e/s)-i}function OK(t,e){const n=e-t;let s=Jc(n);for(;cE(t,e,s)>10;)s++;for(;cE(t,e,s)<10;)s--;return Math.min(s,Jc(t))}function MK(t,{min:e,max:n}){e=kn(t.min,e);const s=[],i=Jc(e);let r=OK(e,n),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),c=i>r?Math.pow(10,i):0,l=Math.round((e-c)*o)/o,u=Math.floor((e-c)/a/10)*a*10;let h=Math.floor((l-u)/Math.pow(10,r)),d=kn(t.min,Math.round((c+u+h*Math.pow(10,r))*o)/o);for(;d<n;)s.push({value:d,major:aE(d),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(r++,h=2,o=r>=0?1:o),d=Math.round((c+u+h*Math.pow(10,r))*o)/o;const f=kn(t.max,d);return s.push({value:f,major:aE(f),significand:h}),s}class qg extends go{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const s=Gh.prototype.parse.apply(this,[e,n]);if(s===0){this._zero=!0;return}return yt(s)&&s>0?s:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=yt(e)?Math.max(0,e):null,this.max=yt(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!yt(this._userMin)&&(this.min=e===_r(this.min,0)?_r(this.min,-1):_r(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let s=this.min,i=this.max;const r=a=>s=e?s:a,o=a=>i=n?i:a;s===i&&(s<=0?(r(1),o(10)):(r(_r(s,-1)),o(_r(i,1)))),s<=0&&r(_r(i,-1)),i<=0&&o(_r(s,1)),this.min=s,this.max=i}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},s=MK(n,this);return e.bounds==="ticks"&&kx(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}getLabelForValue(e){return e===void 0?"0":Fl(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Fi(e),this._valueRange=Fi(this.max)-Fi(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Fi(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}x(qg,"id","logarithmic"),x(qg,"defaults",{ticks:{callback:yf.formatters.logarithmic,major:{enabled:!0}}});function Gg(t){const e=t.ticks;if(e.display&&t.display){const n=hn(e.backdropPadding);return we(e.font&&e.font.size,bt.font.size)+n.height}return 0}function LK(t,e,n){return n=rt(n)?n:[n],{w:j8(t,e.string,n),h:n.length*e.lineHeight}}function lE(t,e,n,s,i){return t===s||t===i?{start:e-n/2,end:e+n/2}:t<s||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function NK(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),s=[],i=[],r=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?at/r:0;for(let c=0;c<r;c++){const l=o.setContext(t.getPointLabelContext(c));i[c]=l.padding;const u=t.getPointPosition(c,t.drawingArea+i[c],a),h=Ft(l.font),d=LK(t.ctx,h,t._pointLabels[c]);s[c]=d;const f=An(t.getIndexAngle(c)+a),g=Math.round(uy(f)),m=lE(g,u.x,d.w,0,180),_=lE(g,u.y,d.h,90,270);VK(n,e,f,m,_)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=UK(t,s,i)}function VK(t,e,n,s,i){const r=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,c=0;s.start<e.l?(a=(e.l-s.start)/r,t.l=Math.min(t.l,e.l-a)):s.end>e.r&&(a=(s.end-e.r)/r,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(c=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-c)):i.end>e.b&&(c=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+c))}function FK(t,e,n){const s=t.drawingArea,{extra:i,additionalAngle:r,padding:o,size:a}=n,c=t.getPointPosition(e,s+i+o,r),l=Math.round(uy(An(c.angle+St))),u=zK(c.y,a.h,l),h=$K(l),d=HK(c.x,a.w,h);return{visible:!0,x:c.x,y:u,textAlign:h,left:d,top:u,right:d+a.w,bottom:u+a.h}}function BK(t,e){if(!e)return!0;const{left:n,top:s,right:i,bottom:r}=t;return!(ei({x:n,y:s},e)||ei({x:n,y:r},e)||ei({x:i,y:s},e)||ei({x:i,y:r},e))}function UK(t,e,n){const s=[],i=t._pointLabels.length,r=t.options,{centerPointLabels:o,display:a}=r.pointLabels,c={extra:Gg(r)/2,additionalAngle:o?at/i:0};let l;for(let u=0;u<i;u++){c.padding=n[u],c.size=e[u];const h=FK(t,u,c);s.push(h),a==="auto"&&(h.visible=BK(h,l),h.visible&&(l=h))}return s}function $K(t){return t===0||t===180?"center":t<180?"left":"right"}function HK(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function zK(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function jK(t,e,n){const{left:s,top:i,right:r,bottom:o}=n,{backdropColor:a}=e;if(!Be(a)){const c=$r(e.borderRadius),l=hn(e.backdropPadding);t.fillStyle=a;const u=s-l.left,h=i-l.top,d=r-s+l.width,f=o-i+l.height;Object.values(c).some(g=>g!==0)?(t.beginPath(),Qc(t,{x:u,y:h,w:d,h:f,radius:c}),t.fill()):t.fillRect(u,h,d,f)}}function WK(t,e){const{ctx:n,options:{pointLabels:s}}=t;for(let i=e-1;i>=0;i--){const r=t._pointLabelItems[i];if(!r.visible)continue;const o=s.setContext(t.getPointLabelContext(i));jK(n,o,r);const a=Ft(o.font),{x:c,y:l,textAlign:u}=r;eo(n,t._pointLabels[i],c,l+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function vC(t,e,n,s){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,ot);else{let r=t.getPointPosition(0,e);i.moveTo(r.x,r.y);for(let o=1;o<s;o++)r=t.getPointPosition(o,e),i.lineTo(r.x,r.y)}}function qK(t,e,n,s,i){const r=t.ctx,o=e.circular,{color:a,lineWidth:c}=e;!o&&!s||!a||!c||n<0||(r.save(),r.strokeStyle=a,r.lineWidth=c,r.setLineDash(i.dash),r.lineDashOffset=i.dashOffset,r.beginPath(),vC(t,n,o,s),r.closePath(),r.stroke(),r.restore())}function GK(t,e,n){return lr(t,{label:n,index:e,type:"pointLabel"})}class Qa extends Gh{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=hn(Gg(this.options)/2),n=this.width=this.maxWidth-e.width,s=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+s/2+e.top),this.drawingArea=Math.floor(Math.min(n,s)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=yt(e)&&!isNaN(e)?e:0,this.max=yt(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Gg(this.options))}generateTickLabels(e){Gh.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,s)=>{const i=Je(this.options.pointLabels.callback,[n,s],this);return i||i===0?i:""}).filter((n,s)=>this.chart.getDataVisibility(s))}fit(){const e=this.options;e.display&&e.pointLabels.display?NK(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,s,i){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((s-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,s,i))}getIndexAngle(e){const n=ot/(this._pointLabels.length||1),s=this.options.startAngle||0;return An(e*n+ns(s))}getDistanceFromCenterForValue(e){if(Be(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(Be(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const s=n[e];return GK(this.getContext(),e,s)}}getPointPosition(e,n,s=0){const i=this.getIndexAngle(e)-St+s;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:s,right:i,bottom:r}=this._pointLabelItems[e];return{left:n,top:s,right:i,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const s=this.ctx;s.save(),s.beginPath(),vC(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),s.closePath(),s.fillStyle=e,s.fill(),s.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:s,grid:i,border:r}=n,o=this._pointLabels.length;let a,c,l;if(n.pointLabels.display&&WK(this,o),i.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){c=this.getDistanceFromCenterForValue(u.value);const d=this.getContext(h),f=i.setContext(d),g=r.setContext(d);qK(this,f,c,o,g)}}),s.display){for(e.save(),a=o-1;a>=0;a--){const u=s.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:d}=u;!d||!h||(e.lineWidth=d,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),l=this.getPointPosition(a,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,s=n.ticks;if(!s.display)return;const i=this.getIndexAngle(0);let r,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,c)=>{if(c===0&&this.min>=0&&!n.reverse)return;const l=s.setContext(this.getContext(c)),u=Ft(l.font);if(r=this.getDistanceFromCenterForValue(this.ticks[c].value),l.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=l.backdropColor;const h=hn(l.backdropPadding);e.fillRect(-o/2-h.left,-r-u.size/2-h.top,o+h.width,u.size+h.height)}eo(e,a.label,0,-r,u,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}),e.restore()}drawTitle(){}}x(Qa,"id","radialLinear"),x(Qa,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:yf.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),x(Qa,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),x(Qa,"descriptors",{angleLines:{_fallback:"grid"}});const Ef={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},En=Object.keys(Ef);function uE(t,e){return t-e}function hE(t,e){if(Be(e))return null;const n=t._adapter,{parser:s,round:i,isoWeekday:r}=t._parseOpts;let o=e;return typeof s=="function"&&(o=s(o)),yt(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(aa(r)||r===!0)?n.startOf(o,"isoWeek",r):n.startOf(o,i)),+o)}function dE(t,e,n,s){const i=En.length;for(let r=En.indexOf(t);r<i-1;++r){const o=Ef[En[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=s)return En[r]}return En[i-1]}function KK(t,e,n,s,i){for(let r=En.length-1;r>=En.indexOf(n);r--){const o=En[r];if(Ef[o].common&&t._adapter.diff(i,s,o)>=e-1)return o}return En[n?En.indexOf(n):0]}function YK(t){for(let e=En.indexOf(t)+1,n=En.length;e<n;++e)if(Ef[En[e]].common)return En[e]}function fE(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:s,hi:i}=hy(n,e),r=n[s]>=e?n[s]:n[i];t[r]=!0}}function QK(t,e,n,s){const i=t._adapter,r=+i.startOf(e[0].value,s),o=e[e.length-1].value;let a,c;for(a=r;a<=o;a=+i.add(a,1,s))c=n[a],c>=0&&(e[c].major=!0);return e}function pE(t,e,n){const s=[],i={},r=e.length;let o,a;for(o=0;o<r;++o)a=e[o],i[a]=o,s.push({value:a,major:!1});return r===0||!n?s:QK(t,s,i,n)}class Zc extends go{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const s=e.time||(e.time={}),i=this._adapter=new eC._date(e.adapters.date);i.init(n),dc(s.displayFormats,i.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:hE(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,s=e.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function c(l){!o&&!isNaN(l.min)&&(i=Math.min(i,l.min)),!a&&!isNaN(l.max)&&(r=Math.max(r,l.max))}(!o||!a)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),i=yt(i)&&!isNaN(i)?i:+n.startOf(Date.now(),s),r=yt(r)&&!isNaN(r)?r:+n.endOf(Date.now(),s)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],s=e[e.length-1]),{min:n,max:s}}buildTicks(){const e=this.options,n=e.time,s=e.ticks,i=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=this.max,a=P8(i,r,o);return this._unit=n.unit||(s.autoSkip?dE(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):KK(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:YK(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),pE(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,s=0,i,r;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?s=r:s=(r-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Ht(n,0,o),s=Ht(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const e=this._adapter,n=this.min,s=this.max,i=this.options,r=i.time,o=r.unit||dE(r.minUnit,n,s,this._getLabelCapacity(n)),a=we(i.ticks.stepSize,1),c=o==="week"?r.isoWeekday:!1,l=aa(c)||c===!0,u={};let h=n,d,f;if(l&&(h=+e.startOf(h,"isoWeek",c)),h=+e.startOf(h,l?"day":o),e.diff(s,n,o)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+o);const g=i.ticks.source==="data"&&this.getDataTimestamps();for(d=h,f=0;d<s;d=+e.add(d,a,o),f++)fE(u,d,g);return(d===s||i.bounds==="ticks"||f===1)&&fE(u,d,g),Object.keys(u).sort(uE).map(m=>+m)}getLabelForValue(e){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(e,s.tooltipFormat):n.format(e,s.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,r=this._unit,o=n||i[r];return this._adapter.format(e,o)}_tickFormatFunction(e,n,s,i){const r=this.options,o=r.ticks.callback;if(o)return Je(o,[e,n,s],this);const a=r.time.displayFormats,c=this._unit,l=this._majorUnit,u=c&&a[c],h=l&&a[l],d=s[n],f=l&&h&&d&&d.major;return this._adapter.format(e,i||(f?h:u))}generateTickLabels(e){let n,s,i;for(n=0,s=e.length;n<s;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,s=this.ctx.measureText(e).width,i=ns(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:s*r+a*o,h:s*o+a*r}}_getLabelCapacity(e){const n=this.options.time,s=n.displayFormats,i=s[n.unit]||s.millisecond,r=this._tickFormatFunction(e,0,pE(this,[e],this._majorUnit),i),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,s;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,s=i.length;n<s;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,s;if(e.length)return e;const i=this.getLabels();for(n=0,s=i.length;n<s;++n)e.push(hE(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Dx(e.sort(uE))}}x(Zc,"id","time"),x(Zc,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Tu(t,e,n){let s=0,i=t.length-1,r,o,a,c;n?(e>=t[s].pos&&e<=t[i].pos&&({lo:s,hi:i}=Zs(t,"pos",e)),{pos:r,time:a}=t[s],{pos:o,time:c}=t[i]):(e>=t[s].time&&e<=t[i].time&&({lo:s,hi:i}=Zs(t,"time",e)),{time:r,pos:a}=t[s],{time:o,pos:c}=t[i]);const l=o-r;return l?a+(c-a)*(e-r)/l:a}class Kg extends Zc{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Tu(n,this.min),this._tableRange=Tu(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:s}=this,i=[],r=[];let o,a,c,l,u;for(o=0,a=e.length;o<a;++o)l=e[o],l>=n&&l<=s&&i.push(l);if(i.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],c=i[o-1],l=i[o],Math.round((u+c)/2)!==l&&r.push({time:l,pos:o/(a-1)});return r}_generate(){const e=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((i,r)=>i-r)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?e=this.normalize(n.concat(s)):e=n.length?n:s,e=this._cache.all=e,e}getDecimalForValue(e){return(Tu(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return Tu(this._table,s*this._tableRange+this._minPos,!0)}}x(Kg,"id","timeseries"),x(Kg,"defaults",Zc.defaults);var XK=Object.freeze({__proto__:null,CategoryScale:jg,LinearScale:Wg,LogarithmicScale:qg,RadialLinearScale:Qa,TimeScale:Zc,TimeSeriesScale:Kg});const JK=[r7,MG,CK,XK];/*!
 * Chartkick.js v5.0.1
 * Create beautiful charts with one line of JavaScript
 * https://github.com/ankane/chartkick.js
 * MIT License
 */function Gi(t){return Object.prototype.toString.call(t)==="[object Array]"}function Sy(t){return t instanceof Function}function nh(t){return Object.prototype.toString.call(t)==="[object Object]"&&!Sy(t)&&t instanceof Object}function Yg(t,e){for(var n in e)n!=="__proto__"&&(nh(e[n])||Gi(e[n])?(nh(e[n])&&!nh(t[n])&&(t[n]={}),Gi(e[n])&&!Gi(t[n])&&(t[n]=[]),Yg(t[n],e[n])):e[n]!==void 0&&(t[n]=e[n]))}function gt(t,e){var n={};return Yg(n,t),Yg(n,e),n}var ZK=/^(\d\d\d\d)(?:-)?(\d\d)(?:-)?(\d\d)$/i;function eY(t){for(var e=0;e<t.length;e++)for(var n=t[e].data,s=0;s<n.length;s++)if(n[s][1]<0)return!0;return!1}function li(t){return""+t}function Ms(t){return parseFloat(t)}function gs(t){if(t instanceof Date)return t;if(typeof t=="number")return new Date(t*1e3);var e=li(t),n=e.match(ZK);if(n){var s=parseInt(n[1],10),i=parseInt(n[2],10)-1,r=parseInt(n[3],10);return new Date(s,i,r)}else{var o=e.replace(/ /,"T").replace(" ","").replace("UTC","Z");return new Date(Date.parse(o)||e)}}function Ry(t){if(Gi(t))return t;var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push([n,t[n]]);return e}function Ul(t,e,n,s,i,r,o,a){return function(c,l,u){var h=c.data,d=gt({},t);return d=gt(d,u||{}),(c.singleSeriesFormat||"legend"in l)&&e(d,l.legend,c.singleSeriesFormat),l.title&&n(d,l.title),"min"in l?s(d,l.min):eY(h)||s(d,0),l.max&&i(d,l.max),"stacked"in l&&r(d,l.stacked),l.colors&&(d.colors=l.colors),l.xtitle&&o(d,l.xtitle),l.ytitle&&a(d,l.ytitle),d=gt(d,l.library||{}),d}}function tY(t,e){return t[0].getTime()-e[0].getTime()}function Iy(t,e){return t[0]-e[0]}function wC(t,e){return t-e}function Eo(t,e){for(var n=0;n<t.length;n++)if(!e(t[n]))return!1;return!0}function nY(t){return t==="day"||t==="week"||t==="month"||t==="year"}function EC(t,e){if(e===void 0&&(e=!1),t.length===0)return null;var n=Eo(t,function(l){return l.getMilliseconds()===0&&l.getSeconds()===0});if(!n)return null;var s=Eo(t,function(l){return l.getMinutes()===0});if(!s)return"minute";var i=Eo(t,function(l){return l.getHours()===0});if(!i)return"hour";if(e)return"day";var r=Eo(t,function(l){return l.getDate()===1});if(!r){var o=t[0].getDay(),a=Eo(t,function(l){return l.getDay()===o});return a?"week":"day"}var c=Eo(t,function(l){return l.getMonth()===0});return c?"year":"month"}function xp(t){return!isNaN(gs(t))&&li(t).length>=6}function sY(t){return typeof t=="number"}var gE=["bytes","KB","MB","GB","TB","PB","EB"];function Xn(t,e,n,s){t=t||"",n.prefix&&(e<0&&(e=e*-1,t+="-"),t+=n.prefix);var i=n.suffix||"",r=n.precision,o=n.round;if(n.byteScale){var a=e>=0;a||(e*=-1);var c=s?n.byteScale:e,l;c>=1152921504606847e3?(e/=1152921504606847e3,l=6):c>=0x4000000000000?(e/=0x4000000000000,l=5):c>=1099511627776?(e/=1099511627776,l=4):c>=1073741824?(e/=1073741824,l=3):c>=1048576?(e/=1048576,l=2):c>=1024?(e/=1024,l=1):l=0,r===void 0&&o===void 0&&(e>=1023.5&&l<gE.length-1&&(e=1,l+=1),r=e>=1e3?4:3),i=" "+gE[l],a||(e*=-1)}if(r!==void 0&&o!==void 0)throw Error("Use either round or precision, not both");if(!s&&(r!==void 0&&(e=e.toPrecision(r),n.zeros||(e=parseFloat(e))),o!==void 0))if(o<0){var u=Math.pow(10,-1*o);e=parseInt((1*e/u).toFixed(0))*u}else e=e.toFixed(o),n.zeros||(e=parseFloat(e));if(n.thousands||n.decimal){e=li(e);var h=e.split(".");e=h[0],n.thousands&&(e=e.replace(/\B(?=(\d{3})+(?!\d))/g,n.thousands)),h.length>1&&(e+=(n.decimal||".")+h[1])}return t+e+i}function mE(t,e,n){return n in e?e[n]:n in t.options?t.options[n]:null}var xy={maintainAspectRatio:!1,animation:!1,plugins:{legend:{},tooltip:{displayColors:!1,callbacks:{}},title:{font:{size:20},color:"#333"}},interaction:{}},TC={scales:{y:{ticks:{maxTicksLimit:4},title:{font:{size:16},color:"#333"},grid:{}},x:{grid:{drawOnChartArea:!1},title:{font:{size:16},color:"#333"},time:{},ticks:{}}}},SC=["#3366CC","#DC3912","#FF9900","#109618","#990099","#3B3EAC","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC","#E67300","#8B0707","#329262","#5574A6","#651067"];function Cy(t,e,n){e!==void 0?(t.plugins.legend.display=!!e,e&&e!==!0&&(t.plugins.legend.position=e)):n&&(t.plugins.legend.display=!1)}function ky(t,e){t.plugins.title.display=!0,t.plugins.title.text=e}function iY(t,e){e!==null&&(t.scales.y.min=Ms(e))}function rY(t,e){t.scales.y.max=Ms(e)}function oY(t,e){e!==null&&(t.scales.x.min=Ms(e))}function aY(t,e){t.scales.x.max=Ms(e)}function RC(t,e){t.scales.x.stacked=!!e,t.scales.y.stacked=!!e}function IC(t,e){t.scales.x.title.display=!0,t.scales.x.title.text=e}function xC(t,e){t.scales.y.title.display=!0,t.scales.y.title.text=e}function _E(t,e){var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return n?"rgba("+parseInt(n[1],16)+", "+parseInt(n[2],16)+", "+parseInt(n[3],16)+", "+e+")":t}function wi(t){return t!=null}function cY(t,e,n){var s=Math.ceil(t.element.offsetWidth/4/e.labels.length);s>25?s=25:s<10&&(s=10),n.scales.x.ticks.callback||(n.scales.x.ticks.callback=function(i){return i=li(this.getLabelForValue(i)),i.length>s?i.substring(0,s-2)+"...":i})}function lY(t){for(var e=1,n=uY(t);n>=1024;)e*=1024,n/=1024;return e}function Tf(t,e,n){var s={thousands:t.options.thousands,decimal:t.options.decimal},i=gt({prefix:t.options.prefix,suffix:t.options.suffix,precision:t.options.precision,round:t.options.round,zeros:t.options.zeros},s);if(t.options.bytes){var r=t.data;n==="pie"&&(r=[{data:r}]),i.byteScale=lY(r)}if(n!=="pie"){var o=e.scales.y;n==="bar"&&(o=e.scales.x),i.byteScale&&(o.ticks.stepSize||(o.ticks.stepSize=i.byteScale/2),o.ticks.maxTicksLimit||(o.ticks.maxTicksLimit=4)),o.ticks.callback||(o.ticks.callback=function(c){return Xn("",c,i,!0)}),(n==="scatter"||n==="bubble")&&!e.scales.x.ticks.callback&&(e.scales.x.ticks.callback=function(c){return Xn("",c,s,!0)})}if(!e.plugins.tooltip.callbacks.label)if(n==="scatter")e.plugins.tooltip.callbacks.label=function(c){var l=c.dataset.label||"";l&&(l+=": ");var u=c.parsed;return l+"("+Xn("",u.x,s)+", "+Xn("",u.y,i)+")"};else if(n==="bubble")e.plugins.tooltip.callbacks.label=function(c){var l=c.dataset.label||"";l&&(l+=": ");var u=c.raw;return l+"("+Xn("",u.x,s)+", "+Xn("",u.y,i)+", "+Xn("",u.v,s)+")"};else if(n==="pie")e.plugins.tooltip.callbacks.label=function(c){return Xn("",c.parsed,i)};else{var a=n==="bar"?"x":"y";e.plugins.tooltip.callbacks.label=function(c){if(c.parsed[a]!==null){var l=c.dataset.label||"";return l&&(l+=": "),Xn(l,c.parsed[a],i)}}}(n==="line"||n==="area")&&t.xtype==="number"&&(e.scales.x.ticks.callback||(e.scales.x.ticks.callback=function(c){return li(c)}),e.plugins.tooltip.callbacks.title||(e.plugins.tooltip.callbacks.title=function(c){return li(c[0].parsed.x)}))}function uY(t){for(var e=0,n=0;n<t.length;n++)for(var s=t[n].data,i=0;i<s.length;i++){var r=Math.abs(s[i][1]);r>e&&(e=r)}return e}function hY(t){for(var e=0,n=0;n<t.length;n++)for(var s=t[n].data,i=0;i<s.length;i++){var r=s[i][2];r>e&&(e=r)}return e}var Ay=Ul(gt(xy,TC),Cy,ky,iY,rY,RC,IC,xC);function dY(t){for(var e=t.data,n={},s=[],i=[],r=[],o=0;o<e.length;o++)for(var a=e[o].data,c=0;c<a.length;c++){var l=a[c],u=t.xtype==="datetime"?l[0].getTime():l[0];n[u]||(n[u]=new Array(e.length),s.push(u)),n[u][o]=l[1]}(t.xtype==="datetime"||t.xtype==="number")&&s.sort(wC);for(var h=0;h<e.length;h++)r.push([]);for(var d=0;d<s.length;d++){var f=s[d],g=t.xtype==="datetime"?new Date(f):f;i.push(g);for(var m=n[f],_=0;_<e.length;_++){var y=m[_];r[_].push(y===void 0?null:y)}}return{labels:i,values:r}}function fY(t){for(var e=t.data,n=[],s=hY(e),i=0;i<e.length;i++){for(var r=e[i].data,o=[],a=0;a<r.length;a++){var c=r[a];o.push({x:c[0],y:c[1],r:c[2]*20/s,v:c[2]})}n.push(o)}return{labels:[],values:n}}function pY(t){for(var e=t.data,n=[],s=0;s<e.length;s++){var i=e[s].data;i.sort(Iy);for(var r=[],o=0;o<i.length;o++){var a=i[o];r.push({x:a[0],y:a[1]})}n.push(r)}return{labels:[],values:n}}function gY(t,e){return e==="bubble"?fY(t):t.xtype==="number"&&e!=="bar"&&e!=="column"?pY(t):dY(t)}function Py(t,e,n){for(var s=gY(t,n),i=s.labels,r=s.values,o=t.data,a=[],c=t.options.colors||SC,l=0;l<o.length;l++){var u=o[l],h=void 0,d=void 0;if(t.options.colors&&t.singleSeriesFormat&&(n==="bar"||n==="column")&&!u.color&&Gi(t.options.colors)&&!Gi(t.options.colors[0])){h=c,d=[];for(var f=0;f<c.length;f++)d[f]=_E(h[f],.5)}else h=u.color||c[l],d=n!=="line"?_E(h,.5):h;var g={label:u.name||"",data:r[l],fill:n==="area",borderColor:h,backgroundColor:d,borderWidth:2},m=n==="line"||n==="area"||n==="scatter"||n==="bubble";m&&(g.pointBackgroundColor=h,g.pointHoverBackgroundColor=h,g.pointHitRadius=50),n==="bubble"&&(g.pointBackgroundColor=d,g.pointHoverBackgroundColor=d,g.pointHoverBorderWidth=2),u.stack&&(g.stack=u.stack);var _=mE(t,u,"curve");_===!1?g.tension=0:m&&(g.tension=.4);var y=mE(t,u,"points");y===!1&&(g.pointRadius=0,g.pointHoverRadius=0),g=gt(g,t.options.dataset||{}),g=gt(g,u.library||{}),g=gt(g,u.dataset||{}),a.push(g)}var v=t.options.xmin,E=t.options.xmax;if(t.xtype==="datetime"?(wi(v)&&(e.scales.x.min=gs(v).getTime()),wi(E)&&(e.scales.x.max=gs(E).getTime())):t.xtype==="number"&&(wi(v)&&(e.scales.x.min=v),wi(E)&&(e.scales.x.max=E)),t.xtype==="datetime"){var T=EC(i);if(i.length===0&&(wi(v)&&i.push(gs(v)),wi(E)&&i.push(gs(E))),i.length>0){for(var S=(wi(v)?gs(v):i[0]).getTime(),I=(wi(E)?gs(E):i[0]).getTime(),k=1;k<i.length;k++){var R=i[k].getTime();R<S&&(S=R),R>I&&(I=R)}var N=(I-S)/(86400*1e3);if(!e.scales.x.time.unit){var $;if(T==="year"||N>365*10?(e.scales.x.time.unit="year",$=365):T==="month"||N>30*10?(e.scales.x.time.unit="month",$=30):T==="week"||T==="day"||N>10?(e.scales.x.time.unit="day",$=1):T==="hour"||N>.5?(e.scales.x.time.displayFormats={hour:"MMM d, h a"},e.scales.x.time.unit="hour",$=1/24):T==="minute"&&(e.scales.x.time.displayFormats={minute:"h:mm a"},e.scales.x.time.unit="minute",$=1/24/60),$&&N>0){var X=t.element.offsetWidth;if(X>0){var B=Math.ceil(N/$/(X/100));T==="week"&&$===1&&(B=Math.ceil(B/7)*7),e.scales.x.ticks.stepSize=B}}}e.scales.x.time.tooltipFormat||(T==="year"?e.scales.x.time.tooltipFormat="yyyy":T==="month"?e.scales.x.time.tooltipFormat="MMM yyyy":T==="week"||T==="day"?e.scales.x.time.tooltipFormat="PP":T==="hour"?e.scales.x.time.tooltipFormat="MMM d, h a":T==="minute"&&(e.scales.x.time.tooltipFormat="h:mm a"))}}return{labels:i,datasets:a}}var Hs=function(e){this.name="chartjs",this.library=e};Hs.prototype.renderLineChart=function(e,n){n||(n="line");var s={},i=Ay(e,gt(s,e.options));Tf(e,i,n);var r=Py(e,i,n);e.xtype==="number"?(i.scales.x.type=i.scales.x.type||"linear",i.scales.x.position=i.scales.x.position||"bottom"):i.scales.x.type=e.xtype==="string"?"category":"time",this.drawChart(e,"line",r,i)};Hs.prototype.renderPieChart=function(e){var n=gt({},xy);e.options.donut&&(n.cutout="50%"),"legend"in e.options&&Cy(n,e.options.legend),e.options.title&&ky(n,e.options.title),n=gt(n,e.options.library||{}),Tf(e,n,"pie");for(var s=[],i=[],r=0;r<e.data.length;r++){var o=e.data[r];s.push(o[0]),i.push(o[1])}var a={data:i,backgroundColor:e.options.colors||SC};a=gt(a,e.options.dataset||{});var c={labels:s,datasets:[a]};this.drawChart(e,"pie",c,n)};Hs.prototype.renderColumnChart=function(e,n){var s;if(n==="bar"){var i=gt(xy,TC);i.indexAxis="y",i.scales.x.grid.drawOnChartArea=!0,i.scales.y.grid.drawOnChartArea=!1,delete i.scales.y.ticks.maxTicksLimit,s=Ul(i,Cy,ky,oY,aY,RC,IC,xC)(e,e.options)}else s=Ay(e,e.options);Tf(e,s,n);var r=Py(e,s,"column");n!=="bar"&&cY(e,r,s),"mode"in s.interaction||(s.interaction.mode="index"),this.drawChart(e,"bar",r,s)};Hs.prototype.renderAreaChart=function(e){this.renderLineChart(e,"area")};Hs.prototype.renderBarChart=function(e){this.renderColumnChart(e,"bar")};Hs.prototype.renderScatterChart=function(e,n){n=n||"scatter";var s=Ay(e,e.options);Tf(e,s,n),"showLine"in s||(s.showLine=!1);var i=Py(e,s,n);s.scales.x.type=s.scales.x.type||"linear",s.scales.x.position=s.scales.x.position||"bottom","mode"in s.interaction||(s.interaction.mode="nearest"),this.drawChart(e,n,i,s)};Hs.prototype.renderBubbleChart=function(e){this.renderScatterChart(e,"bubble")};Hs.prototype.destroy=function(e){e.chart&&e.chart.destroy()};Hs.prototype.drawChart=function(e,n,s,i){if(this.destroy(e),!e.destroyed){var r={type:n,data:s,options:i};e.options.code&&window.console.log("new Chart(ctx, "+JSON.stringify(r)+");"),e.element.innerHTML="<canvas></canvas>";var o=e.element.getElementsByTagName("CANVAS")[0];e.chart=new this.library(o,r)}};var CC={chart:{},xAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},yAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},title:{text:null},credits:{enabled:!1},legend:{borderWidth:0},tooltip:{style:{fontSize:"12px"}},plotOptions:{areaspline:{},area:{},series:{marker:{}}},time:{useUTC:!1}};function kC(t,e,n){e!==void 0?(t.legend.enabled=!!e,e&&e!==!0&&(e==="top"||e==="bottom"?t.legend.verticalAlign=e:(t.legend.layout="vertical",t.legend.verticalAlign="middle",t.legend.align=e))):n&&(t.legend.enabled=!1)}function AC(t,e){t.title.text=e}function mY(t,e){t.yAxis.min=e}function _Y(t,e){t.yAxis.max=e}function yY(t,e){var n=e?e===!0?"normal":e:null;t.plotOptions.series.stacking=n,t.plotOptions.area.stacking=n,t.plotOptions.areaspline.stacking=n}function bY(t,e){t.xAxis.title.text=e}function vY(t,e){t.yAxis.title.text=e}var Dy=Ul(CC,kC,AC,mY,_Y,yY,bY,vY);function Oy(t,e,n){var s={prefix:t.options.prefix,suffix:t.options.suffix,thousands:t.options.thousands,decimal:t.options.decimal,precision:t.options.precision,round:t.options.round,zeros:t.options.zeros};n!=="pie"&&!Gi(e.yAxis)&&!e.yAxis.labels.formatter&&(e.yAxis.labels.formatter=function(){return Xn("",this.value,s)}),!e.tooltip.pointFormatter&&!e.tooltip.pointFormat&&(e.tooltip.pointFormatter=function(){return'<span style="color:'+this.color+'">●</span> '+Xn(this.series.name+": <b>",this.y,s)+"</b><br/>"})}var gi=function(e){this.name="highcharts",this.library=e};gi.prototype.renderLineChart=function(e,n){n=n||"spline";var s={};n==="areaspline"&&(s={plotOptions:{areaspline:{stacking:"normal"},area:{stacking:"normal"},series:{marker:{enabled:!1}}}}),e.options.curve===!1&&(n==="areaspline"?n="area":n==="spline"&&(n="line"));var i=Dy(e,e.options,s);e.xtype==="number"?i.xAxis.type=i.xAxis.type||"linear":i.xAxis.type=e.xtype==="string"?"category":"datetime",i.chart.type||(i.chart.type=n),Oy(e,i,n);for(var r=e.data,o=0;o<r.length;o++){r[o].name=r[o].name||"Value";var a=r[o].data;if(e.xtype==="datetime")for(var c=0;c<a.length;c++)a[c][0]=a[c][0].getTime();else e.xtype==="number"&&a.sort(Iy);r[o].marker={symbol:"circle"},e.options.points===!1&&(r[o].marker.enabled=!1)}this.drawChart(e,r,i)};gi.prototype.renderScatterChart=function(e){var n=Dy(e,e.options,{});n.chart.type="scatter",this.drawChart(e,e.data,n)};gi.prototype.renderPieChart=function(e){var n=gt(CC,{});e.options.colors&&(n.colors=e.options.colors),e.options.donut&&(n.plotOptions={pie:{innerSize:"50%"}}),"legend"in e.options&&kC(n,e.options.legend),e.options.title&&AC(n,e.options.title);var s=gt(n,e.options.library||{});Oy(e,s,"pie");var i=[{type:"pie",name:e.options.label||"Value",data:e.data}];this.drawChart(e,i,s)};gi.prototype.renderColumnChart=function(e,n){n=n||"column";var s=e.data,i=Dy(e,e.options),r=[],o=[];i.chart.type=n,Oy(e,i,n);for(var a=0;a<s.length;a++)for(var c=s[a],l=0;l<c.data.length;l++){var u=c.data[l];r[u[0]]||(r[u[0]]=new Array(s.length),o.push(u[0])),r[u[0]][a]=u[1]}e.xtype==="number"&&o.sort(wC),i.xAxis.categories=o;for(var h=[],d=0;d<s.length;d++){for(var f=[],g=0;g<o.length;g++)f.push(r[o[g]][d]||0);var m={name:s[d].name||"Value",data:f};s[d].stack&&(m.stack=s[d].stack),h.push(m)}this.drawChart(e,h,i)};gi.prototype.renderBarChart=function(e){this.renderColumnChart(e,"bar")};gi.prototype.renderAreaChart=function(e){this.renderLineChart(e,"areaspline")};gi.prototype.destroy=function(e){e.chart&&e.chart.destroy()};gi.prototype.drawChart=function(e,n,s){this.destroy(e),!e.destroyed&&(s.chart.renderTo=e.element.id,s.series=n,e.options.code&&window.console.log("new Highcharts.Chart("+JSON.stringify(s)+");"),e.chart=new this.library.Chart(s))};var yE={},sh=[],$l={chartArea:{},fontName:"'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif",pointSize:6,legend:{textStyle:{fontSize:12,color:"#444"},alignment:"center",position:"right"},curveType:"function",hAxis:{textStyle:{color:"#666",fontSize:12},titleTextStyle:{},gridlines:{color:"transparent"},baselineColor:"#ccc",viewWindow:{}},vAxis:{textStyle:{color:"#666",fontSize:12},titleTextStyle:{},baselineColor:"#ccc",viewWindow:{}},tooltip:{textStyle:{color:"#666",fontSize:12}}};function My(t,e,n){if(e!==void 0){var s;e?e===!0?s="right":s=e:s="none",t.legend.position=s}else n&&(t.legend.position="none")}function Ly(t,e){t.title=e,t.titleTextStyle={color:"#333",fontSize:"20px"}}function wY(t,e){t.vAxis.viewWindow.min=e}function EY(t,e){t.vAxis.viewWindow.max=e}function TY(t,e){t.hAxis.viewWindow.min=e}function SY(t,e){t.hAxis.viewWindow.max=e}function PC(t,e){t.isStacked=e||!1}function DC(t,e){t.hAxis.title=e,t.hAxis.titleTextStyle.italic=!1}function OC(t,e){t.vAxis.title=e,t.vAxis.titleTextStyle.italic=!1}var Sf=Ul($l,My,Ly,wY,EY,PC,DC,OC);function RY(t){window.attachEvent?window.attachEvent("onresize",t):window.addEventListener&&window.addEventListener("resize",t,!0),t()}var xn=function(e){this.name="google",this.library=e};xn.prototype.renderLineChart=function(e){var n=this;this.waitForLoaded(e,function(){var s={};e.options.curve===!1&&(s.curveType="none"),e.options.points===!1&&(s.pointSize=0);var i=Sf(e,e.options,s),r=n.createDataTable(e.data,e.xtype);n.drawChart(e,"LineChart",r,i)})};xn.prototype.renderPieChart=function(e){var n=this;this.waitForLoaded(e,function(){var s={chartArea:{top:"10%",height:"80%"},legend:{}};e.options.colors&&(s.colors=e.options.colors),e.options.donut&&(s.pieHole=.5),"legend"in e.options&&My(s,e.options.legend),e.options.title&&Ly(s,e.options.title);var i=gt(gt($l,s),e.options.library||{}),r=new n.library.visualization.DataTable;r.addColumn("string",""),r.addColumn("number","Value"),r.addRows(e.data),n.drawChart(e,"PieChart",r,i)})};xn.prototype.renderColumnChart=function(e){var n=this;this.waitForLoaded(e,function(){var s=Sf(e,e.options),i=n.createDataTable(e.data,e.xtype);n.drawChart(e,"ColumnChart",i,s)})};xn.prototype.renderBarChart=function(e){var n=this;this.waitForLoaded(e,function(){var s={hAxis:{gridlines:{color:"#ccc"}}},i=Ul($l,My,Ly,TY,SY,PC,DC,OC)(e,e.options,s),r=n.createDataTable(e.data,e.xtype);n.drawChart(e,"BarChart",r,i)})};xn.prototype.renderAreaChart=function(e){var n=this;this.waitForLoaded(e,function(){var s={isStacked:!0,pointSize:0,areaOpacity:.5},i=Sf(e,e.options,s),r=n.createDataTable(e.data,e.xtype);n.drawChart(e,"AreaChart",r,i)})};xn.prototype.renderGeoChart=function(e){var n=this;this.waitForLoaded(e,"geochart",function(){var s={legend:"none",colorAxis:{colors:e.options.colors||["#f6c7b6","#ce502d"]}},i=gt(gt($l,s),e.options.library||{}),r=new n.library.visualization.DataTable;r.addColumn("string",""),r.addColumn("number",e.options.label||"Value"),r.addRows(e.data),n.drawChart(e,"GeoChart",r,i)})};xn.prototype.renderScatterChart=function(e){var n=this;this.waitForLoaded(e,function(){for(var s={},i=Sf(e,e.options,s),r=e.data,o=[],a=0;a<r.length;a++){r[a].name=r[a].name||"Value";for(var c=r[a].data,l=0;l<c.length;l++){var u=new Array(r.length+1);u[0]=c[l][0],u[a+1]=c[l][1],o.push(u)}}var h=new n.library.visualization.DataTable;h.addColumn("number","");for(var d=0;d<r.length;d++)h.addColumn("number",r[d].name);h.addRows(o),n.drawChart(e,"ScatterChart",h,i)})};xn.prototype.renderTimeline=function(e){var n=this;this.waitForLoaded(e,"timeline",function(){var s={legend:"none"};e.options.colors&&(s.colors=e.options.colors);var i=gt(gt($l,s),e.options.library||{}),r=new n.library.visualization.DataTable;r.addColumn({type:"string",id:"Name"}),r.addColumn({type:"date",id:"Start"}),r.addColumn({type:"date",id:"End"}),r.addRows(e.data),e.element.style.lineHeight="normal",n.drawChart(e,"Timeline",r,i)})};xn.prototype.destroy=function(e){e.chart&&e.chart.clearChart()};xn.prototype.drawChart=function(e,n,s,i){this.destroy(e),!e.destroyed&&(e.options.code&&window.console.log("var data = new google.visualization.DataTable("+s.toJSON()+`);
var chart = new google.visualization.`+n+`(element);
chart.draw(data, `+JSON.stringify(i)+");"),e.chart=new this.library.visualization[n](e.element),RY(function(){e.chart.draw(s,i)}))};xn.prototype.waitForLoaded=function(e,n,s){var i=this;if(s||(s=n,n="corechart"),sh.push({pack:n,callback:s}),yE[n])this.runCallbacks();else{yE[n]=!0;var r={packages:[n],callback:function(){i.runCallbacks()}},o=e.__config();o.language&&(r.language=o.language),n==="geochart"&&o.mapsApiKey&&(r.mapsApiKey=o.mapsApiKey),this.library.charts.load("current",r)}};xn.prototype.runCallbacks=function(){for(var e=0;e<sh.length;e++){var n=sh[e],s=this.library.visualization&&(n.pack==="corechart"&&this.library.visualization.LineChart||n.pack==="timeline"&&this.library.visualization.Timeline||n.pack==="geochart"&&this.library.visualization.GeoChart);s&&(n.callback(),sh.splice(e,1),e--)}};xn.prototype.createDataTable=function(e,n){for(var s=[],i=[],r=0;r<e.length;r++){var o=e[r];e[r].name=e[r].name||"Value";for(var a=0;a<o.data.length;a++){var c=o.data[a],l=n==="datetime"?c[0].getTime():c[0];s[l]||(s[l]=new Array(e.length),i.push(l)),s[l][r]=c[1]}}for(var u=[],h=[],d=0;d<i.length;d++){var f=i[d],g=void 0;n==="datetime"?(g=new Date(f),h.push(g)):g=f,u.push([g].concat(s[f]))}var m=!0;if(n==="datetime"){u.sort(tY);var _=EC(h,!0);m=nY(_)}else if(n==="number"){u.sort(Iy);for(var y=0;y<u.length;y++)u[y][0]=li(u[y][0]);n="string"}var v=new this.library.visualization.DataTable;n=n==="datetime"&&m?"date":n,v.addColumn(n,"");for(var E=0;E<e.length;E++)v.addColumn("number",e[E].name);return v.addRows(u),v};var zr=[];function IY(t){if(t){if(t.product==="Highcharts")return gi;if(t.charts)return xn;if(Sy(t))return Hs}throw new Error("Unknown adapter")}function _c(t){for(var e=IY(t),n=0;n<zr.length;n++)if(zr[n].library===t)return;zr.push(new e(t))}function xY(){"Chart"in window&&_c(window.Chart),"Highcharts"in window&&_c(window.Highcharts),window.google&&window.google.charts&&_c(window.google)}function CY(t,e){var n="render"+t,s=e.options.adapter;xY();for(var i=0;i<zr.length;i++){var r=zr[i];if((!s||s===r.name)&&Sy(r[n]))return e.adapter=r.name,e.__adapterObject=r,r[n](e)}throw zr.length>0?new Error("No charting library found for "+t):new Error("No charting libraries found - be sure to include one before your charts")}var _e={charts:{},configure:function(t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(_e.config[e]=t[e])},setDefaultOptions:function(t){_e.options=t},eachChart:function(t){for(var e in _e.charts)Object.prototype.hasOwnProperty.call(_e.charts,e)&&t(_e.charts[e])},destroyAll:function(){for(var t in _e.charts)Object.prototype.hasOwnProperty.call(_e.charts,t)&&(_e.charts[t].destroy(),delete _e.charts[t])},config:{},options:{},adapters:zr,addAdapter:_c,use:function(t){return _c(t),_e}};function kY(t){for(var e=[],n=0;n<t.length;n++)e.push([Ms(t[n][0]),Ms(t[n][1]),Ms(t[n][2])]);return e}function AY(t,e){if(e==="bubble")return kY(t);var n;e==="number"?n=Ms:e==="datetime"?n=gs:n=li;for(var s=[],i=0;i<t.length;i++)s.push([n(t[i][0]),Ms(t[i][1])]);return s}function PY(t,e,n){return LC(t)?(n.xmin||n.xmax)&&(!n.xmin||xp(n.xmin))&&(!n.xmax||xp(n.xmax))?"datetime":"number":bE(t,sY)?"number":!e&&bE(t,xp)?"datetime":"string"}function bE(t,e){for(var n=0;n<t.length;n++)for(var s=Ry(t[n].data),i=0;i<s.length;i++)if(!e(s[i][0]))return!1;return!0}function DY(t){for(var e=[],n=0;n<t.length;n++){var s={};for(var i in t[n])Object.prototype.hasOwnProperty.call(t[n],i)&&(s[i]=t[n][i]);e.push(s)}return e}function ba(t,e,n){var s=t.options,i=t.rawData;t.singleSeriesFormat=!Gi(i)||!nh(i[0]),t.singleSeriesFormat&&(i=[{name:s.label,data:i}]),i=DY(i);for(var r=0;r<i.length;r++)i[r].data=Ry(i[r].data);t.xtype=e||(s.discrete?"string":PY(i,n,s));for(var o=0;o<i.length;o++)i[o].data=AY(i[o].data,t.xtype);return i}function MC(t){for(var e=Ry(t.rawData),n=0;n<e.length;n++)e[n]=[li(e[n][0]),Ms(e[n][1])];return e}function LC(t,e){if(e==="PieChart"||e==="GeoChart"||e==="Timeline")return t.length===0;for(var n=0;n<t.length;n++)if(t[n].data.length>0)return!1;return!0}function OY(t){var e=t.options.download;e===!0?e={}:typeof e=="string"&&(e={filename:e});var n=document.createElement("a");n.download=e.filename||"chart.png",n.style.position="absolute",n.style.top="20px",n.style.right="20px",n.style.zIndex=1e3,n.style.lineHeight="20px",n.target="_blank";var s=document.createElement("img"),i='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path fill="#CCCCCC" d="M344 240h-56L287.1 152c0-13.25-10.75-24-24-24h-16C234.7 128 223.1 138.8 223.1 152L224 240h-56c-9.531 0-18.16 5.656-22 14.38C142.2 263.1 143.9 273.3 150.4 280.3l88.75 96C243.7 381.2 250.1 384 256.8 384c7.781-.3125 13.25-2.875 17.75-7.844l87.25-96c6.406-7.031 8.031-17.19 4.188-25.88S353.5 240 344 240zM256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM256 464c-114.7 0-208-93.31-208-208S141.3 48 256 48s208 93.31 208 208S370.7 464 256 464z"/></svg>';s.src="data:image/svg+xml;utf8,"+encodeURIComponent(i),s.alt="Download",s.style.width="20px",s.style.height="20px",s.style.border="none",n.appendChild(s);var r=t.element;r.style.position="relative",t.__downloadAttached=!0,t.__enterEvent=r.addEventListener("mouseover",function(o){var a=o.relatedTarget;(!a||a!==this&&!this.contains(a))&&t.options.download&&(n.href=t.toImage(e),r.appendChild(n))}),t.__leaveEvent=r.addEventListener("mouseout",function(o){var a=o.relatedTarget;(!a||a!==this&&!this.contains(a))&&n.parentNode&&n.parentNode.removeChild(n)})}var NC=[],Qg=0,MY=4;function LY(t,e,n){NC.push([t,e,n]),Ny()}function Ny(){if(Qg<MY){var t=NC.shift();t&&(Qg++,VY(t[0],t[1],t[2]),Ny())}}function NY(){Qg--,Ny()}function VY(t,e,n){var s=new XMLHttpRequest;s.open("GET",t,!0),s.setRequestHeader("Content-Type","application/json"),s.onload=function(){NY(),s.status===200?e(JSON.parse(s.responseText)):n(s.statusText)},s.send()}function Vy(t,e){t.textContent=e}function ih(t,e,n){n||(e="Error Loading Chart: "+e),Vy(t,e),t.style.color="#ff0000"}function Cp(t){try{t.__render()}catch(e){throw ih(t.element,e.message),e}}function el(t,e,n){if(n&&t.options.loading&&(typeof e=="string"||typeof e=="function")&&Vy(t.element,t.options.loading),typeof e=="string")LY(e,function(s){t.rawData=s,Cp(t)},function(s){ih(t.element,s)});else if(typeof e=="function")try{e(function(s){t.rawData=s,Cp(t)},function(s){ih(t.element,s,!0)})}catch(s){ih(t.element,s,!0)}else t.rawData=e,Cp(t)}function FY(t,e){if(LC(e.data,t)){var n=e.options.empty||e.options.messages&&e.options.messages.empty||"No data";Vy(e.element,n)}else CY(t,e),e.options.download&&!e.__downloadAttached&&e.adapter==="chartjs"&&OY(e)}function BY(t){if(typeof t=="string"){var e=t;if(t=document.getElementById(t),!t)throw new Error("No element with id "+e)}return t}var et=function(e,n,s){this.element=BY(e),this.options=gt(_e.options,s||{}),this.dataSource=n,this.element.id&&(_e.charts[this.element.id]=this),el(this,n,!0),this.options.refresh&&this.startRefresh()};et.prototype.getElement=function(){return this.element};et.prototype.getDataSource=function(){return this.dataSource};et.prototype.getData=function(){return this.data};et.prototype.getOptions=function(){return this.options};et.prototype.getChartObject=function(){return this.chart};et.prototype.getAdapter=function(){return this.adapter};et.prototype.updateData=function(e,n){this.dataSource=e,n&&this.__updateOptions(n),el(this,e,!0)};et.prototype.setOptions=function(e){this.__updateOptions(e),this.redraw()};et.prototype.redraw=function(){el(this,this.rawData)};et.prototype.refreshData=function(){if(typeof this.dataSource=="string"){var e=this.dataSource.indexOf("?")===-1?"?":"&",n=this.dataSource+e+"_="+new Date().getTime();el(this,n)}else typeof this.dataSource=="function"&&el(this,this.dataSource)};et.prototype.startRefresh=function(){var e=this,n=this.options.refresh;if(n&&typeof this.dataSource!="string"&&typeof this.dataSource!="function")throw new Error("Data source must be a URL or callback for refresh");if(!this.intervalId)if(n)this.intervalId=setInterval(function(){e.refreshData()},n*1e3);else throw new Error("No refresh interval")};et.prototype.stopRefresh=function(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)};et.prototype.toImage=function(e){if(this.adapter==="chartjs")if(e&&e.background&&e.background!=="transparent"){var n=this.chart.canvas,s=this.chart.ctx,i=document.createElement("canvas"),r=i.getContext("2d");return i.width=s.canvas.width,i.height=s.canvas.height,r.fillStyle=e.background,r.fillRect(0,0,i.width,i.height),r.drawImage(n,0,0),i.toDataURL("image/png")}else return this.chart.toBase64Image();else throw new Error("Feature only available for Chart.js")};et.prototype.destroy=function(){this.destroyed=!0,this.stopRefresh(),this.__adapterObject&&this.__adapterObject.destroy(this),this.__enterEvent&&this.element.removeEventListener("mouseover",this.__enterEvent),this.__leaveEvent&&this.element.removeEventListener("mouseout",this.__leaveEvent)};et.prototype.__updateOptions=function(e){var n=e.refresh&&e.refresh!==this.options.refresh;this.options=gt(_e.options,e),n&&(this.stopRefresh(),this.startRefresh())};et.prototype.__render=function(){this.data=this.__processData(),FY(this.__chartName(),this)};et.prototype.__config=function(){return _e.config};var UY=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return ba(this)},e.prototype.__chartName=function(){return"LineChart"},e}(et),$Y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return MC(this)},e.prototype.__chartName=function(){return"PieChart"},e}(et),HY=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return ba(this,null,!0)},e.prototype.__chartName=function(){return"ColumnChart"},e}(et),zY=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return ba(this,null,!0)},e.prototype.__chartName=function(){return"BarChart"},e}(et),jY=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return ba(this)},e.prototype.__chartName=function(){return"AreaChart"},e}(et),WY=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return MC(this)},e.prototype.__chartName=function(){return"GeoChart"},e}(et),qY=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return ba(this,"number")},e.prototype.__chartName=function(){return"ScatterChart"},e}(et),GY=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return ba(this,"bubble")},e.prototype.__chartName=function(){return"BubbleChart"},e}(et),KY=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){for(var s=this.rawData,i=0;i<s.length;i++)s[i][1]=gs(s[i][1]),s[i][2]=gs(s[i][2]);return s},e.prototype.__chartName=function(){return"Timeline"},e}(et);_e.LineChart=UY;_e.PieChart=$Y;_e.ColumnChart=HY;_e.BarChart=zY;_e.AreaChart=jY;_e.GeoChart=WY;_e.ScatterChart=qY;_e.BubbleChart=GY;_e.Timeline=KY;typeof window<"u"&&!window.Chartkick&&(window.Chartkick=_e,document.addEventListener("turbolinks:before-render",function(){_e.config.autoDestroy!==!1&&_e.destroyAll()}),document.addEventListener("turbo:before-render",function(){_e.config.autoDestroy!==!1&&_e.destroyAll()}),setTimeout(function(){window.dispatchEvent(new Event("chartkick:load"))},0));_e.default=_e;/*!
 * Vue Chartkick
 * Create beautiful JavaScript charts with one line of Vue
 * https://github.com/ankane/vue-chartkick
 * v1.1.0
 * MIT License
 */var YY=1,Ei=function(t,e,n){var s=["adapter","bytes","code","colors","curve","dataset","decimal","discrete","donut","download","empty","label","legend","library","loading","max","messages","min","points","precision","prefix","refresh","round","stacked","suffix","thousands","title","xmax","xmin","xtitle","ytitle","zeros"];t.component(e,{props:["data","id","width","height"].concat(s),render:function(){var i=this.chartOptions.loading!==void 0?this.chartOptions.loading:"Loading...";if(typeof i!="string")throw new Error("loading must be a string");return fd("div",{id:this.chartId,style:this.chartStyle},[i])},data:function(){return{chartId:null}},computed:{chartStyle:function(){return this.data,this.chartOptions,{height:this.height||"300px",lineHeight:this.height||"300px",width:this.width||"100%",textAlign:"center",color:"#999",fontSize:"14px",fontFamily:"'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif"}},chartOptions:function(){for(var i={},r=s,o=0;o<r.length;o++){var a=r[o];this[a]!==void 0&&(i[a]=this[a])}return i}},created:function(){this.chartId=this.chartId||this.id||"chart-"+YY++},mounted:function(){this.updateChart()},updated:function(){this.updateChart()},beforeUnmount:function(){this.chart&&this.chart.destroy()},methods:{updateChart:function(){this.data!==null?this.chart?this.chart.updateData(this.data,this.chartOptions):this.chart=new n(this.chartId,this.data,this.chartOptions):this.chart&&(this.chart.destroy(),this.chart=null,this.$el.innerText="Loading...")}}})};_e.install=function(t,e){e&&e.adapter&&_e.addAdapter(e.adapter),Ei(t,"line-chart",_e.LineChart),Ei(t,"pie-chart",_e.PieChart),Ei(t,"column-chart",_e.ColumnChart),Ei(t,"bar-chart",_e.BarChart),Ei(t,"area-chart",_e.AreaChart),Ei(t,"scatter-chart",_e.ScatterChart),Ei(t,"geo-chart",_e.GeoChart),Ei(t,"timeline",_e.Timeline)};wy.register(...JK);function ae(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function nt(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Rf(t,e){const n=ae(t);return isNaN(e)?nt(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function Fy(t,e){const n=ae(t);if(isNaN(e))return nt(t,NaN);if(!e)return n;const s=n.getDate(),i=nt(t,n.getTime());i.setMonth(n.getMonth()+e+1,0);const r=i.getDate();return s>=r?i:(n.setFullYear(i.getFullYear(),i.getMonth(),s),n)}function If(t,e){const n=+ae(t);return nt(t,n+e)}const VC=6048e5,QY=864e5,Hl=6e4,zl=36e5,XY=1e3;function JY(t,e){return If(t,e*zl)}let ZY={};function mo(){return ZY}function Fs(t,e){var a,c,l,u;const n=mo(),s=(e==null?void 0:e.weekStartsOn)??((c=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((u=(l=n.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??0,i=ae(t),r=i.getDay(),o=(r<s?7:0)+r-s;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function ua(t){return Fs(t,{weekStartsOn:1})}function FC(t){const e=ae(t),n=e.getFullYear(),s=nt(t,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const i=ua(s),r=nt(t,0);r.setFullYear(n,0,4),r.setHours(0,0,0,0);const o=ua(r);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function Xg(t){const e=ae(t);return e.setHours(0,0,0,0),e}function Kh(t){const e=ae(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function BC(t,e){const n=Xg(t),s=Xg(e),i=+n-Kh(n),r=+s-Kh(s);return Math.round((i-r)/QY)}function eQ(t){const e=FC(t),n=nt(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),ua(n)}function tQ(t,e){return If(t,e*Hl)}function nQ(t,e){const n=e*3;return Fy(t,n)}function sQ(t,e){return If(t,e*1e3)}function iQ(t,e){const n=e*7;return Rf(t,n)}function rQ(t,e){return Fy(t,e*12)}function yc(t,e){const n=ae(t),s=ae(e),i=n.getTime()-s.getTime();return i<0?-1:i>0?1:i}function oQ(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function UC(t){if(!oQ(t)&&typeof t!="number")return!1;const e=ae(t);return!isNaN(Number(e))}function aQ(t,e){const n=ae(t),s=ae(e),i=n.getFullYear()-s.getFullYear(),r=n.getMonth()-s.getMonth();return i*12+r}function cQ(t,e){const n=ae(t),s=ae(e);return n.getFullYear()-s.getFullYear()}function $C(t,e){const n=ae(t),s=ae(e),i=vE(n,s),r=Math.abs(BC(n,s));n.setDate(n.getDate()-i*r);const o=+(vE(n,s)===-i),a=i*(r-o);return a===0?0:a}function vE(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function jl(t){return e=>{const s=(t?Math[t]:Math.trunc)(e);return s===0?0:s}}function xf(t,e){return+ae(t)-+ae(e)}function lQ(t,e,n){const s=xf(t,e)/zl;return jl(n==null?void 0:n.roundingMethod)(s)}function uQ(t,e,n){const s=xf(t,e)/Hl;return jl(n==null?void 0:n.roundingMethod)(s)}function HC(t){const e=ae(t);return e.setHours(23,59,59,999),e}function zC(t){const e=ae(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function hQ(t){const e=ae(t);return+HC(e)==+zC(e)}function jC(t,e){const n=ae(t),s=ae(e),i=yc(n,s),r=Math.abs(aQ(n,s));let o;if(r<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*r);let a=yc(n,s)===-i;hQ(ae(t))&&r===1&&yc(t,s)===1&&(a=!1),o=i*(r-Number(a))}return o===0?0:o}function dQ(t,e,n){const s=jC(t,e)/3;return jl(n==null?void 0:n.roundingMethod)(s)}function fQ(t,e,n){const s=xf(t,e)/1e3;return jl(n==null?void 0:n.roundingMethod)(s)}function pQ(t,e,n){const s=$C(t,e)/7;return jl(n==null?void 0:n.roundingMethod)(s)}function gQ(t,e){const n=ae(t),s=ae(e),i=yc(n,s),r=Math.abs(cQ(n,s));n.setFullYear(1584),s.setFullYear(1584);const o=yc(n,s)===-i,a=i*(r-+o);return a===0?0:a}function mQ(t){const e=ae(t);return e.setSeconds(0,0),e}function _Q(t){const e=ae(t),n=e.getMonth(),s=n-n%3;return e.setMonth(s,1),e.setHours(0,0,0,0),e}function yQ(t){const e=ae(t);return e.setDate(1),e.setHours(0,0,0,0),e}function bQ(t){const e=ae(t),n=e.getFullYear();return e.setFullYear(n+1,0,0),e.setHours(23,59,59,999),e}function WC(t){const e=ae(t),n=nt(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function vQ(t){const e=ae(t);return e.setMinutes(59,59,999),e}function wQ(t,e){var a,c,l,u;const n=mo(),s=(e==null?void 0:e.weekStartsOn)??((c=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((u=(l=n.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??0,i=ae(t),r=i.getDay(),o=(r<s?-7:0)+6-(r-s);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function EQ(t){const e=ae(t);return e.setSeconds(59,999),e}function TQ(t){const e=ae(t),n=e.getMonth(),s=n-n%3+3;return e.setMonth(s,0),e.setHours(23,59,59,999),e}function SQ(t){const e=ae(t);return e.setMilliseconds(999),e}const RQ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},IQ=(t,e,n)=>{let s;const i=RQ[t];return typeof i=="string"?s=i:e===1?s=i.one:s=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function kp(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const xQ={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},CQ={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},kQ={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},AQ={date:kp({formats:xQ,defaultWidth:"full"}),time:kp({formats:CQ,defaultWidth:"full"}),dateTime:kp({formats:kQ,defaultWidth:"full"})},PQ={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},DQ=(t,e,n,s)=>PQ[t];function Ma(t){return(e,n)=>{const s=n!=null&&n.context?String(n.context):"standalone";let i;if(s==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[o]}const r=t.argumentCallback?t.argumentCallback(e):e;return i[r]}}const OQ={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},MQ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},LQ={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},NQ={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},VQ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},FQ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},BQ=(t,e)=>{const n=Number(t),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},UQ={ordinalNumber:BQ,era:Ma({values:OQ,defaultWidth:"wide"}),quarter:Ma({values:MQ,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ma({values:LQ,defaultWidth:"wide"}),day:Ma({values:NQ,defaultWidth:"wide"}),dayPeriod:Ma({values:VQ,defaultWidth:"wide",formattingValues:FQ,defaultFormattingWidth:"wide"})};function La(t){return(e,n={})=>{const s=n.width,i=s&&t.matchPatterns[s]||t.matchPatterns[t.defaultMatchWidth],r=e.match(i);if(!r)return null;const o=r[0],a=s&&t.parsePatterns[s]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(a)?HQ(a,h=>h.test(o)):$Q(a,h=>h.test(o));let l;l=t.valueCallback?t.valueCallback(c):c,l=n.valueCallback?n.valueCallback(l):l;const u=e.slice(o.length);return{value:l,rest:u}}}function $Q(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function HQ(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function zQ(t){return(e,n={})=>{const s=e.match(t.matchPattern);if(!s)return null;const i=s[0],r=e.match(t.parsePattern);if(!r)return null;let o=t.valueCallback?t.valueCallback(r[0]):r[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const jQ=/^(\d+)(th|st|nd|rd)?/i,WQ=/\d+/i,qQ={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},GQ={any:[/^b/i,/^(a|c)/i]},KQ={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},YQ={any:[/1/i,/2/i,/3/i,/4/i]},QQ={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},XQ={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},JQ={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ZQ={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},eX={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},tX={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},nX={ordinalNumber:zQ({matchPattern:jQ,parsePattern:WQ,valueCallback:t=>parseInt(t,10)}),era:La({matchPatterns:qQ,defaultMatchWidth:"wide",parsePatterns:GQ,defaultParseWidth:"any"}),quarter:La({matchPatterns:KQ,defaultMatchWidth:"wide",parsePatterns:YQ,defaultParseWidth:"any",valueCallback:t=>t+1}),month:La({matchPatterns:QQ,defaultMatchWidth:"wide",parsePatterns:XQ,defaultParseWidth:"any"}),day:La({matchPatterns:JQ,defaultMatchWidth:"wide",parsePatterns:ZQ,defaultParseWidth:"any"}),dayPeriod:La({matchPatterns:eX,defaultMatchWidth:"any",parsePatterns:tX,defaultParseWidth:"any"})},qC={code:"en-US",formatDistance:IQ,formatLong:AQ,formatRelative:DQ,localize:UQ,match:nX,options:{weekStartsOn:0,firstWeekContainsDate:1}};function sX(t){const e=ae(t);return BC(e,WC(e))+1}function GC(t){const e=ae(t),n=+ua(e)-+eQ(e);return Math.round(n/VC)+1}function By(t,e){var u,h,d,f;const n=ae(t),s=n.getFullYear(),i=mo(),r=(e==null?void 0:e.firstWeekContainsDate)??((h=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((f=(d=i.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,o=nt(t,0);o.setFullYear(s+1,0,r),o.setHours(0,0,0,0);const a=Fs(o,e),c=nt(t,0);c.setFullYear(s,0,r),c.setHours(0,0,0,0);const l=Fs(c,e);return n.getTime()>=a.getTime()?s+1:n.getTime()>=l.getTime()?s:s-1}function iX(t,e){var a,c,l,u;const n=mo(),s=(e==null?void 0:e.firstWeekContainsDate)??((c=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(l=n.locale)==null?void 0:l.options)==null?void 0:u.firstWeekContainsDate)??1,i=By(t,e),r=nt(t,0);return r.setFullYear(i,0,s),r.setHours(0,0,0,0),Fs(r,e)}function KC(t,e){const n=ae(t),s=+Fs(n,e)-+iX(n,e);return Math.round(s/VC)+1}function je(t,e){const n=t<0?"-":"",s=Math.abs(t).toString().padStart(e,"0");return n+s}const Ti={y(t,e){const n=t.getFullYear(),s=n>0?n:1-n;return je(e==="yy"?s%100:s,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):je(n+1,2)},d(t,e){return je(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return je(t.getHours()%12||12,e.length)},H(t,e){return je(t.getHours(),e.length)},m(t,e){return je(t.getMinutes(),e.length)},s(t,e){return je(t.getSeconds(),e.length)},S(t,e){const n=e.length,s=t.getMilliseconds(),i=Math.trunc(s*Math.pow(10,n-3));return je(i,e.length)}},To={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wE={G:function(t,e,n){const s=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const s=t.getFullYear(),i=s>0?s:1-s;return n.ordinalNumber(i,{unit:"year"})}return Ti.y(t,e)},Y:function(t,e,n,s){const i=By(t,s),r=i>0?i:1-i;if(e==="YY"){const o=r%100;return je(o,2)}return e==="Yo"?n.ordinalNumber(r,{unit:"year"}):je(r,e.length)},R:function(t,e){const n=FC(t);return je(n,e.length)},u:function(t,e){const n=t.getFullYear();return je(n,e.length)},Q:function(t,e,n){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return je(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,e,n){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return je(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,e,n){const s=t.getMonth();switch(e){case"M":case"MM":return Ti.M(t,e);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(t,e,n){const s=t.getMonth();switch(e){case"L":return String(s+1);case"LL":return je(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(t,e,n,s){const i=KC(t,s);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):je(i,e.length)},I:function(t,e,n){const s=GC(t);return e==="Io"?n.ordinalNumber(s,{unit:"week"}):je(s,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Ti.d(t,e)},D:function(t,e,n){const s=sX(t);return e==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):je(s,e.length)},E:function(t,e,n){const s=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(t,e,n,s){const i=t.getDay(),r=(i-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(r);case"ee":return je(r,2);case"eo":return n.ordinalNumber(r,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,s){const i=t.getDay(),r=(i-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(r);case"cc":return je(r,e.length);case"co":return n.ordinalNumber(r,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const s=t.getDay(),i=s===0?7:s;switch(e){case"i":return String(i);case"ii":return je(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const s=t.getHours();let i;switch(s===12?i=To.noon:s===0?i=To.midnight:i=s/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const s=t.getHours();let i;switch(s>=17?i=To.evening:s>=12?i=To.afternoon:s>=4?i=To.morning:i=To.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let s=t.getHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return Ti.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Ti.H(t,e)},K:function(t,e,n){const s=t.getHours()%12;return e==="Ko"?n.ordinalNumber(s,{unit:"hour"}):je(s,e.length)},k:function(t,e,n){let s=t.getHours();return s===0&&(s=24),e==="ko"?n.ordinalNumber(s,{unit:"hour"}):je(s,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ti.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Ti.s(t,e)},S:function(t,e){return Ti.S(t,e)},X:function(t,e,n){const s=t.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return TE(s);case"XXXX":case"XX":return wr(s);case"XXXXX":case"XXX":default:return wr(s,":")}},x:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"x":return TE(s);case"xxxx":case"xx":return wr(s);case"xxxxx":case"xxx":default:return wr(s,":")}},O:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+EE(s,":");case"OOOO":default:return"GMT"+wr(s,":")}},z:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+EE(s,":");case"zzzz":default:return"GMT"+wr(s,":")}},t:function(t,e,n){const s=Math.trunc(t.getTime()/1e3);return je(s,e.length)},T:function(t,e,n){const s=t.getTime();return je(s,e.length)}};function EE(t,e=""){const n=t>0?"-":"+",s=Math.abs(t),i=Math.trunc(s/60),r=s%60;return r===0?n+String(i):n+String(i)+e+je(r,2)}function TE(t,e){return t%60===0?(t>0?"-":"+")+je(Math.abs(t)/60,2):wr(t,e)}function wr(t,e=""){const n=t>0?"-":"+",s=Math.abs(t),i=je(Math.trunc(s/60),2),r=je(s%60,2);return n+i+e+r}const SE=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},YC=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},rX=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],s=n[1],i=n[2];if(!i)return SE(t,e);let r;switch(s){case"P":r=e.dateTime({width:"short"});break;case"PP":r=e.dateTime({width:"medium"});break;case"PPP":r=e.dateTime({width:"long"});break;case"PPPP":default:r=e.dateTime({width:"full"});break}return r.replace("{{date}}",SE(s,e)).replace("{{time}}",YC(i,e))},Jg={p:YC,P:rX},oX=/^D+$/,aX=/^Y+$/,cX=["D","DD","YY","YYYY"];function QC(t){return oX.test(t)}function XC(t){return aX.test(t)}function Zg(t,e,n){const s=lX(t,e,n);if(console.warn(s),cX.includes(t))throw new RangeError(s)}function lX(t,e,n){const s=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const uX=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,hX=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,dX=/^'([^]*?)'?$/,fX=/''/g,pX=/[a-zA-Z]/;function gX(t,e,n){var u,h,d,f,g,m,_,y;const s=mo(),i=(n==null?void 0:n.locale)??s.locale??qC,r=(n==null?void 0:n.firstWeekContainsDate)??((h=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((f=(d=s.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((m=(g=n==null?void 0:n.locale)==null?void 0:g.options)==null?void 0:m.weekStartsOn)??s.weekStartsOn??((y=(_=s.locale)==null?void 0:_.options)==null?void 0:y.weekStartsOn)??0,a=ae(t);if(!UC(a))throw new RangeError("Invalid time value");let c=e.match(hX).map(v=>{const E=v[0];if(E==="p"||E==="P"){const T=Jg[E];return T(v,i.formatLong)}return v}).join("").match(uX).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const E=v[0];if(E==="'")return{isToken:!1,value:mX(v)};if(wE[E])return{isToken:!0,value:v};if(E.match(pX))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");return{isToken:!1,value:v}});i.localize.preprocessor&&(c=i.localize.preprocessor(a,c));const l={firstWeekContainsDate:r,weekStartsOn:o,locale:i};return c.map(v=>{if(!v.isToken)return v.value;const E=v.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&XC(E)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&QC(E))&&Zg(E,e,String(t));const T=wE[E[0]];return T(a,E,i.localize,l)}).join("")}function mX(t){const e=t.match(dX);return e?e[1].replace(fX,"'"):t}function _X(){return Object.assign({},mo())}function yX(t){let n=ae(t).getDay();return n===0&&(n=7),n}function bX(t,e){const n=e instanceof Date?nt(e,0):new e(0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}const vX=10;class JC{constructor(){x(this,"subPriority",0)}validate(e,n){return!0}}class wX extends JC{constructor(e,n,s,i,r){super(),this.value=e,this.validateValue=n,this.setValue=s,this.priority=i,r&&(this.subPriority=r)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,s){return this.setValue(e,n,this.value,s)}}class EX extends JC{constructor(){super(...arguments);x(this,"priority",vX);x(this,"subPriority",-1)}set(n,s){return s.timestampIsSet?n:nt(n,bX(n,Date))}}class $e{run(e,n,s,i){const r=this.parse(e,n,s,i);return r?{setter:new wX(r.value,this.validate,this.set,this.priority,this.subPriority),rest:r.rest}:null}validate(e,n,s){return!0}}class TX extends $e{constructor(){super(...arguments);x(this,"priority",140);x(this,"incompatibleTokens",["R","u","t","T"])}parse(n,s,i){switch(s){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"});case"GGGGG":return i.era(n,{width:"narrow"});case"GGGG":default:return i.era(n,{width:"wide"})||i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"})}}set(n,s,i){return s.era=i,n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}const Rt={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},ys={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function It(t,e){return t&&{value:e(t.value),rest:t.rest}}function pt(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function bs(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const s=n[1]==="+"?1:-1,i=n[2]?parseInt(n[2],10):0,r=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:s*(i*zl+r*Hl+o*XY),rest:e.slice(n[0].length)}}function ZC(t){return pt(Rt.anyDigitsSigned,t)}function wt(t,e){switch(t){case 1:return pt(Rt.singleDigit,e);case 2:return pt(Rt.twoDigits,e);case 3:return pt(Rt.threeDigits,e);case 4:return pt(Rt.fourDigits,e);default:return pt(new RegExp("^\\d{1,"+t+"}"),e)}}function Yh(t,e){switch(t){case 1:return pt(Rt.singleDigitSigned,e);case 2:return pt(Rt.twoDigitsSigned,e);case 3:return pt(Rt.threeDigitsSigned,e);case 4:return pt(Rt.fourDigitsSigned,e);default:return pt(new RegExp("^-?\\d{1,"+t+"}"),e)}}function Uy(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function ek(t,e){const n=e>0,s=n?e:1-e;let i;if(s<=50)i=t||100;else{const r=s+50,o=Math.trunc(r/100)*100,a=t>=r%100;i=t+o-(a?100:0)}return n?i:1-i}function tk(t){return t%400===0||t%4===0&&t%100!==0}class SX extends $e{constructor(){super(...arguments);x(this,"priority",130);x(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,s,i){const r=o=>({year:o,isTwoDigitYear:s==="yy"});switch(s){case"y":return It(wt(4,n),r);case"yo":return It(i.ordinalNumber(n,{unit:"year"}),r);default:return It(wt(s.length,n),r)}}validate(n,s){return s.isTwoDigitYear||s.year>0}set(n,s,i){const r=n.getFullYear();if(i.isTwoDigitYear){const a=ek(i.year,r);return n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}const o=!("era"in s)||s.era===1?i.year:1-i.year;return n.setFullYear(o,0,1),n.setHours(0,0,0,0),n}}class RX extends $e{constructor(){super(...arguments);x(this,"priority",130);x(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,s,i){const r=o=>({year:o,isTwoDigitYear:s==="YY"});switch(s){case"Y":return It(wt(4,n),r);case"Yo":return It(i.ordinalNumber(n,{unit:"year"}),r);default:return It(wt(s.length,n),r)}}validate(n,s){return s.isTwoDigitYear||s.year>0}set(n,s,i,r){const o=By(n,r);if(i.isTwoDigitYear){const c=ek(i.year,o);return n.setFullYear(c,0,r.firstWeekContainsDate),n.setHours(0,0,0,0),Fs(n,r)}const a=!("era"in s)||s.era===1?i.year:1-i.year;return n.setFullYear(a,0,r.firstWeekContainsDate),n.setHours(0,0,0,0),Fs(n,r)}}class IX extends $e{constructor(){super(...arguments);x(this,"priority",130);x(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,s){return Yh(s==="R"?4:s.length,n)}set(n,s,i){const r=nt(n,0);return r.setFullYear(i,0,4),r.setHours(0,0,0,0),ua(r)}}class xX extends $e{constructor(){super(...arguments);x(this,"priority",130);x(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,s){return Yh(s==="u"?4:s.length,n)}set(n,s,i){return n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}class CX extends $e{constructor(){super(...arguments);x(this,"priority",120);x(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,s,i){switch(s){case"Q":case"QQ":return wt(s.length,n);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(n,{width:"wide",context:"formatting"})||i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,s){return s>=1&&s<=4}set(n,s,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class kX extends $e{constructor(){super(...arguments);x(this,"priority",120);x(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,s,i){switch(s){case"q":case"qq":return wt(s.length,n);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(n,{width:"wide",context:"standalone"})||i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,s){return s>=1&&s<=4}set(n,s,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class AX extends $e{constructor(){super(...arguments);x(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);x(this,"priority",110)}parse(n,s,i){const r=o=>o-1;switch(s){case"M":return It(pt(Rt.month,n),r);case"MM":return It(wt(2,n),r);case"Mo":return It(i.ordinalNumber(n,{unit:"month"}),r);case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(n,{width:"wide",context:"formatting"})||i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"})}}validate(n,s){return s>=0&&s<=11}set(n,s,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}class PX extends $e{constructor(){super(...arguments);x(this,"priority",110);x(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,s,i){const r=o=>o-1;switch(s){case"L":return It(pt(Rt.month,n),r);case"LL":return It(wt(2,n),r);case"Lo":return It(i.ordinalNumber(n,{unit:"month"}),r);case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(n,{width:"wide",context:"standalone"})||i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"})}}validate(n,s){return s>=0&&s<=11}set(n,s,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}function DX(t,e,n){const s=ae(t),i=KC(s,n)-e;return s.setDate(s.getDate()-i*7),s}class OX extends $e{constructor(){super(...arguments);x(this,"priority",100);x(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,s,i){switch(s){case"w":return pt(Rt.week,n);case"wo":return i.ordinalNumber(n,{unit:"week"});default:return wt(s.length,n)}}validate(n,s){return s>=1&&s<=53}set(n,s,i,r){return Fs(DX(n,i,r),r)}}function MX(t,e){const n=ae(t),s=GC(n)-e;return n.setDate(n.getDate()-s*7),n}class LX extends $e{constructor(){super(...arguments);x(this,"priority",100);x(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,s,i){switch(s){case"I":return pt(Rt.week,n);case"Io":return i.ordinalNumber(n,{unit:"week"});default:return wt(s.length,n)}}validate(n,s){return s>=1&&s<=53}set(n,s,i){return ua(MX(n,i))}}const NX=[31,28,31,30,31,30,31,31,30,31,30,31],VX=[31,29,31,30,31,30,31,31,30,31,30,31];class FX extends $e{constructor(){super(...arguments);x(this,"priority",90);x(this,"subPriority",1);x(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,s,i){switch(s){case"d":return pt(Rt.date,n);case"do":return i.ordinalNumber(n,{unit:"date"});default:return wt(s.length,n)}}validate(n,s){const i=n.getFullYear(),r=tk(i),o=n.getMonth();return r?s>=1&&s<=VX[o]:s>=1&&s<=NX[o]}set(n,s,i){return n.setDate(i),n.setHours(0,0,0,0),n}}class BX extends $e{constructor(){super(...arguments);x(this,"priority",90);x(this,"subpriority",1);x(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,s,i){switch(s){case"D":case"DD":return pt(Rt.dayOfYear,n);case"Do":return i.ordinalNumber(n,{unit:"date"});default:return wt(s.length,n)}}validate(n,s){const i=n.getFullYear();return tk(i)?s>=1&&s<=366:s>=1&&s<=365}set(n,s,i){return n.setMonth(0,i),n.setHours(0,0,0,0),n}}function $y(t,e,n){var h,d,f,g;const s=mo(),i=(n==null?void 0:n.weekStartsOn)??((d=(h=n==null?void 0:n.locale)==null?void 0:h.options)==null?void 0:d.weekStartsOn)??s.weekStartsOn??((g=(f=s.locale)==null?void 0:f.options)==null?void 0:g.weekStartsOn)??0,r=ae(t),o=r.getDay(),c=(e%7+7)%7,l=7-i,u=e<0||e>6?e-(o+l)%7:(c+l)%7-(o+l)%7;return Rf(r,u)}class UX extends $e{constructor(){super(...arguments);x(this,"priority",90);x(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,s,i){switch(s){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,s){return s>=0&&s<=6}set(n,s,i,r){return n=$y(n,i,r),n.setHours(0,0,0,0),n}}class $X extends $e{constructor(){super(...arguments);x(this,"priority",90);x(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,s,i,r){const o=a=>{const c=Math.floor((a-1)/7)*7;return(a+r.weekStartsOn+6)%7+c};switch(s){case"e":case"ee":return It(wt(s.length,n),o);case"eo":return It(i.ordinalNumber(n,{unit:"day"}),o);case"eee":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeeee":return i.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,s){return s>=0&&s<=6}set(n,s,i,r){return n=$y(n,i,r),n.setHours(0,0,0,0),n}}class HX extends $e{constructor(){super(...arguments);x(this,"priority",90);x(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,s,i,r){const o=a=>{const c=Math.floor((a-1)/7)*7;return(a+r.weekStartsOn+6)%7+c};switch(s){case"c":case"cc":return It(wt(s.length,n),o);case"co":return It(i.ordinalNumber(n,{unit:"day"}),o);case"ccc":return i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"ccccc":return i.day(n,{width:"narrow",context:"standalone"});case"cccccc":return i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(n,{width:"wide",context:"standalone"})||i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"})}}validate(n,s){return s>=0&&s<=6}set(n,s,i,r){return n=$y(n,i,r),n.setHours(0,0,0,0),n}}function zX(t,e){const n=ae(t),s=yX(n),i=e-s;return Rf(n,i)}class jX extends $e{constructor(){super(...arguments);x(this,"priority",90);x(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,s,i){const r=o=>o===0?7:o;switch(s){case"i":case"ii":return wt(s.length,n);case"io":return i.ordinalNumber(n,{unit:"day"});case"iii":return It(i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),r);case"iiiii":return It(i.day(n,{width:"narrow",context:"formatting"}),r);case"iiiiii":return It(i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),r);case"iiii":default:return It(i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),r)}}validate(n,s){return s>=1&&s<=7}set(n,s,i){return n=zX(n,i),n.setHours(0,0,0,0),n}}class WX extends $e{constructor(){super(...arguments);x(this,"priority",80);x(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,s,i){switch(s){case"a":case"aa":case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,s,i){return n.setHours(Uy(i),0,0,0),n}}class qX extends $e{constructor(){super(...arguments);x(this,"priority",80);x(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,s,i){switch(s){case"b":case"bb":case"bbb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,s,i){return n.setHours(Uy(i),0,0,0),n}}class GX extends $e{constructor(){super(...arguments);x(this,"priority",80);x(this,"incompatibleTokens",["a","b","t","T"])}parse(n,s,i){switch(s){case"B":case"BB":case"BBB":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,s,i){return n.setHours(Uy(i),0,0,0),n}}class KX extends $e{constructor(){super(...arguments);x(this,"priority",70);x(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,s,i){switch(s){case"h":return pt(Rt.hour12h,n);case"ho":return i.ordinalNumber(n,{unit:"hour"});default:return wt(s.length,n)}}validate(n,s){return s>=1&&s<=12}set(n,s,i){const r=n.getHours()>=12;return r&&i<12?n.setHours(i+12,0,0,0):!r&&i===12?n.setHours(0,0,0,0):n.setHours(i,0,0,0),n}}class YX extends $e{constructor(){super(...arguments);x(this,"priority",70);x(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,s,i){switch(s){case"H":return pt(Rt.hour23h,n);case"Ho":return i.ordinalNumber(n,{unit:"hour"});default:return wt(s.length,n)}}validate(n,s){return s>=0&&s<=23}set(n,s,i){return n.setHours(i,0,0,0),n}}class QX extends $e{constructor(){super(...arguments);x(this,"priority",70);x(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,s,i){switch(s){case"K":return pt(Rt.hour11h,n);case"Ko":return i.ordinalNumber(n,{unit:"hour"});default:return wt(s.length,n)}}validate(n,s){return s>=0&&s<=11}set(n,s,i){return n.getHours()>=12&&i<12?n.setHours(i+12,0,0,0):n.setHours(i,0,0,0),n}}class XX extends $e{constructor(){super(...arguments);x(this,"priority",70);x(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,s,i){switch(s){case"k":return pt(Rt.hour24h,n);case"ko":return i.ordinalNumber(n,{unit:"hour"});default:return wt(s.length,n)}}validate(n,s){return s>=1&&s<=24}set(n,s,i){const r=i<=24?i%24:i;return n.setHours(r,0,0,0),n}}class JX extends $e{constructor(){super(...arguments);x(this,"priority",60);x(this,"incompatibleTokens",["t","T"])}parse(n,s,i){switch(s){case"m":return pt(Rt.minute,n);case"mo":return i.ordinalNumber(n,{unit:"minute"});default:return wt(s.length,n)}}validate(n,s){return s>=0&&s<=59}set(n,s,i){return n.setMinutes(i,0,0),n}}class ZX extends $e{constructor(){super(...arguments);x(this,"priority",50);x(this,"incompatibleTokens",["t","T"])}parse(n,s,i){switch(s){case"s":return pt(Rt.second,n);case"so":return i.ordinalNumber(n,{unit:"second"});default:return wt(s.length,n)}}validate(n,s){return s>=0&&s<=59}set(n,s,i){return n.setSeconds(i,0),n}}class eJ extends $e{constructor(){super(...arguments);x(this,"priority",30);x(this,"incompatibleTokens",["t","T"])}parse(n,s){const i=r=>Math.trunc(r*Math.pow(10,-s.length+3));return It(wt(s.length,n),i)}set(n,s,i){return n.setMilliseconds(i),n}}class tJ extends $e{constructor(){super(...arguments);x(this,"priority",10);x(this,"incompatibleTokens",["t","T","x"])}parse(n,s){switch(s){case"X":return bs(ys.basicOptionalMinutes,n);case"XX":return bs(ys.basic,n);case"XXXX":return bs(ys.basicOptionalSeconds,n);case"XXXXX":return bs(ys.extendedOptionalSeconds,n);case"XXX":default:return bs(ys.extended,n)}}set(n,s,i){return s.timestampIsSet?n:nt(n,n.getTime()-Kh(n)-i)}}class nJ extends $e{constructor(){super(...arguments);x(this,"priority",10);x(this,"incompatibleTokens",["t","T","X"])}parse(n,s){switch(s){case"x":return bs(ys.basicOptionalMinutes,n);case"xx":return bs(ys.basic,n);case"xxxx":return bs(ys.basicOptionalSeconds,n);case"xxxxx":return bs(ys.extendedOptionalSeconds,n);case"xxx":default:return bs(ys.extended,n)}}set(n,s,i){return s.timestampIsSet?n:nt(n,n.getTime()-Kh(n)-i)}}class sJ extends $e{constructor(){super(...arguments);x(this,"priority",40);x(this,"incompatibleTokens","*")}parse(n){return ZC(n)}set(n,s,i){return[nt(n,i*1e3),{timestampIsSet:!0}]}}class iJ extends $e{constructor(){super(...arguments);x(this,"priority",20);x(this,"incompatibleTokens","*")}parse(n){return ZC(n)}set(n,s,i){return[nt(n,i),{timestampIsSet:!0}]}}const rJ={G:new TX,y:new SX,Y:new RX,R:new IX,u:new xX,Q:new CX,q:new kX,M:new AX,L:new PX,w:new OX,I:new LX,d:new FX,D:new BX,E:new UX,e:new $X,c:new HX,i:new jX,a:new WX,b:new qX,B:new GX,h:new KX,H:new YX,K:new QX,k:new XX,m:new JX,s:new ZX,S:new eJ,X:new tJ,x:new nJ,t:new sJ,T:new iJ},oJ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,aJ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,cJ=/^'([^]*?)'?$/,lJ=/''/g,uJ=/\S/,hJ=/[a-zA-Z]/;function dJ(t,e,n,s){var m,_,y,v,E,T,S,I;const i=_X(),r=(s==null?void 0:s.locale)??i.locale??qC,o=(s==null?void 0:s.firstWeekContainsDate)??((_=(m=s==null?void 0:s.locale)==null?void 0:m.options)==null?void 0:_.firstWeekContainsDate)??i.firstWeekContainsDate??((v=(y=i.locale)==null?void 0:y.options)==null?void 0:v.firstWeekContainsDate)??1,a=(s==null?void 0:s.weekStartsOn)??((T=(E=s==null?void 0:s.locale)==null?void 0:E.options)==null?void 0:T.weekStartsOn)??i.weekStartsOn??((I=(S=i.locale)==null?void 0:S.options)==null?void 0:I.weekStartsOn)??0;if(e==="")return t===""?ae(n):nt(n,NaN);const c={firstWeekContainsDate:o,weekStartsOn:a,locale:r},l=[new EX],u=e.match(aJ).map(k=>{const R=k[0];if(R in Jg){const N=Jg[R];return N(k,r.formatLong)}return k}).join("").match(oJ),h=[];for(let k of u){!(s!=null&&s.useAdditionalWeekYearTokens)&&XC(k)&&Zg(k,e,t),!(s!=null&&s.useAdditionalDayOfYearTokens)&&QC(k)&&Zg(k,e,t);const R=k[0],N=rJ[R];if(N){const{incompatibleTokens:$}=N;if(Array.isArray($)){const B=h.find(ce=>$.includes(ce.token)||ce.token===R);if(B)throw new RangeError(`The format string mustn't contain \`${B.fullToken}\` and \`${k}\` at the same time`)}else if(N.incompatibleTokens==="*"&&h.length>0)throw new RangeError(`The format string mustn't contain \`${k}\` and any other token at the same time`);h.push({token:R,fullToken:k});const X=N.run(t,k,r.match,c);if(!X)return nt(n,NaN);l.push(X.setter),t=X.rest}else{if(R.match(hJ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+R+"`");if(k==="''"?k="'":R==="'"&&(k=fJ(k)),t.indexOf(k)===0)t=t.slice(k.length);else return nt(n,NaN)}}if(t.length>0&&uJ.test(t))return nt(n,NaN);const d=l.map(k=>k.priority).sort((k,R)=>R-k).filter((k,R,N)=>N.indexOf(k)===R).map(k=>l.filter(R=>R.priority===k).sort((R,N)=>N.subPriority-R.subPriority)).map(k=>k[0]);let f=ae(n);if(isNaN(f.getTime()))return nt(n,NaN);const g={};for(const k of d){if(!k.validate(f,c))return nt(n,NaN);const R=k.set(f,g,c);Array.isArray(R)?(f=R[0],Object.assign(g,R[1])):f=R}return nt(n,f)}function fJ(t){return t.match(cJ)[1].replace(lJ,"'")}function pJ(t){const e=ae(t);return e.setMinutes(0,0,0),e}function gJ(t){const e=ae(t);return e.setMilliseconds(0),e}function mJ(t,e){const n=(e==null?void 0:e.additionalDigits)??2,s=vJ(t);let i;if(s.date){const c=wJ(s.date,n);i=EJ(c.restDateString,c.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const r=i.getTime();let o=0,a;if(s.time&&(o=TJ(s.time),isNaN(o)))return new Date(NaN);if(s.timezone){if(a=SJ(s.timezone),isNaN(a))return new Date(NaN)}else{const c=new Date(r+o),l=new Date(0);return l.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),l.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),l}return new Date(r+o+a)}const Su={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},_J=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,yJ=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,bJ=/^([+-])(\d{2})(?::?(\d{2}))?$/;function vJ(t){const e={},n=t.split(Su.dateTimeDelimiter);let s;if(n.length>2)return e;if(/:/.test(n[0])?s=n[0]:(e.date=n[0],s=n[1],Su.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Su.timeZoneDelimiter)[0],s=t.substr(e.date.length,t.length))),s){const i=Su.timezone.exec(s);i?(e.time=s.replace(i[1],""),e.timezone=i[1]):e.time=s}return e}function wJ(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),s=t.match(n);if(!s)return{year:NaN,restDateString:""};const i=s[1]?parseInt(s[1]):null,r=s[2]?parseInt(s[2]):null;return{year:r===null?i:r*100,restDateString:t.slice((s[1]||s[2]).length)}}function EJ(t,e){if(e===null)return new Date(NaN);const n=t.match(_J);if(!n)return new Date(NaN);const s=!!n[4],i=Na(n[1]),r=Na(n[2])-1,o=Na(n[3]),a=Na(n[4]),c=Na(n[5])-1;if(s)return kJ(e,a,c)?RJ(e,a,c):new Date(NaN);{const l=new Date(0);return!xJ(e,r,o)||!CJ(e,i)?new Date(NaN):(l.setUTCFullYear(e,r,Math.max(i,o)),l)}}function Na(t){return t?parseInt(t):1}function TJ(t){const e=t.match(yJ);if(!e)return NaN;const n=Ap(e[1]),s=Ap(e[2]),i=Ap(e[3]);return AJ(n,s,i)?n*zl+s*Hl+i*1e3:NaN}function Ap(t){return t&&parseFloat(t.replace(",","."))||0}function SJ(t){if(t==="Z")return 0;const e=t.match(bJ);if(!e)return 0;const n=e[1]==="+"?-1:1,s=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return PJ(s,i)?n*(s*zl+i*Hl):NaN}function RJ(t,e,n){const s=new Date(0);s.setUTCFullYear(t,0,4);const i=s.getUTCDay()||7,r=(e-1)*7+n+1-i;return s.setUTCDate(s.getUTCDate()+r),s}const IJ=[31,null,31,30,31,30,31,31,30,31,30,31];function nk(t){return t%400===0||t%4===0&&t%100!==0}function xJ(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(IJ[e]||(nk(t)?29:28))}function CJ(t,e){return e>=1&&e<=(nk(t)?366:365)}function kJ(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function AJ(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function PJ(t,e){return e>=0&&e<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const DJ={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};eC._date.override({_id:"date-fns",formats:function(){return DJ},parse:function(t,e){if(t===null||typeof t>"u")return null;const n=typeof t;return n==="number"||t instanceof Date?t=ae(t):n==="string"&&(typeof e=="string"?t=dJ(t,e,new Date,this.options):t=mJ(t,this.options)),UC(t)?t.getTime():null},format:function(t,e){return gX(t,e,this.options)},add:function(t,e,n){switch(n){case"millisecond":return If(t,e);case"second":return sQ(t,e);case"minute":return tQ(t,e);case"hour":return JY(t,e);case"day":return Rf(t,e);case"week":return iQ(t,e);case"month":return Fy(t,e);case"quarter":return nQ(t,e);case"year":return rQ(t,e);default:return t}},diff:function(t,e,n){switch(n){case"millisecond":return xf(t,e);case"second":return fQ(t,e);case"minute":return uQ(t,e);case"hour":return lQ(t,e);case"day":return $C(t,e);case"week":return pQ(t,e);case"month":return jC(t,e);case"quarter":return dQ(t,e);case"year":return gQ(t,e);default:return 0}},startOf:function(t,e,n){switch(e){case"second":return gJ(t);case"minute":return mQ(t);case"hour":return pJ(t);case"day":return Xg(t);case"week":return Fs(t);case"isoWeek":return Fs(t,{weekStartsOn:+n});case"month":return yQ(t);case"quarter":return _Q(t);case"year":return WC(t);default:return t}},endOf:function(t,e){switch(e){case"second":return SQ(t);case"minute":return EQ(t);case"hour":return vQ(t);case"day":return HC(t);case"week":return wQ(t);case"month":return zC(t);case"quarter":return TQ(t);case"year":return bQ(t);default:return t}}});_e.use(wy);const OJ={name:"UserProfileStats",components:{VueChartkick:_e},props:{lastStatsUpdate:Number},data(){return{likedRecipes:{},categoryList:{},myCookbookCategoryList:{},userData:{},myCookbookRecipes:[],recipesCreatedData:null,leftoverPastMonth:null}},mounted(){this.fetchLikedRecipesData(),this.fetchMyCookbookData()},methods:{fetchRecipeFromFirebase(t){return Dt(Ie(Ae,"all_recipes",t)).then(e=>{if(e.exists())return e.data();console.error("No such document")}).catch(e=>{throw console.error("Error fetching recipe:",e),e})},handleLastStatsUpdate(){console.log("nice"),this.fetchLikedRecipesData()},async fetchLikedRecipesData(){if(Re.currentUser){const e=await Dt(Ie(Ae,"users",Re.currentUser.uid));this.userData=e.data(),this.fetchRecipesFromCookbook()}let t={Asian:0,Beverages:0,"Breakfast and Brunch":0,"Desserts and Snacks":0,"Fast Food":0,"Healthy Choices":0,"Late-night Eats":0,"Local Delights":0,Others:0,Specialty:0,Western:0};if(this.likedRecipes=this.userData.liked_recipes,this.userData.liked_recipes&&this.userData.liked_recipes.length>0){const e=this.likedRecipes.map(n=>this.fetchRecipeFromFirebase(n).then(s=>{s&&s.categories&&s.categories.forEach(i=>{i in t&&t[i]++})}).catch(s=>{console.error("Error fetching recipe from Firebase:",s)}));Promise.all(e).then(()=>{let n=Object.entries(t).filter(([i,r])=>r>0).sort((i,r)=>r[1]-i[1]).slice(0,5),s={};n.forEach(([i,r])=>{s[i]=r}),this.categoryList=s})}else this.categoryList={}},async fetchLikedRecipesData(){if(Re.currentUser){const e=await Dt(Ie(Ae,"users",Re.currentUser.uid));this.userData=e.data(),this.fetchRecipesFromCookbook()}let t={Asian:0,Beverages:0,"Breakfast and Brunch":0,"Desserts and Snacks":0,"Fast Food":0,"Healthy Choices":0,"Late-night Eats":0,"Local Delights":0,Others:0,Specialty:0,Western:0};if(this.likedRecipes=this.userData.liked_recipes,this.userData.liked_recipes&&this.userData.liked_recipes.length>0){const e=this.likedRecipes.map(n=>this.fetchRecipeFromFirebase(n).then(s=>{s&&s.categories&&s.categories.forEach(i=>{i in t&&t[i]++})}).catch(s=>{console.error("Error fetching recipe from Firebase:",s)}));Promise.all(e).then(()=>{let n=Object.entries(t).filter(([i,r])=>r>0).sort((i,r)=>r[1]-i[1]).slice(0,5),s={};n.forEach(([i,r])=>{s[i]=r}),this.categoryList=s})}else this.categoryList={}},async fetchMyCookbookData(){if(Re.currentUser){const e=await Dt(Ie(Ae,"users",Re.currentUser.uid));this.userData=e.data(),this.fetchRecipesFromCookbook()}let t={Asian:0,Beverages:0,"Breakfast and Brunch":0,"Desserts and Snacks":0,"Fast Food":0,"Healthy Choices":0,"Late-night Eats":0,"Local Delights":0,Others:0,Specialty:0,Western:0};if(this.my_cookbook=this.userData.my_cookbook,this.userData.my_cookbook&&this.userData.my_cookbook.length>0){const e=this.my_cookbook.map(n=>this.fetchRecipeFromFirebase(n).then(s=>{s&&s.categories&&s.categories.forEach(i=>{i in t&&t[i]++})}).catch(s=>{console.error("Error fetching recipe from Firebase:",s)}));Promise.all(e).then(()=>{let n=Object.entries(t).filter(([i,r])=>r>0).sort((i,r)=>r[1]-i[1]).slice(0,5),s={};n.forEach(([i,r])=>{s[i]=r}),this.myCookbookCategoryList=s})}else this.categoryList={}},async fetchRecipesFromCookbook(){const t=[];for(const e of this.userData.my_cookbook)try{const n=await Dt(Ie(Ae,"all_recipes",e));if(n.exists()){const s=n.data();t.push(s)}}catch(n){console.error("Error fetching recipe from Firebase:",n)}this.myCookbookRecipes=t,this.fetchRecipeCreationData(),this.fetchLeftoverPastMonth()},async fetchRecipeCreationData(){const t=new Date,e=t.getFullYear(),n=t.getMonth(),s=[],i={};for(let o=5;o>=0;o--){const c=new Date(e,n-o,1).toLocaleString("default",{month:"short"});s.push(c),i[c]=0}for(const o of this.myCookbookRecipes)if(o&&o.created_date){const a=new Date(o.created_date.seconds*1e3),c=a.getFullYear(),l=a.getMonth();if(c===e&&l>=n-5&&l<=n){const u=a.toLocaleString("default",{month:"short"});i[u]++}}const r=s.map(o=>[o,i[o]]);this.recipesCreatedData=r,console.log(r)},async fetchLeftoverPastMonth(){const t=new Date,e=new Date(t.setMonth(t.getMonth()-1)),n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=this.myCookbookRecipes.filter(l=>new Date(l.created_date.seconds*1e3)>=n).filter(l=>l.leftovers).map(l=>l.leftovers).flat(),r=i.filter((l,u,h)=>h.indexOf(l)===u),o=new rk(r,{threshold:.1}),a={};i.forEach(l=>{const u=o.search(l);if(u.length>0){u.sort((f,g)=>f.score-g.score);const d=u[0].item;d in a?a[d]++:a[d]=1}else l in a?a[l]++:a[l]=1});const c=Object.entries(a).sort((l,u)=>u[1]-l[1]).slice(0,10).reduce((l,[u,h])=>(l[u]=h,l),{});this.leftoverPastMonth=c,console.log(c)}}},ur=t=>(Lt("data-v-edc5f522"),t=t(),Nt(),t),MJ={class:"user-profile-stats"},LJ={class:"favourite-category"},NJ=ur(()=>p("h2",null,"Favourite Categories",-1)),VJ=ur(()=>p("p",null,"(Liked Recipes)",-1)),FJ={key:0,class:"category-charts"},BJ={class:"category-liked"},UJ={key:1},$J=ur(()=>p("p",null,"No recipes liked",-1)),HJ=[$J],zJ={class:"favourite-category"},jJ=ur(()=>p("h2",null,"Favourite Categories",-1)),WJ=ur(()=>p("p",null,"(My Cookbook)",-1)),qJ={key:0,class:"category-charts"},GJ={class:"category-liked"},KJ={key:1},YJ=ur(()=>p("p",null,"No recipes liked",-1)),QJ=[YJ],XJ={class:"numberOfRecipesCreated"},JJ=ur(()=>p("h2",null,"Number of recipes created",-1)),ZJ={class:"category-liked"},eZ={class:"pastMonthLeftovers"},tZ=ur(()=>p("h2",null,"Leftovers for the Past Month",-1)),nZ={class:"category-liked"};function sZ(t,e,n,s,i,r){const o=te("pie-chart"),a=te("column-chart"),c=te("bar-chart");return C(),O("div",MJ,[p("div",LJ,[NJ,VJ,Object.keys(i.categoryList).length>0?(C(),O("div",FJ,[p("div",BJ,[W(o,{class:"pie-category-liked",data:i.categoryList,colors:["#596639","#CBDF99","#8AB3A5","#BAD7BC","#DCAA83","#BD6B16","#406344","#2F4858"]},null,8,["data"])])])):(C(),O("div",UJ,HJ))]),p("div",zJ,[jJ,WJ,Object.keys(i.myCookbookCategoryList).length>0?(C(),O("div",qJ,[p("div",GJ,[W(o,{class:"pie-category-liked",data:i.myCookbookCategoryList,colors:["#596639","#CBDF99","#8AB3A5","#BAD7BC","#DCAA83","#BD6B16","#406344","#2F4858"]},null,8,["data"])])])):(C(),O("div",KJ,QJ))]),p("div",XJ,[JJ,p("div",ZJ,[W(a,{data:i.recipesCreatedData,xtitle:"Month",ytitle:"Number of Recipes Created",colors:["#BD6B16"]},null,8,["data"])])]),p("div",eZ,[tZ,p("div",nZ,[W(c,{data:i.leftoverPastMonth,xtitle:"Counts",ytitle:"Leftovers",colors:["#596639"],loading:"Loading...",xstep:"1"},null,8,["data"])])])])}const iZ=Ve(OJ,[["render",sZ],["__scopeId","data-v-edc5f522"]]),rZ={name:"ProfileSettings",components:{TopBar:ya,UserProfileSidebar:zj,UserProfileEdit:fW,UserProfileLikedRecipes:PW,UserProfileMyCookbook:KW,UserProfileStats:iZ},data(){return{selected:"settings",userData:{},lastStatsUpdate:Date.now(),refreshKey:0}},mounted(){this.fetchUserData()},methods:{fetchUserStats(){this.lastStatsUpdate=Date.now(),this.refreshKey++},changeSelected(t){this.selected=t},async fetchUserData(){if(Re.currentUser){const t=await Dt(Ie(Ae,"users",Re.currentUser.uid));this.userData=t.data()}},handleUserDataUpdate(t){this.userData={...this.userData,username:t.username}},refreshProfilePic(t){this.userData={...this.userData,profile_img_url:t},this.refreshKey++}}},oZ={class:"settings"},aZ={class:"content-container"},cZ={key:0,class:"view-container"},lZ={key:3,class:"stats-container"};function uZ(t,e,n,s,i,r){const o=te("TopBar"),a=te("UserProfileSidebar"),c=te("UserProfileEdit"),l=te("UserProfileLikedRecipes"),u=te("UserProfileMyCookbook"),h=te("UserProfileStats");return C(),O("div",oZ,[(C(),De(o,{whichPage:"none",key:i.refreshKey})),p("div",aZ,[W(a,{selected:i.selected,onSelected:e[0]||(e[0]=d=>r.changeSelected(d)),userData:i.userData,onRefreshProfilePic:r.refreshProfilePic},null,8,["selected","userData","onRefreshProfilePic"]),i.selected==="settings"?(C(),O("div",cZ,[i.selected==="settings"&&Object.keys(i.userData).length!==0?(C(),De(c,{key:0,userData:i.userData,onUserData:r.handleUserDataUpdate},null,8,["userData","onUserData"])):be("",!0)])):be("",!0),i.selected==="likedRecipes"?(C(),De(l,{key:1,userData:i.userData,onUpdateLiked:r.fetchUserStats},null,8,["userData","onUpdateLiked"])):be("",!0),i.selected==="myCookbook"?(C(),De(u,{key:2,userData:i.userData,onUpdateLiked:r.fetchUserStats},null,8,["userData","onUpdateLiked"])):be("",!0),i.selected==="stats"?(C(),O("div",lZ,[i.selected==="stats"?(C(),De(h,{userData:i.userData,lastStatsUpdate:i.lastStatsUpdate,key:i.refreshKey},null,8,["userData","lastStatsUpdate"])):be("",!0)])):be("",!0)])])}const hZ=Ve(rZ,[["render",uZ],["__scopeId","data-v-d6fcf9f1"]]),dZ={components:{Multiselect:Ml,TopBar:ya,SaveRecipeButton:mf,CircleButton:Ol},setup(){return{toast:fo()}},data(){return{recipeData:{imageSrc:"https://i0.wp.com/sunrisedaycamp.org/wp-content/uploads/2020/10/placeholder.png?ssl=1",publish_to_community:!1,recipe_name:"",serving_size:"",description:"",allergen_info:"",allergens:[],cook_time_hours:"",cook_time_minutes:"",categories:[],category:[],ingredients:[""],directions:[{stepNumber:1,text:""}]}}},async created(){this.recipeData.categories=await cf()},methods:{chooseFile(){this.$refs.fileInput.click()},async handleImageUpload(t){const e=t.target.files[0];if(!e||e.type!=="image/jpeg"&&e.type!=="image/png"){this.imageNotValid();return}try{const n=await this.convertFileToBlob(e),s=await this.uploadImageToFirebase(n,e.name);this.recipeData.imageSrc=s}catch(n){console.error("Failed to upload image",n)}},async uploadImageToFirebase(t,e){return new Promise((n,s)=>{const i=of(af,`recipeImg/${e}`),r=sf(i,t);r.on("state_changed",o=>{const a=o.bytesTransferred/o.totalBytes*100;console.log("Upload is "+a+"% done")},o=>{console.error("Upload failed",o),s(o)},()=>{rf(r.snapshot.ref).then(o=>{console.log("File available at",o),n(o)}).catch(o=>{console.error("Failed to get download URL",o),s(o)})})})},convertFileToBlob(t){return new Promise((e,n)=>{const s=new FileReader;s.onloadend=()=>{const i=new Blob([new Uint8Array(s.result)],{type:t.type});e(i)},s.onerror=n,s.readAsArrayBuffer(t)})},addIngredient(){this.recipeData.ingredients.push("")},removeIngredient(t){this.recipeData.ingredients.splice(t,1)},addDirection(){const t=this.recipeData.directions.length+1;this.recipeData.directions.push({stepNumber:t,text:""})},removeDirection(t){this.recipeData.directions.splice(t,1);for(let e=t;e<this.recipeData.directions.length;e++)this.recipeData.directions[e].stepNumber--},onlyNumberInput(t,e){const n=t.keyCode||t.which;n>31&&(n<48||n>57)&&n!==46||n===46&&this.recipeData[e].includes(".")?t.preventDefault():this.recipeData[e]=t.target.value},close(){window.history.length>1?this.$router.go(-1):this.$router.push("/")},validateForm(){const t=[];return this.recipeData.recipe_name||t.push("Title"),this.recipeData.description||t.push("Description"),!this.recipeData.cook_time_hours&&!this.recipeData.cook_time_minutes&&t.push("Cook Time"),this.recipeData.category.length||t.push("Category"),this.recipeData.serving_size||t.push("Serving Size"),this.recipeData.ingredients.every(e=>e.trim()!=="")||t.push("Ingredients"),this.recipeData.directions.every(e=>e.text.trim()!=="")||t.push("Directions"),t},imageNotValid(){this.toast.error("Please select a JPG or PNG image file.",{position:"top-center",hideProgressBar:!0})},fillAllFields(t){const e=`Please fill in the following fields: ${t.join(", ")}.`;this.toast.error(e,{position:"top-center",hideProgressBar:!0})},cannotSaveRecipe(){this.toast.error("Recipe could not be saved.",{position:"top-center",hideProgressBar:!0})},recipeSavedSuccess(){this.toast.success("Recipe was successfully created!",{timeout:2e3,position:"top-center",hideProgressBar:!0})},async submitRecipe(){const t=this.validateForm();if(t.length>0){this.fillAllFields(t);return}const e=Re.currentUser,n=e?e.uid:"",s=wx().toString();this.recipeData.imageSrc||(this.recipeData.imageSrc="https://i0.wp.com/sunrisedaycamp.org/wp-content/uploads/2020/10/placeholder.png?ssl=1");const i=this.recipeData.cook_time_hours||"0",r=this.recipeData.cook_time_minutes||"0",o={allergens:this.recipeData.allergen_info.split(",").map(c=>c.trim()),categories:this.recipeData.category,community:this.recipeData.publish_to_community,cookTime:parseInt(i)*60+parseInt(r),created_date:new Date,description:this.recipeData.description,directions:this.recipeData.directions.map(c=>c.text),ingredients:this.recipeData.ingredients,like_count:0,recipe_id:s,recipe_img_url:this.recipeData.imageSrc,recipe_name:this.recipeData.recipe_name,serving_size:parseInt(this.recipeData.serving_size),user_id:n},a=ia(tr);Ps(a,"all_recipes");try{const c=await Pr(Ie(a,"all_recipes",s),o);o.categories.forEach(l=>Sn(Ie(a,"categories",l),{recipes:zc(o.recipe_id)})),await Sn(Ie(a,"users",o.user_id),{my_cookbook:zc(o.recipe_id)}),console.log("Document updated successfully."),this.$router.push("/community-page"),this.recipeSavedSuccess()}catch(c){console.error("Error adding document:",c),this.cannotSaveRecipe()}}}},Gn=t=>(Lt("data-v-6d40cc4e"),t=t(),Nt(),t),fZ={class:"create-recipe-modal"},pZ={class:"recipe-form"},gZ={class:"recipe-form-content"},mZ={class:"createRecipeRow"},_Z={class:"first1"},yZ=["src"],bZ={class:"img-button-container"},vZ={class:"switch-container"},wZ={class:"switch"},EZ=Gn(()=>p("span",{class:"slider"},null,-1)),TZ=Gn(()=>p("label",{for:"publishToCommunity"},"Publish to Community",-1)),SZ={class:"first2"},RZ=Gn(()=>p("label",{for:"recipeName"},"Title:",-1)),IZ=Gn(()=>p("label",{for:"recipeDescription"},"Description:",-1)),xZ=Gn(()=>p("label",{for:"allergenInfo"},"Allergen Information:",-1)),CZ={class:"additional-info"},kZ={class:"input-group"},AZ=Gn(()=>p("label",{for:"cookTime"},"Cook Time:",-1)),PZ={class:"time-input-group"},DZ=Gn(()=>p("span",null,"hours",-1)),OZ=Gn(()=>p("span",null,"mins",-1)),MZ={class:"input-group"},LZ=Gn(()=>p("label",{for:"category"},"Category:",-1)),NZ={class:"input-group"},VZ=Gn(()=>p("label",{for:"servingSize"},"Serving Size:",-1)),FZ={class:"createRecipeRow"},BZ={class:"second1"},UZ={class:"recipe-section"},$Z=Gn(()=>p("label",{for:"ingredients"},"Ingredients:",-1)),HZ={class:"ingredients-container"},zZ=["onUpdate:modelValue"],jZ=["onClick"],WZ={class:"button-group"},qZ={class:"second2"},GZ={class:"recipe-section"},KZ=Gn(()=>p("label",{for:"directions"},"Directions:",-1)),YZ={class:"directions-container"},QZ=["for"],XZ={class:"direction-input"},JZ=["id","onUpdate:modelValue"],ZZ=["onClick"],eee={class:"button-group"},tee={class:"button-container"};function nee(t,e,n,s,i,r){const o=te("TopBar"),a=te("CircleButton"),c=te("multiselect"),l=te("SaveRecipeButton");return C(),O(me,null,[W(o,{whichPage:"feed"}),p("div",fZ,[p("div",pZ,[p("div",gZ,[p("div",mZ,[p("div",_Z,[p("input",{type:"file",id:"recipeImage",ref:"fileInput",style:{display:"none"},onChange:e[0]||(e[0]=(...u)=>r.handleImageUpload&&r.handleImageUpload(...u))},null,544),p("div",{class:"plus-icon-container",onClick:e[1]||(e[1]=(...u)=>r.chooseFile&&r.chooseFile(...u))},[p("img",{src:i.recipeData.imageSrc,class:"uploaded-image",alt:"Image Upload"},null,8,yZ),p("div",bZ,[W(a,{logo:"./plus-icon.png",class:"circle-button"})])]),p("div",vZ,[p("label",wZ,[ie(p("input",{type:"checkbox",id:"publishToCommunity","onUpdate:modelValue":e[2]||(e[2]=u=>i.recipeData.publish_to_community=u)},null,512),[[Rc,i.recipeData.publish_to_community]]),EZ]),TZ])]),p("div",SZ,[RZ,ie(p("input",{type:"text",id:"recipeName","onUpdate:modelValue":e[3]||(e[3]=u=>i.recipeData.recipe_name=u),maxlength:"50"},null,512),[[ve,i.recipeData.recipe_name]]),IZ,ie(p("textarea",{type:"text",id:"recipeDescription","onUpdate:modelValue":e[4]||(e[4]=u=>i.recipeData.description=u),class:"input-text"},null,512),[[ve,i.recipeData.description]]),xZ,ie(p("textarea",{type:"text",id:"allergenInfo","onUpdate:modelValue":e[5]||(e[5]=u=>i.recipeData.allergen_info=u),class:"input-text"},null,512),[[ve,i.recipeData.allergen_info]]),p("div",CZ,[p("div",kZ,[AZ,p("div",PZ,[ie(p("input",{type:"number",id:"cookTimeHours","onUpdate:modelValue":e[6]||(e[6]=u=>i.recipeData.cook_time_hours=u),min:"0",onKeydown:e[7]||(e[7]=u=>r.onlyNumberInput(u,"cook_time_hours"))},null,544),[[ve,i.recipeData.cook_time_hours]]),DZ,ie(p("input",{type:"number",id:"cookTimeMins","onUpdate:modelValue":e[8]||(e[8]=u=>i.recipeData.cook_time_minutes=u),min:"0",onKeydown:e[9]||(e[9]=u=>r.onlyNumberInput(u,"cook_time_minutes"))},null,544),[[ve,i.recipeData.cook_time_minutes]]),OZ])]),p("div",MZ,[LZ,W(c,{modelValue:i.recipeData.category,"onUpdate:modelValue":e[10]||(e[10]=u=>i.recipeData.category=u),options:i.recipeData.categories,multiple:!0,"close-on-select":!1,max:3},null,8,["modelValue","options"])]),p("div",NZ,[VZ,ie(p("input",{type:"number",id:"servingSize","onUpdate:modelValue":e[11]||(e[11]=u=>i.recipeData.serving_size=u),min:"0",onKeydown:e[12]||(e[12]=u=>r.onlyNumberInput(u,"serving_size"))},null,544),[[ve,i.recipeData.serving_size]])])])])]),p("div",FZ,[p("div",BZ,[p("div",UZ,[$Z,p("div",HZ,[(C(!0),O(me,null,ft(i.recipeData.ingredients,(u,h)=>(C(),O("div",{key:h,class:"ingredient-input"},[ie(p("input",{type:"text","onUpdate:modelValue":d=>i.recipeData.ingredients[h]=d,placeholder:"e.g. 10g Apple",maxlength:"30"},null,8,zZ),[[ve,i.recipeData.ingredients[h]]]),p("button",{class:"remove-button",onClick:d=>r.removeIngredient(h)}," x ",8,jZ)]))),128)),p("div",WZ,[p("button",{class:"add-more-button",onClick:e[13]||(e[13]=(...u)=>r.addIngredient&&r.addIngredient(...u))}," + ADD MORE ")])])])]),p("div",qZ,[p("div",GZ,[KZ,p("div",YZ,[(C(!0),O(me,null,ft(i.recipeData.directions,(u,h)=>(C(),O("div",{key:h,class:"direction-step"},[p("label",{for:"direction"+u.stepNumber},"Step "+Se(u.stepNumber),9,QZ),p("div",XZ,[ie(p("textarea",{type:"text",id:"direction"+u.stepNumber,"onUpdate:modelValue":d=>u.text=d,class:"input-text"},null,8,JZ),[[ve,u.text]]),p("button",{class:"remove-button",onClick:d=>r.removeDirection(h)}," x ",8,ZZ)])]))),128)),p("div",eee,[p("button",{class:"add-more-button",onClick:e[14]||(e[14]=(...u)=>r.addDirection&&r.addDirection(...u))}," + ADD MORE ")])])])])])]),p("div",tee,[p("button",{class:"cancel-button",onClick:e[15]||(e[15]=(...u)=>r.close&&r.close(...u))},"Cancel"),W(l,{onSaveRecipe:r.submitRecipe},null,8,["onSaveRecipe"])])])])],64)}const see=Ve(dZ,[["render",nee],["__scopeId","data-v-6d40cc4e"]]),iee={components:{Multiselect:Ml,TopBar:ya,SaveRecipeButton:mf,CircleButton:Ol},props:{id:String},setup(){return{toast:fo()}},data(){return{selectedRecipe:null,recipeData:{imageSrc:"https://i0.wp.com/sunrisedaycamp.org/wp-content/uploads/2020/10/placeholder.png?ssl=1",publish_to_community:!1,recipe_name:"",serving_size:"",description:"",allergen_info:"",allergens:[],cook_time_hours:"",cook_time_minutes:"",categories:[],category:[],ingredients:[""],directions:[{stepNumber:1,text:""}]}}},async created(){this.recipeData.categories=await cf(),this.fetchRecipeDetails()},methods:{async fetchRecipeDetails(){const t=await Dt(Ie(Ae,"all_recipes",this.id));this.selectedRecipe=t.data(),this.recipeData.imageSrc=this.selectedRecipe.recipe_img_url,this.recipeData.publish_to_community=this.selectedRecipe.community,this.recipeData.recipe_name=this.selectedRecipe.recipe_name,this.recipeData.serving_size=this.selectedRecipe.serving_size,this.recipeData.description=this.selectedRecipe.description,this.recipeData.allergen_info=this.selectedRecipe.allergens.join(", "),this.recipeData.cook_time_hours=Math.floor(this.selectedRecipe.cook_time/60),this.recipeData.cook_time_minutes=this.selectedRecipe.cook_time%60,this.recipeData.category=this.selectedRecipe.categories,this.recipeData.ingredients=this.selectedRecipe.ingredients,this.recipeData.directions=this.selectedRecipe.directions.map((e,n)=>({stepNumber:n+1,text:e}))},chooseFile(){this.$refs.fileInput.click()},async handleImageUpload(t){const e=t.target.files[0];if(!e||e.type!=="image/jpeg"&&e.type!=="image/png"){this.imageNotValid();return}try{const n=await this.convertFileToBlob(e),s=await this.uploadImageToFirebase(n,e.name);this.recipeData.imageSrc=s}catch(n){console.error("Failed to upload image",n)}},async uploadImageToFirebase(t,e){return new Promise((n,s)=>{const i=of(af,`recipeImg/${e}`),r=sf(i,t);r.on("state_changed",o=>{const a=o.bytesTransferred/o.totalBytes*100;console.log("Upload is "+a+"% done")},o=>{console.error("Upload failed",o),s(o)},()=>{rf(r.snapshot.ref).then(o=>{console.log("File available at",o),n(o)}).catch(o=>{console.error("Failed to get download URL",o),s(o)})})})},convertFileToBlob(t){return new Promise((e,n)=>{const s=new FileReader;s.onloadend=()=>{const i=new Blob([new Uint8Array(s.result)],{type:t.type});e(i)},s.onerror=n,s.readAsArrayBuffer(t)})},addIngredient(){this.recipeData.ingredients.push("")},removeIngredient(t){this.recipeData.ingredients.splice(t,1)},addDirection(){const t=this.recipeData.directions.length+1;this.recipeData.directions.push({stepNumber:t,text:""})},removeDirection(t){this.recipeData.directions.splice(t,1);for(let e=t;e<this.recipeData.directions.length;e++)this.recipeData.directions[e].stepNumber--},onlyNumberInput(t,e){const n=t.keyCode||t.which;n>31&&(n<48||n>57)&&n!==46||n===46&&this.recipeData[e].includes(".")?t.preventDefault():this.recipeData[e]=t.target.value},close(){this.$router.push({name:"RecipeDetailsPage",params:{id:this.selectedRecipe.recipe_id}})},validateForm(){const t=[];return this.recipeData.recipe_name||t.push("Title"),this.recipeData.description||t.push("Description"),!this.recipeData.cook_time_hours&&!this.recipeData.cook_time_minutes&&t.push("Cook Time"),this.recipeData.category.length||t.push("Category"),this.recipeData.serving_size||t.push("Serving Size"),this.recipeData.ingredients.every(e=>e.trim()!=="")||t.push("Ingredients"),this.recipeData.directions.every(e=>e.text.trim()!=="")||t.push("Directions"),t},imageNotValid(){this.toast.error("Please select a JPG or PNG image file.",{position:"top-center",hideProgressBar:!0})},fillAllFields(t){const e=`Please fill in the following fields: ${t.join(", ")}.`;this.toast.error(e,{position:"top-center",hideProgressBar:!0})},cannotSaveRecipe(){this.toast.error("Recipe could not be saved.",{position:"top-center",hideProgressBar:!0})},recipeSavedSuccess(){this.toast.success("Recipe was successfully created!",{timeout:2e3,position:"top-center",hideProgressBar:!0})},async removeRecipeFromCategories(){const t=ia(tr);(await Br(Ps(t,"categories"))).forEach(n=>{const s=n.data();this.recipeData.category.includes(s.category_name)||Sn(n.ref,{recipes:Hu(this.selectedRecipe.recipe_id)})})},async submitRecipe(){const t=this.validateForm();if(t.length>0){this.fillAllFields(t);return}const e=Re.currentUser,n=e?e.uid:"",s=this.selectedRecipe.recipe_id;this.recipeData.imageSrc||(this.recipeData.imageSrc="https://i0.wp.com/sunrisedaycamp.org/wp-content/uploads/2020/10/placeholder.png?ssl=1");const i=this.recipeData.cook_time_hours||"0",r=this.recipeData.cook_time_minutes||"0",o={allergens:this.recipeData.allergen_info.split(",").map(c=>c.trim()),categories:this.recipeData.category,community:this.recipeData.publish_to_community,cook_time:parseInt(i)*60+parseInt(r),created_date:new Date,description:this.recipeData.description,directions:this.recipeData.directions.map(c=>c.text),ingredients:this.recipeData.ingredients,like_count:this.selectedRecipe.like_count,recipe_id:s,recipe_img_url:this.recipeData.imageSrc,recipe_name:this.recipeData.recipe_name,serving_size:parseInt(this.recipeData.serving_size),user_id:n,editted:!0},a=ia(tr);Ps(a,"all_recipes");try{const c=await Sn(Ie(a,"all_recipes",s),o);this.removeRecipeFromCategories(),o.categories.forEach(l=>Sn(Ie(a,"categories",l),{recipes:zc(o.recipe_id)})),console.log("Document updated successfully."),this.$router.push({name:"RecipeDetailsPage",params:{id:this.selectedRecipe.recipe_id}}),this.recipeSavedSuccess()}catch(c){console.error("Error adding document:",c),this.cannotSaveRecipe()}}}},Kn=t=>(Lt("data-v-596c7135"),t=t(),Nt(),t),ree={class:"create-recipe-modal"},oee={class:"recipe-form"},aee={class:"recipe-form-content"},cee={class:"createRecipeRow"},lee={class:"first1"},uee=["src"],hee={class:"img-button-container"},dee={class:"switch-container"},fee={class:"switch"},pee=Kn(()=>p("span",{class:"slider"},null,-1)),gee=Kn(()=>p("label",{for:"publishToCommunity"},"Publish to Community",-1)),mee={class:"first2"},_ee=Kn(()=>p("label",{for:"recipeName"},"Title:",-1)),yee=Kn(()=>p("label",{for:"recipeDescription"},"Description:",-1)),bee=Kn(()=>p("label",{for:"allergenInfo"},"Allergen Information:",-1)),vee={class:"additional-info"},wee={class:"input-group"},Eee=Kn(()=>p("label",{for:"cookTime"},"Cook Time:",-1)),Tee={class:"time-input-group"},See=Kn(()=>p("span",null,"hours",-1)),Ree=Kn(()=>p("span",null,"mins",-1)),Iee={class:"input-group"},xee=Kn(()=>p("label",{for:"category"},"Category:",-1)),Cee={class:"input-group"},kee=Kn(()=>p("label",{for:"servingSize"},"Serving Size:",-1)),Aee={class:"createRecipeRow"},Pee={class:"second1"},Dee={class:"recipe-section"},Oee=Kn(()=>p("label",{for:"ingredients"},"Ingredients:",-1)),Mee={class:"ingredients-container"},Lee=["onUpdate:modelValue"],Nee=["onClick"],Vee={class:"button-group"},Fee={class:"second2"},Bee={class:"recipe-section"},Uee=Kn(()=>p("label",{for:"directions"},"Directions:",-1)),$ee={class:"directions-container"},Hee=["for"],zee={class:"direction-input"},jee=["id","onUpdate:modelValue"],Wee=["onClick"],qee={class:"button-group"},Gee={class:"button-container"};function Kee(t,e,n,s,i,r){const o=te("TopBar"),a=te("CircleButton"),c=te("multiselect"),l=te("save-recipe-button");return C(),O(me,null,[W(o,{ifFeed:!0}),p("div",ree,[p("div",oee,[p("div",aee,[p("div",cee,[p("div",lee,[p("input",{type:"file",id:"recipeImage",ref:"fileInput",style:{display:"none"},onChange:e[0]||(e[0]=(...u)=>r.handleImageUpload&&r.handleImageUpload(...u))},null,544),p("div",{class:"plus-icon-container",onClick:e[1]||(e[1]=(...u)=>r.chooseFile&&r.chooseFile(...u))},[p("img",{src:i.recipeData.imageSrc,class:"uploaded-image",alt:"Image Upload"},null,8,uee),p("div",hee,[W(a,{logo:"./plus-icon.png",class:"circle-button"})])]),p("div",dee,[p("label",fee,[ie(p("input",{type:"checkbox",id:"publishToCommunity","onUpdate:modelValue":e[2]||(e[2]=u=>i.recipeData.publish_to_community=u)},null,512),[[Rc,i.recipeData.publish_to_community]]),pee]),gee])]),p("div",mee,[_ee,ie(p("input",{type:"text",id:"recipeName","onUpdate:modelValue":e[3]||(e[3]=u=>i.recipeData.recipe_name=u),maxlength:"50"},null,512),[[ve,i.recipeData.recipe_name]]),yee,ie(p("textarea",{type:"text",id:"recipeDescription","onUpdate:modelValue":e[4]||(e[4]=u=>i.recipeData.description=u),class:"input-text"},null,512),[[ve,i.recipeData.description]]),bee,ie(p("textarea",{type:"text",id:"allergenInfo","onUpdate:modelValue":e[5]||(e[5]=u=>i.recipeData.allergen_info=u),class:"input-text"},null,512),[[ve,i.recipeData.allergen_info]]),p("div",vee,[p("div",wee,[Eee,p("div",Tee,[ie(p("input",{type:"number",id:"cookTimeHours","onUpdate:modelValue":e[6]||(e[6]=u=>i.recipeData.cook_time_hours=u),min:"0",onKeydown:e[7]||(e[7]=u=>r.onlyNumberInput(u,"cook_time_hours"))},null,544),[[ve,i.recipeData.cook_time_hours]]),See,ie(p("input",{type:"number",id:"cookTimeMins","onUpdate:modelValue":e[8]||(e[8]=u=>i.recipeData.cook_time_minutes=u),min:"0",onKeydown:e[9]||(e[9]=u=>r.onlyNumberInput(u,"cook_time_minutes"))},null,544),[[ve,i.recipeData.cook_time_minutes]]),Ree])]),p("div",Iee,[xee,W(c,{modelValue:i.recipeData.category,"onUpdate:modelValue":e[10]||(e[10]=u=>i.recipeData.category=u),options:i.recipeData.categories,multiple:!0,"close-on-select":!1,max:3},null,8,["modelValue","options"])]),p("div",Cee,[kee,ie(p("input",{type:"number",id:"servingSize","onUpdate:modelValue":e[11]||(e[11]=u=>i.recipeData.serving_size=u),min:"0",onKeydown:e[12]||(e[12]=u=>r.onlyNumberInput(u,"serving_size"))},null,544),[[ve,i.recipeData.serving_size]])])])])]),p("div",Aee,[p("div",Pee,[p("div",Dee,[Oee,p("div",Mee,[(C(!0),O(me,null,ft(i.recipeData.ingredients,(u,h)=>(C(),O("div",{key:h,class:"ingredient-input"},[ie(p("input",{type:"text","onUpdate:modelValue":d=>i.recipeData.ingredients[h]=d,placeholder:"e.g. 10g Apple",maxlength:"30"},null,8,Lee),[[ve,i.recipeData.ingredients[h]]]),p("button",{class:"remove-button",onClick:d=>r.removeIngredient(h)}," x ",8,Nee)]))),128)),p("div",Vee,[p("button",{class:"add-more-button",onClick:e[13]||(e[13]=(...u)=>r.addIngredient&&r.addIngredient(...u))}," + ADD MORE ")])])])]),p("div",Fee,[p("div",Bee,[Uee,p("div",$ee,[(C(!0),O(me,null,ft(i.recipeData.directions,(u,h)=>(C(),O("div",{key:h,class:"direction-step"},[p("label",{for:"direction"+u.stepNumber},"Step "+Se(u.stepNumber),9,Hee),p("div",zee,[ie(p("textarea",{type:"text",id:"direction"+u.stepNumber,"onUpdate:modelValue":d=>u.text=d,class:"input-text"},null,8,jee),[[ve,u.text]]),p("button",{class:"remove-button",onClick:d=>r.removeDirection(h)}," x ",8,Wee)])]))),128)),p("div",qee,[p("button",{class:"add-more-button",onClick:e[14]||(e[14]=(...u)=>r.addDirection&&r.addDirection(...u))}," + ADD MORE ")])])])])])]),p("div",Gee,[p("button",{class:"cancel-button",onClick:e[15]||(e[15]=(...u)=>r.close&&r.close(...u))},"Cancel"),W(l,{onSaveRecipe:r.submitRecipe},null,8,["onSaveRecipe"])])])])],64)}const Yee=Ve(iee,[["render",Kee],["__scopeId","data-v-596c7135"]]),Qee=[{path:"/",name:"Landing",component:r$},{path:"/signup",name:"Sign Up",component:S$},{path:"/login",name:"Login",component:B$},{path:"/recipe-generator",name:"Recipe Generator",component:yH,meta:{requiresAuth:!0}},{path:"/community-page",name:"Community Page",component:Xz,meta:{requiresAuth:!0}},{path:"/community-page/:id",name:"RecipeDetailsPage",component:aj,meta:{requiresAuth:!0},props:!0},{path:"/:catchAll(.*)",name:"NotFound",component:mj},{path:"/profile",name:"Profile",component:hZ,meta:{requiresAuth:!0}},{path:"/create-recipe",name:"RecipeCreate",component:see,meta:{requiresAuth:!0}},{path:"/edit-recipe/:id",name:"RecipeEdit",component:Yee,meta:{requiresAuth:!0},props:!0}],Hy=FD({history:fD(),routes:Qee});Hy.beforeEach((t,e,n)=>{const s=t.matched.some(i=>i.meta.requiresAuth);E2(Re,i=>{console.log(i),s&&!i?n({path:"/",query:{redirected:"true"}}):n()})});VT(NP).use(Hy).use(Y4).use(_e).mount("#app");
